var jT=Object.defineProperty;var Vg=n=>{throw TypeError(n)};var tw=(n,t,e)=>t in n?jT(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var qt=(n,t,e)=>tw(n,typeof t!="symbol"?t+"":t,e),ew=(n,t,e)=>t.has(n)||Vg("Cannot "+e);var Bg=(n,t,e)=>t.has(n)?Vg("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,e);var ur=(n,t,e)=>(ew(n,t,"access private method"),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function e(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=e(o);fetch(o.href,l)}})();function gf(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function nw(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var t=n.default;if(typeof t=="function"){var e=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var o=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:function(){return n[i]}})}),e}var sh={exports:{}},cr={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Og;function iw(){if(Og)return cr;Og=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,o,l){var u=null;if(l!==void 0&&(u=""+l),o.key!==void 0&&(u=""+o.key),"key"in o){l={};for(var d in o)d!=="key"&&(l[d]=o[d])}else l=o;return o=l.ref,{$$typeof:n,type:i,key:u,ref:o!==void 0?o:null,props:l}}return cr.Fragment=t,cr.jsx=e,cr.jsxs=e,cr}var qg;function sw(){return qg||(qg=1,sh.exports=iw()),sh.exports}var x=sw(),oh={exports:{}},St={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $g;function ow(){if($g)return St;$g=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),_=Symbol.iterator;function S(R){return R===null||typeof R!="object"?null:(R=_&&R[_]||R["@@iterator"],typeof R=="function"?R:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,E={};function M(R,G,tt){this.props=R,this.context=G,this.refs=E,this.updater=tt||b}M.prototype.isReactComponent={},M.prototype.setState=function(R,G){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,G,"setState")},M.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function D(){}D.prototype=M.prototype;function U(R,G,tt){this.props=R,this.context=G,this.refs=E,this.updater=tt||b}var k=U.prototype=new D;k.constructor=U,w(k,M.prototype),k.isPureReactComponent=!0;var V=Array.isArray,q={H:null,A:null,T:null,S:null,V:null},J=Object.prototype.hasOwnProperty;function W(R,G,tt,Z,ct,gt){return tt=gt.ref,{$$typeof:n,type:R,key:G,ref:tt!==void 0?tt:null,props:gt}}function rt(R,G){return W(R.type,G,void 0,void 0,void 0,R.props)}function j(R){return typeof R=="object"&&R!==null&&R.$$typeof===n}function Q(R){var G={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(tt){return G[tt]})}var K=/\/+/g;function st(R,G){return typeof R=="object"&&R!==null&&R.key!=null?Q(""+R.key):G.toString(36)}function lt(){}function dt(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(lt,lt):(R.status="pending",R.then(function(G){R.status==="pending"&&(R.status="fulfilled",R.value=G)},function(G){R.status==="pending"&&(R.status="rejected",R.reason=G)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function at(R,G,tt,Z,ct){var gt=typeof R;(gt==="undefined"||gt==="boolean")&&(R=null);var it=!1;if(R===null)it=!0;else switch(gt){case"bigint":case"string":case"number":it=!0;break;case"object":switch(R.$$typeof){case n:case t:it=!0;break;case g:return it=R._init,at(it(R._payload),G,tt,Z,ct)}}if(it)return ct=ct(R),it=Z===""?"."+st(R,0):Z,V(ct)?(tt="",it!=null&&(tt=it.replace(K,"$&/")+"/"),at(ct,G,tt,"",function(yt){return yt})):ct!=null&&(j(ct)&&(ct=rt(ct,tt+(ct.key==null||R&&R.key===ct.key?"":(""+ct.key).replace(K,"$&/")+"/")+it)),G.push(ct)),1;it=0;var Tt=Z===""?".":Z+":";if(V(R))for(var ft=0;ft<R.length;ft++)Z=R[ft],gt=Tt+st(Z,ft),it+=at(Z,G,tt,gt,ct);else if(ft=S(R),typeof ft=="function")for(R=ft.call(R),ft=0;!(Z=R.next()).done;)Z=Z.value,gt=Tt+st(Z,ft++),it+=at(Z,G,tt,gt,ct);else if(gt==="object"){if(typeof R.then=="function")return at(dt(R),G,tt,Z,ct);throw G=String(R),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return it}function B(R,G,tt){if(R==null)return R;var Z=[],ct=0;return at(R,Z,"","",function(gt){return G.call(tt,gt,ct++)}),Z}function X(R){if(R._status===-1){var G=R._result;G=G(),G.then(function(tt){(R._status===0||R._status===-1)&&(R._status=1,R._result=tt)},function(tt){(R._status===0||R._status===-1)&&(R._status=2,R._result=tt)}),R._status===-1&&(R._status=0,R._result=G)}if(R._status===1)return R._result.default;throw R._result}var nt=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)};function bt(){}return St.Children={map:B,forEach:function(R,G,tt){B(R,function(){G.apply(this,arguments)},tt)},count:function(R){var G=0;return B(R,function(){G++}),G},toArray:function(R){return B(R,function(G){return G})||[]},only:function(R){if(!j(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},St.Component=M,St.Fragment=e,St.Profiler=o,St.PureComponent=U,St.StrictMode=i,St.Suspense=p,St.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=q,St.__COMPILER_RUNTIME={__proto__:null,c:function(R){return q.H.useMemoCache(R)}},St.cache=function(R){return function(){return R.apply(null,arguments)}},St.cloneElement=function(R,G,tt){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var Z=w({},R.props),ct=R.key,gt=void 0;if(G!=null)for(it in G.ref!==void 0&&(gt=void 0),G.key!==void 0&&(ct=""+G.key),G)!J.call(G,it)||it==="key"||it==="__self"||it==="__source"||it==="ref"&&G.ref===void 0||(Z[it]=G[it]);var it=arguments.length-2;if(it===1)Z.children=tt;else if(1<it){for(var Tt=Array(it),ft=0;ft<it;ft++)Tt[ft]=arguments[ft+2];Z.children=Tt}return W(R.type,ct,void 0,void 0,gt,Z)},St.createContext=function(R){return R={$$typeof:u,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:l,_context:R},R},St.createElement=function(R,G,tt){var Z,ct={},gt=null;if(G!=null)for(Z in G.key!==void 0&&(gt=""+G.key),G)J.call(G,Z)&&Z!=="key"&&Z!=="__self"&&Z!=="__source"&&(ct[Z]=G[Z]);var it=arguments.length-2;if(it===1)ct.children=tt;else if(1<it){for(var Tt=Array(it),ft=0;ft<it;ft++)Tt[ft]=arguments[ft+2];ct.children=Tt}if(R&&R.defaultProps)for(Z in it=R.defaultProps,it)ct[Z]===void 0&&(ct[Z]=it[Z]);return W(R,gt,void 0,void 0,null,ct)},St.createRef=function(){return{current:null}},St.forwardRef=function(R){return{$$typeof:d,render:R}},St.isValidElement=j,St.lazy=function(R){return{$$typeof:g,_payload:{_status:-1,_result:R},_init:X}},St.memo=function(R,G){return{$$typeof:m,type:R,compare:G===void 0?null:G}},St.startTransition=function(R){var G=q.T,tt={};q.T=tt;try{var Z=R(),ct=q.S;ct!==null&&ct(tt,Z),typeof Z=="object"&&Z!==null&&typeof Z.then=="function"&&Z.then(bt,nt)}catch(gt){nt(gt)}finally{q.T=G}},St.unstable_useCacheRefresh=function(){return q.H.useCacheRefresh()},St.use=function(R){return q.H.use(R)},St.useActionState=function(R,G,tt){return q.H.useActionState(R,G,tt)},St.useCallback=function(R,G){return q.H.useCallback(R,G)},St.useContext=function(R){return q.H.useContext(R)},St.useDebugValue=function(){},St.useDeferredValue=function(R,G){return q.H.useDeferredValue(R,G)},St.useEffect=function(R,G,tt){var Z=q.H;if(typeof tt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Z.useEffect(R,G)},St.useId=function(){return q.H.useId()},St.useImperativeHandle=function(R,G,tt){return q.H.useImperativeHandle(R,G,tt)},St.useInsertionEffect=function(R,G){return q.H.useInsertionEffect(R,G)},St.useLayoutEffect=function(R,G){return q.H.useLayoutEffect(R,G)},St.useMemo=function(R,G){return q.H.useMemo(R,G)},St.useOptimistic=function(R,G){return q.H.useOptimistic(R,G)},St.useReducer=function(R,G,tt){return q.H.useReducer(R,G,tt)},St.useRef=function(R){return q.H.useRef(R)},St.useState=function(R){return q.H.useState(R)},St.useSyncExternalStore=function(R,G,tt){return q.H.useSyncExternalStore(R,G,tt)},St.useTransition=function(){return q.H.useTransition()},St.version="19.1.1",St}var Hg;function vf(){return Hg||(Hg=1,oh.exports=ow()),oh.exports}var et=vf();const Ys=gf(et);var rh={exports:{}},hr={},lh={exports:{}},ah={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gg;function rw(){return Gg||(Gg=1,function(n){function t(B,X){var nt=B.length;B.push(X);t:for(;0<nt;){var bt=nt-1>>>1,R=B[bt];if(0<o(R,X))B[bt]=X,B[nt]=R,nt=bt;else break t}}function e(B){return B.length===0?null:B[0]}function i(B){if(B.length===0)return null;var X=B[0],nt=B.pop();if(nt!==X){B[0]=nt;t:for(var bt=0,R=B.length,G=R>>>1;bt<G;){var tt=2*(bt+1)-1,Z=B[tt],ct=tt+1,gt=B[ct];if(0>o(Z,nt))ct<R&&0>o(gt,Z)?(B[bt]=gt,B[ct]=nt,bt=ct):(B[bt]=Z,B[tt]=nt,bt=tt);else if(ct<R&&0>o(gt,nt))B[bt]=gt,B[ct]=nt,bt=ct;else break t}}return X}function o(B,X){var nt=B.sortIndex-X.sortIndex;return nt!==0?nt:B.id-X.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var p=[],m=[],g=1,_=null,S=3,b=!1,w=!1,E=!1,M=!1,D=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function V(B){for(var X=e(m);X!==null;){if(X.callback===null)i(m);else if(X.startTime<=B)i(m),X.sortIndex=X.expirationTime,t(p,X);else break;X=e(m)}}function q(B){if(E=!1,V(B),!w)if(e(p)!==null)w=!0,J||(J=!0,st());else{var X=e(m);X!==null&&at(q,X.startTime-B)}}var J=!1,W=-1,rt=5,j=-1;function Q(){return M?!0:!(n.unstable_now()-j<rt)}function K(){if(M=!1,J){var B=n.unstable_now();j=B;var X=!0;try{t:{w=!1,E&&(E=!1,U(W),W=-1),b=!0;var nt=S;try{e:{for(V(B),_=e(p);_!==null&&!(_.expirationTime>B&&Q());){var bt=_.callback;if(typeof bt=="function"){_.callback=null,S=_.priorityLevel;var R=bt(_.expirationTime<=B);if(B=n.unstable_now(),typeof R=="function"){_.callback=R,V(B),X=!0;break e}_===e(p)&&i(p),V(B)}else i(p);_=e(p)}if(_!==null)X=!0;else{var G=e(m);G!==null&&at(q,G.startTime-B),X=!1}}break t}finally{_=null,S=nt,b=!1}X=void 0}}finally{X?st():J=!1}}}var st;if(typeof k=="function")st=function(){k(K)};else if(typeof MessageChannel<"u"){var lt=new MessageChannel,dt=lt.port2;lt.port1.onmessage=K,st=function(){dt.postMessage(null)}}else st=function(){D(K,0)};function at(B,X){W=D(function(){B(n.unstable_now())},X)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(B){B.callback=null},n.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):rt=0<B?Math.floor(1e3/B):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(B){switch(S){case 1:case 2:case 3:var X=3;break;default:X=S}var nt=S;S=X;try{return B()}finally{S=nt}},n.unstable_requestPaint=function(){M=!0},n.unstable_runWithPriority=function(B,X){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var nt=S;S=B;try{return X()}finally{S=nt}},n.unstable_scheduleCallback=function(B,X,nt){var bt=n.unstable_now();switch(typeof nt=="object"&&nt!==null?(nt=nt.delay,nt=typeof nt=="number"&&0<nt?bt+nt:bt):nt=bt,B){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=nt+R,B={id:g++,callback:X,priorityLevel:B,startTime:nt,expirationTime:R,sortIndex:-1},nt>bt?(B.sortIndex=nt,t(m,B),e(p)===null&&B===e(m)&&(E?(U(W),W=-1):E=!0,at(q,nt-bt))):(B.sortIndex=R,t(p,B),w||b||(w=!0,J||(J=!0,st()))),B},n.unstable_shouldYield=Q,n.unstable_wrapCallback=function(B){var X=S;return function(){var nt=S;S=X;try{return B.apply(this,arguments)}finally{S=nt}}}}(ah)),ah}var Fg;function lw(){return Fg||(Fg=1,lh.exports=rw()),lh.exports}var uh={exports:{}},_e={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jg;function aw(){if(Jg)return _e;Jg=1;var n=vf();function t(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)m+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(p,m,g){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:_==null?null:""+_,children:p,containerInfo:m,implementation:g}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return _e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,_e.createPortal=function(p,m){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return l(p,m,null,g)},_e.flushSync=function(p){var m=u.T,g=i.p;try{if(u.T=null,i.p=2,p)return p()}finally{u.T=m,i.p=g,i.d.f()}},_e.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,i.d.C(p,m))},_e.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},_e.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var g=m.as,_=d(g,m.crossOrigin),S=typeof m.integrity=="string"?m.integrity:void 0,b=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;g==="style"?i.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:_,integrity:S,fetchPriority:b}):g==="script"&&i.d.X(p,{crossOrigin:_,integrity:S,fetchPriority:b,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},_e.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var g=d(m.as,m.crossOrigin);i.d.M(p,{crossOrigin:g,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&i.d.M(p)},_e.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var g=m.as,_=d(g,m.crossOrigin);i.d.L(p,g,{crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},_e.preloadModule=function(p,m){if(typeof p=="string")if(m){var g=d(m.as,m.crossOrigin);i.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:g,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else i.d.m(p)},_e.requestFormReset=function(p){i.d.r(p)},_e.unstable_batchedUpdates=function(p,m){return p(m)},_e.useFormState=function(p,m,g){return u.H.useFormState(p,m,g)},_e.useFormStatus=function(){return u.H.useHostTransitionStatus()},_e.version="19.1.1",_e}var Kg;function uw(){if(Kg)return uh.exports;Kg=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),uh.exports=aw(),uh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yg;function cw(){if(Yg)return hr;Yg=1;var n=lw(),t=vf(),e=uw();function i(s){var r="https://react.dev/errors/"+s;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function l(s){var r=s,a=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,(r.flags&4098)!==0&&(a=r.return),s=r.return;while(s)}return r.tag===3?a:null}function u(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function d(s){if(l(s)!==s)throw Error(i(188))}function p(s){var r=s.alternate;if(!r){if(r=l(s),r===null)throw Error(i(188));return r!==s?null:s}for(var a=s,f=r;;){var v=a.return;if(v===null)break;var y=v.alternate;if(y===null){if(f=v.return,f!==null){a=f;continue}break}if(v.child===y.child){for(y=v.child;y;){if(y===a)return d(v),s;if(y===f)return d(v),r;y=y.sibling}throw Error(i(188))}if(a.return!==f.return)a=v,f=y;else{for(var T=!1,C=v.child;C;){if(C===a){T=!0,a=v,f=y;break}if(C===f){T=!0,f=v,a=y;break}C=C.sibling}if(!T){for(C=y.child;C;){if(C===a){T=!0,a=y,f=v;break}if(C===f){T=!0,f=y,a=v;break}C=C.sibling}if(!T)throw Error(i(189))}}if(a.alternate!==f)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?s:r}function m(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s;for(s=s.child;s!==null;){if(r=m(s),r!==null)return r;s=s.sibling}return null}var g=Object.assign,_=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),U=Symbol.for("react.consumer"),k=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),W=Symbol.for("react.memo"),rt=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),Q=Symbol.for("react.memo_cache_sentinel"),K=Symbol.iterator;function st(s){return s===null||typeof s!="object"?null:(s=K&&s[K]||s["@@iterator"],typeof s=="function"?s:null)}var lt=Symbol.for("react.client.reference");function dt(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===lt?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case w:return"Fragment";case M:return"Profiler";case E:return"StrictMode";case q:return"Suspense";case J:return"SuspenseList";case j:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case b:return"Portal";case k:return(s.displayName||"Context")+".Provider";case U:return(s._context.displayName||"Context")+".Consumer";case V:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case W:return r=s.displayName||null,r!==null?r:dt(s.type)||"Memo";case rt:r=s._payload,s=s._init;try{return dt(s(r))}catch{}}return null}var at=Array.isArray,B=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,nt={pending:!1,data:null,method:null,action:null},bt=[],R=-1;function G(s){return{current:s}}function tt(s){0>R||(s.current=bt[R],bt[R]=null,R--)}function Z(s,r){R++,bt[R]=s.current,s.current=r}var ct=G(null),gt=G(null),it=G(null),Tt=G(null);function ft(s,r){switch(Z(it,r),Z(gt,s),Z(ct,null),r.nodeType){case 9:case 11:s=(s=r.documentElement)&&(s=s.namespaceURI)?fg(s):0;break;default:if(s=r.tagName,r=r.namespaceURI)r=fg(r),s=dg(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}tt(ct),Z(ct,s)}function yt(){tt(ct),tt(gt),tt(it)}function ne(s){s.memoizedState!==null&&Z(Tt,s);var r=ct.current,a=dg(r,s.type);r!==a&&(Z(gt,s),Z(ct,a))}function Ht(s){gt.current===s&&(tt(ct),tt(gt)),Tt.current===s&&(tt(Tt),sr._currentValue=nt)}var be=Object.prototype.hasOwnProperty,Fa=n.unstable_scheduleCallback,Ja=n.unstable_cancelCallback,NS=n.unstable_shouldYield,DS=n.unstable_requestPaint,rn=n.unstable_now,IS=n.unstable_getCurrentPriorityLevel,Jf=n.unstable_ImmediatePriority,Kf=n.unstable_UserBlockingPriority,$r=n.unstable_NormalPriority,LS=n.unstable_LowPriority,Yf=n.unstable_IdlePriority,US=n.log,PS=n.unstable_setDisableYieldValue,ho=null,Ne=null;function Bn(s){if(typeof US=="function"&&PS(s),Ne&&typeof Ne.setStrictMode=="function")try{Ne.setStrictMode(ho,s)}catch{}}var De=Math.clz32?Math.clz32:BS,zS=Math.log,VS=Math.LN2;function BS(s){return s>>>=0,s===0?32:31-(zS(s)/VS|0)|0}var Hr=256,Gr=4194304;function mi(s){var r=s&42;if(r!==0)return r;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Fr(s,r,a){var f=s.pendingLanes;if(f===0)return 0;var v=0,y=s.suspendedLanes,T=s.pingedLanes;s=s.warmLanes;var C=f&134217727;return C!==0?(f=C&~y,f!==0?v=mi(f):(T&=C,T!==0?v=mi(T):a||(a=C&~s,a!==0&&(v=mi(a))))):(C=f&~y,C!==0?v=mi(C):T!==0?v=mi(T):a||(a=f&~s,a!==0&&(v=mi(a)))),v===0?0:r!==0&&r!==v&&(r&y)===0&&(y=v&-v,a=r&-r,y>=a||y===32&&(a&4194048)!==0)?r:v}function fo(s,r){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&r)===0}function OS(s,r){switch(s){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wf(){var s=Hr;return Hr<<=1,(Hr&4194048)===0&&(Hr=256),s}function Xf(){var s=Gr;return Gr<<=1,(Gr&62914560)===0&&(Gr=4194304),s}function Ka(s){for(var r=[],a=0;31>a;a++)r.push(s);return r}function po(s,r){s.pendingLanes|=r,r!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function qS(s,r,a,f,v,y){var T=s.pendingLanes;s.pendingLanes=a,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=a,s.entangledLanes&=a,s.errorRecoveryDisabledLanes&=a,s.shellSuspendCounter=0;var C=s.entanglements,A=s.expirationTimes,P=s.hiddenUpdates;for(a=T&~a;0<a;){var $=31-De(a),F=1<<$;C[$]=0,A[$]=-1;var z=P[$];if(z!==null)for(P[$]=null,$=0;$<z.length;$++){var O=z[$];O!==null&&(O.lane&=-536870913)}a&=~F}f!==0&&Qf(s,f,0),y!==0&&v===0&&s.tag!==0&&(s.suspendedLanes|=y&~(T&~r))}function Qf(s,r,a){s.pendingLanes|=r,s.suspendedLanes&=~r;var f=31-De(r);s.entangledLanes|=r,s.entanglements[f]=s.entanglements[f]|1073741824|a&4194090}function Zf(s,r){var a=s.entangledLanes|=r;for(s=s.entanglements;a;){var f=31-De(a),v=1<<f;v&r|s[f]&r&&(s[f]|=r),a&=~v}}function Ya(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Wa(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function jf(){var s=X.p;return s!==0?s:(s=window.event,s===void 0?32:Dg(s.type))}function $S(s,r){var a=X.p;try{return X.p=s,r()}finally{X.p=a}}var On=Math.random().toString(36).slice(2),ve="__reactFiber$"+On,Ce="__reactProps$"+On,Xi="__reactContainer$"+On,Xa="__reactEvents$"+On,HS="__reactListeners$"+On,GS="__reactHandles$"+On,td="__reactResources$"+On,mo="__reactMarker$"+On;function Qa(s){delete s[ve],delete s[Ce],delete s[Xa],delete s[HS],delete s[GS]}function Qi(s){var r=s[ve];if(r)return r;for(var a=s.parentNode;a;){if(r=a[Xi]||a[ve]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(s=vg(s);s!==null;){if(a=s[ve])return a;s=vg(s)}return r}s=a,a=s.parentNode}return null}function Zi(s){if(s=s[ve]||s[Xi]){var r=s.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return s}return null}function go(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s.stateNode;throw Error(i(33))}function ji(s){var r=s[td];return r||(r=s[td]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function le(s){s[mo]=!0}var ed=new Set,nd={};function gi(s,r){ts(s,r),ts(s+"Capture",r)}function ts(s,r){for(nd[s]=r,s=0;s<r.length;s++)ed.add(r[s])}var FS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),id={},sd={};function JS(s){return be.call(sd,s)?!0:be.call(id,s)?!1:FS.test(s)?sd[s]=!0:(id[s]=!0,!1)}function Jr(s,r,a){if(JS(r))if(a===null)s.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":s.removeAttribute(r);return;case"boolean":var f=r.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){s.removeAttribute(r);return}}s.setAttribute(r,""+a)}}function Kr(s,r,a){if(a===null)s.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttribute(r,""+a)}}function gn(s,r,a,f){if(f===null)s.removeAttribute(a);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttributeNS(r,a,""+f)}}var Za,od;function es(s){if(Za===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);Za=r&&r[1]||"",od=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Za+s+od}var ja=!1;function tu(s,r){if(!s||ja)return"";ja=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(r){var F=function(){throw Error()};if(Object.defineProperty(F.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(F,[])}catch(O){var z=O}Reflect.construct(s,[],F)}else{try{F.call()}catch(O){z=O}s.call(F.prototype)}}else{try{throw Error()}catch(O){z=O}(F=s())&&typeof F.catch=="function"&&F.catch(function(){})}}catch(O){if(O&&z&&typeof O.stack=="string")return[O.stack,z.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=f.DetermineComponentFrameRoot(),T=y[0],C=y[1];if(T&&C){var A=T.split(`
`),P=C.split(`
`);for(v=f=0;f<A.length&&!A[f].includes("DetermineComponentFrameRoot");)f++;for(;v<P.length&&!P[v].includes("DetermineComponentFrameRoot");)v++;if(f===A.length||v===P.length)for(f=A.length-1,v=P.length-1;1<=f&&0<=v&&A[f]!==P[v];)v--;for(;1<=f&&0<=v;f--,v--)if(A[f]!==P[v]){if(f!==1||v!==1)do if(f--,v--,0>v||A[f]!==P[v]){var $=`
`+A[f].replace(" at new "," at ");return s.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",s.displayName)),$}while(1<=f&&0<=v);break}}}finally{ja=!1,Error.prepareStackTrace=a}return(a=s?s.displayName||s.name:"")?es(a):""}function KS(s){switch(s.tag){case 26:case 27:case 5:return es(s.type);case 16:return es("Lazy");case 13:return es("Suspense");case 19:return es("SuspenseList");case 0:case 15:return tu(s.type,!1);case 11:return tu(s.type.render,!1);case 1:return tu(s.type,!0);case 31:return es("Activity");default:return""}}function rd(s){try{var r="";do r+=KS(s),s=s.return;while(s);return r}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function qe(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function ld(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function YS(s){var r=ld(s)?"checked":"value",a=Object.getOwnPropertyDescriptor(s.constructor.prototype,r),f=""+s[r];if(!s.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var v=a.get,y=a.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return v.call(this)},set:function(T){f=""+T,y.call(this,T)}}),Object.defineProperty(s,r,{enumerable:a.enumerable}),{getValue:function(){return f},setValue:function(T){f=""+T},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function Yr(s){s._valueTracker||(s._valueTracker=YS(s))}function ad(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var a=r.getValue(),f="";return s&&(f=ld(s)?s.checked?"true":"false":s.value),s=f,s!==a?(r.setValue(s),!0):!1}function Wr(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var WS=/[\n"\\]/g;function $e(s){return s.replace(WS,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function eu(s,r,a,f,v,y,T,C){s.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?s.type=T:s.removeAttribute("type"),r!=null?T==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+qe(r)):s.value!==""+qe(r)&&(s.value=""+qe(r)):T!=="submit"&&T!=="reset"||s.removeAttribute("value"),r!=null?nu(s,T,qe(r)):a!=null?nu(s,T,qe(a)):f!=null&&s.removeAttribute("value"),v==null&&y!=null&&(s.defaultChecked=!!y),v!=null&&(s.checked=v&&typeof v!="function"&&typeof v!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?s.name=""+qe(C):s.removeAttribute("name")}function ud(s,r,a,f,v,y,T,C){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(s.type=y),r!=null||a!=null){if(!(y!=="submit"&&y!=="reset"||r!=null))return;a=a!=null?""+qe(a):"",r=r!=null?""+qe(r):a,C||r===s.value||(s.value=r),s.defaultValue=r}f=f??v,f=typeof f!="function"&&typeof f!="symbol"&&!!f,s.checked=C?s.checked:!!f,s.defaultChecked=!!f,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(s.name=T)}function nu(s,r,a){r==="number"&&Wr(s.ownerDocument)===s||s.defaultValue===""+a||(s.defaultValue=""+a)}function ns(s,r,a,f){if(s=s.options,r){r={};for(var v=0;v<a.length;v++)r["$"+a[v]]=!0;for(a=0;a<s.length;a++)v=r.hasOwnProperty("$"+s[a].value),s[a].selected!==v&&(s[a].selected=v),v&&f&&(s[a].defaultSelected=!0)}else{for(a=""+qe(a),r=null,v=0;v<s.length;v++){if(s[v].value===a){s[v].selected=!0,f&&(s[v].defaultSelected=!0);return}r!==null||s[v].disabled||(r=s[v])}r!==null&&(r.selected=!0)}}function cd(s,r,a){if(r!=null&&(r=""+qe(r),r!==s.value&&(s.value=r),a==null)){s.defaultValue!==r&&(s.defaultValue=r);return}s.defaultValue=a!=null?""+qe(a):""}function hd(s,r,a,f){if(r==null){if(f!=null){if(a!=null)throw Error(i(92));if(at(f)){if(1<f.length)throw Error(i(93));f=f[0]}a=f}a==null&&(a=""),r=a}a=qe(r),s.defaultValue=a,f=s.textContent,f===a&&f!==""&&f!==null&&(s.value=f)}function is(s,r){if(r){var a=s.firstChild;if(a&&a===s.lastChild&&a.nodeType===3){a.nodeValue=r;return}}s.textContent=r}var XS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function fd(s,r,a){var f=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?f?s.setProperty(r,""):r==="float"?s.cssFloat="":s[r]="":f?s.setProperty(r,a):typeof a!="number"||a===0||XS.has(r)?r==="float"?s.cssFloat=a:s[r]=(""+a).trim():s[r]=a+"px"}function dd(s,r,a){if(r!=null&&typeof r!="object")throw Error(i(62));if(s=s.style,a!=null){for(var f in a)!a.hasOwnProperty(f)||r!=null&&r.hasOwnProperty(f)||(f.indexOf("--")===0?s.setProperty(f,""):f==="float"?s.cssFloat="":s[f]="");for(var v in r)f=r[v],r.hasOwnProperty(v)&&a[v]!==f&&fd(s,v,f)}else for(var y in r)r.hasOwnProperty(y)&&fd(s,y,r[y])}function iu(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var QS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ZS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Xr(s){return ZS.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var su=null;function ou(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var ss=null,os=null;function pd(s){var r=Zi(s);if(r&&(s=r.stateNode)){var a=s[Ce]||null;t:switch(s=r.stateNode,r.type){case"input":if(eu(s,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=s;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+$e(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var f=a[r];if(f!==s&&f.form===s.form){var v=f[Ce]||null;if(!v)throw Error(i(90));eu(f,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(r=0;r<a.length;r++)f=a[r],f.form===s.form&&ad(f)}break t;case"textarea":cd(s,a.value,a.defaultValue);break t;case"select":r=a.value,r!=null&&ns(s,!!a.multiple,r,!1)}}}var ru=!1;function md(s,r,a){if(ru)return s(r,a);ru=!0;try{var f=s(r);return f}finally{if(ru=!1,(ss!==null||os!==null)&&(Ul(),ss&&(r=ss,s=os,os=ss=null,pd(r),s)))for(r=0;r<s.length;r++)pd(s[r])}}function vo(s,r){var a=s.stateNode;if(a===null)return null;var f=a[Ce]||null;if(f===null)return null;a=f[r];t:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(s=s.type,f=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!f;break t;default:s=!1}if(s)return null;if(a&&typeof a!="function")throw Error(i(231,r,typeof a));return a}var vn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lu=!1;if(vn)try{var yo={};Object.defineProperty(yo,"passive",{get:function(){lu=!0}}),window.addEventListener("test",yo,yo),window.removeEventListener("test",yo,yo)}catch{lu=!1}var qn=null,au=null,Qr=null;function gd(){if(Qr)return Qr;var s,r=au,a=r.length,f,v="value"in qn?qn.value:qn.textContent,y=v.length;for(s=0;s<a&&r[s]===v[s];s++);var T=a-s;for(f=1;f<=T&&r[a-f]===v[y-f];f++);return Qr=v.slice(s,1<f?1-f:void 0)}function Zr(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function jr(){return!0}function vd(){return!1}function xe(s){function r(a,f,v,y,T){this._reactName=a,this._targetInst=v,this.type=f,this.nativeEvent=y,this.target=T,this.currentTarget=null;for(var C in s)s.hasOwnProperty(C)&&(a=s[C],this[C]=a?a(y):y[C]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?jr:vd,this.isPropagationStopped=vd,this}return g(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=jr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=jr)},persist:function(){},isPersistent:jr}),r}var vi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tl=xe(vi),_o=g({},vi,{view:0,detail:0}),jS=xe(_o),uu,cu,So,el=g({},_o,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fu,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==So&&(So&&s.type==="mousemove"?(uu=s.screenX-So.screenX,cu=s.screenY-So.screenY):cu=uu=0,So=s),uu)},movementY:function(s){return"movementY"in s?s.movementY:cu}}),yd=xe(el),tb=g({},el,{dataTransfer:0}),eb=xe(tb),nb=g({},_o,{relatedTarget:0}),hu=xe(nb),ib=g({},vi,{animationName:0,elapsedTime:0,pseudoElement:0}),sb=xe(ib),ob=g({},vi,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),rb=xe(ob),lb=g({},vi,{data:0}),_d=xe(lb),ab={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ub={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hb(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=cb[s])?!!r[s]:!1}function fu(){return hb}var fb=g({},_o,{key:function(s){if(s.key){var r=ab[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=Zr(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?ub[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fu,charCode:function(s){return s.type==="keypress"?Zr(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Zr(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),db=xe(fb),pb=g({},el,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sd=xe(pb),mb=g({},_o,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fu}),gb=xe(mb),vb=g({},vi,{propertyName:0,elapsedTime:0,pseudoElement:0}),yb=xe(vb),_b=g({},el,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Sb=xe(_b),bb=g({},vi,{newState:0,oldState:0}),Tb=xe(bb),wb=[9,13,27,32],du=vn&&"CompositionEvent"in window,bo=null;vn&&"documentMode"in document&&(bo=document.documentMode);var Cb=vn&&"TextEvent"in window&&!bo,bd=vn&&(!du||bo&&8<bo&&11>=bo),Td=" ",wd=!1;function Cd(s,r){switch(s){case"keyup":return wb.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xd(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var rs=!1;function xb(s,r){switch(s){case"compositionend":return xd(r);case"keypress":return r.which!==32?null:(wd=!0,Td);case"textInput":return s=r.data,s===Td&&wd?null:s;default:return null}}function Eb(s,r){if(rs)return s==="compositionend"||!du&&Cd(s,r)?(s=gd(),Qr=au=qn=null,rs=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return bd&&r.locale!=="ko"?null:r.data;default:return null}}var Mb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ed(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!Mb[s.type]:r==="textarea"}function Md(s,r,a,f){ss?os?os.push(f):os=[f]:ss=f,r=ql(r,"onChange"),0<r.length&&(a=new tl("onChange","change",null,a,f),s.push({event:a,listeners:r}))}var To=null,wo=null;function Ab(s){lg(s,0)}function nl(s){var r=go(s);if(ad(r))return s}function Ad(s,r){if(s==="change")return r}var Rd=!1;if(vn){var pu;if(vn){var mu="oninput"in document;if(!mu){var kd=document.createElement("div");kd.setAttribute("oninput","return;"),mu=typeof kd.oninput=="function"}pu=mu}else pu=!1;Rd=pu&&(!document.documentMode||9<document.documentMode)}function Nd(){To&&(To.detachEvent("onpropertychange",Dd),wo=To=null)}function Dd(s){if(s.propertyName==="value"&&nl(wo)){var r=[];Md(r,wo,s,ou(s)),md(Ab,r)}}function Rb(s,r,a){s==="focusin"?(Nd(),To=r,wo=a,To.attachEvent("onpropertychange",Dd)):s==="focusout"&&Nd()}function kb(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return nl(wo)}function Nb(s,r){if(s==="click")return nl(r)}function Db(s,r){if(s==="input"||s==="change")return nl(r)}function Ib(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var Ie=typeof Object.is=="function"?Object.is:Ib;function Co(s,r){if(Ie(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var a=Object.keys(s),f=Object.keys(r);if(a.length!==f.length)return!1;for(f=0;f<a.length;f++){var v=a[f];if(!be.call(r,v)||!Ie(s[v],r[v]))return!1}return!0}function Id(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Ld(s,r){var a=Id(s);s=0;for(var f;a;){if(a.nodeType===3){if(f=s+a.textContent.length,s<=r&&f>=r)return{node:a,offset:r-s};s=f}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Id(a)}}function Ud(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?Ud(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function Pd(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var r=Wr(s.document);r instanceof s.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)s=r.contentWindow;else break;r=Wr(s.document)}return r}function gu(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}var Lb=vn&&"documentMode"in document&&11>=document.documentMode,ls=null,vu=null,xo=null,yu=!1;function zd(s,r,a){var f=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;yu||ls==null||ls!==Wr(f)||(f=ls,"selectionStart"in f&&gu(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),xo&&Co(xo,f)||(xo=f,f=ql(vu,"onSelect"),0<f.length&&(r=new tl("onSelect","select",null,r,a),s.push({event:r,listeners:f}),r.target=ls)))}function yi(s,r){var a={};return a[s.toLowerCase()]=r.toLowerCase(),a["Webkit"+s]="webkit"+r,a["Moz"+s]="moz"+r,a}var as={animationend:yi("Animation","AnimationEnd"),animationiteration:yi("Animation","AnimationIteration"),animationstart:yi("Animation","AnimationStart"),transitionrun:yi("Transition","TransitionRun"),transitionstart:yi("Transition","TransitionStart"),transitioncancel:yi("Transition","TransitionCancel"),transitionend:yi("Transition","TransitionEnd")},_u={},Vd={};vn&&(Vd=document.createElement("div").style,"AnimationEvent"in window||(delete as.animationend.animation,delete as.animationiteration.animation,delete as.animationstart.animation),"TransitionEvent"in window||delete as.transitionend.transition);function _i(s){if(_u[s])return _u[s];if(!as[s])return s;var r=as[s],a;for(a in r)if(r.hasOwnProperty(a)&&a in Vd)return _u[s]=r[a];return s}var Bd=_i("animationend"),Od=_i("animationiteration"),qd=_i("animationstart"),Ub=_i("transitionrun"),Pb=_i("transitionstart"),zb=_i("transitioncancel"),$d=_i("transitionend"),Hd=new Map,Su="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Su.push("scrollEnd");function Ze(s,r){Hd.set(s,r),gi(r,[s])}var Gd=new WeakMap;function He(s,r){if(typeof s=="object"&&s!==null){var a=Gd.get(s);return a!==void 0?a:(r={value:s,source:r,stack:rd(r)},Gd.set(s,r),r)}return{value:s,source:r,stack:rd(r)}}var Ge=[],us=0,bu=0;function il(){for(var s=us,r=bu=us=0;r<s;){var a=Ge[r];Ge[r++]=null;var f=Ge[r];Ge[r++]=null;var v=Ge[r];Ge[r++]=null;var y=Ge[r];if(Ge[r++]=null,f!==null&&v!==null){var T=f.pending;T===null?v.next=v:(v.next=T.next,T.next=v),f.pending=v}y!==0&&Fd(a,v,y)}}function sl(s,r,a,f){Ge[us++]=s,Ge[us++]=r,Ge[us++]=a,Ge[us++]=f,bu|=f,s.lanes|=f,s=s.alternate,s!==null&&(s.lanes|=f)}function Tu(s,r,a,f){return sl(s,r,a,f),ol(s)}function cs(s,r){return sl(s,null,null,r),ol(s)}function Fd(s,r,a){s.lanes|=a;var f=s.alternate;f!==null&&(f.lanes|=a);for(var v=!1,y=s.return;y!==null;)y.childLanes|=a,f=y.alternate,f!==null&&(f.childLanes|=a),y.tag===22&&(s=y.stateNode,s===null||s._visibility&1||(v=!0)),s=y,y=y.return;return s.tag===3?(y=s.stateNode,v&&r!==null&&(v=31-De(a),s=y.hiddenUpdates,f=s[v],f===null?s[v]=[r]:f.push(r),r.lane=a|536870912),y):null}function ol(s){if(50<Xo)throw Xo=0,Ac=null,Error(i(185));for(var r=s.return;r!==null;)s=r,r=s.return;return s.tag===3?s.stateNode:null}var hs={};function Vb(s,r,a,f){this.tag=s,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Le(s,r,a,f){return new Vb(s,r,a,f)}function wu(s){return s=s.prototype,!(!s||!s.isReactComponent)}function yn(s,r){var a=s.alternate;return a===null?(a=Le(s.tag,r,s.key,s.mode),a.elementType=s.elementType,a.type=s.type,a.stateNode=s.stateNode,a.alternate=s,s.alternate=a):(a.pendingProps=r,a.type=s.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=s.flags&65011712,a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,r=s.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=s.sibling,a.index=s.index,a.ref=s.ref,a.refCleanup=s.refCleanup,a}function Jd(s,r){s.flags&=65011714;var a=s.alternate;return a===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,r=a.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),s}function rl(s,r,a,f,v,y){var T=0;if(f=s,typeof s=="function")wu(s)&&(T=1);else if(typeof s=="string")T=OT(s,a,ct.current)?26:s==="html"||s==="head"||s==="body"?27:5;else t:switch(s){case j:return s=Le(31,a,r,v),s.elementType=j,s.lanes=y,s;case w:return Si(a.children,v,y,r);case E:T=8,v|=24;break;case M:return s=Le(12,a,r,v|2),s.elementType=M,s.lanes=y,s;case q:return s=Le(13,a,r,v),s.elementType=q,s.lanes=y,s;case J:return s=Le(19,a,r,v),s.elementType=J,s.lanes=y,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case D:case k:T=10;break t;case U:T=9;break t;case V:T=11;break t;case W:T=14;break t;case rt:T=16,f=null;break t}T=29,a=Error(i(130,s===null?"null":typeof s,"")),f=null}return r=Le(T,a,r,v),r.elementType=s,r.type=f,r.lanes=y,r}function Si(s,r,a,f){return s=Le(7,s,f,r),s.lanes=a,s}function Cu(s,r,a){return s=Le(6,s,null,r),s.lanes=a,s}function xu(s,r,a){return r=Le(4,s.children!==null?s.children:[],s.key,r),r.lanes=a,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}var fs=[],ds=0,ll=null,al=0,Fe=[],Je=0,bi=null,_n=1,Sn="";function Ti(s,r){fs[ds++]=al,fs[ds++]=ll,ll=s,al=r}function Kd(s,r,a){Fe[Je++]=_n,Fe[Je++]=Sn,Fe[Je++]=bi,bi=s;var f=_n;s=Sn;var v=32-De(f)-1;f&=~(1<<v),a+=1;var y=32-De(r)+v;if(30<y){var T=v-v%5;y=(f&(1<<T)-1).toString(32),f>>=T,v-=T,_n=1<<32-De(r)+v|a<<v|f,Sn=y+s}else _n=1<<y|a<<v|f,Sn=s}function Eu(s){s.return!==null&&(Ti(s,1),Kd(s,1,0))}function Mu(s){for(;s===ll;)ll=fs[--ds],fs[ds]=null,al=fs[--ds],fs[ds]=null;for(;s===bi;)bi=Fe[--Je],Fe[Je]=null,Sn=Fe[--Je],Fe[Je]=null,_n=Fe[--Je],Fe[Je]=null}var Te=null,Yt=null,kt=!1,wi=null,ln=!1,Au=Error(i(519));function Ci(s){var r=Error(i(418,""));throw Ao(He(r,s)),Au}function Yd(s){var r=s.stateNode,a=s.type,f=s.memoizedProps;switch(r[ve]=s,r[Ce]=f,a){case"dialog":Et("cancel",r),Et("close",r);break;case"iframe":case"object":case"embed":Et("load",r);break;case"video":case"audio":for(a=0;a<Zo.length;a++)Et(Zo[a],r);break;case"source":Et("error",r);break;case"img":case"image":case"link":Et("error",r),Et("load",r);break;case"details":Et("toggle",r);break;case"input":Et("invalid",r),ud(r,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0),Yr(r);break;case"select":Et("invalid",r);break;case"textarea":Et("invalid",r),hd(r,f.value,f.defaultValue,f.children),Yr(r)}a=f.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||f.suppressHydrationWarning===!0||hg(r.textContent,a)?(f.popover!=null&&(Et("beforetoggle",r),Et("toggle",r)),f.onScroll!=null&&Et("scroll",r),f.onScrollEnd!=null&&Et("scrollend",r),f.onClick!=null&&(r.onclick=$l),r=!0):r=!1,r||Ci(s)}function Wd(s){for(Te=s.return;Te;)switch(Te.tag){case 5:case 13:ln=!1;return;case 27:case 3:ln=!0;return;default:Te=Te.return}}function Eo(s){if(s!==Te)return!1;if(!kt)return Wd(s),kt=!0,!1;var r=s.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=s.type,a=!(a!=="form"&&a!=="button")||Gc(s.type,s.memoizedProps)),a=!a),a&&Yt&&Ci(s),Wd(s),r===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));t:{for(s=s.nextSibling,r=0;s;){if(s.nodeType===8)if(a=s.data,a==="/$"){if(r===0){Yt=tn(s.nextSibling);break t}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++;s=s.nextSibling}Yt=null}}else r===27?(r=Yt,ii(s.type)?(s=Yc,Yc=null,Yt=s):Yt=r):Yt=Te?tn(s.stateNode.nextSibling):null;return!0}function Mo(){Yt=Te=null,kt=!1}function Xd(){var s=wi;return s!==null&&(Ae===null?Ae=s:Ae.push.apply(Ae,s),wi=null),s}function Ao(s){wi===null?wi=[s]:wi.push(s)}var Ru=G(null),xi=null,bn=null;function $n(s,r,a){Z(Ru,r._currentValue),r._currentValue=a}function Tn(s){s._currentValue=Ru.current,tt(Ru)}function ku(s,r,a){for(;s!==null;){var f=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,f!==null&&(f.childLanes|=r)):f!==null&&(f.childLanes&r)!==r&&(f.childLanes|=r),s===a)break;s=s.return}}function Nu(s,r,a,f){var v=s.child;for(v!==null&&(v.return=s);v!==null;){var y=v.dependencies;if(y!==null){var T=v.child;y=y.firstContext;t:for(;y!==null;){var C=y;y=v;for(var A=0;A<r.length;A++)if(C.context===r[A]){y.lanes|=a,C=y.alternate,C!==null&&(C.lanes|=a),ku(y.return,a,s),f||(T=null);break t}y=C.next}}else if(v.tag===18){if(T=v.return,T===null)throw Error(i(341));T.lanes|=a,y=T.alternate,y!==null&&(y.lanes|=a),ku(T,a,s),T=null}else T=v.child;if(T!==null)T.return=v;else for(T=v;T!==null;){if(T===s){T=null;break}if(v=T.sibling,v!==null){v.return=T.return,T=v;break}T=T.return}v=T}}function Ro(s,r,a,f){s=null;for(var v=r,y=!1;v!==null;){if(!y){if((v.flags&524288)!==0)y=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var T=v.alternate;if(T===null)throw Error(i(387));if(T=T.memoizedProps,T!==null){var C=v.type;Ie(v.pendingProps.value,T.value)||(s!==null?s.push(C):s=[C])}}else if(v===Tt.current){if(T=v.alternate,T===null)throw Error(i(387));T.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(s!==null?s.push(sr):s=[sr])}v=v.return}s!==null&&Nu(r,s,a,f),r.flags|=262144}function ul(s){for(s=s.firstContext;s!==null;){if(!Ie(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Ei(s){xi=s,bn=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function ye(s){return Qd(xi,s)}function cl(s,r){return xi===null&&Ei(s),Qd(s,r)}function Qd(s,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},bn===null){if(s===null)throw Error(i(308));bn=r,s.dependencies={lanes:0,firstContext:r},s.flags|=524288}else bn=bn.next=r;return a}var Bb=typeof AbortController<"u"?AbortController:function(){var s=[],r=this.signal={aborted:!1,addEventListener:function(a,f){s.push(f)}};this.abort=function(){r.aborted=!0,s.forEach(function(a){return a()})}},Ob=n.unstable_scheduleCallback,qb=n.unstable_NormalPriority,ie={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Du(){return{controller:new Bb,data:new Map,refCount:0}}function ko(s){s.refCount--,s.refCount===0&&Ob(qb,function(){s.controller.abort()})}var No=null,Iu=0,ps=0,ms=null;function $b(s,r){if(No===null){var a=No=[];Iu=0,ps=Uc(),ms={status:"pending",value:void 0,then:function(f){a.push(f)}}}return Iu++,r.then(Zd,Zd),r}function Zd(){if(--Iu===0&&No!==null){ms!==null&&(ms.status="fulfilled");var s=No;No=null,ps=0,ms=null;for(var r=0;r<s.length;r++)(0,s[r])()}}function Hb(s,r){var a=[],f={status:"pending",value:null,reason:null,then:function(v){a.push(v)}};return s.then(function(){f.status="fulfilled",f.value=r;for(var v=0;v<a.length;v++)(0,a[v])(r)},function(v){for(f.status="rejected",f.reason=v,v=0;v<a.length;v++)(0,a[v])(void 0)}),f}var jd=B.S;B.S=function(s,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&$b(s,r),jd!==null&&jd(s,r)};var Mi=G(null);function Lu(){var s=Mi.current;return s!==null?s:Ot.pooledCache}function hl(s,r){r===null?Z(Mi,Mi.current):Z(Mi,r.pool)}function tp(){var s=Lu();return s===null?null:{parent:ie._currentValue,pool:s}}var Do=Error(i(460)),ep=Error(i(474)),fl=Error(i(542)),Uu={then:function(){}};function np(s){return s=s.status,s==="fulfilled"||s==="rejected"}function dl(){}function ip(s,r,a){switch(a=s[a],a===void 0?s.push(r):a!==r&&(r.then(dl,dl),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,op(s),s;default:if(typeof r.status=="string")r.then(dl,dl);else{if(s=Ot,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=r,s.status="pending",s.then(function(f){if(r.status==="pending"){var v=r;v.status="fulfilled",v.value=f}},function(f){if(r.status==="pending"){var v=r;v.status="rejected",v.reason=f}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,op(s),s}throw Io=r,Do}}var Io=null;function sp(){if(Io===null)throw Error(i(459));var s=Io;return Io=null,s}function op(s){if(s===Do||s===fl)throw Error(i(483))}var Hn=!1;function Pu(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zu(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Gn(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Fn(s,r,a){var f=s.updateQueue;if(f===null)return null;if(f=f.shared,(Dt&2)!==0){var v=f.pending;return v===null?r.next=r:(r.next=v.next,v.next=r),f.pending=r,r=ol(s),Fd(s,null,a),r}return sl(s,f,r,a),ol(s)}function Lo(s,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var f=r.lanes;f&=s.pendingLanes,a|=f,r.lanes=a,Zf(s,a)}}function Vu(s,r){var a=s.updateQueue,f=s.alternate;if(f!==null&&(f=f.updateQueue,a===f)){var v=null,y=null;if(a=a.firstBaseUpdate,a!==null){do{var T={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};y===null?v=y=T:y=y.next=T,a=a.next}while(a!==null);y===null?v=y=r:y=y.next=r}else v=y=r;a={baseState:f.baseState,firstBaseUpdate:v,lastBaseUpdate:y,shared:f.shared,callbacks:f.callbacks},s.updateQueue=a;return}s=a.lastBaseUpdate,s===null?a.firstBaseUpdate=r:s.next=r,a.lastBaseUpdate=r}var Bu=!1;function Uo(){if(Bu){var s=ms;if(s!==null)throw s}}function Po(s,r,a,f){Bu=!1;var v=s.updateQueue;Hn=!1;var y=v.firstBaseUpdate,T=v.lastBaseUpdate,C=v.shared.pending;if(C!==null){v.shared.pending=null;var A=C,P=A.next;A.next=null,T===null?y=P:T.next=P,T=A;var $=s.alternate;$!==null&&($=$.updateQueue,C=$.lastBaseUpdate,C!==T&&(C===null?$.firstBaseUpdate=P:C.next=P,$.lastBaseUpdate=A))}if(y!==null){var F=v.baseState;T=0,$=P=A=null,C=y;do{var z=C.lane&-536870913,O=z!==C.lane;if(O?(At&z)===z:(f&z)===z){z!==0&&z===ps&&(Bu=!0),$!==null&&($=$.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});t:{var vt=s,pt=C;z=r;var zt=a;switch(pt.tag){case 1:if(vt=pt.payload,typeof vt=="function"){F=vt.call(zt,F,z);break t}F=vt;break t;case 3:vt.flags=vt.flags&-65537|128;case 0:if(vt=pt.payload,z=typeof vt=="function"?vt.call(zt,F,z):vt,z==null)break t;F=g({},F,z);break t;case 2:Hn=!0}}z=C.callback,z!==null&&(s.flags|=64,O&&(s.flags|=8192),O=v.callbacks,O===null?v.callbacks=[z]:O.push(z))}else O={lane:z,tag:C.tag,payload:C.payload,callback:C.callback,next:null},$===null?(P=$=O,A=F):$=$.next=O,T|=z;if(C=C.next,C===null){if(C=v.shared.pending,C===null)break;O=C,C=O.next,O.next=null,v.lastBaseUpdate=O,v.shared.pending=null}}while(!0);$===null&&(A=F),v.baseState=A,v.firstBaseUpdate=P,v.lastBaseUpdate=$,y===null&&(v.shared.lanes=0),jn|=T,s.lanes=T,s.memoizedState=F}}function rp(s,r){if(typeof s!="function")throw Error(i(191,s));s.call(r)}function lp(s,r){var a=s.callbacks;if(a!==null)for(s.callbacks=null,s=0;s<a.length;s++)rp(a[s],r)}var gs=G(null),pl=G(0);function ap(s,r){s=Rn,Z(pl,s),Z(gs,r),Rn=s|r.baseLanes}function Ou(){Z(pl,Rn),Z(gs,gs.current)}function qu(){Rn=pl.current,tt(gs),tt(pl)}var Jn=0,wt=null,Ut=null,te=null,ml=!1,vs=!1,Ai=!1,gl=0,zo=0,ys=null,Gb=0;function Xt(){throw Error(i(321))}function $u(s,r){if(r===null)return!1;for(var a=0;a<r.length&&a<s.length;a++)if(!Ie(s[a],r[a]))return!1;return!0}function Hu(s,r,a,f,v,y){return Jn=y,wt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,B.H=s===null||s.memoizedState===null?Fp:Jp,Ai=!1,y=a(f,v),Ai=!1,vs&&(y=cp(r,a,f,v)),up(s),y}function up(s){B.H=Tl;var r=Ut!==null&&Ut.next!==null;if(Jn=0,te=Ut=wt=null,ml=!1,zo=0,ys=null,r)throw Error(i(300));s===null||ae||(s=s.dependencies,s!==null&&ul(s)&&(ae=!0))}function cp(s,r,a,f){wt=s;var v=0;do{if(vs&&(ys=null),zo=0,vs=!1,25<=v)throw Error(i(301));if(v+=1,te=Ut=null,s.updateQueue!=null){var y=s.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}B.H=Qb,y=r(a,f)}while(vs);return y}function Fb(){var s=B.H,r=s.useState()[0];return r=typeof r.then=="function"?Vo(r):r,s=s.useState()[0],(Ut!==null?Ut.memoizedState:null)!==s&&(wt.flags|=1024),r}function Gu(){var s=gl!==0;return gl=0,s}function Fu(s,r,a){r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~a}function Ju(s){if(ml){for(s=s.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}ml=!1}Jn=0,te=Ut=wt=null,vs=!1,zo=gl=0,ys=null}function Ee(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return te===null?wt.memoizedState=te=s:te=te.next=s,te}function ee(){if(Ut===null){var s=wt.alternate;s=s!==null?s.memoizedState:null}else s=Ut.next;var r=te===null?wt.memoizedState:te.next;if(r!==null)te=r,Ut=s;else{if(s===null)throw wt.alternate===null?Error(i(467)):Error(i(310));Ut=s,s={memoizedState:Ut.memoizedState,baseState:Ut.baseState,baseQueue:Ut.baseQueue,queue:Ut.queue,next:null},te===null?wt.memoizedState=te=s:te=te.next=s}return te}function Ku(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Vo(s){var r=zo;return zo+=1,ys===null&&(ys=[]),s=ip(ys,s,r),r=wt,(te===null?r.memoizedState:te.next)===null&&(r=r.alternate,B.H=r===null||r.memoizedState===null?Fp:Jp),s}function vl(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Vo(s);if(s.$$typeof===k)return ye(s)}throw Error(i(438,String(s)))}function Yu(s){var r=null,a=wt.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var f=wt.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(r={data:f.data.map(function(v){return v.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=Ku(),wt.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(s),f=0;f<s;f++)a[f]=Q;return r.index++,a}function wn(s,r){return typeof r=="function"?r(s):r}function yl(s){var r=ee();return Wu(r,Ut,s)}function Wu(s,r,a){var f=s.queue;if(f===null)throw Error(i(311));f.lastRenderedReducer=a;var v=s.baseQueue,y=f.pending;if(y!==null){if(v!==null){var T=v.next;v.next=y.next,y.next=T}r.baseQueue=v=y,f.pending=null}if(y=s.baseState,v===null)s.memoizedState=y;else{r=v.next;var C=T=null,A=null,P=r,$=!1;do{var F=P.lane&-536870913;if(F!==P.lane?(At&F)===F:(Jn&F)===F){var z=P.revertLane;if(z===0)A!==null&&(A=A.next={lane:0,revertLane:0,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null}),F===ps&&($=!0);else if((Jn&z)===z){P=P.next,z===ps&&($=!0);continue}else F={lane:0,revertLane:P.revertLane,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},A===null?(C=A=F,T=y):A=A.next=F,wt.lanes|=z,jn|=z;F=P.action,Ai&&a(y,F),y=P.hasEagerState?P.eagerState:a(y,F)}else z={lane:F,revertLane:P.revertLane,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},A===null?(C=A=z,T=y):A=A.next=z,wt.lanes|=F,jn|=F;P=P.next}while(P!==null&&P!==r);if(A===null?T=y:A.next=C,!Ie(y,s.memoizedState)&&(ae=!0,$&&(a=ms,a!==null)))throw a;s.memoizedState=y,s.baseState=T,s.baseQueue=A,f.lastRenderedState=y}return v===null&&(f.lanes=0),[s.memoizedState,f.dispatch]}function Xu(s){var r=ee(),a=r.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=s;var f=a.dispatch,v=a.pending,y=r.memoizedState;if(v!==null){a.pending=null;var T=v=v.next;do y=s(y,T.action),T=T.next;while(T!==v);Ie(y,r.memoizedState)||(ae=!0),r.memoizedState=y,r.baseQueue===null&&(r.baseState=y),a.lastRenderedState=y}return[y,f]}function hp(s,r,a){var f=wt,v=ee(),y=kt;if(y){if(a===void 0)throw Error(i(407));a=a()}else a=r();var T=!Ie((Ut||v).memoizedState,a);T&&(v.memoizedState=a,ae=!0),v=v.queue;var C=pp.bind(null,f,v,s);if(Bo(2048,8,C,[s]),v.getSnapshot!==r||T||te!==null&&te.memoizedState.tag&1){if(f.flags|=2048,_s(9,_l(),dp.bind(null,f,v,a,r),null),Ot===null)throw Error(i(349));y||(Jn&124)!==0||fp(f,r,a)}return a}function fp(s,r,a){s.flags|=16384,s={getSnapshot:r,value:a},r=wt.updateQueue,r===null?(r=Ku(),wt.updateQueue=r,r.stores=[s]):(a=r.stores,a===null?r.stores=[s]:a.push(s))}function dp(s,r,a,f){r.value=a,r.getSnapshot=f,mp(r)&&gp(s)}function pp(s,r,a){return a(function(){mp(r)&&gp(s)})}function mp(s){var r=s.getSnapshot;s=s.value;try{var a=r();return!Ie(s,a)}catch{return!0}}function gp(s){var r=cs(s,2);r!==null&&Be(r,s,2)}function Qu(s){var r=Ee();if(typeof s=="function"){var a=s;if(s=a(),Ai){Bn(!0);try{a()}finally{Bn(!1)}}}return r.memoizedState=r.baseState=s,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wn,lastRenderedState:s},r}function vp(s,r,a,f){return s.baseState=a,Wu(s,Ut,typeof f=="function"?f:wn)}function Jb(s,r,a,f,v){if(bl(s))throw Error(i(485));if(s=r.action,s!==null){var y={payload:v,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){y.listeners.push(T)}};B.T!==null?a(!0):y.isTransition=!1,f(y),a=r.pending,a===null?(y.next=r.pending=y,yp(r,y)):(y.next=a.next,r.pending=a.next=y)}}function yp(s,r){var a=r.action,f=r.payload,v=s.state;if(r.isTransition){var y=B.T,T={};B.T=T;try{var C=a(v,f),A=B.S;A!==null&&A(T,C),_p(s,r,C)}catch(P){Zu(s,r,P)}finally{B.T=y}}else try{y=a(v,f),_p(s,r,y)}catch(P){Zu(s,r,P)}}function _p(s,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(f){Sp(s,r,f)},function(f){return Zu(s,r,f)}):Sp(s,r,a)}function Sp(s,r,a){r.status="fulfilled",r.value=a,bp(r),s.state=a,r=s.pending,r!==null&&(a=r.next,a===r?s.pending=null:(a=a.next,r.next=a,yp(s,a)))}function Zu(s,r,a){var f=s.pending;if(s.pending=null,f!==null){f=f.next;do r.status="rejected",r.reason=a,bp(r),r=r.next;while(r!==f)}s.action=null}function bp(s){s=s.listeners;for(var r=0;r<s.length;r++)(0,s[r])()}function Tp(s,r){return r}function wp(s,r){if(kt){var a=Ot.formState;if(a!==null){t:{var f=wt;if(kt){if(Yt){e:{for(var v=Yt,y=ln;v.nodeType!==8;){if(!y){v=null;break e}if(v=tn(v.nextSibling),v===null){v=null;break e}}y=v.data,v=y==="F!"||y==="F"?v:null}if(v){Yt=tn(v.nextSibling),f=v.data==="F!";break t}}Ci(f)}f=!1}f&&(r=a[0])}}return a=Ee(),a.memoizedState=a.baseState=r,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tp,lastRenderedState:r},a.queue=f,a=$p.bind(null,wt,f),f.dispatch=a,f=Qu(!1),y=ic.bind(null,wt,!1,f.queue),f=Ee(),v={state:r,dispatch:null,action:s,pending:null},f.queue=v,a=Jb.bind(null,wt,v,y,a),v.dispatch=a,f.memoizedState=s,[r,a,!1]}function Cp(s){var r=ee();return xp(r,Ut,s)}function xp(s,r,a){if(r=Wu(s,r,Tp)[0],s=yl(wn)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var f=Vo(r)}catch(T){throw T===Do?fl:T}else f=r;r=ee();var v=r.queue,y=v.dispatch;return a!==r.memoizedState&&(wt.flags|=2048,_s(9,_l(),Kb.bind(null,v,a),null)),[f,y,s]}function Kb(s,r){s.action=r}function Ep(s){var r=ee(),a=Ut;if(a!==null)return xp(r,a,s);ee(),r=r.memoizedState,a=ee();var f=a.queue.dispatch;return a.memoizedState=s,[r,f,!1]}function _s(s,r,a,f){return s={tag:s,create:a,deps:f,inst:r,next:null},r=wt.updateQueue,r===null&&(r=Ku(),wt.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=s.next=s:(f=a.next,a.next=s,s.next=f,r.lastEffect=s),s}function _l(){return{destroy:void 0,resource:void 0}}function Mp(){return ee().memoizedState}function Sl(s,r,a,f){var v=Ee();f=f===void 0?null:f,wt.flags|=s,v.memoizedState=_s(1|r,_l(),a,f)}function Bo(s,r,a,f){var v=ee();f=f===void 0?null:f;var y=v.memoizedState.inst;Ut!==null&&f!==null&&$u(f,Ut.memoizedState.deps)?v.memoizedState=_s(r,y,a,f):(wt.flags|=s,v.memoizedState=_s(1|r,y,a,f))}function Ap(s,r){Sl(8390656,8,s,r)}function Rp(s,r){Bo(2048,8,s,r)}function kp(s,r){return Bo(4,2,s,r)}function Np(s,r){return Bo(4,4,s,r)}function Dp(s,r){if(typeof r=="function"){s=s();var a=r(s);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function Ip(s,r,a){a=a!=null?a.concat([s]):null,Bo(4,4,Dp.bind(null,r,s),a)}function ju(){}function Lp(s,r){var a=ee();r=r===void 0?null:r;var f=a.memoizedState;return r!==null&&$u(r,f[1])?f[0]:(a.memoizedState=[s,r],s)}function Up(s,r){var a=ee();r=r===void 0?null:r;var f=a.memoizedState;if(r!==null&&$u(r,f[1]))return f[0];if(f=s(),Ai){Bn(!0);try{s()}finally{Bn(!1)}}return a.memoizedState=[f,r],f}function tc(s,r,a){return a===void 0||(Jn&1073741824)!==0?s.memoizedState=r:(s.memoizedState=a,s=Vm(),wt.lanes|=s,jn|=s,a)}function Pp(s,r,a,f){return Ie(a,r)?a:gs.current!==null?(s=tc(s,a,f),Ie(s,r)||(ae=!0),s):(Jn&42)===0?(ae=!0,s.memoizedState=a):(s=Vm(),wt.lanes|=s,jn|=s,r)}function zp(s,r,a,f,v){var y=X.p;X.p=y!==0&&8>y?y:8;var T=B.T,C={};B.T=C,ic(s,!1,r,a);try{var A=v(),P=B.S;if(P!==null&&P(C,A),A!==null&&typeof A=="object"&&typeof A.then=="function"){var $=Hb(A,f);Oo(s,r,$,Ve(s))}else Oo(s,r,f,Ve(s))}catch(F){Oo(s,r,{then:function(){},status:"rejected",reason:F},Ve())}finally{X.p=y,B.T=T}}function Yb(){}function ec(s,r,a,f){if(s.tag!==5)throw Error(i(476));var v=Vp(s).queue;zp(s,v,r,nt,a===null?Yb:function(){return Bp(s),a(f)})}function Vp(s){var r=s.memoizedState;if(r!==null)return r;r={memoizedState:nt,baseState:nt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wn,lastRenderedState:nt},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wn,lastRenderedState:a},next:null},s.memoizedState=r,s=s.alternate,s!==null&&(s.memoizedState=r),r}function Bp(s){var r=Vp(s).next.queue;Oo(s,r,{},Ve())}function nc(){return ye(sr)}function Op(){return ee().memoizedState}function qp(){return ee().memoizedState}function Wb(s){for(var r=s.return;r!==null;){switch(r.tag){case 24:case 3:var a=Ve();s=Gn(a);var f=Fn(r,s,a);f!==null&&(Be(f,r,a),Lo(f,r,a)),r={cache:Du()},s.payload=r;return}r=r.return}}function Xb(s,r,a){var f=Ve();a={lane:f,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},bl(s)?Hp(r,a):(a=Tu(s,r,a,f),a!==null&&(Be(a,s,f),Gp(a,r,f)))}function $p(s,r,a){var f=Ve();Oo(s,r,a,f)}function Oo(s,r,a,f){var v={lane:f,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(bl(s))Hp(r,v);else{var y=s.alternate;if(s.lanes===0&&(y===null||y.lanes===0)&&(y=r.lastRenderedReducer,y!==null))try{var T=r.lastRenderedState,C=y(T,a);if(v.hasEagerState=!0,v.eagerState=C,Ie(C,T))return sl(s,r,v,0),Ot===null&&il(),!1}catch{}finally{}if(a=Tu(s,r,v,f),a!==null)return Be(a,s,f),Gp(a,r,f),!0}return!1}function ic(s,r,a,f){if(f={lane:2,revertLane:Uc(),action:f,hasEagerState:!1,eagerState:null,next:null},bl(s)){if(r)throw Error(i(479))}else r=Tu(s,a,f,2),r!==null&&Be(r,s,2)}function bl(s){var r=s.alternate;return s===wt||r!==null&&r===wt}function Hp(s,r){vs=ml=!0;var a=s.pending;a===null?r.next=r:(r.next=a.next,a.next=r),s.pending=r}function Gp(s,r,a){if((a&4194048)!==0){var f=r.lanes;f&=s.pendingLanes,a|=f,r.lanes=a,Zf(s,a)}}var Tl={readContext:ye,use:vl,useCallback:Xt,useContext:Xt,useEffect:Xt,useImperativeHandle:Xt,useLayoutEffect:Xt,useInsertionEffect:Xt,useMemo:Xt,useReducer:Xt,useRef:Xt,useState:Xt,useDebugValue:Xt,useDeferredValue:Xt,useTransition:Xt,useSyncExternalStore:Xt,useId:Xt,useHostTransitionStatus:Xt,useFormState:Xt,useActionState:Xt,useOptimistic:Xt,useMemoCache:Xt,useCacheRefresh:Xt},Fp={readContext:ye,use:vl,useCallback:function(s,r){return Ee().memoizedState=[s,r===void 0?null:r],s},useContext:ye,useEffect:Ap,useImperativeHandle:function(s,r,a){a=a!=null?a.concat([s]):null,Sl(4194308,4,Dp.bind(null,r,s),a)},useLayoutEffect:function(s,r){return Sl(4194308,4,s,r)},useInsertionEffect:function(s,r){Sl(4,2,s,r)},useMemo:function(s,r){var a=Ee();r=r===void 0?null:r;var f=s();if(Ai){Bn(!0);try{s()}finally{Bn(!1)}}return a.memoizedState=[f,r],f},useReducer:function(s,r,a){var f=Ee();if(a!==void 0){var v=a(r);if(Ai){Bn(!0);try{a(r)}finally{Bn(!1)}}}else v=r;return f.memoizedState=f.baseState=v,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:v},f.queue=s,s=s.dispatch=Xb.bind(null,wt,s),[f.memoizedState,s]},useRef:function(s){var r=Ee();return s={current:s},r.memoizedState=s},useState:function(s){s=Qu(s);var r=s.queue,a=$p.bind(null,wt,r);return r.dispatch=a,[s.memoizedState,a]},useDebugValue:ju,useDeferredValue:function(s,r){var a=Ee();return tc(a,s,r)},useTransition:function(){var s=Qu(!1);return s=zp.bind(null,wt,s.queue,!0,!1),Ee().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,r,a){var f=wt,v=Ee();if(kt){if(a===void 0)throw Error(i(407));a=a()}else{if(a=r(),Ot===null)throw Error(i(349));(At&124)!==0||fp(f,r,a)}v.memoizedState=a;var y={value:a,getSnapshot:r};return v.queue=y,Ap(pp.bind(null,f,y,s),[s]),f.flags|=2048,_s(9,_l(),dp.bind(null,f,y,a,r),null),a},useId:function(){var s=Ee(),r=Ot.identifierPrefix;if(kt){var a=Sn,f=_n;a=(f&~(1<<32-De(f)-1)).toString(32)+a,r=""+r+"R"+a,a=gl++,0<a&&(r+="H"+a.toString(32)),r+=""}else a=Gb++,r=""+r+"r"+a.toString(32)+"";return s.memoizedState=r},useHostTransitionStatus:nc,useFormState:wp,useActionState:wp,useOptimistic:function(s){var r=Ee();r.memoizedState=r.baseState=s;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=ic.bind(null,wt,!0,a),a.dispatch=r,[s,r]},useMemoCache:Yu,useCacheRefresh:function(){return Ee().memoizedState=Wb.bind(null,wt)}},Jp={readContext:ye,use:vl,useCallback:Lp,useContext:ye,useEffect:Rp,useImperativeHandle:Ip,useInsertionEffect:kp,useLayoutEffect:Np,useMemo:Up,useReducer:yl,useRef:Mp,useState:function(){return yl(wn)},useDebugValue:ju,useDeferredValue:function(s,r){var a=ee();return Pp(a,Ut.memoizedState,s,r)},useTransition:function(){var s=yl(wn)[0],r=ee().memoizedState;return[typeof s=="boolean"?s:Vo(s),r]},useSyncExternalStore:hp,useId:Op,useHostTransitionStatus:nc,useFormState:Cp,useActionState:Cp,useOptimistic:function(s,r){var a=ee();return vp(a,Ut,s,r)},useMemoCache:Yu,useCacheRefresh:qp},Qb={readContext:ye,use:vl,useCallback:Lp,useContext:ye,useEffect:Rp,useImperativeHandle:Ip,useInsertionEffect:kp,useLayoutEffect:Np,useMemo:Up,useReducer:Xu,useRef:Mp,useState:function(){return Xu(wn)},useDebugValue:ju,useDeferredValue:function(s,r){var a=ee();return Ut===null?tc(a,s,r):Pp(a,Ut.memoizedState,s,r)},useTransition:function(){var s=Xu(wn)[0],r=ee().memoizedState;return[typeof s=="boolean"?s:Vo(s),r]},useSyncExternalStore:hp,useId:Op,useHostTransitionStatus:nc,useFormState:Ep,useActionState:Ep,useOptimistic:function(s,r){var a=ee();return Ut!==null?vp(a,Ut,s,r):(a.baseState=s,[s,a.queue.dispatch])},useMemoCache:Yu,useCacheRefresh:qp},Ss=null,qo=0;function wl(s){var r=qo;return qo+=1,Ss===null&&(Ss=[]),ip(Ss,s,r)}function $o(s,r){r=r.props.ref,s.ref=r!==void 0?r:null}function Cl(s,r){throw r.$$typeof===_?Error(i(525)):(s=Object.prototype.toString.call(r),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s)))}function Kp(s){var r=s._init;return r(s._payload)}function Yp(s){function r(I,N){if(s){var L=I.deletions;L===null?(I.deletions=[N],I.flags|=16):L.push(N)}}function a(I,N){if(!s)return null;for(;N!==null;)r(I,N),N=N.sibling;return null}function f(I){for(var N=new Map;I!==null;)I.key!==null?N.set(I.key,I):N.set(I.index,I),I=I.sibling;return N}function v(I,N){return I=yn(I,N),I.index=0,I.sibling=null,I}function y(I,N,L){return I.index=L,s?(L=I.alternate,L!==null?(L=L.index,L<N?(I.flags|=67108866,N):L):(I.flags|=67108866,N)):(I.flags|=1048576,N)}function T(I){return s&&I.alternate===null&&(I.flags|=67108866),I}function C(I,N,L,H){return N===null||N.tag!==6?(N=Cu(L,I.mode,H),N.return=I,N):(N=v(N,L),N.return=I,N)}function A(I,N,L,H){var ot=L.type;return ot===w?$(I,N,L.props.children,H,L.key):N!==null&&(N.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===rt&&Kp(ot)===N.type)?(N=v(N,L.props),$o(N,L),N.return=I,N):(N=rl(L.type,L.key,L.props,null,I.mode,H),$o(N,L),N.return=I,N)}function P(I,N,L,H){return N===null||N.tag!==4||N.stateNode.containerInfo!==L.containerInfo||N.stateNode.implementation!==L.implementation?(N=xu(L,I.mode,H),N.return=I,N):(N=v(N,L.children||[]),N.return=I,N)}function $(I,N,L,H,ot){return N===null||N.tag!==7?(N=Si(L,I.mode,H,ot),N.return=I,N):(N=v(N,L),N.return=I,N)}function F(I,N,L){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=Cu(""+N,I.mode,L),N.return=I,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case S:return L=rl(N.type,N.key,N.props,null,I.mode,L),$o(L,N),L.return=I,L;case b:return N=xu(N,I.mode,L),N.return=I,N;case rt:var H=N._init;return N=H(N._payload),F(I,N,L)}if(at(N)||st(N))return N=Si(N,I.mode,L,null),N.return=I,N;if(typeof N.then=="function")return F(I,wl(N),L);if(N.$$typeof===k)return F(I,cl(I,N),L);Cl(I,N)}return null}function z(I,N,L,H){var ot=N!==null?N.key:null;if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return ot!==null?null:C(I,N,""+L,H);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case S:return L.key===ot?A(I,N,L,H):null;case b:return L.key===ot?P(I,N,L,H):null;case rt:return ot=L._init,L=ot(L._payload),z(I,N,L,H)}if(at(L)||st(L))return ot!==null?null:$(I,N,L,H,null);if(typeof L.then=="function")return z(I,N,wl(L),H);if(L.$$typeof===k)return z(I,N,cl(I,L),H);Cl(I,L)}return null}function O(I,N,L,H,ot){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return I=I.get(L)||null,C(N,I,""+H,ot);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case S:return I=I.get(H.key===null?L:H.key)||null,A(N,I,H,ot);case b:return I=I.get(H.key===null?L:H.key)||null,P(N,I,H,ot);case rt:var Ct=H._init;return H=Ct(H._payload),O(I,N,L,H,ot)}if(at(H)||st(H))return I=I.get(L)||null,$(N,I,H,ot,null);if(typeof H.then=="function")return O(I,N,L,wl(H),ot);if(H.$$typeof===k)return O(I,N,L,cl(N,H),ot);Cl(N,H)}return null}function vt(I,N,L,H){for(var ot=null,Ct=null,ht=N,mt=N=0,ce=null;ht!==null&&mt<L.length;mt++){ht.index>mt?(ce=ht,ht=null):ce=ht.sibling;var Rt=z(I,ht,L[mt],H);if(Rt===null){ht===null&&(ht=ce);break}s&&ht&&Rt.alternate===null&&r(I,ht),N=y(Rt,N,mt),Ct===null?ot=Rt:Ct.sibling=Rt,Ct=Rt,ht=ce}if(mt===L.length)return a(I,ht),kt&&Ti(I,mt),ot;if(ht===null){for(;mt<L.length;mt++)ht=F(I,L[mt],H),ht!==null&&(N=y(ht,N,mt),Ct===null?ot=ht:Ct.sibling=ht,Ct=ht);return kt&&Ti(I,mt),ot}for(ht=f(ht);mt<L.length;mt++)ce=O(ht,I,mt,L[mt],H),ce!==null&&(s&&ce.alternate!==null&&ht.delete(ce.key===null?mt:ce.key),N=y(ce,N,mt),Ct===null?ot=ce:Ct.sibling=ce,Ct=ce);return s&&ht.forEach(function(ai){return r(I,ai)}),kt&&Ti(I,mt),ot}function pt(I,N,L,H){if(L==null)throw Error(i(151));for(var ot=null,Ct=null,ht=N,mt=N=0,ce=null,Rt=L.next();ht!==null&&!Rt.done;mt++,Rt=L.next()){ht.index>mt?(ce=ht,ht=null):ce=ht.sibling;var ai=z(I,ht,Rt.value,H);if(ai===null){ht===null&&(ht=ce);break}s&&ht&&ai.alternate===null&&r(I,ht),N=y(ai,N,mt),Ct===null?ot=ai:Ct.sibling=ai,Ct=ai,ht=ce}if(Rt.done)return a(I,ht),kt&&Ti(I,mt),ot;if(ht===null){for(;!Rt.done;mt++,Rt=L.next())Rt=F(I,Rt.value,H),Rt!==null&&(N=y(Rt,N,mt),Ct===null?ot=Rt:Ct.sibling=Rt,Ct=Rt);return kt&&Ti(I,mt),ot}for(ht=f(ht);!Rt.done;mt++,Rt=L.next())Rt=O(ht,I,mt,Rt.value,H),Rt!==null&&(s&&Rt.alternate!==null&&ht.delete(Rt.key===null?mt:Rt.key),N=y(Rt,N,mt),Ct===null?ot=Rt:Ct.sibling=Rt,Ct=Rt);return s&&ht.forEach(function(ZT){return r(I,ZT)}),kt&&Ti(I,mt),ot}function zt(I,N,L,H){if(typeof L=="object"&&L!==null&&L.type===w&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case S:t:{for(var ot=L.key;N!==null;){if(N.key===ot){if(ot=L.type,ot===w){if(N.tag===7){a(I,N.sibling),H=v(N,L.props.children),H.return=I,I=H;break t}}else if(N.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===rt&&Kp(ot)===N.type){a(I,N.sibling),H=v(N,L.props),$o(H,L),H.return=I,I=H;break t}a(I,N);break}else r(I,N);N=N.sibling}L.type===w?(H=Si(L.props.children,I.mode,H,L.key),H.return=I,I=H):(H=rl(L.type,L.key,L.props,null,I.mode,H),$o(H,L),H.return=I,I=H)}return T(I);case b:t:{for(ot=L.key;N!==null;){if(N.key===ot)if(N.tag===4&&N.stateNode.containerInfo===L.containerInfo&&N.stateNode.implementation===L.implementation){a(I,N.sibling),H=v(N,L.children||[]),H.return=I,I=H;break t}else{a(I,N);break}else r(I,N);N=N.sibling}H=xu(L,I.mode,H),H.return=I,I=H}return T(I);case rt:return ot=L._init,L=ot(L._payload),zt(I,N,L,H)}if(at(L))return vt(I,N,L,H);if(st(L)){if(ot=st(L),typeof ot!="function")throw Error(i(150));return L=ot.call(L),pt(I,N,L,H)}if(typeof L.then=="function")return zt(I,N,wl(L),H);if(L.$$typeof===k)return zt(I,N,cl(I,L),H);Cl(I,L)}return typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint"?(L=""+L,N!==null&&N.tag===6?(a(I,N.sibling),H=v(N,L),H.return=I,I=H):(a(I,N),H=Cu(L,I.mode,H),H.return=I,I=H),T(I)):a(I,N)}return function(I,N,L,H){try{qo=0;var ot=zt(I,N,L,H);return Ss=null,ot}catch(ht){if(ht===Do||ht===fl)throw ht;var Ct=Le(29,ht,null,I.mode);return Ct.lanes=H,Ct.return=I,Ct}finally{}}}var bs=Yp(!0),Wp=Yp(!1),Ke=G(null),an=null;function Kn(s){var r=s.alternate;Z(se,se.current&1),Z(Ke,s),an===null&&(r===null||gs.current!==null||r.memoizedState!==null)&&(an=s)}function Xp(s){if(s.tag===22){if(Z(se,se.current),Z(Ke,s),an===null){var r=s.alternate;r!==null&&r.memoizedState!==null&&(an=s)}}else Yn()}function Yn(){Z(se,se.current),Z(Ke,Ke.current)}function Cn(s){tt(Ke),an===s&&(an=null),tt(se)}var se=G(0);function xl(s){for(var r=s;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Kc(a)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function sc(s,r,a,f){r=s.memoizedState,a=a(f,r),a=a==null?r:g({},r,a),s.memoizedState=a,s.lanes===0&&(s.updateQueue.baseState=a)}var oc={enqueueSetState:function(s,r,a){s=s._reactInternals;var f=Ve(),v=Gn(f);v.payload=r,a!=null&&(v.callback=a),r=Fn(s,v,f),r!==null&&(Be(r,s,f),Lo(r,s,f))},enqueueReplaceState:function(s,r,a){s=s._reactInternals;var f=Ve(),v=Gn(f);v.tag=1,v.payload=r,a!=null&&(v.callback=a),r=Fn(s,v,f),r!==null&&(Be(r,s,f),Lo(r,s,f))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var a=Ve(),f=Gn(a);f.tag=2,r!=null&&(f.callback=r),r=Fn(s,f,a),r!==null&&(Be(r,s,a),Lo(r,s,a))}};function Qp(s,r,a,f,v,y,T){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(f,y,T):r.prototype&&r.prototype.isPureReactComponent?!Co(a,f)||!Co(v,y):!0}function Zp(s,r,a,f){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,f),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,f),r.state!==s&&oc.enqueueReplaceState(r,r.state,null)}function Ri(s,r){var a=r;if("ref"in r){a={};for(var f in r)f!=="ref"&&(a[f]=r[f])}if(s=s.defaultProps){a===r&&(a=g({},a));for(var v in s)a[v]===void 0&&(a[v]=s[v])}return a}var El=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function jp(s){El(s)}function tm(s){console.error(s)}function em(s){El(s)}function Ml(s,r){try{var a=s.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(f){setTimeout(function(){throw f})}}function nm(s,r,a){try{var f=s.onCaughtError;f(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function rc(s,r,a){return a=Gn(a),a.tag=3,a.payload={element:null},a.callback=function(){Ml(s,r)},a}function im(s){return s=Gn(s),s.tag=3,s}function sm(s,r,a,f){var v=a.type.getDerivedStateFromError;if(typeof v=="function"){var y=f.value;s.payload=function(){return v(y)},s.callback=function(){nm(r,a,f)}}var T=a.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(s.callback=function(){nm(r,a,f),typeof v!="function"&&(ti===null?ti=new Set([this]):ti.add(this));var C=f.stack;this.componentDidCatch(f.value,{componentStack:C!==null?C:""})})}function Zb(s,r,a,f,v){if(a.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(r=a.alternate,r!==null&&Ro(r,a,v,!0),a=Ke.current,a!==null){switch(a.tag){case 13:return an===null?kc():a.alternate===null&&Wt===0&&(Wt=3),a.flags&=-257,a.flags|=65536,a.lanes=v,f===Uu?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([f]):r.add(f),Dc(s,f,v)),!1;case 22:return a.flags|=65536,f===Uu?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([f])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([f]):a.add(f)),Dc(s,f,v)),!1}throw Error(i(435,a.tag))}return Dc(s,f,v),kc(),!1}if(kt)return r=Ke.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=v,f!==Au&&(s=Error(i(422),{cause:f}),Ao(He(s,a)))):(f!==Au&&(r=Error(i(423),{cause:f}),Ao(He(r,a))),s=s.current.alternate,s.flags|=65536,v&=-v,s.lanes|=v,f=He(f,a),v=rc(s.stateNode,f,v),Vu(s,v),Wt!==4&&(Wt=2)),!1;var y=Error(i(520),{cause:f});if(y=He(y,a),Wo===null?Wo=[y]:Wo.push(y),Wt!==4&&(Wt=2),r===null)return!0;f=He(f,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,s=v&-v,a.lanes|=s,s=rc(a.stateNode,f,s),Vu(a,s),!1;case 1:if(r=a.type,y=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ti===null||!ti.has(y))))return a.flags|=65536,v&=-v,a.lanes|=v,v=im(v),sm(v,s,a,f),Vu(a,v),!1}a=a.return}while(a!==null);return!1}var om=Error(i(461)),ae=!1;function de(s,r,a,f){r.child=s===null?Wp(r,null,a,f):bs(r,s.child,a,f)}function rm(s,r,a,f,v){a=a.render;var y=r.ref;if("ref"in f){var T={};for(var C in f)C!=="ref"&&(T[C]=f[C])}else T=f;return Ei(r),f=Hu(s,r,a,T,y,v),C=Gu(),s!==null&&!ae?(Fu(s,r,v),xn(s,r,v)):(kt&&C&&Eu(r),r.flags|=1,de(s,r,f,v),r.child)}function lm(s,r,a,f,v){if(s===null){var y=a.type;return typeof y=="function"&&!wu(y)&&y.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=y,am(s,r,y,f,v)):(s=rl(a.type,null,f,r,r.mode,v),s.ref=r.ref,s.return=r,r.child=s)}if(y=s.child,!pc(s,v)){var T=y.memoizedProps;if(a=a.compare,a=a!==null?a:Co,a(T,f)&&s.ref===r.ref)return xn(s,r,v)}return r.flags|=1,s=yn(y,f),s.ref=r.ref,s.return=r,r.child=s}function am(s,r,a,f,v){if(s!==null){var y=s.memoizedProps;if(Co(y,f)&&s.ref===r.ref)if(ae=!1,r.pendingProps=f=y,pc(s,v))(s.flags&131072)!==0&&(ae=!0);else return r.lanes=s.lanes,xn(s,r,v)}return lc(s,r,a,f,v)}function um(s,r,a){var f=r.pendingProps,v=f.children,y=s!==null?s.memoizedState:null;if(f.mode==="hidden"){if((r.flags&128)!==0){if(f=y!==null?y.baseLanes|a:a,s!==null){for(v=r.child=s.child,y=0;v!==null;)y=y|v.lanes|v.childLanes,v=v.sibling;r.childLanes=y&~f}else r.childLanes=0,r.child=null;return cm(s,r,f,a)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},s!==null&&hl(r,y!==null?y.cachePool:null),y!==null?ap(r,y):Ou(),Xp(r);else return r.lanes=r.childLanes=536870912,cm(s,r,y!==null?y.baseLanes|a:a,a)}else y!==null?(hl(r,y.cachePool),ap(r,y),Yn(),r.memoizedState=null):(s!==null&&hl(r,null),Ou(),Yn());return de(s,r,v,a),r.child}function cm(s,r,a,f){var v=Lu();return v=v===null?null:{parent:ie._currentValue,pool:v},r.memoizedState={baseLanes:a,cachePool:v},s!==null&&hl(r,null),Ou(),Xp(r),s!==null&&Ro(s,r,f,!0),null}function Al(s,r){var a=r.ref;if(a===null)s!==null&&s.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(s===null||s.ref!==a)&&(r.flags|=4194816)}}function lc(s,r,a,f,v){return Ei(r),a=Hu(s,r,a,f,void 0,v),f=Gu(),s!==null&&!ae?(Fu(s,r,v),xn(s,r,v)):(kt&&f&&Eu(r),r.flags|=1,de(s,r,a,v),r.child)}function hm(s,r,a,f,v,y){return Ei(r),r.updateQueue=null,a=cp(r,f,a,v),up(s),f=Gu(),s!==null&&!ae?(Fu(s,r,y),xn(s,r,y)):(kt&&f&&Eu(r),r.flags|=1,de(s,r,a,y),r.child)}function fm(s,r,a,f,v){if(Ei(r),r.stateNode===null){var y=hs,T=a.contextType;typeof T=="object"&&T!==null&&(y=ye(T)),y=new a(f,y),r.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=oc,r.stateNode=y,y._reactInternals=r,y=r.stateNode,y.props=f,y.state=r.memoizedState,y.refs={},Pu(r),T=a.contextType,y.context=typeof T=="object"&&T!==null?ye(T):hs,y.state=r.memoizedState,T=a.getDerivedStateFromProps,typeof T=="function"&&(sc(r,a,T,f),y.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(T=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),T!==y.state&&oc.enqueueReplaceState(y,y.state,null),Po(r,f,y,v),Uo(),y.state=r.memoizedState),typeof y.componentDidMount=="function"&&(r.flags|=4194308),f=!0}else if(s===null){y=r.stateNode;var C=r.memoizedProps,A=Ri(a,C);y.props=A;var P=y.context,$=a.contextType;T=hs,typeof $=="object"&&$!==null&&(T=ye($));var F=a.getDerivedStateFromProps;$=typeof F=="function"||typeof y.getSnapshotBeforeUpdate=="function",C=r.pendingProps!==C,$||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(C||P!==T)&&Zp(r,y,f,T),Hn=!1;var z=r.memoizedState;y.state=z,Po(r,f,y,v),Uo(),P=r.memoizedState,C||z!==P||Hn?(typeof F=="function"&&(sc(r,a,F,f),P=r.memoizedState),(A=Hn||Qp(r,a,A,f,z,P,T))?($||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(r.flags|=4194308)):(typeof y.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=f,r.memoizedState=P),y.props=f,y.state=P,y.context=T,f=A):(typeof y.componentDidMount=="function"&&(r.flags|=4194308),f=!1)}else{y=r.stateNode,zu(s,r),T=r.memoizedProps,$=Ri(a,T),y.props=$,F=r.pendingProps,z=y.context,P=a.contextType,A=hs,typeof P=="object"&&P!==null&&(A=ye(P)),C=a.getDerivedStateFromProps,(P=typeof C=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(T!==F||z!==A)&&Zp(r,y,f,A),Hn=!1,z=r.memoizedState,y.state=z,Po(r,f,y,v),Uo();var O=r.memoizedState;T!==F||z!==O||Hn||s!==null&&s.dependencies!==null&&ul(s.dependencies)?(typeof C=="function"&&(sc(r,a,C,f),O=r.memoizedState),($=Hn||Qp(r,a,$,f,z,O,A)||s!==null&&s.dependencies!==null&&ul(s.dependencies))?(P||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(f,O,A),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(f,O,A)),typeof y.componentDidUpdate=="function"&&(r.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof y.componentDidUpdate!="function"||T===s.memoizedProps&&z===s.memoizedState||(r.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===s.memoizedProps&&z===s.memoizedState||(r.flags|=1024),r.memoizedProps=f,r.memoizedState=O),y.props=f,y.state=O,y.context=A,f=$):(typeof y.componentDidUpdate!="function"||T===s.memoizedProps&&z===s.memoizedState||(r.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===s.memoizedProps&&z===s.memoizedState||(r.flags|=1024),f=!1)}return y=f,Al(s,r),f=(r.flags&128)!==0,y||f?(y=r.stateNode,a=f&&typeof a.getDerivedStateFromError!="function"?null:y.render(),r.flags|=1,s!==null&&f?(r.child=bs(r,s.child,null,v),r.child=bs(r,null,a,v)):de(s,r,a,v),r.memoizedState=y.state,s=r.child):s=xn(s,r,v),s}function dm(s,r,a,f){return Mo(),r.flags|=256,de(s,r,a,f),r.child}var ac={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function uc(s){return{baseLanes:s,cachePool:tp()}}function cc(s,r,a){return s=s!==null?s.childLanes&~a:0,r&&(s|=Ye),s}function pm(s,r,a){var f=r.pendingProps,v=!1,y=(r.flags&128)!==0,T;if((T=y)||(T=s!==null&&s.memoizedState===null?!1:(se.current&2)!==0),T&&(v=!0,r.flags&=-129),T=(r.flags&32)!==0,r.flags&=-33,s===null){if(kt){if(v?Kn(r):Yn(),kt){var C=Yt,A;if(A=C){t:{for(A=C,C=ln;A.nodeType!==8;){if(!C){C=null;break t}if(A=tn(A.nextSibling),A===null){C=null;break t}}C=A}C!==null?(r.memoizedState={dehydrated:C,treeContext:bi!==null?{id:_n,overflow:Sn}:null,retryLane:536870912,hydrationErrors:null},A=Le(18,null,null,0),A.stateNode=C,A.return=r,r.child=A,Te=r,Yt=null,A=!0):A=!1}A||Ci(r)}if(C=r.memoizedState,C!==null&&(C=C.dehydrated,C!==null))return Kc(C)?r.lanes=32:r.lanes=536870912,null;Cn(r)}return C=f.children,f=f.fallback,v?(Yn(),v=r.mode,C=Rl({mode:"hidden",children:C},v),f=Si(f,v,a,null),C.return=r,f.return=r,C.sibling=f,r.child=C,v=r.child,v.memoizedState=uc(a),v.childLanes=cc(s,T,a),r.memoizedState=ac,f):(Kn(r),hc(r,C))}if(A=s.memoizedState,A!==null&&(C=A.dehydrated,C!==null)){if(y)r.flags&256?(Kn(r),r.flags&=-257,r=fc(s,r,a)):r.memoizedState!==null?(Yn(),r.child=s.child,r.flags|=128,r=null):(Yn(),v=f.fallback,C=r.mode,f=Rl({mode:"visible",children:f.children},C),v=Si(v,C,a,null),v.flags|=2,f.return=r,v.return=r,f.sibling=v,r.child=f,bs(r,s.child,null,a),f=r.child,f.memoizedState=uc(a),f.childLanes=cc(s,T,a),r.memoizedState=ac,r=v);else if(Kn(r),Kc(C)){if(T=C.nextSibling&&C.nextSibling.dataset,T)var P=T.dgst;T=P,f=Error(i(419)),f.stack="",f.digest=T,Ao({value:f,source:null,stack:null}),r=fc(s,r,a)}else if(ae||Ro(s,r,a,!1),T=(a&s.childLanes)!==0,ae||T){if(T=Ot,T!==null&&(f=a&-a,f=(f&42)!==0?1:Ya(f),f=(f&(T.suspendedLanes|a))!==0?0:f,f!==0&&f!==A.retryLane))throw A.retryLane=f,cs(s,f),Be(T,s,f),om;C.data==="$?"||kc(),r=fc(s,r,a)}else C.data==="$?"?(r.flags|=192,r.child=s.child,r=null):(s=A.treeContext,Yt=tn(C.nextSibling),Te=r,kt=!0,wi=null,ln=!1,s!==null&&(Fe[Je++]=_n,Fe[Je++]=Sn,Fe[Je++]=bi,_n=s.id,Sn=s.overflow,bi=r),r=hc(r,f.children),r.flags|=4096);return r}return v?(Yn(),v=f.fallback,C=r.mode,A=s.child,P=A.sibling,f=yn(A,{mode:"hidden",children:f.children}),f.subtreeFlags=A.subtreeFlags&65011712,P!==null?v=yn(P,v):(v=Si(v,C,a,null),v.flags|=2),v.return=r,f.return=r,f.sibling=v,r.child=f,f=v,v=r.child,C=s.child.memoizedState,C===null?C=uc(a):(A=C.cachePool,A!==null?(P=ie._currentValue,A=A.parent!==P?{parent:P,pool:P}:A):A=tp(),C={baseLanes:C.baseLanes|a,cachePool:A}),v.memoizedState=C,v.childLanes=cc(s,T,a),r.memoizedState=ac,f):(Kn(r),a=s.child,s=a.sibling,a=yn(a,{mode:"visible",children:f.children}),a.return=r,a.sibling=null,s!==null&&(T=r.deletions,T===null?(r.deletions=[s],r.flags|=16):T.push(s)),r.child=a,r.memoizedState=null,a)}function hc(s,r){return r=Rl({mode:"visible",children:r},s.mode),r.return=s,s.child=r}function Rl(s,r){return s=Le(22,s,null,r),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function fc(s,r,a){return bs(r,s.child,null,a),s=hc(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function mm(s,r,a){s.lanes|=r;var f=s.alternate;f!==null&&(f.lanes|=r),ku(s.return,r,a)}function dc(s,r,a,f,v){var y=s.memoizedState;y===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:f,tail:a,tailMode:v}:(y.isBackwards=r,y.rendering=null,y.renderingStartTime=0,y.last=f,y.tail=a,y.tailMode=v)}function gm(s,r,a){var f=r.pendingProps,v=f.revealOrder,y=f.tail;if(de(s,r,f.children,a),f=se.current,(f&2)!==0)f=f&1|2,r.flags|=128;else{if(s!==null&&(s.flags&128)!==0)t:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&mm(s,a,r);else if(s.tag===19)mm(s,a,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break t;for(;s.sibling===null;){if(s.return===null||s.return===r)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}f&=1}switch(Z(se,f),v){case"forwards":for(a=r.child,v=null;a!==null;)s=a.alternate,s!==null&&xl(s)===null&&(v=a),a=a.sibling;a=v,a===null?(v=r.child,r.child=null):(v=a.sibling,a.sibling=null),dc(r,!1,v,a,y);break;case"backwards":for(a=null,v=r.child,r.child=null;v!==null;){if(s=v.alternate,s!==null&&xl(s)===null){r.child=v;break}s=v.sibling,v.sibling=a,a=v,v=s}dc(r,!0,a,null,y);break;case"together":dc(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function xn(s,r,a){if(s!==null&&(r.dependencies=s.dependencies),jn|=r.lanes,(a&r.childLanes)===0)if(s!==null){if(Ro(s,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(s!==null&&r.child!==s.child)throw Error(i(153));if(r.child!==null){for(s=r.child,a=yn(s,s.pendingProps),r.child=a,a.return=r;s.sibling!==null;)s=s.sibling,a=a.sibling=yn(s,s.pendingProps),a.return=r;a.sibling=null}return r.child}function pc(s,r){return(s.lanes&r)!==0?!0:(s=s.dependencies,!!(s!==null&&ul(s)))}function jb(s,r,a){switch(r.tag){case 3:ft(r,r.stateNode.containerInfo),$n(r,ie,s.memoizedState.cache),Mo();break;case 27:case 5:ne(r);break;case 4:ft(r,r.stateNode.containerInfo);break;case 10:$n(r,r.type,r.memoizedProps.value);break;case 13:var f=r.memoizedState;if(f!==null)return f.dehydrated!==null?(Kn(r),r.flags|=128,null):(a&r.child.childLanes)!==0?pm(s,r,a):(Kn(r),s=xn(s,r,a),s!==null?s.sibling:null);Kn(r);break;case 19:var v=(s.flags&128)!==0;if(f=(a&r.childLanes)!==0,f||(Ro(s,r,a,!1),f=(a&r.childLanes)!==0),v){if(f)return gm(s,r,a);r.flags|=128}if(v=r.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),Z(se,se.current),f)break;return null;case 22:case 23:return r.lanes=0,um(s,r,a);case 24:$n(r,ie,s.memoizedState.cache)}return xn(s,r,a)}function vm(s,r,a){if(s!==null)if(s.memoizedProps!==r.pendingProps)ae=!0;else{if(!pc(s,a)&&(r.flags&128)===0)return ae=!1,jb(s,r,a);ae=(s.flags&131072)!==0}else ae=!1,kt&&(r.flags&1048576)!==0&&Kd(r,al,r.index);switch(r.lanes=0,r.tag){case 16:t:{s=r.pendingProps;var f=r.elementType,v=f._init;if(f=v(f._payload),r.type=f,typeof f=="function")wu(f)?(s=Ri(f,s),r.tag=1,r=fm(null,r,f,s,a)):(r.tag=0,r=lc(null,r,f,s,a));else{if(f!=null){if(v=f.$$typeof,v===V){r.tag=11,r=rm(null,r,f,s,a);break t}else if(v===W){r.tag=14,r=lm(null,r,f,s,a);break t}}throw r=dt(f)||f,Error(i(306,r,""))}}return r;case 0:return lc(s,r,r.type,r.pendingProps,a);case 1:return f=r.type,v=Ri(f,r.pendingProps),fm(s,r,f,v,a);case 3:t:{if(ft(r,r.stateNode.containerInfo),s===null)throw Error(i(387));f=r.pendingProps;var y=r.memoizedState;v=y.element,zu(s,r),Po(r,f,null,a);var T=r.memoizedState;if(f=T.cache,$n(r,ie,f),f!==y.cache&&Nu(r,[ie],a,!0),Uo(),f=T.element,y.isDehydrated)if(y={element:f,isDehydrated:!1,cache:T.cache},r.updateQueue.baseState=y,r.memoizedState=y,r.flags&256){r=dm(s,r,f,a);break t}else if(f!==v){v=He(Error(i(424)),r),Ao(v),r=dm(s,r,f,a);break t}else{switch(s=r.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Yt=tn(s.firstChild),Te=r,kt=!0,wi=null,ln=!0,a=Wp(r,null,f,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Mo(),f===v){r=xn(s,r,a);break t}de(s,r,f,a)}r=r.child}return r;case 26:return Al(s,r),s===null?(a=bg(r.type,null,r.pendingProps,null))?r.memoizedState=a:kt||(a=r.type,s=r.pendingProps,f=Hl(it.current).createElement(a),f[ve]=r,f[Ce]=s,me(f,a,s),le(f),r.stateNode=f):r.memoizedState=bg(r.type,s.memoizedProps,r.pendingProps,s.memoizedState),null;case 27:return ne(r),s===null&&kt&&(f=r.stateNode=yg(r.type,r.pendingProps,it.current),Te=r,ln=!0,v=Yt,ii(r.type)?(Yc=v,Yt=tn(f.firstChild)):Yt=v),de(s,r,r.pendingProps.children,a),Al(s,r),s===null&&(r.flags|=4194304),r.child;case 5:return s===null&&kt&&((v=f=Yt)&&(f=MT(f,r.type,r.pendingProps,ln),f!==null?(r.stateNode=f,Te=r,Yt=tn(f.firstChild),ln=!1,v=!0):v=!1),v||Ci(r)),ne(r),v=r.type,y=r.pendingProps,T=s!==null?s.memoizedProps:null,f=y.children,Gc(v,y)?f=null:T!==null&&Gc(v,T)&&(r.flags|=32),r.memoizedState!==null&&(v=Hu(s,r,Fb,null,null,a),sr._currentValue=v),Al(s,r),de(s,r,f,a),r.child;case 6:return s===null&&kt&&((s=a=Yt)&&(a=AT(a,r.pendingProps,ln),a!==null?(r.stateNode=a,Te=r,Yt=null,s=!0):s=!1),s||Ci(r)),null;case 13:return pm(s,r,a);case 4:return ft(r,r.stateNode.containerInfo),f=r.pendingProps,s===null?r.child=bs(r,null,f,a):de(s,r,f,a),r.child;case 11:return rm(s,r,r.type,r.pendingProps,a);case 7:return de(s,r,r.pendingProps,a),r.child;case 8:return de(s,r,r.pendingProps.children,a),r.child;case 12:return de(s,r,r.pendingProps.children,a),r.child;case 10:return f=r.pendingProps,$n(r,r.type,f.value),de(s,r,f.children,a),r.child;case 9:return v=r.type._context,f=r.pendingProps.children,Ei(r),v=ye(v),f=f(v),r.flags|=1,de(s,r,f,a),r.child;case 14:return lm(s,r,r.type,r.pendingProps,a);case 15:return am(s,r,r.type,r.pendingProps,a);case 19:return gm(s,r,a);case 31:return f=r.pendingProps,a=r.mode,f={mode:f.mode,children:f.children},s===null?(a=Rl(f,a),a.ref=r.ref,r.child=a,a.return=r,r=a):(a=yn(s.child,f),a.ref=r.ref,r.child=a,a.return=r,r=a),r;case 22:return um(s,r,a);case 24:return Ei(r),f=ye(ie),s===null?(v=Lu(),v===null&&(v=Ot,y=Du(),v.pooledCache=y,y.refCount++,y!==null&&(v.pooledCacheLanes|=a),v=y),r.memoizedState={parent:f,cache:v},Pu(r),$n(r,ie,v)):((s.lanes&a)!==0&&(zu(s,r),Po(r,null,null,a),Uo()),v=s.memoizedState,y=r.memoizedState,v.parent!==f?(v={parent:f,cache:f},r.memoizedState=v,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=v),$n(r,ie,f)):(f=y.cache,$n(r,ie,f),f!==v.cache&&Nu(r,[ie],a,!0))),de(s,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function En(s){s.flags|=4}function ym(s,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Eg(r)){if(r=Ke.current,r!==null&&((At&4194048)===At?an!==null:(At&62914560)!==At&&(At&536870912)===0||r!==an))throw Io=Uu,ep;s.flags|=8192}}function kl(s,r){r!==null&&(s.flags|=4),s.flags&16384&&(r=s.tag!==22?Xf():536870912,s.lanes|=r,xs|=r)}function Ho(s,r){if(!kt)switch(s.tailMode){case"hidden":r=s.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?s.tail=null:a.sibling=null;break;case"collapsed":a=s.tail;for(var f=null;a!==null;)a.alternate!==null&&(f=a),a=a.sibling;f===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:f.sibling=null}}function Kt(s){var r=s.alternate!==null&&s.alternate.child===s.child,a=0,f=0;if(r)for(var v=s.child;v!==null;)a|=v.lanes|v.childLanes,f|=v.subtreeFlags&65011712,f|=v.flags&65011712,v.return=s,v=v.sibling;else for(v=s.child;v!==null;)a|=v.lanes|v.childLanes,f|=v.subtreeFlags,f|=v.flags,v.return=s,v=v.sibling;return s.subtreeFlags|=f,s.childLanes=a,r}function tT(s,r,a){var f=r.pendingProps;switch(Mu(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(r),null;case 1:return Kt(r),null;case 3:return a=r.stateNode,f=null,s!==null&&(f=s.memoizedState.cache),r.memoizedState.cache!==f&&(r.flags|=2048),Tn(ie),yt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(s===null||s.child===null)&&(Eo(r)?En(r):s===null||s.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Xd())),Kt(r),null;case 26:return a=r.memoizedState,s===null?(En(r),a!==null?(Kt(r),ym(r,a)):(Kt(r),r.flags&=-16777217)):a?a!==s.memoizedState?(En(r),Kt(r),ym(r,a)):(Kt(r),r.flags&=-16777217):(s.memoizedProps!==f&&En(r),Kt(r),r.flags&=-16777217),null;case 27:Ht(r),a=it.current;var v=r.type;if(s!==null&&r.stateNode!=null)s.memoizedProps!==f&&En(r);else{if(!f){if(r.stateNode===null)throw Error(i(166));return Kt(r),null}s=ct.current,Eo(r)?Yd(r):(s=yg(v,f,a),r.stateNode=s,En(r))}return Kt(r),null;case 5:if(Ht(r),a=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==f&&En(r);else{if(!f){if(r.stateNode===null)throw Error(i(166));return Kt(r),null}if(s=ct.current,Eo(r))Yd(r);else{switch(v=Hl(it.current),s){case 1:s=v.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:s=v.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":s=v.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":s=v.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":s=v.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof f.is=="string"?v.createElement("select",{is:f.is}):v.createElement("select"),f.multiple?s.multiple=!0:f.size&&(s.size=f.size);break;default:s=typeof f.is=="string"?v.createElement(a,{is:f.is}):v.createElement(a)}}s[ve]=r,s[Ce]=f;t:for(v=r.child;v!==null;){if(v.tag===5||v.tag===6)s.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===r)break t;for(;v.sibling===null;){if(v.return===null||v.return===r)break t;v=v.return}v.sibling.return=v.return,v=v.sibling}r.stateNode=s;t:switch(me(s,a,f),a){case"button":case"input":case"select":case"textarea":s=!!f.autoFocus;break t;case"img":s=!0;break t;default:s=!1}s&&En(r)}}return Kt(r),r.flags&=-16777217,null;case 6:if(s&&r.stateNode!=null)s.memoizedProps!==f&&En(r);else{if(typeof f!="string"&&r.stateNode===null)throw Error(i(166));if(s=it.current,Eo(r)){if(s=r.stateNode,a=r.memoizedProps,f=null,v=Te,v!==null)switch(v.tag){case 27:case 5:f=v.memoizedProps}s[ve]=r,s=!!(s.nodeValue===a||f!==null&&f.suppressHydrationWarning===!0||hg(s.nodeValue,a)),s||Ci(r)}else s=Hl(s).createTextNode(f),s[ve]=r,r.stateNode=s}return Kt(r),null;case 13:if(f=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(v=Eo(r),f!==null&&f.dehydrated!==null){if(s===null){if(!v)throw Error(i(318));if(v=r.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(i(317));v[ve]=r}else Mo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Kt(r),v=!1}else v=Xd(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=v),v=!0;if(!v)return r.flags&256?(Cn(r),r):(Cn(r),null)}if(Cn(r),(r.flags&128)!==0)return r.lanes=a,r;if(a=f!==null,s=s!==null&&s.memoizedState!==null,a){f=r.child,v=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(v=f.alternate.memoizedState.cachePool.pool);var y=null;f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(y=f.memoizedState.cachePool.pool),y!==v&&(f.flags|=2048)}return a!==s&&a&&(r.child.flags|=8192),kl(r,r.updateQueue),Kt(r),null;case 4:return yt(),s===null&&Bc(r.stateNode.containerInfo),Kt(r),null;case 10:return Tn(r.type),Kt(r),null;case 19:if(tt(se),v=r.memoizedState,v===null)return Kt(r),null;if(f=(r.flags&128)!==0,y=v.rendering,y===null)if(f)Ho(v,!1);else{if(Wt!==0||s!==null&&(s.flags&128)!==0)for(s=r.child;s!==null;){if(y=xl(s),y!==null){for(r.flags|=128,Ho(v,!1),s=y.updateQueue,r.updateQueue=s,kl(r,s),r.subtreeFlags=0,s=a,a=r.child;a!==null;)Jd(a,s),a=a.sibling;return Z(se,se.current&1|2),r.child}s=s.sibling}v.tail!==null&&rn()>Il&&(r.flags|=128,f=!0,Ho(v,!1),r.lanes=4194304)}else{if(!f)if(s=xl(y),s!==null){if(r.flags|=128,f=!0,s=s.updateQueue,r.updateQueue=s,kl(r,s),Ho(v,!0),v.tail===null&&v.tailMode==="hidden"&&!y.alternate&&!kt)return Kt(r),null}else 2*rn()-v.renderingStartTime>Il&&a!==536870912&&(r.flags|=128,f=!0,Ho(v,!1),r.lanes=4194304);v.isBackwards?(y.sibling=r.child,r.child=y):(s=v.last,s!==null?s.sibling=y:r.child=y,v.last=y)}return v.tail!==null?(r=v.tail,v.rendering=r,v.tail=r.sibling,v.renderingStartTime=rn(),r.sibling=null,s=se.current,Z(se,f?s&1|2:s&1),r):(Kt(r),null);case 22:case 23:return Cn(r),qu(),f=r.memoizedState!==null,s!==null?s.memoizedState!==null!==f&&(r.flags|=8192):f&&(r.flags|=8192),f?(a&536870912)!==0&&(r.flags&128)===0&&(Kt(r),r.subtreeFlags&6&&(r.flags|=8192)):Kt(r),a=r.updateQueue,a!==null&&kl(r,a.retryQueue),a=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(a=s.memoizedState.cachePool.pool),f=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(f=r.memoizedState.cachePool.pool),f!==a&&(r.flags|=2048),s!==null&&tt(Mi),null;case 24:return a=null,s!==null&&(a=s.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),Tn(ie),Kt(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function eT(s,r){switch(Mu(r),r.tag){case 1:return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return Tn(ie),yt(),s=r.flags,(s&65536)!==0&&(s&128)===0?(r.flags=s&-65537|128,r):null;case 26:case 27:case 5:return Ht(r),null;case 13:if(Cn(r),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(i(340));Mo()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return tt(se),null;case 4:return yt(),null;case 10:return Tn(r.type),null;case 22:case 23:return Cn(r),qu(),s!==null&&tt(Mi),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 24:return Tn(ie),null;case 25:return null;default:return null}}function _m(s,r){switch(Mu(r),r.tag){case 3:Tn(ie),yt();break;case 26:case 27:case 5:Ht(r);break;case 4:yt();break;case 13:Cn(r);break;case 19:tt(se);break;case 10:Tn(r.type);break;case 22:case 23:Cn(r),qu(),s!==null&&tt(Mi);break;case 24:Tn(ie)}}function Go(s,r){try{var a=r.updateQueue,f=a!==null?a.lastEffect:null;if(f!==null){var v=f.next;a=v;do{if((a.tag&s)===s){f=void 0;var y=a.create,T=a.inst;f=y(),T.destroy=f}a=a.next}while(a!==v)}}catch(C){Bt(r,r.return,C)}}function Wn(s,r,a){try{var f=r.updateQueue,v=f!==null?f.lastEffect:null;if(v!==null){var y=v.next;f=y;do{if((f.tag&s)===s){var T=f.inst,C=T.destroy;if(C!==void 0){T.destroy=void 0,v=r;var A=a,P=C;try{P()}catch($){Bt(v,A,$)}}}f=f.next}while(f!==y)}}catch($){Bt(r,r.return,$)}}function Sm(s){var r=s.updateQueue;if(r!==null){var a=s.stateNode;try{lp(r,a)}catch(f){Bt(s,s.return,f)}}}function bm(s,r,a){a.props=Ri(s.type,s.memoizedProps),a.state=s.memoizedState;try{a.componentWillUnmount()}catch(f){Bt(s,r,f)}}function Fo(s,r){try{var a=s.ref;if(a!==null){switch(s.tag){case 26:case 27:case 5:var f=s.stateNode;break;case 30:f=s.stateNode;break;default:f=s.stateNode}typeof a=="function"?s.refCleanup=a(f):a.current=f}}catch(v){Bt(s,r,v)}}function un(s,r){var a=s.ref,f=s.refCleanup;if(a!==null)if(typeof f=="function")try{f()}catch(v){Bt(s,r,v)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(v){Bt(s,r,v)}else a.current=null}function Tm(s){var r=s.type,a=s.memoizedProps,f=s.stateNode;try{t:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&f.focus();break t;case"img":a.src?f.src=a.src:a.srcSet&&(f.srcset=a.srcSet)}}catch(v){Bt(s,s.return,v)}}function mc(s,r,a){try{var f=s.stateNode;TT(f,s.type,a,r),f[Ce]=r}catch(v){Bt(s,s.return,v)}}function wm(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&ii(s.type)||s.tag===4}function gc(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||wm(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&ii(s.type)||s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function vc(s,r,a){var f=s.tag;if(f===5||f===6)s=s.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(s,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(s),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=$l));else if(f!==4&&(f===27&&ii(s.type)&&(a=s.stateNode,r=null),s=s.child,s!==null))for(vc(s,r,a),s=s.sibling;s!==null;)vc(s,r,a),s=s.sibling}function Nl(s,r,a){var f=s.tag;if(f===5||f===6)s=s.stateNode,r?a.insertBefore(s,r):a.appendChild(s);else if(f!==4&&(f===27&&ii(s.type)&&(a=s.stateNode),s=s.child,s!==null))for(Nl(s,r,a),s=s.sibling;s!==null;)Nl(s,r,a),s=s.sibling}function Cm(s){var r=s.stateNode,a=s.memoizedProps;try{for(var f=s.type,v=r.attributes;v.length;)r.removeAttributeNode(v[0]);me(r,f,a),r[ve]=s,r[Ce]=a}catch(y){Bt(s,s.return,y)}}var Mn=!1,Qt=!1,yc=!1,xm=typeof WeakSet=="function"?WeakSet:Set,ue=null;function nT(s,r){if(s=s.containerInfo,$c=Wl,s=Pd(s),gu(s)){if("selectionStart"in s)var a={start:s.selectionStart,end:s.selectionEnd};else t:{a=(a=s.ownerDocument)&&a.defaultView||window;var f=a.getSelection&&a.getSelection();if(f&&f.rangeCount!==0){a=f.anchorNode;var v=f.anchorOffset,y=f.focusNode;f=f.focusOffset;try{a.nodeType,y.nodeType}catch{a=null;break t}var T=0,C=-1,A=-1,P=0,$=0,F=s,z=null;e:for(;;){for(var O;F!==a||v!==0&&F.nodeType!==3||(C=T+v),F!==y||f!==0&&F.nodeType!==3||(A=T+f),F.nodeType===3&&(T+=F.nodeValue.length),(O=F.firstChild)!==null;)z=F,F=O;for(;;){if(F===s)break e;if(z===a&&++P===v&&(C=T),z===y&&++$===f&&(A=T),(O=F.nextSibling)!==null)break;F=z,z=F.parentNode}F=O}a=C===-1||A===-1?null:{start:C,end:A}}else a=null}a=a||{start:0,end:0}}else a=null;for(Hc={focusedElem:s,selectionRange:a},Wl=!1,ue=r;ue!==null;)if(r=ue,s=r.child,(r.subtreeFlags&1024)!==0&&s!==null)s.return=r,ue=s;else for(;ue!==null;){switch(r=ue,y=r.alternate,s=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&y!==null){s=void 0,a=r,v=y.memoizedProps,y=y.memoizedState,f=a.stateNode;try{var vt=Ri(a.type,v,a.elementType===a.type);s=f.getSnapshotBeforeUpdate(vt,y),f.__reactInternalSnapshotBeforeUpdate=s}catch(pt){Bt(a,a.return,pt)}}break;case 3:if((s&1024)!==0){if(s=r.stateNode.containerInfo,a=s.nodeType,a===9)Jc(s);else if(a===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Jc(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=r.sibling,s!==null){s.return=r.return,ue=s;break}ue=r.return}}function Em(s,r,a){var f=a.flags;switch(a.tag){case 0:case 11:case 15:Xn(s,a),f&4&&Go(5,a);break;case 1:if(Xn(s,a),f&4)if(s=a.stateNode,r===null)try{s.componentDidMount()}catch(T){Bt(a,a.return,T)}else{var v=Ri(a.type,r.memoizedProps);r=r.memoizedState;try{s.componentDidUpdate(v,r,s.__reactInternalSnapshotBeforeUpdate)}catch(T){Bt(a,a.return,T)}}f&64&&Sm(a),f&512&&Fo(a,a.return);break;case 3:if(Xn(s,a),f&64&&(s=a.updateQueue,s!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{lp(s,r)}catch(T){Bt(a,a.return,T)}}break;case 27:r===null&&f&4&&Cm(a);case 26:case 5:Xn(s,a),r===null&&f&4&&Tm(a),f&512&&Fo(a,a.return);break;case 12:Xn(s,a);break;case 13:Xn(s,a),f&4&&Rm(s,a),f&64&&(s=a.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(a=hT.bind(null,a),RT(s,a))));break;case 22:if(f=a.memoizedState!==null||Mn,!f){r=r!==null&&r.memoizedState!==null||Qt,v=Mn;var y=Qt;Mn=f,(Qt=r)&&!y?Qn(s,a,(a.subtreeFlags&8772)!==0):Xn(s,a),Mn=v,Qt=y}break;case 30:break;default:Xn(s,a)}}function Mm(s){var r=s.alternate;r!==null&&(s.alternate=null,Mm(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&Qa(r)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Jt=null,Me=!1;function An(s,r,a){for(a=a.child;a!==null;)Am(s,r,a),a=a.sibling}function Am(s,r,a){if(Ne&&typeof Ne.onCommitFiberUnmount=="function")try{Ne.onCommitFiberUnmount(ho,a)}catch{}switch(a.tag){case 26:Qt||un(a,r),An(s,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Qt||un(a,r);var f=Jt,v=Me;ii(a.type)&&(Jt=a.stateNode,Me=!1),An(s,r,a),tr(a.stateNode),Jt=f,Me=v;break;case 5:Qt||un(a,r);case 6:if(f=Jt,v=Me,Jt=null,An(s,r,a),Jt=f,Me=v,Jt!==null)if(Me)try{(Jt.nodeType===9?Jt.body:Jt.nodeName==="HTML"?Jt.ownerDocument.body:Jt).removeChild(a.stateNode)}catch(y){Bt(a,r,y)}else try{Jt.removeChild(a.stateNode)}catch(y){Bt(a,r,y)}break;case 18:Jt!==null&&(Me?(s=Jt,gg(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,a.stateNode),ar(s)):gg(Jt,a.stateNode));break;case 4:f=Jt,v=Me,Jt=a.stateNode.containerInfo,Me=!0,An(s,r,a),Jt=f,Me=v;break;case 0:case 11:case 14:case 15:Qt||Wn(2,a,r),Qt||Wn(4,a,r),An(s,r,a);break;case 1:Qt||(un(a,r),f=a.stateNode,typeof f.componentWillUnmount=="function"&&bm(a,r,f)),An(s,r,a);break;case 21:An(s,r,a);break;case 22:Qt=(f=Qt)||a.memoizedState!==null,An(s,r,a),Qt=f;break;default:An(s,r,a)}}function Rm(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{ar(s)}catch(a){Bt(r,r.return,a)}}function iT(s){switch(s.tag){case 13:case 19:var r=s.stateNode;return r===null&&(r=s.stateNode=new xm),r;case 22:return s=s.stateNode,r=s._retryCache,r===null&&(r=s._retryCache=new xm),r;default:throw Error(i(435,s.tag))}}function _c(s,r){var a=iT(s);r.forEach(function(f){var v=fT.bind(null,s,f);a.has(f)||(a.add(f),f.then(v,v))})}function Ue(s,r){var a=r.deletions;if(a!==null)for(var f=0;f<a.length;f++){var v=a[f],y=s,T=r,C=T;t:for(;C!==null;){switch(C.tag){case 27:if(ii(C.type)){Jt=C.stateNode,Me=!1;break t}break;case 5:Jt=C.stateNode,Me=!1;break t;case 3:case 4:Jt=C.stateNode.containerInfo,Me=!0;break t}C=C.return}if(Jt===null)throw Error(i(160));Am(y,T,v),Jt=null,Me=!1,y=v.alternate,y!==null&&(y.return=null),v.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)km(r,s),r=r.sibling}var je=null;function km(s,r){var a=s.alternate,f=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Ue(r,s),Pe(s),f&4&&(Wn(3,s,s.return),Go(3,s),Wn(5,s,s.return));break;case 1:Ue(r,s),Pe(s),f&512&&(Qt||a===null||un(a,a.return)),f&64&&Mn&&(s=s.updateQueue,s!==null&&(f=s.callbacks,f!==null&&(a=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=a===null?f:a.concat(f))));break;case 26:var v=je;if(Ue(r,s),Pe(s),f&512&&(Qt||a===null||un(a,a.return)),f&4){var y=a!==null?a.memoizedState:null;if(f=s.memoizedState,a===null)if(f===null)if(s.stateNode===null){t:{f=s.type,a=s.memoizedProps,v=v.ownerDocument||v;e:switch(f){case"title":y=v.getElementsByTagName("title")[0],(!y||y[mo]||y[ve]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=v.createElement(f),v.head.insertBefore(y,v.querySelector("head > title"))),me(y,f,a),y[ve]=s,le(y),f=y;break t;case"link":var T=Cg("link","href",v).get(f+(a.href||""));if(T){for(var C=0;C<T.length;C++)if(y=T[C],y.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&y.getAttribute("rel")===(a.rel==null?null:a.rel)&&y.getAttribute("title")===(a.title==null?null:a.title)&&y.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){T.splice(C,1);break e}}y=v.createElement(f),me(y,f,a),v.head.appendChild(y);break;case"meta":if(T=Cg("meta","content",v).get(f+(a.content||""))){for(C=0;C<T.length;C++)if(y=T[C],y.getAttribute("content")===(a.content==null?null:""+a.content)&&y.getAttribute("name")===(a.name==null?null:a.name)&&y.getAttribute("property")===(a.property==null?null:a.property)&&y.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&y.getAttribute("charset")===(a.charSet==null?null:a.charSet)){T.splice(C,1);break e}}y=v.createElement(f),me(y,f,a),v.head.appendChild(y);break;default:throw Error(i(468,f))}y[ve]=s,le(y),f=y}s.stateNode=f}else xg(v,s.type,s.stateNode);else s.stateNode=wg(v,f,s.memoizedProps);else y!==f?(y===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):y.count--,f===null?xg(v,s.type,s.stateNode):wg(v,f,s.memoizedProps)):f===null&&s.stateNode!==null&&mc(s,s.memoizedProps,a.memoizedProps)}break;case 27:Ue(r,s),Pe(s),f&512&&(Qt||a===null||un(a,a.return)),a!==null&&f&4&&mc(s,s.memoizedProps,a.memoizedProps);break;case 5:if(Ue(r,s),Pe(s),f&512&&(Qt||a===null||un(a,a.return)),s.flags&32){v=s.stateNode;try{is(v,"")}catch(O){Bt(s,s.return,O)}}f&4&&s.stateNode!=null&&(v=s.memoizedProps,mc(s,v,a!==null?a.memoizedProps:v)),f&1024&&(yc=!0);break;case 6:if(Ue(r,s),Pe(s),f&4){if(s.stateNode===null)throw Error(i(162));f=s.memoizedProps,a=s.stateNode;try{a.nodeValue=f}catch(O){Bt(s,s.return,O)}}break;case 3:if(Jl=null,v=je,je=Gl(r.containerInfo),Ue(r,s),je=v,Pe(s),f&4&&a!==null&&a.memoizedState.isDehydrated)try{ar(r.containerInfo)}catch(O){Bt(s,s.return,O)}yc&&(yc=!1,Nm(s));break;case 4:f=je,je=Gl(s.stateNode.containerInfo),Ue(r,s),Pe(s),je=f;break;case 12:Ue(r,s),Pe(s);break;case 13:Ue(r,s),Pe(s),s.child.flags&8192&&s.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(xc=rn()),f&4&&(f=s.updateQueue,f!==null&&(s.updateQueue=null,_c(s,f)));break;case 22:v=s.memoizedState!==null;var A=a!==null&&a.memoizedState!==null,P=Mn,$=Qt;if(Mn=P||v,Qt=$||A,Ue(r,s),Qt=$,Mn=P,Pe(s),f&8192)t:for(r=s.stateNode,r._visibility=v?r._visibility&-2:r._visibility|1,v&&(a===null||A||Mn||Qt||ki(s)),a=null,r=s;;){if(r.tag===5||r.tag===26){if(a===null){A=a=r;try{if(y=A.stateNode,v)T=y.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{C=A.stateNode;var F=A.memoizedProps.style,z=F!=null&&F.hasOwnProperty("display")?F.display:null;C.style.display=z==null||typeof z=="boolean"?"":(""+z).trim()}}catch(O){Bt(A,A.return,O)}}}else if(r.tag===6){if(a===null){A=r;try{A.stateNode.nodeValue=v?"":A.memoizedProps}catch(O){Bt(A,A.return,O)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===s)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break t;for(;r.sibling===null;){if(r.return===null||r.return===s)break t;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}f&4&&(f=s.updateQueue,f!==null&&(a=f.retryQueue,a!==null&&(f.retryQueue=null,_c(s,a))));break;case 19:Ue(r,s),Pe(s),f&4&&(f=s.updateQueue,f!==null&&(s.updateQueue=null,_c(s,f)));break;case 30:break;case 21:break;default:Ue(r,s),Pe(s)}}function Pe(s){var r=s.flags;if(r&2){try{for(var a,f=s.return;f!==null;){if(wm(f)){a=f;break}f=f.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var v=a.stateNode,y=gc(s);Nl(s,y,v);break;case 5:var T=a.stateNode;a.flags&32&&(is(T,""),a.flags&=-33);var C=gc(s);Nl(s,C,T);break;case 3:case 4:var A=a.stateNode.containerInfo,P=gc(s);vc(s,P,A);break;default:throw Error(i(161))}}catch($){Bt(s,s.return,$)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function Nm(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var r=s;Nm(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),s=s.sibling}}function Xn(s,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Em(s,r.alternate,r),r=r.sibling}function ki(s){for(s=s.child;s!==null;){var r=s;switch(r.tag){case 0:case 11:case 14:case 15:Wn(4,r,r.return),ki(r);break;case 1:un(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&bm(r,r.return,a),ki(r);break;case 27:tr(r.stateNode);case 26:case 5:un(r,r.return),ki(r);break;case 22:r.memoizedState===null&&ki(r);break;case 30:ki(r);break;default:ki(r)}s=s.sibling}}function Qn(s,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var f=r.alternate,v=s,y=r,T=y.flags;switch(y.tag){case 0:case 11:case 15:Qn(v,y,a),Go(4,y);break;case 1:if(Qn(v,y,a),f=y,v=f.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(P){Bt(f,f.return,P)}if(f=y,v=f.updateQueue,v!==null){var C=f.stateNode;try{var A=v.shared.hiddenCallbacks;if(A!==null)for(v.shared.hiddenCallbacks=null,v=0;v<A.length;v++)rp(A[v],C)}catch(P){Bt(f,f.return,P)}}a&&T&64&&Sm(y),Fo(y,y.return);break;case 27:Cm(y);case 26:case 5:Qn(v,y,a),a&&f===null&&T&4&&Tm(y),Fo(y,y.return);break;case 12:Qn(v,y,a);break;case 13:Qn(v,y,a),a&&T&4&&Rm(v,y);break;case 22:y.memoizedState===null&&Qn(v,y,a),Fo(y,y.return);break;case 30:break;default:Qn(v,y,a)}r=r.sibling}}function Sc(s,r){var a=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(a=s.memoizedState.cachePool.pool),s=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==a&&(s!=null&&s.refCount++,a!=null&&ko(a))}function bc(s,r){s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&ko(s))}function cn(s,r,a,f){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Dm(s,r,a,f),r=r.sibling}function Dm(s,r,a,f){var v=r.flags;switch(r.tag){case 0:case 11:case 15:cn(s,r,a,f),v&2048&&Go(9,r);break;case 1:cn(s,r,a,f);break;case 3:cn(s,r,a,f),v&2048&&(s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&ko(s)));break;case 12:if(v&2048){cn(s,r,a,f),s=r.stateNode;try{var y=r.memoizedProps,T=y.id,C=y.onPostCommit;typeof C=="function"&&C(T,r.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(A){Bt(r,r.return,A)}}else cn(s,r,a,f);break;case 13:cn(s,r,a,f);break;case 23:break;case 22:y=r.stateNode,T=r.alternate,r.memoizedState!==null?y._visibility&2?cn(s,r,a,f):Jo(s,r):y._visibility&2?cn(s,r,a,f):(y._visibility|=2,Ts(s,r,a,f,(r.subtreeFlags&10256)!==0)),v&2048&&Sc(T,r);break;case 24:cn(s,r,a,f),v&2048&&bc(r.alternate,r);break;default:cn(s,r,a,f)}}function Ts(s,r,a,f,v){for(v=v&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var y=s,T=r,C=a,A=f,P=T.flags;switch(T.tag){case 0:case 11:case 15:Ts(y,T,C,A,v),Go(8,T);break;case 23:break;case 22:var $=T.stateNode;T.memoizedState!==null?$._visibility&2?Ts(y,T,C,A,v):Jo(y,T):($._visibility|=2,Ts(y,T,C,A,v)),v&&P&2048&&Sc(T.alternate,T);break;case 24:Ts(y,T,C,A,v),v&&P&2048&&bc(T.alternate,T);break;default:Ts(y,T,C,A,v)}r=r.sibling}}function Jo(s,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=s,f=r,v=f.flags;switch(f.tag){case 22:Jo(a,f),v&2048&&Sc(f.alternate,f);break;case 24:Jo(a,f),v&2048&&bc(f.alternate,f);break;default:Jo(a,f)}r=r.sibling}}var Ko=8192;function ws(s){if(s.subtreeFlags&Ko)for(s=s.child;s!==null;)Im(s),s=s.sibling}function Im(s){switch(s.tag){case 26:ws(s),s.flags&Ko&&s.memoizedState!==null&&$T(je,s.memoizedState,s.memoizedProps);break;case 5:ws(s);break;case 3:case 4:var r=je;je=Gl(s.stateNode.containerInfo),ws(s),je=r;break;case 22:s.memoizedState===null&&(r=s.alternate,r!==null&&r.memoizedState!==null?(r=Ko,Ko=16777216,ws(s),Ko=r):ws(s));break;default:ws(s)}}function Lm(s){var r=s.alternate;if(r!==null&&(s=r.child,s!==null)){r.child=null;do r=s.sibling,s.sibling=null,s=r;while(s!==null)}}function Yo(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var f=r[a];ue=f,Pm(f,s)}Lm(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Um(s),s=s.sibling}function Um(s){switch(s.tag){case 0:case 11:case 15:Yo(s),s.flags&2048&&Wn(9,s,s.return);break;case 3:Yo(s);break;case 12:Yo(s);break;case 22:var r=s.stateNode;s.memoizedState!==null&&r._visibility&2&&(s.return===null||s.return.tag!==13)?(r._visibility&=-3,Dl(s)):Yo(s);break;default:Yo(s)}}function Dl(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var f=r[a];ue=f,Pm(f,s)}Lm(s)}for(s=s.child;s!==null;){switch(r=s,r.tag){case 0:case 11:case 15:Wn(8,r,r.return),Dl(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Dl(r));break;default:Dl(r)}s=s.sibling}}function Pm(s,r){for(;ue!==null;){var a=ue;switch(a.tag){case 0:case 11:case 15:Wn(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var f=a.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:ko(a.memoizedState.cache)}if(f=a.child,f!==null)f.return=a,ue=f;else t:for(a=s;ue!==null;){f=ue;var v=f.sibling,y=f.return;if(Mm(f),f===a){ue=null;break t}if(v!==null){v.return=y,ue=v;break t}ue=y}}}var sT={getCacheForType:function(s){var r=ye(ie),a=r.data.get(s);return a===void 0&&(a=s(),r.data.set(s,a)),a}},oT=typeof WeakMap=="function"?WeakMap:Map,Dt=0,Ot=null,xt=null,At=0,It=0,ze=null,Zn=!1,Cs=!1,Tc=!1,Rn=0,Wt=0,jn=0,Ni=0,wc=0,Ye=0,xs=0,Wo=null,Ae=null,Cc=!1,xc=0,Il=1/0,Ll=null,ti=null,pe=0,ei=null,Es=null,Ms=0,Ec=0,Mc=null,zm=null,Xo=0,Ac=null;function Ve(){if((Dt&2)!==0&&At!==0)return At&-At;if(B.T!==null){var s=ps;return s!==0?s:Uc()}return jf()}function Vm(){Ye===0&&(Ye=(At&536870912)===0||kt?Wf():536870912);var s=Ke.current;return s!==null&&(s.flags|=32),Ye}function Be(s,r,a){(s===Ot&&(It===2||It===9)||s.cancelPendingCommit!==null)&&(As(s,0),ni(s,At,Ye,!1)),po(s,a),((Dt&2)===0||s!==Ot)&&(s===Ot&&((Dt&2)===0&&(Ni|=a),Wt===4&&ni(s,At,Ye,!1)),hn(s))}function Bm(s,r,a){if((Dt&6)!==0)throw Error(i(327));var f=!a&&(r&124)===0&&(r&s.expiredLanes)===0||fo(s,r),v=f?aT(s,r):Nc(s,r,!0),y=f;do{if(v===0){Cs&&!f&&ni(s,r,0,!1);break}else{if(a=s.current.alternate,y&&!rT(a)){v=Nc(s,r,!1),y=!1;continue}if(v===2){if(y=r,s.errorRecoveryDisabledLanes&y)var T=0;else T=s.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){r=T;t:{var C=s;v=Wo;var A=C.current.memoizedState.isDehydrated;if(A&&(As(C,T).flags|=256),T=Nc(C,T,!1),T!==2){if(Tc&&!A){C.errorRecoveryDisabledLanes|=y,Ni|=y,v=4;break t}y=Ae,Ae=v,y!==null&&(Ae===null?Ae=y:Ae.push.apply(Ae,y))}v=T}if(y=!1,v!==2)continue}}if(v===1){As(s,0),ni(s,r,0,!0);break}t:{switch(f=s,y=v,y){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:ni(f,r,Ye,!Zn);break t;case 2:Ae=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(v=xc+300-rn(),10<v)){if(ni(f,r,Ye,!Zn),Fr(f,0,!0)!==0)break t;f.timeoutHandle=pg(Om.bind(null,f,a,Ae,Ll,Cc,r,Ye,Ni,xs,Zn,y,2,-0,0),v);break t}Om(f,a,Ae,Ll,Cc,r,Ye,Ni,xs,Zn,y,0,-0,0)}}break}while(!0);hn(s)}function Om(s,r,a,f,v,y,T,C,A,P,$,F,z,O){if(s.timeoutHandle=-1,F=r.subtreeFlags,(F&8192||(F&16785408)===16785408)&&(ir={stylesheets:null,count:0,unsuspend:qT},Im(r),F=HT(),F!==null)){s.cancelPendingCommit=F(Km.bind(null,s,r,y,a,f,v,T,C,A,$,1,z,O)),ni(s,y,T,!P);return}Km(s,r,y,a,f,v,T,C,A)}function rT(s){for(var r=s;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var f=0;f<a.length;f++){var v=a[f],y=v.getSnapshot;v=v.value;try{if(!Ie(y(),v))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ni(s,r,a,f){r&=~wc,r&=~Ni,s.suspendedLanes|=r,s.pingedLanes&=~r,f&&(s.warmLanes|=r),f=s.expirationTimes;for(var v=r;0<v;){var y=31-De(v),T=1<<y;f[y]=-1,v&=~T}a!==0&&Qf(s,a,r)}function Ul(){return(Dt&6)===0?(Qo(0),!1):!0}function Rc(){if(xt!==null){if(It===0)var s=xt.return;else s=xt,bn=xi=null,Ju(s),Ss=null,qo=0,s=xt;for(;s!==null;)_m(s.alternate,s),s=s.return;xt=null}}function As(s,r){var a=s.timeoutHandle;a!==-1&&(s.timeoutHandle=-1,CT(a)),a=s.cancelPendingCommit,a!==null&&(s.cancelPendingCommit=null,a()),Rc(),Ot=s,xt=a=yn(s.current,null),At=r,It=0,ze=null,Zn=!1,Cs=fo(s,r),Tc=!1,xs=Ye=wc=Ni=jn=Wt=0,Ae=Wo=null,Cc=!1,(r&8)!==0&&(r|=r&32);var f=s.entangledLanes;if(f!==0)for(s=s.entanglements,f&=r;0<f;){var v=31-De(f),y=1<<v;r|=s[v],f&=~y}return Rn=r,il(),a}function qm(s,r){wt=null,B.H=Tl,r===Do||r===fl?(r=sp(),It=3):r===ep?(r=sp(),It=4):It=r===om?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,ze=r,xt===null&&(Wt=1,Ml(s,He(r,s.current)))}function $m(){var s=B.H;return B.H=Tl,s===null?Tl:s}function Hm(){var s=B.A;return B.A=sT,s}function kc(){Wt=4,Zn||(At&4194048)!==At&&Ke.current!==null||(Cs=!0),(jn&134217727)===0&&(Ni&134217727)===0||Ot===null||ni(Ot,At,Ye,!1)}function Nc(s,r,a){var f=Dt;Dt|=2;var v=$m(),y=Hm();(Ot!==s||At!==r)&&(Ll=null,As(s,r)),r=!1;var T=Wt;t:do try{if(It!==0&&xt!==null){var C=xt,A=ze;switch(It){case 8:Rc(),T=6;break t;case 3:case 2:case 9:case 6:Ke.current===null&&(r=!0);var P=It;if(It=0,ze=null,Rs(s,C,A,P),a&&Cs){T=0;break t}break;default:P=It,It=0,ze=null,Rs(s,C,A,P)}}lT(),T=Wt;break}catch($){qm(s,$)}while(!0);return r&&s.shellSuspendCounter++,bn=xi=null,Dt=f,B.H=v,B.A=y,xt===null&&(Ot=null,At=0,il()),T}function lT(){for(;xt!==null;)Gm(xt)}function aT(s,r){var a=Dt;Dt|=2;var f=$m(),v=Hm();Ot!==s||At!==r?(Ll=null,Il=rn()+500,As(s,r)):Cs=fo(s,r);t:do try{if(It!==0&&xt!==null){r=xt;var y=ze;e:switch(It){case 1:It=0,ze=null,Rs(s,r,y,1);break;case 2:case 9:if(np(y)){It=0,ze=null,Fm(r);break}r=function(){It!==2&&It!==9||Ot!==s||(It=7),hn(s)},y.then(r,r);break t;case 3:It=7;break t;case 4:It=5;break t;case 7:np(y)?(It=0,ze=null,Fm(r)):(It=0,ze=null,Rs(s,r,y,7));break;case 5:var T=null;switch(xt.tag){case 26:T=xt.memoizedState;case 5:case 27:var C=xt;if(!T||Eg(T)){It=0,ze=null;var A=C.sibling;if(A!==null)xt=A;else{var P=C.return;P!==null?(xt=P,Pl(P)):xt=null}break e}}It=0,ze=null,Rs(s,r,y,5);break;case 6:It=0,ze=null,Rs(s,r,y,6);break;case 8:Rc(),Wt=6;break t;default:throw Error(i(462))}}uT();break}catch($){qm(s,$)}while(!0);return bn=xi=null,B.H=f,B.A=v,Dt=a,xt!==null?0:(Ot=null,At=0,il(),Wt)}function uT(){for(;xt!==null&&!NS();)Gm(xt)}function Gm(s){var r=vm(s.alternate,s,Rn);s.memoizedProps=s.pendingProps,r===null?Pl(s):xt=r}function Fm(s){var r=s,a=r.alternate;switch(r.tag){case 15:case 0:r=hm(a,r,r.pendingProps,r.type,void 0,At);break;case 11:r=hm(a,r,r.pendingProps,r.type.render,r.ref,At);break;case 5:Ju(r);default:_m(a,r),r=xt=Jd(r,Rn),r=vm(a,r,Rn)}s.memoizedProps=s.pendingProps,r===null?Pl(s):xt=r}function Rs(s,r,a,f){bn=xi=null,Ju(r),Ss=null,qo=0;var v=r.return;try{if(Zb(s,v,r,a,At)){Wt=1,Ml(s,He(a,s.current)),xt=null;return}}catch(y){if(v!==null)throw xt=v,y;Wt=1,Ml(s,He(a,s.current)),xt=null;return}r.flags&32768?(kt||f===1?s=!0:Cs||(At&536870912)!==0?s=!1:(Zn=s=!0,(f===2||f===9||f===3||f===6)&&(f=Ke.current,f!==null&&f.tag===13&&(f.flags|=16384))),Jm(r,s)):Pl(r)}function Pl(s){var r=s;do{if((r.flags&32768)!==0){Jm(r,Zn);return}s=r.return;var a=tT(r.alternate,r,Rn);if(a!==null){xt=a;return}if(r=r.sibling,r!==null){xt=r;return}xt=r=s}while(r!==null);Wt===0&&(Wt=5)}function Jm(s,r){do{var a=eT(s.alternate,s);if(a!==null){a.flags&=32767,xt=a;return}if(a=s.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(s=s.sibling,s!==null)){xt=s;return}xt=s=a}while(s!==null);Wt=6,xt=null}function Km(s,r,a,f,v,y,T,C,A){s.cancelPendingCommit=null;do zl();while(pe!==0);if((Dt&6)!==0)throw Error(i(327));if(r!==null){if(r===s.current)throw Error(i(177));if(y=r.lanes|r.childLanes,y|=bu,qS(s,a,y,T,C,A),s===Ot&&(xt=Ot=null,At=0),Es=r,ei=s,Ms=a,Ec=y,Mc=v,zm=f,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,dT($r,function(){return Zm(),null})):(s.callbackNode=null,s.callbackPriority=0),f=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||f){f=B.T,B.T=null,v=X.p,X.p=2,T=Dt,Dt|=4;try{nT(s,r,a)}finally{Dt=T,X.p=v,B.T=f}}pe=1,Ym(),Wm(),Xm()}}function Ym(){if(pe===1){pe=0;var s=ei,r=Es,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=B.T,B.T=null;var f=X.p;X.p=2;var v=Dt;Dt|=4;try{km(r,s);var y=Hc,T=Pd(s.containerInfo),C=y.focusedElem,A=y.selectionRange;if(T!==C&&C&&C.ownerDocument&&Ud(C.ownerDocument.documentElement,C)){if(A!==null&&gu(C)){var P=A.start,$=A.end;if($===void 0&&($=P),"selectionStart"in C)C.selectionStart=P,C.selectionEnd=Math.min($,C.value.length);else{var F=C.ownerDocument||document,z=F&&F.defaultView||window;if(z.getSelection){var O=z.getSelection(),vt=C.textContent.length,pt=Math.min(A.start,vt),zt=A.end===void 0?pt:Math.min(A.end,vt);!O.extend&&pt>zt&&(T=zt,zt=pt,pt=T);var I=Ld(C,pt),N=Ld(C,zt);if(I&&N&&(O.rangeCount!==1||O.anchorNode!==I.node||O.anchorOffset!==I.offset||O.focusNode!==N.node||O.focusOffset!==N.offset)){var L=F.createRange();L.setStart(I.node,I.offset),O.removeAllRanges(),pt>zt?(O.addRange(L),O.extend(N.node,N.offset)):(L.setEnd(N.node,N.offset),O.addRange(L))}}}}for(F=[],O=C;O=O.parentNode;)O.nodeType===1&&F.push({element:O,left:O.scrollLeft,top:O.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<F.length;C++){var H=F[C];H.element.scrollLeft=H.left,H.element.scrollTop=H.top}}Wl=!!$c,Hc=$c=null}finally{Dt=v,X.p=f,B.T=a}}s.current=r,pe=2}}function Wm(){if(pe===2){pe=0;var s=ei,r=Es,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=B.T,B.T=null;var f=X.p;X.p=2;var v=Dt;Dt|=4;try{Em(s,r.alternate,r)}finally{Dt=v,X.p=f,B.T=a}}pe=3}}function Xm(){if(pe===4||pe===3){pe=0,DS();var s=ei,r=Es,a=Ms,f=zm;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?pe=5:(pe=0,Es=ei=null,Qm(s,s.pendingLanes));var v=s.pendingLanes;if(v===0&&(ti=null),Wa(a),r=r.stateNode,Ne&&typeof Ne.onCommitFiberRoot=="function")try{Ne.onCommitFiberRoot(ho,r,void 0,(r.current.flags&128)===128)}catch{}if(f!==null){r=B.T,v=X.p,X.p=2,B.T=null;try{for(var y=s.onRecoverableError,T=0;T<f.length;T++){var C=f[T];y(C.value,{componentStack:C.stack})}}finally{B.T=r,X.p=v}}(Ms&3)!==0&&zl(),hn(s),v=s.pendingLanes,(a&4194090)!==0&&(v&42)!==0?s===Ac?Xo++:(Xo=0,Ac=s):Xo=0,Qo(0)}}function Qm(s,r){(s.pooledCacheLanes&=r)===0&&(r=s.pooledCache,r!=null&&(s.pooledCache=null,ko(r)))}function zl(s){return Ym(),Wm(),Xm(),Zm()}function Zm(){if(pe!==5)return!1;var s=ei,r=Ec;Ec=0;var a=Wa(Ms),f=B.T,v=X.p;try{X.p=32>a?32:a,B.T=null,a=Mc,Mc=null;var y=ei,T=Ms;if(pe=0,Es=ei=null,Ms=0,(Dt&6)!==0)throw Error(i(331));var C=Dt;if(Dt|=4,Um(y.current),Dm(y,y.current,T,a),Dt=C,Qo(0,!1),Ne&&typeof Ne.onPostCommitFiberRoot=="function")try{Ne.onPostCommitFiberRoot(ho,y)}catch{}return!0}finally{X.p=v,B.T=f,Qm(s,r)}}function jm(s,r,a){r=He(a,r),r=rc(s.stateNode,r,2),s=Fn(s,r,2),s!==null&&(po(s,2),hn(s))}function Bt(s,r,a){if(s.tag===3)jm(s,s,a);else for(;r!==null;){if(r.tag===3){jm(r,s,a);break}else if(r.tag===1){var f=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(ti===null||!ti.has(f))){s=He(a,s),a=im(2),f=Fn(r,a,2),f!==null&&(sm(a,f,r,s),po(f,2),hn(f));break}}r=r.return}}function Dc(s,r,a){var f=s.pingCache;if(f===null){f=s.pingCache=new oT;var v=new Set;f.set(r,v)}else v=f.get(r),v===void 0&&(v=new Set,f.set(r,v));v.has(a)||(Tc=!0,v.add(a),s=cT.bind(null,s,r,a),r.then(s,s))}function cT(s,r,a){var f=s.pingCache;f!==null&&f.delete(r),s.pingedLanes|=s.suspendedLanes&a,s.warmLanes&=~a,Ot===s&&(At&a)===a&&(Wt===4||Wt===3&&(At&62914560)===At&&300>rn()-xc?(Dt&2)===0&&As(s,0):wc|=a,xs===At&&(xs=0)),hn(s)}function tg(s,r){r===0&&(r=Xf()),s=cs(s,r),s!==null&&(po(s,r),hn(s))}function hT(s){var r=s.memoizedState,a=0;r!==null&&(a=r.retryLane),tg(s,a)}function fT(s,r){var a=0;switch(s.tag){case 13:var f=s.stateNode,v=s.memoizedState;v!==null&&(a=v.retryLane);break;case 19:f=s.stateNode;break;case 22:f=s.stateNode._retryCache;break;default:throw Error(i(314))}f!==null&&f.delete(r),tg(s,a)}function dT(s,r){return Fa(s,r)}var Vl=null,ks=null,Ic=!1,Bl=!1,Lc=!1,Di=0;function hn(s){s!==ks&&s.next===null&&(ks===null?Vl=ks=s:ks=ks.next=s),Bl=!0,Ic||(Ic=!0,mT())}function Qo(s,r){if(!Lc&&Bl){Lc=!0;do for(var a=!1,f=Vl;f!==null;){if(s!==0){var v=f.pendingLanes;if(v===0)var y=0;else{var T=f.suspendedLanes,C=f.pingedLanes;y=(1<<31-De(42|s)+1)-1,y&=v&~(T&~C),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(a=!0,sg(f,y))}else y=At,y=Fr(f,f===Ot?y:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(y&3)===0||fo(f,y)||(a=!0,sg(f,y));f=f.next}while(a);Lc=!1}}function pT(){eg()}function eg(){Bl=Ic=!1;var s=0;Di!==0&&(wT()&&(s=Di),Di=0);for(var r=rn(),a=null,f=Vl;f!==null;){var v=f.next,y=ng(f,r);y===0?(f.next=null,a===null?Vl=v:a.next=v,v===null&&(ks=a)):(a=f,(s!==0||(y&3)!==0)&&(Bl=!0)),f=v}Qo(s)}function ng(s,r){for(var a=s.suspendedLanes,f=s.pingedLanes,v=s.expirationTimes,y=s.pendingLanes&-62914561;0<y;){var T=31-De(y),C=1<<T,A=v[T];A===-1?((C&a)===0||(C&f)!==0)&&(v[T]=OS(C,r)):A<=r&&(s.expiredLanes|=C),y&=~C}if(r=Ot,a=At,a=Fr(s,s===r?a:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),f=s.callbackNode,a===0||s===r&&(It===2||It===9)||s.cancelPendingCommit!==null)return f!==null&&f!==null&&Ja(f),s.callbackNode=null,s.callbackPriority=0;if((a&3)===0||fo(s,a)){if(r=a&-a,r===s.callbackPriority)return r;switch(f!==null&&Ja(f),Wa(a)){case 2:case 8:a=Kf;break;case 32:a=$r;break;case 268435456:a=Yf;break;default:a=$r}return f=ig.bind(null,s),a=Fa(a,f),s.callbackPriority=r,s.callbackNode=a,r}return f!==null&&f!==null&&Ja(f),s.callbackPriority=2,s.callbackNode=null,2}function ig(s,r){if(pe!==0&&pe!==5)return s.callbackNode=null,s.callbackPriority=0,null;var a=s.callbackNode;if(zl()&&s.callbackNode!==a)return null;var f=At;return f=Fr(s,s===Ot?f:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),f===0?null:(Bm(s,f,r),ng(s,rn()),s.callbackNode!=null&&s.callbackNode===a?ig.bind(null,s):null)}function sg(s,r){if(zl())return null;Bm(s,r,!0)}function mT(){xT(function(){(Dt&6)!==0?Fa(Jf,pT):eg()})}function Uc(){return Di===0&&(Di=Wf()),Di}function og(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Xr(""+s)}function rg(s,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,s.id&&a.setAttribute("form",s.id),r.parentNode.insertBefore(a,r),s=new FormData(s),a.parentNode.removeChild(a),s}function gT(s,r,a,f,v){if(r==="submit"&&a&&a.stateNode===v){var y=og((v[Ce]||null).action),T=f.submitter;T&&(r=(r=T[Ce]||null)?og(r.formAction):T.getAttribute("formAction"),r!==null&&(y=r,T=null));var C=new tl("action","action",null,f,v);s.push({event:C,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(Di!==0){var A=T?rg(v,T):new FormData(v);ec(a,{pending:!0,data:A,method:v.method,action:y},null,A)}}else typeof y=="function"&&(C.preventDefault(),A=T?rg(v,T):new FormData(v),ec(a,{pending:!0,data:A,method:v.method,action:y},y,A))},currentTarget:v}]})}}for(var Pc=0;Pc<Su.length;Pc++){var zc=Su[Pc],vT=zc.toLowerCase(),yT=zc[0].toUpperCase()+zc.slice(1);Ze(vT,"on"+yT)}Ze(Bd,"onAnimationEnd"),Ze(Od,"onAnimationIteration"),Ze(qd,"onAnimationStart"),Ze("dblclick","onDoubleClick"),Ze("focusin","onFocus"),Ze("focusout","onBlur"),Ze(Ub,"onTransitionRun"),Ze(Pb,"onTransitionStart"),Ze(zb,"onTransitionCancel"),Ze($d,"onTransitionEnd"),ts("onMouseEnter",["mouseout","mouseover"]),ts("onMouseLeave",["mouseout","mouseover"]),ts("onPointerEnter",["pointerout","pointerover"]),ts("onPointerLeave",["pointerout","pointerover"]),gi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),gi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),gi("onBeforeInput",["compositionend","keypress","textInput","paste"]),gi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),gi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),gi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_T=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Zo));function lg(s,r){r=(r&4)!==0;for(var a=0;a<s.length;a++){var f=s[a],v=f.event;f=f.listeners;t:{var y=void 0;if(r)for(var T=f.length-1;0<=T;T--){var C=f[T],A=C.instance,P=C.currentTarget;if(C=C.listener,A!==y&&v.isPropagationStopped())break t;y=C,v.currentTarget=P;try{y(v)}catch($){El($)}v.currentTarget=null,y=A}else for(T=0;T<f.length;T++){if(C=f[T],A=C.instance,P=C.currentTarget,C=C.listener,A!==y&&v.isPropagationStopped())break t;y=C,v.currentTarget=P;try{y(v)}catch($){El($)}v.currentTarget=null,y=A}}}}function Et(s,r){var a=r[Xa];a===void 0&&(a=r[Xa]=new Set);var f=s+"__bubble";a.has(f)||(ag(r,s,2,!1),a.add(f))}function Vc(s,r,a){var f=0;r&&(f|=4),ag(a,s,f,r)}var Ol="_reactListening"+Math.random().toString(36).slice(2);function Bc(s){if(!s[Ol]){s[Ol]=!0,ed.forEach(function(a){a!=="selectionchange"&&(_T.has(a)||Vc(a,!1,s),Vc(a,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[Ol]||(r[Ol]=!0,Vc("selectionchange",!1,r))}}function ag(s,r,a,f){switch(Dg(r)){case 2:var v=JT;break;case 8:v=KT;break;default:v=jc}a=v.bind(null,r,a,s),v=void 0,!lu||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(v=!0),f?v!==void 0?s.addEventListener(r,a,{capture:!0,passive:v}):s.addEventListener(r,a,!0):v!==void 0?s.addEventListener(r,a,{passive:v}):s.addEventListener(r,a,!1)}function Oc(s,r,a,f,v){var y=f;if((r&1)===0&&(r&2)===0&&f!==null)t:for(;;){if(f===null)return;var T=f.tag;if(T===3||T===4){var C=f.stateNode.containerInfo;if(C===v)break;if(T===4)for(T=f.return;T!==null;){var A=T.tag;if((A===3||A===4)&&T.stateNode.containerInfo===v)return;T=T.return}for(;C!==null;){if(T=Qi(C),T===null)return;if(A=T.tag,A===5||A===6||A===26||A===27){f=y=T;continue t}C=C.parentNode}}f=f.return}md(function(){var P=y,$=ou(a),F=[];t:{var z=Hd.get(s);if(z!==void 0){var O=tl,vt=s;switch(s){case"keypress":if(Zr(a)===0)break t;case"keydown":case"keyup":O=db;break;case"focusin":vt="focus",O=hu;break;case"focusout":vt="blur",O=hu;break;case"beforeblur":case"afterblur":O=hu;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":O=yd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":O=eb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":O=gb;break;case Bd:case Od:case qd:O=sb;break;case $d:O=yb;break;case"scroll":case"scrollend":O=jS;break;case"wheel":O=Sb;break;case"copy":case"cut":case"paste":O=rb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":O=Sd;break;case"toggle":case"beforetoggle":O=Tb}var pt=(r&4)!==0,zt=!pt&&(s==="scroll"||s==="scrollend"),I=pt?z!==null?z+"Capture":null:z;pt=[];for(var N=P,L;N!==null;){var H=N;if(L=H.stateNode,H=H.tag,H!==5&&H!==26&&H!==27||L===null||I===null||(H=vo(N,I),H!=null&&pt.push(jo(N,H,L))),zt)break;N=N.return}0<pt.length&&(z=new O(z,vt,null,a,$),F.push({event:z,listeners:pt}))}}if((r&7)===0){t:{if(z=s==="mouseover"||s==="pointerover",O=s==="mouseout"||s==="pointerout",z&&a!==su&&(vt=a.relatedTarget||a.fromElement)&&(Qi(vt)||vt[Xi]))break t;if((O||z)&&(z=$.window===$?$:(z=$.ownerDocument)?z.defaultView||z.parentWindow:window,O?(vt=a.relatedTarget||a.toElement,O=P,vt=vt?Qi(vt):null,vt!==null&&(zt=l(vt),pt=vt.tag,vt!==zt||pt!==5&&pt!==27&&pt!==6)&&(vt=null)):(O=null,vt=P),O!==vt)){if(pt=yd,H="onMouseLeave",I="onMouseEnter",N="mouse",(s==="pointerout"||s==="pointerover")&&(pt=Sd,H="onPointerLeave",I="onPointerEnter",N="pointer"),zt=O==null?z:go(O),L=vt==null?z:go(vt),z=new pt(H,N+"leave",O,a,$),z.target=zt,z.relatedTarget=L,H=null,Qi($)===P&&(pt=new pt(I,N+"enter",vt,a,$),pt.target=L,pt.relatedTarget=zt,H=pt),zt=H,O&&vt)e:{for(pt=O,I=vt,N=0,L=pt;L;L=Ns(L))N++;for(L=0,H=I;H;H=Ns(H))L++;for(;0<N-L;)pt=Ns(pt),N--;for(;0<L-N;)I=Ns(I),L--;for(;N--;){if(pt===I||I!==null&&pt===I.alternate)break e;pt=Ns(pt),I=Ns(I)}pt=null}else pt=null;O!==null&&ug(F,z,O,pt,!1),vt!==null&&zt!==null&&ug(F,zt,vt,pt,!0)}}t:{if(z=P?go(P):window,O=z.nodeName&&z.nodeName.toLowerCase(),O==="select"||O==="input"&&z.type==="file")var ot=Ad;else if(Ed(z))if(Rd)ot=Db;else{ot=kb;var Ct=Rb}else O=z.nodeName,!O||O.toLowerCase()!=="input"||z.type!=="checkbox"&&z.type!=="radio"?P&&iu(P.elementType)&&(ot=Ad):ot=Nb;if(ot&&(ot=ot(s,P))){Md(F,ot,a,$);break t}Ct&&Ct(s,z,P),s==="focusout"&&P&&z.type==="number"&&P.memoizedProps.value!=null&&nu(z,"number",z.value)}switch(Ct=P?go(P):window,s){case"focusin":(Ed(Ct)||Ct.contentEditable==="true")&&(ls=Ct,vu=P,xo=null);break;case"focusout":xo=vu=ls=null;break;case"mousedown":yu=!0;break;case"contextmenu":case"mouseup":case"dragend":yu=!1,zd(F,a,$);break;case"selectionchange":if(Lb)break;case"keydown":case"keyup":zd(F,a,$)}var ht;if(du)t:{switch(s){case"compositionstart":var mt="onCompositionStart";break t;case"compositionend":mt="onCompositionEnd";break t;case"compositionupdate":mt="onCompositionUpdate";break t}mt=void 0}else rs?Cd(s,a)&&(mt="onCompositionEnd"):s==="keydown"&&a.keyCode===229&&(mt="onCompositionStart");mt&&(bd&&a.locale!=="ko"&&(rs||mt!=="onCompositionStart"?mt==="onCompositionEnd"&&rs&&(ht=gd()):(qn=$,au="value"in qn?qn.value:qn.textContent,rs=!0)),Ct=ql(P,mt),0<Ct.length&&(mt=new _d(mt,s,null,a,$),F.push({event:mt,listeners:Ct}),ht?mt.data=ht:(ht=xd(a),ht!==null&&(mt.data=ht)))),(ht=Cb?xb(s,a):Eb(s,a))&&(mt=ql(P,"onBeforeInput"),0<mt.length&&(Ct=new _d("onBeforeInput","beforeinput",null,a,$),F.push({event:Ct,listeners:mt}),Ct.data=ht)),gT(F,s,P,a,$)}lg(F,r)})}function jo(s,r,a){return{instance:s,listener:r,currentTarget:a}}function ql(s,r){for(var a=r+"Capture",f=[];s!==null;){var v=s,y=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||y===null||(v=vo(s,a),v!=null&&f.unshift(jo(s,v,y)),v=vo(s,r),v!=null&&f.push(jo(s,v,y))),s.tag===3)return f;s=s.return}return[]}function Ns(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function ug(s,r,a,f,v){for(var y=r._reactName,T=[];a!==null&&a!==f;){var C=a,A=C.alternate,P=C.stateNode;if(C=C.tag,A!==null&&A===f)break;C!==5&&C!==26&&C!==27||P===null||(A=P,v?(P=vo(a,y),P!=null&&T.unshift(jo(a,P,A))):v||(P=vo(a,y),P!=null&&T.push(jo(a,P,A)))),a=a.return}T.length!==0&&s.push({event:r,listeners:T})}var ST=/\r\n?/g,bT=/\u0000|\uFFFD/g;function cg(s){return(typeof s=="string"?s:""+s).replace(ST,`
`).replace(bT,"")}function hg(s,r){return r=cg(r),cg(s)===r}function $l(){}function Pt(s,r,a,f,v,y){switch(a){case"children":typeof f=="string"?r==="body"||r==="textarea"&&f===""||is(s,f):(typeof f=="number"||typeof f=="bigint")&&r!=="body"&&is(s,""+f);break;case"className":Kr(s,"class",f);break;case"tabIndex":Kr(s,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":Kr(s,a,f);break;case"style":dd(s,f,y);break;case"data":if(r!=="object"){Kr(s,"data",f);break}case"src":case"href":if(f===""&&(r!=="a"||a!=="href")){s.removeAttribute(a);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){s.removeAttribute(a);break}f=Xr(""+f),s.setAttribute(a,f);break;case"action":case"formAction":if(typeof f=="function"){s.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(a==="formAction"?(r!=="input"&&Pt(s,r,"name",v.name,v,null),Pt(s,r,"formEncType",v.formEncType,v,null),Pt(s,r,"formMethod",v.formMethod,v,null),Pt(s,r,"formTarget",v.formTarget,v,null)):(Pt(s,r,"encType",v.encType,v,null),Pt(s,r,"method",v.method,v,null),Pt(s,r,"target",v.target,v,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){s.removeAttribute(a);break}f=Xr(""+f),s.setAttribute(a,f);break;case"onClick":f!=null&&(s.onclick=$l);break;case"onScroll":f!=null&&Et("scroll",s);break;case"onScrollEnd":f!=null&&Et("scrollend",s);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(i(61));if(a=f.__html,a!=null){if(v.children!=null)throw Error(i(60));s.innerHTML=a}}break;case"multiple":s.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":s.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){s.removeAttribute("xlink:href");break}a=Xr(""+f),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?s.setAttribute(a,""+f):s.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?s.setAttribute(a,""):s.removeAttribute(a);break;case"capture":case"download":f===!0?s.setAttribute(a,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?s.setAttribute(a,f):s.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?s.setAttribute(a,f):s.removeAttribute(a);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?s.removeAttribute(a):s.setAttribute(a,f);break;case"popover":Et("beforetoggle",s),Et("toggle",s),Jr(s,"popover",f);break;case"xlinkActuate":gn(s,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":gn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":gn(s,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":gn(s,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":gn(s,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":gn(s,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":gn(s,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":gn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":gn(s,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":Jr(s,"is",f);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=QS.get(a)||a,Jr(s,a,f))}}function qc(s,r,a,f,v,y){switch(a){case"style":dd(s,f,y);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(i(61));if(a=f.__html,a!=null){if(v.children!=null)throw Error(i(60));s.innerHTML=a}}break;case"children":typeof f=="string"?is(s,f):(typeof f=="number"||typeof f=="bigint")&&is(s,""+f);break;case"onScroll":f!=null&&Et("scroll",s);break;case"onScrollEnd":f!=null&&Et("scrollend",s);break;case"onClick":f!=null&&(s.onclick=$l);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!nd.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(v=a.endsWith("Capture"),r=a.slice(2,v?a.length-7:void 0),y=s[Ce]||null,y=y!=null?y[a]:null,typeof y=="function"&&s.removeEventListener(r,y,v),typeof f=="function")){typeof y!="function"&&y!==null&&(a in s?s[a]=null:s.hasAttribute(a)&&s.removeAttribute(a)),s.addEventListener(r,f,v);break t}a in s?s[a]=f:f===!0?s.setAttribute(a,""):Jr(s,a,f)}}}function me(s,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Et("error",s),Et("load",s);var f=!1,v=!1,y;for(y in a)if(a.hasOwnProperty(y)){var T=a[y];if(T!=null)switch(y){case"src":f=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:Pt(s,r,y,T,a,null)}}v&&Pt(s,r,"srcSet",a.srcSet,a,null),f&&Pt(s,r,"src",a.src,a,null);return;case"input":Et("invalid",s);var C=y=T=v=null,A=null,P=null;for(f in a)if(a.hasOwnProperty(f)){var $=a[f];if($!=null)switch(f){case"name":v=$;break;case"type":T=$;break;case"checked":A=$;break;case"defaultChecked":P=$;break;case"value":y=$;break;case"defaultValue":C=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(i(137,r));break;default:Pt(s,r,f,$,a,null)}}ud(s,y,C,A,P,T,v,!1),Yr(s);return;case"select":Et("invalid",s),f=T=y=null;for(v in a)if(a.hasOwnProperty(v)&&(C=a[v],C!=null))switch(v){case"value":y=C;break;case"defaultValue":T=C;break;case"multiple":f=C;default:Pt(s,r,v,C,a,null)}r=y,a=T,s.multiple=!!f,r!=null?ns(s,!!f,r,!1):a!=null&&ns(s,!!f,a,!0);return;case"textarea":Et("invalid",s),y=v=f=null;for(T in a)if(a.hasOwnProperty(T)&&(C=a[T],C!=null))switch(T){case"value":f=C;break;case"defaultValue":v=C;break;case"children":y=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(i(91));break;default:Pt(s,r,T,C,a,null)}hd(s,f,v,y),Yr(s);return;case"option":for(A in a)if(a.hasOwnProperty(A)&&(f=a[A],f!=null))switch(A){case"selected":s.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:Pt(s,r,A,f,a,null)}return;case"dialog":Et("beforetoggle",s),Et("toggle",s),Et("cancel",s),Et("close",s);break;case"iframe":case"object":Et("load",s);break;case"video":case"audio":for(f=0;f<Zo.length;f++)Et(Zo[f],s);break;case"image":Et("error",s),Et("load",s);break;case"details":Et("toggle",s);break;case"embed":case"source":case"link":Et("error",s),Et("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(P in a)if(a.hasOwnProperty(P)&&(f=a[P],f!=null))switch(P){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:Pt(s,r,P,f,a,null)}return;default:if(iu(r)){for($ in a)a.hasOwnProperty($)&&(f=a[$],f!==void 0&&qc(s,r,$,f,a,void 0));return}}for(C in a)a.hasOwnProperty(C)&&(f=a[C],f!=null&&Pt(s,r,C,f,a,null))}function TT(s,r,a,f){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,y=null,T=null,C=null,A=null,P=null,$=null;for(O in a){var F=a[O];if(a.hasOwnProperty(O)&&F!=null)switch(O){case"checked":break;case"value":break;case"defaultValue":A=F;default:f.hasOwnProperty(O)||Pt(s,r,O,null,f,F)}}for(var z in f){var O=f[z];if(F=a[z],f.hasOwnProperty(z)&&(O!=null||F!=null))switch(z){case"type":y=O;break;case"name":v=O;break;case"checked":P=O;break;case"defaultChecked":$=O;break;case"value":T=O;break;case"defaultValue":C=O;break;case"children":case"dangerouslySetInnerHTML":if(O!=null)throw Error(i(137,r));break;default:O!==F&&Pt(s,r,z,O,f,F)}}eu(s,T,C,A,P,$,y,v);return;case"select":O=T=C=z=null;for(y in a)if(A=a[y],a.hasOwnProperty(y)&&A!=null)switch(y){case"value":break;case"multiple":O=A;default:f.hasOwnProperty(y)||Pt(s,r,y,null,f,A)}for(v in f)if(y=f[v],A=a[v],f.hasOwnProperty(v)&&(y!=null||A!=null))switch(v){case"value":z=y;break;case"defaultValue":C=y;break;case"multiple":T=y;default:y!==A&&Pt(s,r,v,y,f,A)}r=C,a=T,f=O,z!=null?ns(s,!!a,z,!1):!!f!=!!a&&(r!=null?ns(s,!!a,r,!0):ns(s,!!a,a?[]:"",!1));return;case"textarea":O=z=null;for(C in a)if(v=a[C],a.hasOwnProperty(C)&&v!=null&&!f.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:Pt(s,r,C,null,f,v)}for(T in f)if(v=f[T],y=a[T],f.hasOwnProperty(T)&&(v!=null||y!=null))switch(T){case"value":z=v;break;case"defaultValue":O=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(i(91));break;default:v!==y&&Pt(s,r,T,v,f,y)}cd(s,z,O);return;case"option":for(var vt in a)if(z=a[vt],a.hasOwnProperty(vt)&&z!=null&&!f.hasOwnProperty(vt))switch(vt){case"selected":s.selected=!1;break;default:Pt(s,r,vt,null,f,z)}for(A in f)if(z=f[A],O=a[A],f.hasOwnProperty(A)&&z!==O&&(z!=null||O!=null))switch(A){case"selected":s.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:Pt(s,r,A,z,f,O)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var pt in a)z=a[pt],a.hasOwnProperty(pt)&&z!=null&&!f.hasOwnProperty(pt)&&Pt(s,r,pt,null,f,z);for(P in f)if(z=f[P],O=a[P],f.hasOwnProperty(P)&&z!==O&&(z!=null||O!=null))switch(P){case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(i(137,r));break;default:Pt(s,r,P,z,f,O)}return;default:if(iu(r)){for(var zt in a)z=a[zt],a.hasOwnProperty(zt)&&z!==void 0&&!f.hasOwnProperty(zt)&&qc(s,r,zt,void 0,f,z);for($ in f)z=f[$],O=a[$],!f.hasOwnProperty($)||z===O||z===void 0&&O===void 0||qc(s,r,$,z,f,O);return}}for(var I in a)z=a[I],a.hasOwnProperty(I)&&z!=null&&!f.hasOwnProperty(I)&&Pt(s,r,I,null,f,z);for(F in f)z=f[F],O=a[F],!f.hasOwnProperty(F)||z===O||z==null&&O==null||Pt(s,r,F,z,f,O)}var $c=null,Hc=null;function Hl(s){return s.nodeType===9?s:s.ownerDocument}function fg(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function dg(s,r){if(s===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&r==="foreignObject"?0:s}function Gc(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Fc=null;function wT(){var s=window.event;return s&&s.type==="popstate"?s===Fc?!1:(Fc=s,!0):(Fc=null,!1)}var pg=typeof setTimeout=="function"?setTimeout:void 0,CT=typeof clearTimeout=="function"?clearTimeout:void 0,mg=typeof Promise=="function"?Promise:void 0,xT=typeof queueMicrotask=="function"?queueMicrotask:typeof mg<"u"?function(s){return mg.resolve(null).then(s).catch(ET)}:pg;function ET(s){setTimeout(function(){throw s})}function ii(s){return s==="head"}function gg(s,r){var a=r,f=0,v=0;do{var y=a.nextSibling;if(s.removeChild(a),y&&y.nodeType===8)if(a=y.data,a==="/$"){if(0<f&&8>f){a=f;var T=s.ownerDocument;if(a&1&&tr(T.documentElement),a&2&&tr(T.body),a&4)for(a=T.head,tr(a),T=a.firstChild;T;){var C=T.nextSibling,A=T.nodeName;T[mo]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&T.rel.toLowerCase()==="stylesheet"||a.removeChild(T),T=C}}if(v===0){s.removeChild(y),ar(r);return}v--}else a==="$"||a==="$?"||a==="$!"?v++:f=a.charCodeAt(0)-48;else f=0;a=y}while(a);ar(r)}function Jc(s){var r=s.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Jc(a),Qa(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}s.removeChild(a)}}function MT(s,r,a,f){for(;s.nodeType===1;){var v=a;if(s.nodeName.toLowerCase()!==r.toLowerCase()){if(!f&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(f){if(!s[mo])switch(r){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(y=s.getAttribute("rel"),y==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(y!==v.rel||s.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||s.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||s.getAttribute("title")!==(v.title==null?null:v.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(y=s.getAttribute("src"),(y!==(v.src==null?null:v.src)||s.getAttribute("type")!==(v.type==null?null:v.type)||s.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&y&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(r==="input"&&s.type==="hidden"){var y=v.name==null?null:""+v.name;if(v.type==="hidden"&&s.getAttribute("name")===y)return s}else return s;if(s=tn(s.nextSibling),s===null)break}return null}function AT(s,r,a){if(r==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!a||(s=tn(s.nextSibling),s===null))return null;return s}function Kc(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function RT(s,r){var a=s.ownerDocument;if(s.data!=="$?"||a.readyState==="complete")r();else{var f=function(){r(),a.removeEventListener("DOMContentLoaded",f)};a.addEventListener("DOMContentLoaded",f),s._reactRetry=f}}function tn(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return s}var Yc=null;function vg(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var a=s.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return s;r--}else a==="/$"&&r++}s=s.previousSibling}return null}function yg(s,r,a){switch(r=Hl(a),s){case"html":if(s=r.documentElement,!s)throw Error(i(452));return s;case"head":if(s=r.head,!s)throw Error(i(453));return s;case"body":if(s=r.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function tr(s){for(var r=s.attributes;r.length;)s.removeAttributeNode(r[0]);Qa(s)}var We=new Map,_g=new Set;function Gl(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var kn=X.d;X.d={f:kT,r:NT,D:DT,C:IT,L:LT,m:UT,X:zT,S:PT,M:VT};function kT(){var s=kn.f(),r=Ul();return s||r}function NT(s){var r=Zi(s);r!==null&&r.tag===5&&r.type==="form"?Bp(r):kn.r(s)}var Ds=typeof document>"u"?null:document;function Sg(s,r,a){var f=Ds;if(f&&typeof r=="string"&&r){var v=$e(r);v='link[rel="'+s+'"][href="'+v+'"]',typeof a=="string"&&(v+='[crossorigin="'+a+'"]'),_g.has(v)||(_g.add(v),s={rel:s,crossOrigin:a,href:r},f.querySelector(v)===null&&(r=f.createElement("link"),me(r,"link",s),le(r),f.head.appendChild(r)))}}function DT(s){kn.D(s),Sg("dns-prefetch",s,null)}function IT(s,r){kn.C(s,r),Sg("preconnect",s,r)}function LT(s,r,a){kn.L(s,r,a);var f=Ds;if(f&&s&&r){var v='link[rel="preload"][as="'+$e(r)+'"]';r==="image"&&a&&a.imageSrcSet?(v+='[imagesrcset="'+$e(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(v+='[imagesizes="'+$e(a.imageSizes)+'"]')):v+='[href="'+$e(s)+'"]';var y=v;switch(r){case"style":y=Is(s);break;case"script":y=Ls(s)}We.has(y)||(s=g({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:s,as:r},a),We.set(y,s),f.querySelector(v)!==null||r==="style"&&f.querySelector(er(y))||r==="script"&&f.querySelector(nr(y))||(r=f.createElement("link"),me(r,"link",s),le(r),f.head.appendChild(r)))}}function UT(s,r){kn.m(s,r);var a=Ds;if(a&&s){var f=r&&typeof r.as=="string"?r.as:"script",v='link[rel="modulepreload"][as="'+$e(f)+'"][href="'+$e(s)+'"]',y=v;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Ls(s)}if(!We.has(y)&&(s=g({rel:"modulepreload",href:s},r),We.set(y,s),a.querySelector(v)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(nr(y)))return}f=a.createElement("link"),me(f,"link",s),le(f),a.head.appendChild(f)}}}function PT(s,r,a){kn.S(s,r,a);var f=Ds;if(f&&s){var v=ji(f).hoistableStyles,y=Is(s);r=r||"default";var T=v.get(y);if(!T){var C={loading:0,preload:null};if(T=f.querySelector(er(y)))C.loading=5;else{s=g({rel:"stylesheet",href:s,"data-precedence":r},a),(a=We.get(y))&&Wc(s,a);var A=T=f.createElement("link");le(A),me(A,"link",s),A._p=new Promise(function(P,$){A.onload=P,A.onerror=$}),A.addEventListener("load",function(){C.loading|=1}),A.addEventListener("error",function(){C.loading|=2}),C.loading|=4,Fl(T,r,f)}T={type:"stylesheet",instance:T,count:1,state:C},v.set(y,T)}}}function zT(s,r){kn.X(s,r);var a=Ds;if(a&&s){var f=ji(a).hoistableScripts,v=Ls(s),y=f.get(v);y||(y=a.querySelector(nr(v)),y||(s=g({src:s,async:!0},r),(r=We.get(v))&&Xc(s,r),y=a.createElement("script"),le(y),me(y,"link",s),a.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},f.set(v,y))}}function VT(s,r){kn.M(s,r);var a=Ds;if(a&&s){var f=ji(a).hoistableScripts,v=Ls(s),y=f.get(v);y||(y=a.querySelector(nr(v)),y||(s=g({src:s,async:!0,type:"module"},r),(r=We.get(v))&&Xc(s,r),y=a.createElement("script"),le(y),me(y,"link",s),a.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},f.set(v,y))}}function bg(s,r,a,f){var v=(v=it.current)?Gl(v):null;if(!v)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=Is(a.href),a=ji(v).hoistableStyles,f=a.get(r),f||(f={type:"style",instance:null,count:0,state:null},a.set(r,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){s=Is(a.href);var y=ji(v).hoistableStyles,T=y.get(s);if(T||(v=v.ownerDocument||v,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(s,T),(y=v.querySelector(er(s)))&&!y._p&&(T.instance=y,T.state.loading=5),We.has(s)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},We.set(s,a),y||BT(v,s,a,T.state))),r&&f===null)throw Error(i(528,""));return T}if(r&&f!==null)throw Error(i(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Ls(a),a=ji(v).hoistableScripts,f=a.get(r),f||(f={type:"script",instance:null,count:0,state:null},a.set(r,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function Is(s){return'href="'+$e(s)+'"'}function er(s){return'link[rel="stylesheet"]['+s+"]"}function Tg(s){return g({},s,{"data-precedence":s.precedence,precedence:null})}function BT(s,r,a,f){s.querySelector('link[rel="preload"][as="style"]['+r+"]")?f.loading=1:(r=s.createElement("link"),f.preload=r,r.addEventListener("load",function(){return f.loading|=1}),r.addEventListener("error",function(){return f.loading|=2}),me(r,"link",a),le(r),s.head.appendChild(r))}function Ls(s){return'[src="'+$e(s)+'"]'}function nr(s){return"script[async]"+s}function wg(s,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var f=s.querySelector('style[data-href~="'+$e(a.href)+'"]');if(f)return r.instance=f,le(f),f;var v=g({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return f=(s.ownerDocument||s).createElement("style"),le(f),me(f,"style",v),Fl(f,a.precedence,s),r.instance=f;case"stylesheet":v=Is(a.href);var y=s.querySelector(er(v));if(y)return r.state.loading|=4,r.instance=y,le(y),y;f=Tg(a),(v=We.get(v))&&Wc(f,v),y=(s.ownerDocument||s).createElement("link"),le(y);var T=y;return T._p=new Promise(function(C,A){T.onload=C,T.onerror=A}),me(y,"link",f),r.state.loading|=4,Fl(y,a.precedence,s),r.instance=y;case"script":return y=Ls(a.src),(v=s.querySelector(nr(y)))?(r.instance=v,le(v),v):(f=a,(v=We.get(y))&&(f=g({},a),Xc(f,v)),s=s.ownerDocument||s,v=s.createElement("script"),le(v),me(v,"link",f),s.head.appendChild(v),r.instance=v);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(f=r.instance,r.state.loading|=4,Fl(f,a.precedence,s));return r.instance}function Fl(s,r,a){for(var f=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=f.length?f[f.length-1]:null,y=v,T=0;T<f.length;T++){var C=f[T];if(C.dataset.precedence===r)y=C;else if(y!==v)break}y?y.parentNode.insertBefore(s,y.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(s,r.firstChild))}function Wc(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.title==null&&(s.title=r.title)}function Xc(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.integrity==null&&(s.integrity=r.integrity)}var Jl=null;function Cg(s,r,a){if(Jl===null){var f=new Map,v=Jl=new Map;v.set(a,f)}else v=Jl,f=v.get(a),f||(f=new Map,v.set(a,f));if(f.has(s))return f;for(f.set(s,null),a=a.getElementsByTagName(s),v=0;v<a.length;v++){var y=a[v];if(!(y[mo]||y[ve]||s==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var T=y.getAttribute(r)||"";T=s+T;var C=f.get(T);C?C.push(y):f.set(T,[y])}}return f}function xg(s,r,a){s=s.ownerDocument||s,s.head.insertBefore(a,r==="title"?s.querySelector("head > title"):null)}function OT(s,r,a){if(a===1||r.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return s=r.disabled,typeof r.precedence=="string"&&s==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Eg(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var ir=null;function qT(){}function $T(s,r,a){if(ir===null)throw Error(i(475));var f=ir;if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var v=Is(a.href),y=s.querySelector(er(v));if(y){s=y._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(f.count++,f=Kl.bind(f),s.then(f,f)),r.state.loading|=4,r.instance=y,le(y);return}y=s.ownerDocument||s,a=Tg(a),(v=We.get(v))&&Wc(a,v),y=y.createElement("link"),le(y);var T=y;T._p=new Promise(function(C,A){T.onload=C,T.onerror=A}),me(y,"link",a),r.instance=y}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(r,s),(s=r.state.preload)&&(r.state.loading&3)===0&&(f.count++,r=Kl.bind(f),s.addEventListener("load",r),s.addEventListener("error",r))}}function HT(){if(ir===null)throw Error(i(475));var s=ir;return s.stylesheets&&s.count===0&&Qc(s,s.stylesheets),0<s.count?function(r){var a=setTimeout(function(){if(s.stylesheets&&Qc(s,s.stylesheets),s.unsuspend){var f=s.unsuspend;s.unsuspend=null,f()}},6e4);return s.unsuspend=r,function(){s.unsuspend=null,clearTimeout(a)}}:null}function Kl(){if(this.count--,this.count===0){if(this.stylesheets)Qc(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Yl=null;function Qc(s,r){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Yl=new Map,r.forEach(GT,s),Yl=null,Kl.call(s))}function GT(s,r){if(!(r.state.loading&4)){var a=Yl.get(s);if(a)var f=a.get(null);else{a=new Map,Yl.set(s,a);for(var v=s.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<v.length;y++){var T=v[y];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(a.set(T.dataset.precedence,T),f=T)}f&&a.set(null,f)}v=r.instance,T=v.getAttribute("data-precedence"),y=a.get(T)||f,y===f&&a.set(null,v),a.set(T,v),this.count++,f=Kl.bind(this),v.addEventListener("load",f),v.addEventListener("error",f),y?y.parentNode.insertBefore(v,y.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(v,s.firstChild)),r.state.loading|=4}}var sr={$$typeof:k,Provider:null,Consumer:null,_currentValue:nt,_currentValue2:nt,_threadCount:0};function FT(s,r,a,f,v,y,T,C){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ka(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ka(0),this.hiddenUpdates=Ka(null),this.identifierPrefix=f,this.onUncaughtError=v,this.onCaughtError=y,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function Mg(s,r,a,f,v,y,T,C,A,P,$,F){return s=new FT(s,r,a,T,C,A,P,F),r=1,y===!0&&(r|=24),y=Le(3,null,null,r),s.current=y,y.stateNode=s,r=Du(),r.refCount++,s.pooledCache=r,r.refCount++,y.memoizedState={element:f,isDehydrated:a,cache:r},Pu(y),s}function Ag(s){return s?(s=hs,s):hs}function Rg(s,r,a,f,v,y){v=Ag(v),f.context===null?f.context=v:f.pendingContext=v,f=Gn(r),f.payload={element:a},y=y===void 0?null:y,y!==null&&(f.callback=y),a=Fn(s,f,r),a!==null&&(Be(a,s,r),Lo(a,s,r))}function kg(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var a=s.retryLane;s.retryLane=a!==0&&a<r?a:r}}function Zc(s,r){kg(s,r),(s=s.alternate)&&kg(s,r)}function Ng(s){if(s.tag===13){var r=cs(s,67108864);r!==null&&Be(r,s,67108864),Zc(s,67108864)}}var Wl=!0;function JT(s,r,a,f){var v=B.T;B.T=null;var y=X.p;try{X.p=2,jc(s,r,a,f)}finally{X.p=y,B.T=v}}function KT(s,r,a,f){var v=B.T;B.T=null;var y=X.p;try{X.p=8,jc(s,r,a,f)}finally{X.p=y,B.T=v}}function jc(s,r,a,f){if(Wl){var v=th(f);if(v===null)Oc(s,r,f,Xl,a),Ig(s,f);else if(WT(v,s,r,a,f))f.stopPropagation();else if(Ig(s,f),r&4&&-1<YT.indexOf(s)){for(;v!==null;){var y=Zi(v);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var T=mi(y.pendingLanes);if(T!==0){var C=y;for(C.pendingLanes|=2,C.entangledLanes|=2;T;){var A=1<<31-De(T);C.entanglements[1]|=A,T&=~A}hn(y),(Dt&6)===0&&(Il=rn()+500,Qo(0))}}break;case 13:C=cs(y,2),C!==null&&Be(C,y,2),Ul(),Zc(y,2)}if(y=th(f),y===null&&Oc(s,r,f,Xl,a),y===v)break;v=y}v!==null&&f.stopPropagation()}else Oc(s,r,f,null,a)}}function th(s){return s=ou(s),eh(s)}var Xl=null;function eh(s){if(Xl=null,s=Qi(s),s!==null){var r=l(s);if(r===null)s=null;else{var a=r.tag;if(a===13){if(s=u(r),s!==null)return s;s=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null)}}return Xl=s,null}function Dg(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(IS()){case Jf:return 2;case Kf:return 8;case $r:case LS:return 32;case Yf:return 268435456;default:return 32}default:return 32}}var nh=!1,si=null,oi=null,ri=null,or=new Map,rr=new Map,li=[],YT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ig(s,r){switch(s){case"focusin":case"focusout":si=null;break;case"dragenter":case"dragleave":oi=null;break;case"mouseover":case"mouseout":ri=null;break;case"pointerover":case"pointerout":or.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":rr.delete(r.pointerId)}}function lr(s,r,a,f,v,y){return s===null||s.nativeEvent!==y?(s={blockedOn:r,domEventName:a,eventSystemFlags:f,nativeEvent:y,targetContainers:[v]},r!==null&&(r=Zi(r),r!==null&&Ng(r)),s):(s.eventSystemFlags|=f,r=s.targetContainers,v!==null&&r.indexOf(v)===-1&&r.push(v),s)}function WT(s,r,a,f,v){switch(r){case"focusin":return si=lr(si,s,r,a,f,v),!0;case"dragenter":return oi=lr(oi,s,r,a,f,v),!0;case"mouseover":return ri=lr(ri,s,r,a,f,v),!0;case"pointerover":var y=v.pointerId;return or.set(y,lr(or.get(y)||null,s,r,a,f,v)),!0;case"gotpointercapture":return y=v.pointerId,rr.set(y,lr(rr.get(y)||null,s,r,a,f,v)),!0}return!1}function Lg(s){var r=Qi(s.target);if(r!==null){var a=l(r);if(a!==null){if(r=a.tag,r===13){if(r=u(a),r!==null){s.blockedOn=r,$S(s.priority,function(){if(a.tag===13){var f=Ve();f=Ya(f);var v=cs(a,f);v!==null&&Be(v,a,f),Zc(a,f)}});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){s.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Ql(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var a=th(s.nativeEvent);if(a===null){a=s.nativeEvent;var f=new a.constructor(a.type,a);su=f,a.target.dispatchEvent(f),su=null}else return r=Zi(a),r!==null&&Ng(r),s.blockedOn=a,!1;r.shift()}return!0}function Ug(s,r,a){Ql(s)&&a.delete(r)}function XT(){nh=!1,si!==null&&Ql(si)&&(si=null),oi!==null&&Ql(oi)&&(oi=null),ri!==null&&Ql(ri)&&(ri=null),or.forEach(Ug),rr.forEach(Ug)}function Zl(s,r){s.blockedOn===r&&(s.blockedOn=null,nh||(nh=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,XT)))}var jl=null;function Pg(s){jl!==s&&(jl=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){jl===s&&(jl=null);for(var r=0;r<s.length;r+=3){var a=s[r],f=s[r+1],v=s[r+2];if(typeof f!="function"){if(eh(f||a)===null)continue;break}var y=Zi(a);y!==null&&(s.splice(r,3),r-=3,ec(y,{pending:!0,data:v,method:a.method,action:f},f,v))}}))}function ar(s){function r(A){return Zl(A,s)}si!==null&&Zl(si,s),oi!==null&&Zl(oi,s),ri!==null&&Zl(ri,s),or.forEach(r),rr.forEach(r);for(var a=0;a<li.length;a++){var f=li[a];f.blockedOn===s&&(f.blockedOn=null)}for(;0<li.length&&(a=li[0],a.blockedOn===null);)Lg(a),a.blockedOn===null&&li.shift();if(a=(s.ownerDocument||s).$$reactFormReplay,a!=null)for(f=0;f<a.length;f+=3){var v=a[f],y=a[f+1],T=v[Ce]||null;if(typeof y=="function")T||Pg(a);else if(T){var C=null;if(y&&y.hasAttribute("formAction")){if(v=y,T=y[Ce]||null)C=T.formAction;else if(eh(v)!==null)continue}else C=T.action;typeof C=="function"?a[f+1]=C:(a.splice(f,3),f-=3),Pg(a)}}}function ih(s){this._internalRoot=s}ta.prototype.render=ih.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(i(409));var a=r.current,f=Ve();Rg(a,f,s,r,null,null)},ta.prototype.unmount=ih.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;Rg(s.current,2,null,s,null,null),Ul(),r[Xi]=null}};function ta(s){this._internalRoot=s}ta.prototype.unstable_scheduleHydration=function(s){if(s){var r=jf();s={blockedOn:null,target:s,priority:r};for(var a=0;a<li.length&&r!==0&&r<li[a].priority;a++);li.splice(a,0,s),a===0&&Lg(s)}};var zg=t.version;if(zg!=="19.1.1")throw Error(i(527,zg,"19.1.1"));X.findDOMNode=function(s){var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=p(r),s=s!==null?m(s):null,s=s===null?null:s.stateNode,s};var QT={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ea=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ea.isDisabled&&ea.supportsFiber)try{ho=ea.inject(QT),Ne=ea}catch{}}return hr.createRoot=function(s,r){if(!o(s))throw Error(i(299));var a=!1,f="",v=jp,y=tm,T=em,C=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onUncaughtError!==void 0&&(v=r.onUncaughtError),r.onCaughtError!==void 0&&(y=r.onCaughtError),r.onRecoverableError!==void 0&&(T=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(C=r.unstable_transitionCallbacks)),r=Mg(s,1,!1,null,null,a,f,v,y,T,C,null),s[Xi]=r.current,Bc(s),new ih(r)},hr.hydrateRoot=function(s,r,a){if(!o(s))throw Error(i(299));var f=!1,v="",y=jp,T=tm,C=em,A=null,P=null;return a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(v=a.identifierPrefix),a.onUncaughtError!==void 0&&(y=a.onUncaughtError),a.onCaughtError!==void 0&&(T=a.onCaughtError),a.onRecoverableError!==void 0&&(C=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(A=a.unstable_transitionCallbacks),a.formState!==void 0&&(P=a.formState)),r=Mg(s,1,!0,r,a??null,f,v,y,T,C,A,P),r.context=Ag(null),a=r.current,f=Ve(),f=Ya(f),v=Gn(f),v.callback=null,Fn(a,v,f),a=f,r.current.lanes=a,po(r,a),hn(r),s[Xi]=r.current,Bc(s),new ta(r)},hr.version="19.1.1",hr}var Wg;function hw(){if(Wg)return rh.exports;Wg=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),rh.exports=cw(),rh.exports}var fw=hw();const dw=gf(fw),pw=n=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),mw=n=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:[x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.24-.438.613-.438.995s.145.755.438.995l1.003.827c.48.398.668 1.03.26 1.431l-1.296 2.247a1.125 1.125 0 0 1-1.37.49l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.063-.374-.313-.686-.645-.87a6.52 6.52 0 0 1-.22-.127c-.324-.196-.72-.257-1.075-.124l-1.217.456a1.125 1.125 0 0 1-1.37-.49l-1.296-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.437-.995s-.145-.755-.437-.995l-1.004-.827a1.125 1.125 0 0 1-.26-1.431l1.296-2.247a1.125 1.125 0 0 1 1.37-.49l1.217.456c.355.133.75.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"})]}),gw=n=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"})}),vw=n=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"})}),yw=n=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.72 9.72 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z"})}),_w=({user:n,theme:t,onToggleTheme:e,onOpenSettings:i,onLogout:o})=>{var g,_,S;const[l,u]=et.useState(!1),d=et.useRef(null),p=((g=n.user_metadata)==null?void 0:g.name)||((_=n.user_metadata)==null?void 0:_.full_name)||n.email,m=(S=n.user_metadata)==null?void 0:S.avatar_url;return et.useEffect(()=>{const b=w=>{d.current&&!d.current.contains(w.target)&&u(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]),x.jsxs("div",{className:"relative",ref:d,children:[x.jsxs("button",{onClick:()=>u(b=>!b),className:"flex items-center w-full gap-3 text-left p-2 rounded-md text-text-secondary hover:bg-input-bg hover:text-text-primary transition-colors","aria-haspopup":"true","aria-expanded":l,children:[m?x.jsx("img",{src:m,alt:p,className:"h-8 w-8 rounded-full bg-border-color"}):x.jsx("span",{className:"h-8 w-8 rounded-full bg-border-color flex items-center justify-center text-text-primary font-bold text-sm",children:(p==null?void 0:p.charAt(0).toUpperCase())||"?"}),x.jsxs("div",{className:"flex-1 overflow-hidden",children:[x.jsx("span",{className:"text-sm font-medium text-text-primary truncate block",children:p}),x.jsx("span",{className:"text-xs text-text-secondary truncate block",children:n.email})]})]}),l&&x.jsx("div",{className:"absolute bottom-full left-0 w-full mb-2 bg-sidebar-bg border border-border-color rounded-lg shadow-xl z-10",children:x.jsxs("div",{className:"p-1",children:[x.jsxs("button",{onClick:()=>{e(),u(!1)},className:"flex items-center gap-3 w-full text-left p-2 text-sm rounded-md text-text-secondary hover:bg-input-bg hover:text-text-primary transition-colors",children:[t==="dark"?x.jsx(vw,{className:"w-4 h-4"}):x.jsx(yw,{className:"w-4 h-4"}),x.jsxs("span",{children:["Switch to ",t==="dark"?"Light":"Dark"," Mode"]})]}),x.jsxs("button",{onClick:()=>{i(),u(!1)},className:"flex items-center gap-3 w-full text-left p-2 text-sm rounded-md text-text-secondary hover:bg-input-bg hover:text-text-primary transition-colors",children:[x.jsx(mw,{className:"w-4 h-4"}),x.jsx("span",{children:"Settings"})]}),x.jsx("div",{className:"my-1 h-px bg-border-color"}),x.jsxs("button",{onClick:()=>{o(),u(!1)},className:"flex items-center gap-3 w-full text-left p-2 text-sm rounded-md text-accent-red hover:bg-red-500/10 transition-colors",children:[x.jsx(gw,{className:"w-4 h-4"}),x.jsx("span",{children:"Logout"})]})]})})]})},Sw=n=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})}),bw=n=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})}),Tw=n=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.134-2.036-2.134H8.718c-1.126 0-2.037.955-2.037 2.134v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})}),ww=({session:n,isActive:t,onSelect:e,onDelete:i,onRename:o})=>{const[l,u]=et.useState(!1),[d,p]=et.useState(n.title),m=et.useRef(null);et.useEffect(()=>{var S,b;l&&((S=m.current)==null||S.focus(),(b=m.current)==null||b.select())},[l]);const g=()=>{u(!1),d.trim()&&d.trim()!==n.title?o(n.id,d.trim()):p(n.title)},_=S=>{S.stopPropagation(),window.confirm(`Are you sure you want to delete "${n.title}"?`)&&i(n.id)};return x.jsxs("div",{onClick:()=>e(n.id),className:`group relative flex items-center w-full text-left rounded-md cursor-pointer transition-colors ${t?"bg-accent-blue text-white":"text-text-secondary hover:bg-input-bg hover:text-text-primary"}`,children:[l?x.jsx("input",{ref:m,type:"text",value:d,onClick:S=>S.stopPropagation(),onChange:S=>p(S.target.value),onBlur:g,onKeyDown:S=>{S.key==="Enter"&&g(),S.key==="Escape"&&(u(!1),p(n.title))},className:"flex-1 bg-transparent px-4 py-2 text-sm focus:outline-none"}):x.jsx("span",{className:"flex-1 px-4 py-2 text-sm truncate",children:n.title}),!l&&x.jsxs("div",{className:"absolute right-1 top-1/2 -translate-y-1/2 flex items-center opacity-0 group-hover:opacity-100 transition-opacity duration-200 bg-inherit rounded-md",children:[x.jsx("button",{onClick:S=>{S.stopPropagation(),u(!0)},className:`p-1 ${t?"hover:bg-blue-400":"hover:bg-border-color"} rounded`,"aria-label":"Rename session",children:x.jsx(bw,{className:"h-4 w-4"})}),x.jsx("button",{onClick:_,className:`p-1 ${t?"hover:bg-blue-400":"hover:bg-border-color"} rounded`,"aria-label":"Delete session",children:x.jsx(Tw,{className:"h-4 w-4"})})]})]})},Cw=({isOpen:n,sessions:t,activeSessionId:e,user:i,theme:o,onNewSession:l,onSelectSession:u,onDeleteSession:d,onRenameSession:p,onToggleTheme:m,onOpenSettings:g,onLogout:_})=>{const[S,b]=et.useState(""),[w,E]=et.useState("");et.useEffect(()=>{const D=setTimeout(()=>E(S.trim().toLowerCase()),200);return()=>clearTimeout(D)},[S]);const M=et.useMemo(()=>w?t.filter(D=>{if(D.title.toLowerCase().includes(w))return!0;for(const U of D.messages)if(typeof U.content=="string"){if(U.content.toLowerCase().includes(w))return!0}else if(U.content&&typeof U.content=="object"){const k=U.content;if([k.summary,k.thinkingProcess,k.verificationSummary,k.signal,k.confidence,k.riskRewardRatio,k.timeframe].some(q=>typeof q=="string"&&q.toLowerCase().includes(w)))return!0}return!1}):t,[w,t]);return x.jsxs("aside",{className:`bg-sidebar-bg flex flex-col transition-all duration-300 ease-in-out border-r border-border-color ${n?"w-64":"w-0"} overflow-hidden`,children:[x.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border-color h-14",children:[x.jsx("h2",{className:"text-xl font-bold whitespace-nowrap text-text-primary",children:"History"}),x.jsx("button",{onClick:l,className:"p-2 rounded-md hover:bg-input-bg focus:outline-none focus:ring-2 focus:ring-accent-blue","aria-label":"Create new analysis",children:x.jsx(pw,{className:"h-6 w-6 text-text-secondary"})})]}),x.jsx("div",{className:"p-2 border-b border-border-color",children:x.jsxs("div",{className:"relative",children:[x.jsx("input",{type:"text",placeholder:"Search...",value:S,onChange:D=>b(D.target.value),className:"w-full bg-input-bg border border-transparent rounded-md pl-9 pr-3 py-1.5 text-sm text-text-primary placeholder-text-secondary focus:outline-none focus:ring-2 focus:ring-accent-blue focus:border-transparent"}),x.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:x.jsx(Sw,{className:"h-4 w-4 text-text-secondary"})})]})}),x.jsx("nav",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:M.map(D=>x.jsx(ww,{session:D,isActive:D.id===e,onSelect:u,onDelete:d,onRename:p},D.id))}),x.jsx("div",{className:"p-2 border-t border-border-color",children:x.jsx(_w,{user:i,theme:o,onToggleTheme:m,onOpenSettings:g,onLogout:_})})]})},xw=n=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.375 12.739l-7.693 7.693a4.5 4.5 0 01-6.364-6.364l10.94-10.94A3.375 3.375 0 1112.81 7.341L5.17 15.011a1.125 1.125 0 001.591 1.59L15.182 8.25"})}),Ew=n=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"})}),Mw=n=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...n,children:x.jsx("path",{d:"M6 6h12v12H6z"})}),Aw=n=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75"})});async function Rw(n,t=1024,e=768){const i=await Dw(n),o=document.createElement("canvas");o.width=t,o.height=e;const l=o.getContext("2d");if(!l)throw new Error("Canvas not supported");l.fillStyle="#ffffff",l.fillRect(0,0,t,e);const u=Math.min(t/i.naturalWidth,e/i.naturalHeight),d=Math.round(i.naturalWidth*u),p=Math.round(i.naturalHeight*u),m=Math.floor((t-d)/2),g=Math.floor((e-p)/2);l.imageSmoothingEnabled=!0,l.imageSmoothingQuality="high",l.drawImage(i,m,g,d,p);const S=await(await new Promise(b=>o.toBlob(w=>b(w),"image/png"))).arrayBuffer();return new Uint8Array(S)}async function kw(n){const t=await crypto.subtle.digest("SHA-256",n);return Nw(new Uint8Array(t))}function Nw(n){return Array.from(n).map(t=>t.toString(16).padStart(2,"0")).join("")}async function Dw(n){return new Promise((t,e)=>{const i=new Image;i.onload=()=>t(i),i.onerror=o=>e(o),typeof n=="string"?i.src=n.startsWith("data:")?n:URL.createObjectURL(new Blob([n])):i.src=URL.createObjectURL(n)})}function Xg(n){return["v1",n.modelVersion,n.promptVersion,n.ultra?"ultra":"normal",...n.imageHashes.sort()].join("|")}const Iw=async n=>{const t=await Rw(n),e=await kw(t);return{mimeType:"image/png",data:btoa(String.fromCharCode(...t)),hash:e}},Lw=({onSendMessage:n,isLoading:t,onStopGeneration:e,initialPrompt:i,isUltraMode:o,onToggleUltraMode:l,isLiveChart:u=!1,onToggleLiveChart:d})=>{const[p,m]=et.useState(""),[g,_]=et.useState([]),[S,b]=et.useState([]),[w,E]=et.useState(!1),M=et.useRef(null),D=et.useRef(null),U=et.useRef(null);et.useEffect(()=>{var Q;i&&(m(i),(Q=D.current)==null||Q.focus())},[i]),et.useEffect(()=>{const Q=K=>{U.current&&!U.current.contains(K.target)&&E(!1)};return document.addEventListener("mousedown",Q),()=>document.removeEventListener("mousedown",Q)},[]);const k=Q=>{const K=[],st=new Set(g.map(dt=>dt.name+dt.size)),lt=Array.from(Q);for(const dt of lt){if(!dt.type.startsWith("image/"))continue;const at=dt.name+dt.size;st.has(at)||K.push(dt)}K.length!==0&&(K.forEach(dt=>{const at=new FileReader;at.onloadend=()=>{b(B=>[...B,at.result])},at.readAsDataURL(dt)}),_(dt=>[...dt,...K]))},V=Q=>{Q.target.files&&k(Q.target.files)},q=Q=>{Q.preventDefault(),Q.dataTransfer.files&&Q.dataTransfer.files.length>0&&(k(Q.dataTransfer.files),Q.dataTransfer.clearData())},J=Q=>{const K=Q.clipboardData.items,st=[];for(let lt=0;lt<K.length;lt++){const dt=K[lt];if(dt.kind==="file"){const at=dt.getAsFile();at&&at.type.startsWith("image/")&&st.push(at)}}st.length>0&&k(st)},W=async()=>{if(!p.trim()&&g.length===0||t)return;let Q=[];g.length>0&&(Q=await Promise.all(g.map(Iw))),n(p,Q),m(""),_([]),b([]),M.current&&(M.current.value="")},rt=Q=>{Q.key==="Enter"&&!Q.shiftKey&&(Q.preventDefault(),W())},j=Q=>{_(K=>K.filter((st,lt)=>lt!==Q)),b(K=>K.filter((st,lt)=>lt!==Q)),M.current&&g.length===1&&(M.current.value="")};return x.jsxs("div",{className:"bg-input-bg border border-border-color rounded-lg p-2 flex flex-col",onDrop:q,onDragOver:Q=>Q.preventDefault(),onPaste:J,children:[S.length>0&&x.jsx("div",{className:"p-2 grid grid-cols-3 gap-2",children:S.map((Q,K)=>x.jsxs("div",{className:"relative",children:[x.jsx("img",{src:Q,alt:`Image preview ${K+1}`,className:"max-h-24 w-full object-cover rounded-md"}),x.jsx("button",{onClick:()=>j(K),className:"absolute top-0 right-0 m-1 bg-red-500 text-white rounded-full h-5 w-5 flex items-center justify-center text-xs",children:""})]},K))}),x.jsxs("div",{className:"flex items-start",children:[x.jsx("button",{onClick:()=>{var Q;return(Q=M.current)==null?void 0:Q.click()},className:"p-2 text-text-secondary hover:text-text-primary self-center",disabled:t,"aria-label":"Attach images",children:x.jsx(xw,{className:"h-5 w-5"})}),x.jsx("input",{type:"file",ref:M,onChange:V,className:"hidden",multiple:!0,accept:"image/png, image/jpeg, image/webp"}),x.jsxs("div",{className:"relative self-center",ref:U,children:[x.jsx("button",{onClick:()=>E(Q=>!Q),className:`p-2 text-text-secondary hover:text-text-primary transition-colors ${o?"text-accent-blue":""}`,disabled:t,"aria-label":"Wizz Ultra Settings",children:x.jsx(Aw,{className:"h-5 w-5"})}),w&&x.jsxs("div",{className:"absolute bottom-full left-0 mb-2 w-72 bg-sidebar-bg border border-border-color rounded-lg shadow-xl z-10 p-3",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("h4",{className:"font-semibold text-text-primary",children:"Wizz Ultra"}),x.jsx("p",{className:"text-xs text-text-secondary",children:"Advanced analysis mode"})]}),x.jsxs("label",{htmlFor:"ultra-toggle",className:"relative inline-flex items-center cursor-pointer",children:[x.jsx("input",{type:"checkbox",id:"ultra-toggle",className:"sr-only peer",checked:o,onChange:l}),x.jsx("div",{className:"w-11 h-6 bg-border-color peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-offset-2 peer-focus:ring-accent-blue peer-focus:ring-offset-sidebar-bg rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent-blue"})]})]}),x.jsx("p",{className:"text-xs text-text-secondary mt-2 border-t border-border-color pt-2",children:"Provides a more detailed, multi-pass analysis for higher accuracy."}),x.jsx("div",{className:"mt-3 pt-3 border-t border-border-color",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("h4",{className:"font-semibold text-text-primary",children:"Live Chart"}),x.jsx("p",{className:"text-xs text-text-secondary",children:"Stream real-time candlesticks"})]}),x.jsxs("label",{htmlFor:"live-toggle",className:"relative inline-flex items-center cursor-pointer",children:[x.jsx("input",{type:"checkbox",id:"live-toggle",className:"sr-only peer",checked:!!u,onChange:d}),x.jsx("div",{className:"w-11 h-6 bg-border-color peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-offset-2 peer-focus:ring-accent-blue peer-focus:ring-offset-sidebar-bg rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent-blue"})]})]})})]})]}),x.jsx("textarea",{ref:D,value:p,onChange:Q=>m(Q.target.value),onKeyDown:rt,placeholder:"Describe the chart or ask a question... (you can also paste or drag-and-drop images)",className:"flex-1 bg-transparent resize-none focus:outline-none text-text-primary placeholder-text-secondary px-2 pt-1.5 max-h-28",rows:1,disabled:t}),x.jsx("div",{className:"self-center",children:t?x.jsx("button",{onClick:e,className:"p-2 rounded-md bg-accent-red text-white","aria-label":"Stop generation",children:x.jsx(Mw,{className:"h-5 w-5"})}):x.jsx("button",{onClick:W,disabled:!p.trim()&&g.length===0,className:"p-2 rounded-md bg-accent-blue text-white disabled:bg-gray-500 disabled:cursor-not-allowed","aria-label":"Send message",children:x.jsx(Ew,{className:"h-5 w-5"})})})]})]})};function yf(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let Ji=yf();function W0(n){Ji=n}const X0=/[&<>"']/,Uw=new RegExp(X0.source,"g"),Q0=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,Pw=new RegExp(Q0.source,"g"),zw={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Qg=n=>zw[n];function Oe(n,t){if(t){if(X0.test(n))return n.replace(Uw,Qg)}else if(Q0.test(n))return n.replace(Pw,Qg);return n}const Vw=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function Bw(n){return n.replace(Vw,(t,e)=>(e=e.toLowerCase(),e==="colon"?":":e.charAt(0)==="#"?e.charAt(1)==="x"?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""))}const Ow=/(^|[^\[])\^/g;function Vt(n,t){let e=typeof n=="string"?n:n.source;t=t||"";const i={replace:(o,l)=>{let u=typeof l=="string"?l:l.source;return u=u.replace(Ow,"$1"),e=e.replace(o,u),i},getRegex:()=>new RegExp(e,t)};return i}function Zg(n){try{n=encodeURI(n).replace(/%25/g,"%")}catch{return null}return n}const _r={exec:()=>null};function jg(n,t){const e=n.replace(/\|/g,(l,u,d)=>{let p=!1,m=u;for(;--m>=0&&d[m]==="\\";)p=!p;return p?"|":" |"}),i=e.split(/ \|/);let o=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),t)if(i.length>t)i.splice(t);else for(;i.length<t;)i.push("");for(;o<i.length;o++)i[o]=i[o].trim().replace(/\\\|/g,"|");return i}function fr(n,t,e){const i=n.length;if(i===0)return"";let o=0;for(;o<i&&n.charAt(i-o-1)===t;)o++;return n.slice(0,i-o)}function qw(n,t){if(n.indexOf(t[1])===-1)return-1;let e=0;for(let i=0;i<n.length;i++)if(n[i]==="\\")i++;else if(n[i]===t[0])e++;else if(n[i]===t[1]&&(e--,e<0))return i;return-1}function tv(n,t,e,i){const o=t.href,l=t.title?Oe(t.title):null,u=n[1].replace(/\\([\[\]])/g,"$1");if(n[0].charAt(0)!=="!"){i.state.inLink=!0;const d={type:"link",raw:e,href:o,title:l,text:u,tokens:i.inlineTokens(u)};return i.state.inLink=!1,d}return{type:"image",raw:e,href:o,title:l,text:Oe(u)}}function $w(n,t){const e=n.match(/^(\s+)(?:```)/);if(e===null)return t;const i=e[1];return t.split(`
`).map(o=>{const l=o.match(/^\s+/);if(l===null)return o;const[u]=l;return u.length>=i.length?o.slice(i.length):o}).join(`
`)}class wa{constructor(t){qt(this,"options");qt(this,"rules");qt(this,"lexer");this.options=t||Ji}space(t){const e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){const e=this.rules.block.code.exec(t);if(e){const i=e[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?i:fr(i,`
`)}}}fences(t){const e=this.rules.block.fences.exec(t);if(e){const i=e[0],o=$w(i,e[3]||"");return{type:"code",raw:i,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:o}}}heading(t){const e=this.rules.block.heading.exec(t);if(e){let i=e[2].trim();if(/#$/.test(i)){const o=fr(i,"#");(this.options.pedantic||!o||/ $/.test(o))&&(i=o.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(t){const e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:fr(e[0],`
`)}}blockquote(t){const e=this.rules.block.blockquote.exec(t);if(e){let i=fr(e[0],`
`).split(`
`),o="",l="";const u=[];for(;i.length>0;){let d=!1;const p=[];let m;for(m=0;m<i.length;m++)if(/^ {0,3}>/.test(i[m]))p.push(i[m]),d=!0;else if(!d)p.push(i[m]);else break;i=i.slice(m);const g=p.join(`
`),_=g.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");o=o?`${o}
${g}`:g,l=l?`${l}
${_}`:_;const S=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(_,u,!0),this.lexer.state.top=S,i.length===0)break;const b=u[u.length-1];if((b==null?void 0:b.type)==="code")break;if((b==null?void 0:b.type)==="blockquote"){const w=b,E=w.raw+`
`+i.join(`
`),M=this.blockquote(E);u[u.length-1]=M,o=o.substring(0,o.length-w.raw.length)+M.raw,l=l.substring(0,l.length-w.text.length)+M.text;break}else if((b==null?void 0:b.type)==="list"){const w=b,E=w.raw+`
`+i.join(`
`),M=this.list(E);u[u.length-1]=M,o=o.substring(0,o.length-b.raw.length)+M.raw,l=l.substring(0,l.length-w.raw.length)+M.raw,i=E.substring(u[u.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:o,tokens:u,text:l}}}list(t){let e=this.rules.block.list.exec(t);if(e){let i=e[1].trim();const o=i.length>1,l={type:"list",raw:"",ordered:o,start:o?+i.slice(0,-1):"",loose:!1,items:[]};i=o?`\\d{1,9}\\${i.slice(-1)}`:`\\${i}`,this.options.pedantic&&(i=o?i:"[*+-]");const u=new RegExp(`^( {0,3}${i})((?:[	 ][^\\n]*)?(?:\\n|$))`);let d=!1;for(;t;){let p=!1,m="",g="";if(!(e=u.exec(t))||this.rules.block.hr.test(t))break;m=e[0],t=t.substring(m.length);let _=e[2].split(`
`,1)[0].replace(/^\t+/,D=>" ".repeat(3*D.length)),S=t.split(`
`,1)[0],b=!_.trim(),w=0;if(this.options.pedantic?(w=2,g=_.trimStart()):b?w=e[1].length+1:(w=e[2].search(/[^ ]/),w=w>4?1:w,g=_.slice(w),w+=e[1].length),b&&/^ *$/.test(S)&&(m+=S+`
`,t=t.substring(S.length+1),p=!0),!p){const D=new RegExp(`^ {0,${Math.min(3,w-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),U=new RegExp(`^ {0,${Math.min(3,w-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),k=new RegExp(`^ {0,${Math.min(3,w-1)}}(?:\`\`\`|~~~)`),V=new RegExp(`^ {0,${Math.min(3,w-1)}}#`);for(;t;){const q=t.split(`
`,1)[0];if(S=q,this.options.pedantic&&(S=S.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),k.test(S)||V.test(S)||D.test(S)||U.test(t))break;if(S.search(/[^ ]/)>=w||!S.trim())g+=`
`+S.slice(w);else{if(b||_.search(/[^ ]/)>=4||k.test(_)||V.test(_)||U.test(_))break;g+=`
`+S}!b&&!S.trim()&&(b=!0),m+=q+`
`,t=t.substring(q.length+1),_=S.slice(w)}}l.loose||(d?l.loose=!0:/\n *\n *$/.test(m)&&(d=!0));let E=null,M;this.options.gfm&&(E=/^\[[ xX]\] /.exec(g),E&&(M=E[0]!=="[ ] ",g=g.replace(/^\[[ xX]\] +/,""))),l.items.push({type:"list_item",raw:m,task:!!E,checked:M,loose:!1,text:g,tokens:[]}),l.raw+=m}l.items[l.items.length-1].raw=l.items[l.items.length-1].raw.trimEnd(),l.items[l.items.length-1].text=l.items[l.items.length-1].text.trimEnd(),l.raw=l.raw.trimEnd();for(let p=0;p<l.items.length;p++)if(this.lexer.state.top=!1,l.items[p].tokens=this.lexer.blockTokens(l.items[p].text,[]),!l.loose){const m=l.items[p].tokens.filter(_=>_.type==="space"),g=m.length>0&&m.some(_=>/\n.*\n/.test(_.raw));l.loose=g}if(l.loose)for(let p=0;p<l.items.length;p++)l.items[p].loose=!0;return l}}html(t){const e=this.rules.block.html.exec(t);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(t){const e=this.rules.block.def.exec(t);if(e){const i=e[1].toLowerCase().replace(/\s+/g," "),o=e[2]?e[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",l=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:i,raw:e[0],href:o,title:l}}}table(t){const e=this.rules.block.table.exec(t);if(!e||!/[:|]/.test(e[2]))return;const i=jg(e[1]),o=e[2].replace(/^\||\| *$/g,"").split("|"),l=e[3]&&e[3].trim()?e[3].replace(/\n[ \t]*$/,"").split(`
`):[],u={type:"table",raw:e[0],header:[],align:[],rows:[]};if(i.length===o.length){for(const d of o)/^ *-+: *$/.test(d)?u.align.push("right"):/^ *:-+: *$/.test(d)?u.align.push("center"):/^ *:-+ *$/.test(d)?u.align.push("left"):u.align.push(null);for(let d=0;d<i.length;d++)u.header.push({text:i[d],tokens:this.lexer.inline(i[d]),header:!0,align:u.align[d]});for(const d of l)u.rows.push(jg(d,u.header.length).map((p,m)=>({text:p,tokens:this.lexer.inline(p),header:!1,align:u.align[m]})));return u}}lheading(t){const e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){const e=this.rules.block.paragraph.exec(t);if(e){const i=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:i,tokens:this.lexer.inline(i)}}}text(t){const e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){const e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:Oe(e[1])}}tag(t){const e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&/^<a /i.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(t){const e=this.rules.inline.link.exec(t);if(e){const i=e[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;const u=fr(i.slice(0,-1),"\\");if((i.length-u.length)%2===0)return}else{const u=qw(e[2],"()");if(u>-1){const p=(e[0].indexOf("!")===0?5:4)+e[1].length+u;e[2]=e[2].substring(0,u),e[0]=e[0].substring(0,p).trim(),e[3]=""}}let o=e[2],l="";if(this.options.pedantic){const u=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(o);u&&(o=u[1],l=u[3])}else l=e[3]?e[3].slice(1,-1):"";return o=o.trim(),/^</.test(o)&&(this.options.pedantic&&!/>$/.test(i)?o=o.slice(1):o=o.slice(1,-1)),tv(e,{href:o&&o.replace(this.rules.inline.anyPunctuation,"$1"),title:l&&l.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer)}}reflink(t,e){let i;if((i=this.rules.inline.reflink.exec(t))||(i=this.rules.inline.nolink.exec(t))){const o=(i[2]||i[1]).replace(/\s+/g," "),l=e[o.toLowerCase()];if(!l){const u=i[0].charAt(0);return{type:"text",raw:u,text:u}}return tv(i,l,i[0],this.lexer)}}emStrong(t,e,i=""){let o=this.rules.inline.emStrongLDelim.exec(t);if(!o||o[3]&&i.match(/[\p{L}\p{N}]/u))return;if(!(o[1]||o[2]||"")||!i||this.rules.inline.punctuation.exec(i)){const u=[...o[0]].length-1;let d,p,m=u,g=0;const _=o[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(_.lastIndex=0,e=e.slice(-1*t.length+u);(o=_.exec(e))!=null;){if(d=o[1]||o[2]||o[3]||o[4]||o[5]||o[6],!d)continue;if(p=[...d].length,o[3]||o[4]){m+=p;continue}else if((o[5]||o[6])&&u%3&&!((u+p)%3)){g+=p;continue}if(m-=p,m>0)continue;p=Math.min(p,p+m+g);const S=[...o[0]][0].length,b=t.slice(0,u+o.index+S+p);if(Math.min(u,p)%2){const E=b.slice(1,-1);return{type:"em",raw:b,text:E,tokens:this.lexer.inlineTokens(E)}}const w=b.slice(2,-2);return{type:"strong",raw:b,text:w,tokens:this.lexer.inlineTokens(w)}}}}codespan(t){const e=this.rules.inline.code.exec(t);if(e){let i=e[2].replace(/\n/g," ");const o=/[^ ]/.test(i),l=/^ /.test(i)&&/ $/.test(i);return o&&l&&(i=i.substring(1,i.length-1)),i=Oe(i,!0),{type:"codespan",raw:e[0],text:i}}}br(t){const e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){const e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t){const e=this.rules.inline.autolink.exec(t);if(e){let i,o;return e[2]==="@"?(i=Oe(e[1]),o="mailto:"+i):(i=Oe(e[1]),o=i),{type:"link",raw:e[0],text:i,href:o,tokens:[{type:"text",raw:i,text:i}]}}}url(t){var i;let e;if(e=this.rules.inline.url.exec(t)){let o,l;if(e[2]==="@")o=Oe(e[0]),l="mailto:"+o;else{let u;do u=e[0],e[0]=((i=this.rules.inline._backpedal.exec(e[0]))==null?void 0:i[0])??"";while(u!==e[0]);o=Oe(e[0]),e[1]==="www."?l="http://"+e[0]:l=e[0]}return{type:"link",raw:e[0],text:o,href:l,tokens:[{type:"text",raw:o,text:o}]}}}inlineText(t){const e=this.rules.inline.text.exec(t);if(e){let i;return this.lexer.state.inRawBlock?i=e[0]:i=Oe(e[0]),{type:"text",raw:e[0],text:i}}}}const Hw=/^(?: *(?:\n|$))+/,Gw=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,Fw=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Ur=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Jw=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Z0=/(?:[*+-]|\d{1,9}[.)])/,j0=Vt(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,Z0).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),_f=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Kw=/^[^\n]+/,Sf=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Yw=Vt(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",Sf).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Ww=Vt(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Z0).getRegex(),La="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",bf=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Xw=Vt("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",bf).replace("tag",La).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),t_=Vt(_f).replace("hr",Ur).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",La).getRegex(),Qw=Vt(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",t_).getRegex(),Tf={blockquote:Qw,code:Gw,def:Yw,fences:Fw,heading:Jw,hr:Ur,html:Xw,lheading:j0,list:Ww,newline:Hw,paragraph:t_,table:_r,text:Kw},ev=Vt("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Ur).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",La).getRegex(),Zw={...Tf,table:ev,paragraph:Vt(_f).replace("hr",Ur).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",ev).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",La).getRegex()},jw={...Tf,html:Vt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",bf).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:_r,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Vt(_f).replace("hr",Ur).replace("heading",` *#{1,6} *[^
]`).replace("lheading",j0).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},e_=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,tC=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,n_=/^( {2,}|\\)\n(?!\s*$)/,eC=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Pr="\\p{P}\\p{S}",nC=Vt(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Pr).getRegex(),iC=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,sC=Vt(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Pr).getRegex(),oC=Vt("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Pr).getRegex(),rC=Vt("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Pr).getRegex(),lC=Vt(/\\([punct])/,"gu").replace(/punct/g,Pr).getRegex(),aC=Vt(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),uC=Vt(bf).replace("(?:-->|$)","-->").getRegex(),cC=Vt("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",uC).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Ca=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,hC=Vt(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Ca).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),i_=Vt(/^!?\[(label)\]\[(ref)\]/).replace("label",Ca).replace("ref",Sf).getRegex(),s_=Vt(/^!?\[(ref)\](?:\[\])?/).replace("ref",Sf).getRegex(),fC=Vt("reflink|nolink(?!\\()","g").replace("reflink",i_).replace("nolink",s_).getRegex(),wf={_backpedal:_r,anyPunctuation:lC,autolink:aC,blockSkip:iC,br:n_,code:tC,del:_r,emStrongLDelim:sC,emStrongRDelimAst:oC,emStrongRDelimUnd:rC,escape:e_,link:hC,nolink:s_,punctuation:nC,reflink:i_,reflinkSearch:fC,tag:cC,text:eC,url:_r},dC={...wf,link:Vt(/^!?\[(label)\]\((.*?)\)/).replace("label",Ca).getRegex(),reflink:Vt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Ca).getRegex()},Vh={...wf,escape:Vt(e_).replace("])","~|])").getRegex(),url:Vt(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},pC={...Vh,br:Vt(n_).replace("{2,}","*").getRegex(),text:Vt(Vh.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},na={normal:Tf,gfm:Zw,pedantic:jw},dr={normal:wf,gfm:Vh,breaks:pC,pedantic:dC};class dn{constructor(t){qt(this,"tokens");qt(this,"options");qt(this,"state");qt(this,"tokenizer");qt(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=t||Ji,this.options.tokenizer=this.options.tokenizer||new wa,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const e={block:na.normal,inline:dr.normal};this.options.pedantic?(e.block=na.pedantic,e.inline=dr.pedantic):this.options.gfm&&(e.block=na.gfm,this.options.breaks?e.inline=dr.breaks:e.inline=dr.gfm),this.tokenizer.rules=e}static get rules(){return{block:na,inline:dr}}static lex(t,e){return new dn(e).lex(t)}static lexInline(t,e){return new dn(e).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,`
`),this.blockTokens(t,this.tokens);for(let e=0;e<this.inlineQueue.length;e++){const i=this.inlineQueue[e];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,e=[],i=!1){this.options.pedantic?t=t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t=t.replace(/^( *)(\t+)/gm,(d,p,m)=>p+"    ".repeat(m.length));let o,l,u;for(;t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(d=>(o=d.call({lexer:this},t,e))?(t=t.substring(o.raw.length),e.push(o),!0):!1))){if(o=this.tokenizer.space(t)){t=t.substring(o.raw.length),o.raw.length===1&&e.length>0?e[e.length-1].raw+=`
`:e.push(o);continue}if(o=this.tokenizer.code(t)){t=t.substring(o.raw.length),l=e[e.length-1],l&&(l.type==="paragraph"||l.type==="text")?(l.raw+=`
`+o.raw,l.text+=`
`+o.text,this.inlineQueue[this.inlineQueue.length-1].src=l.text):e.push(o);continue}if(o=this.tokenizer.fences(t)){t=t.substring(o.raw.length),e.push(o);continue}if(o=this.tokenizer.heading(t)){t=t.substring(o.raw.length),e.push(o);continue}if(o=this.tokenizer.hr(t)){t=t.substring(o.raw.length),e.push(o);continue}if(o=this.tokenizer.blockquote(t)){t=t.substring(o.raw.length),e.push(o);continue}if(o=this.tokenizer.list(t)){t=t.substring(o.raw.length),e.push(o);continue}if(o=this.tokenizer.html(t)){t=t.substring(o.raw.length),e.push(o);continue}if(o=this.tokenizer.def(t)){t=t.substring(o.raw.length),l=e[e.length-1],l&&(l.type==="paragraph"||l.type==="text")?(l.raw+=`
`+o.raw,l.text+=`
`+o.raw,this.inlineQueue[this.inlineQueue.length-1].src=l.text):this.tokens.links[o.tag]||(this.tokens.links[o.tag]={href:o.href,title:o.title});continue}if(o=this.tokenizer.table(t)){t=t.substring(o.raw.length),e.push(o);continue}if(o=this.tokenizer.lheading(t)){t=t.substring(o.raw.length),e.push(o);continue}if(u=t,this.options.extensions&&this.options.extensions.startBlock){let d=1/0;const p=t.slice(1);let m;this.options.extensions.startBlock.forEach(g=>{m=g.call({lexer:this},p),typeof m=="number"&&m>=0&&(d=Math.min(d,m))}),d<1/0&&d>=0&&(u=t.substring(0,d+1))}if(this.state.top&&(o=this.tokenizer.paragraph(u))){l=e[e.length-1],i&&(l==null?void 0:l.type)==="paragraph"?(l.raw+=`
`+o.raw,l.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=l.text):e.push(o),i=u.length!==t.length,t=t.substring(o.raw.length);continue}if(o=this.tokenizer.text(t)){t=t.substring(o.raw.length),l=e[e.length-1],l&&l.type==="text"?(l.raw+=`
`+o.raw,l.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=l.text):e.push(o);continue}if(t){const d="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(d);break}else throw new Error(d)}}return this.state.top=!0,e}inline(t,e=[]){return this.inlineQueue.push({src:t,tokens:e}),e}inlineTokens(t,e=[]){let i,o,l,u=t,d,p,m;if(this.tokens.links){const g=Object.keys(this.tokens.links);if(g.length>0)for(;(d=this.tokenizer.rules.inline.reflinkSearch.exec(u))!=null;)g.includes(d[0].slice(d[0].lastIndexOf("[")+1,-1))&&(u=u.slice(0,d.index)+"["+"a".repeat(d[0].length-2)+"]"+u.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(d=this.tokenizer.rules.inline.blockSkip.exec(u))!=null;)u=u.slice(0,d.index)+"["+"a".repeat(d[0].length-2)+"]"+u.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(d=this.tokenizer.rules.inline.anyPunctuation.exec(u))!=null;)u=u.slice(0,d.index)+"++"+u.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;t;)if(p||(m=""),p=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(g=>(i=g.call({lexer:this},t,e))?(t=t.substring(i.raw.length),e.push(i),!0):!1))){if(i=this.tokenizer.escape(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.tag(t)){t=t.substring(i.raw.length),o=e[e.length-1],o&&i.type==="text"&&o.type==="text"?(o.raw+=i.raw,o.text+=i.text):e.push(i);continue}if(i=this.tokenizer.link(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(i.raw.length),o=e[e.length-1],o&&i.type==="text"&&o.type==="text"?(o.raw+=i.raw,o.text+=i.text):e.push(i);continue}if(i=this.tokenizer.emStrong(t,u,m)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.codespan(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.br(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.del(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.autolink(t)){t=t.substring(i.raw.length),e.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(t))){t=t.substring(i.raw.length),e.push(i);continue}if(l=t,this.options.extensions&&this.options.extensions.startInline){let g=1/0;const _=t.slice(1);let S;this.options.extensions.startInline.forEach(b=>{S=b.call({lexer:this},_),typeof S=="number"&&S>=0&&(g=Math.min(g,S))}),g<1/0&&g>=0&&(l=t.substring(0,g+1))}if(i=this.tokenizer.inlineText(l)){t=t.substring(i.raw.length),i.raw.slice(-1)!=="_"&&(m=i.raw.slice(-1)),p=!0,o=e[e.length-1],o&&o.type==="text"?(o.raw+=i.raw,o.text+=i.text):e.push(i);continue}if(t){const g="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(g);break}else throw new Error(g)}}return e}}class xa{constructor(t){qt(this,"options");qt(this,"parser");this.options=t||Ji}space(t){return""}code({text:t,lang:e,escaped:i}){var u;const o=(u=(e||"").match(/^\S*/))==null?void 0:u[0],l=t.replace(/\n$/,"")+`
`;return o?'<pre><code class="language-'+Oe(o)+'">'+(i?l:Oe(l,!0))+`</code></pre>
`:"<pre><code>"+(i?l:Oe(l,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}heading({tokens:t,depth:e}){return`<h${e}>${this.parser.parseInline(t)}</h${e}>
`}hr(t){return`<hr>
`}list(t){const e=t.ordered,i=t.start;let o="";for(let d=0;d<t.items.length;d++){const p=t.items[d];o+=this.listitem(p)}const l=e?"ol":"ul",u=e&&i!==1?' start="'+i+'"':"";return"<"+l+u+`>
`+o+"</"+l+`>
`}listitem(t){let e="";if(t.task){const i=this.checkbox({checked:!!t.checked});t.loose?t.tokens.length>0&&t.tokens[0].type==="paragraph"?(t.tokens[0].text=i+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&t.tokens[0].tokens[0].type==="text"&&(t.tokens[0].tokens[0].text=i+" "+t.tokens[0].tokens[0].text)):t.tokens.unshift({type:"text",raw:i+" ",text:i+" "}):e+=i+" "}return e+=this.parser.parse(t.tokens,!!t.loose),`<li>${e}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let e="",i="";for(let l=0;l<t.header.length;l++)i+=this.tablecell(t.header[l]);e+=this.tablerow({text:i});let o="";for(let l=0;l<t.rows.length;l++){const u=t.rows[l];i="";for(let d=0;d<u.length;d++)i+=this.tablecell(u[d]);o+=this.tablerow({text:i})}return o&&(o=`<tbody>${o}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+o+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){const e=this.parser.parseInline(t.tokens),i=t.header?"th":"td";return(t.align?`<${i} align="${t.align}">`:`<${i}>`)+e+`</${i}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${t}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:e,tokens:i}){const o=this.parser.parseInline(i),l=Zg(t);if(l===null)return o;t=l;let u='<a href="'+t+'"';return e&&(u+=' title="'+e+'"'),u+=">"+o+"</a>",u}image({href:t,title:e,text:i}){const o=Zg(t);if(o===null)return i;t=o;let l=`<img src="${t}" alt="${i}"`;return e&&(l+=` title="${e}"`),l+=">",l}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):t.text}}class Cf{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}}class pn{constructor(t){qt(this,"options");qt(this,"renderer");qt(this,"textRenderer");this.options=t||Ji,this.options.renderer=this.options.renderer||new xa,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Cf}static parse(t,e){return new pn(e).parse(t)}static parseInline(t,e){return new pn(e).parseInline(t)}parse(t,e=!0){let i="";for(let o=0;o<t.length;o++){const l=t[o];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[l.type]){const d=l,p=this.options.extensions.renderers[d.type].call({parser:this},d);if(p!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(d.type)){i+=p||"";continue}}const u=l;switch(u.type){case"space":{i+=this.renderer.space(u);continue}case"hr":{i+=this.renderer.hr(u);continue}case"heading":{i+=this.renderer.heading(u);continue}case"code":{i+=this.renderer.code(u);continue}case"table":{i+=this.renderer.table(u);continue}case"blockquote":{i+=this.renderer.blockquote(u);continue}case"list":{i+=this.renderer.list(u);continue}case"html":{i+=this.renderer.html(u);continue}case"paragraph":{i+=this.renderer.paragraph(u);continue}case"text":{let d=u,p=this.renderer.text(d);for(;o+1<t.length&&t[o+1].type==="text";)d=t[++o],p+=`
`+this.renderer.text(d);e?i+=this.renderer.paragraph({type:"paragraph",raw:p,text:p,tokens:[{type:"text",raw:p,text:p}]}):i+=p;continue}default:{const d='Token with "'+u.type+'" type was not found.';if(this.options.silent)return console.error(d),"";throw new Error(d)}}}return i}parseInline(t,e){e=e||this.renderer;let i="";for(let o=0;o<t.length;o++){const l=t[o];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[l.type]){const d=this.options.extensions.renderers[l.type].call({parser:this},l);if(d!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(l.type)){i+=d||"";continue}}const u=l;switch(u.type){case"escape":{i+=e.text(u);break}case"html":{i+=e.html(u);break}case"link":{i+=e.link(u);break}case"image":{i+=e.image(u);break}case"strong":{i+=e.strong(u);break}case"em":{i+=e.em(u);break}case"codespan":{i+=e.codespan(u);break}case"br":{i+=e.br(u);break}case"del":{i+=e.del(u);break}case"text":{i+=e.text(u);break}default:{const d='Token with "'+u.type+'" type was not found.';if(this.options.silent)return console.error(d),"";throw new Error(d)}}}return i}}class Sr{constructor(t){qt(this,"options");this.options=t||Ji}preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}}qt(Sr,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));var zn,o_,Bh,r_;class mC{constructor(...t){Bg(this,zn);qt(this,"defaults",yf());qt(this,"options",this.setOptions);qt(this,"parse",ur(this,zn,Bh).call(this,dn.lex,pn.parse));qt(this,"parseInline",ur(this,zn,Bh).call(this,dn.lexInline,pn.parseInline));qt(this,"Parser",pn);qt(this,"Renderer",xa);qt(this,"TextRenderer",Cf);qt(this,"Lexer",dn);qt(this,"Tokenizer",wa);qt(this,"Hooks",Sr);this.use(...t)}walkTokens(t,e){var o,l;let i=[];for(const u of t)switch(i=i.concat(e.call(this,u)),u.type){case"table":{const d=u;for(const p of d.header)i=i.concat(this.walkTokens(p.tokens,e));for(const p of d.rows)for(const m of p)i=i.concat(this.walkTokens(m.tokens,e));break}case"list":{const d=u;i=i.concat(this.walkTokens(d.items,e));break}default:{const d=u;(l=(o=this.defaults.extensions)==null?void 0:o.childTokens)!=null&&l[d.type]?this.defaults.extensions.childTokens[d.type].forEach(p=>{const m=d[p].flat(1/0);i=i.concat(this.walkTokens(m,e))}):d.tokens&&(i=i.concat(this.walkTokens(d.tokens,e)))}}return i}use(...t){const e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(i=>{const o={...i};if(o.async=this.defaults.async||o.async||!1,i.extensions&&(i.extensions.forEach(l=>{if(!l.name)throw new Error("extension name required");if("renderer"in l){const u=e.renderers[l.name];u?e.renderers[l.name]=function(...d){let p=l.renderer.apply(this,d);return p===!1&&(p=u.apply(this,d)),p}:e.renderers[l.name]=l.renderer}if("tokenizer"in l){if(!l.level||l.level!=="block"&&l.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const u=e[l.level];u?u.unshift(l.tokenizer):e[l.level]=[l.tokenizer],l.start&&(l.level==="block"?e.startBlock?e.startBlock.push(l.start):e.startBlock=[l.start]:l.level==="inline"&&(e.startInline?e.startInline.push(l.start):e.startInline=[l.start]))}"childTokens"in l&&l.childTokens&&(e.childTokens[l.name]=l.childTokens)}),o.extensions=e),i.renderer){const l=this.defaults.renderer||new xa(this.defaults);for(const u in i.renderer){if(!(u in l))throw new Error(`renderer '${u}' does not exist`);if(["options","parser"].includes(u))continue;const d=u;let p=i.renderer[d];i.useNewRenderer||(p=ur(this,zn,o_).call(this,p,d,l));const m=l[d];l[d]=(...g)=>{let _=p.apply(l,g);return _===!1&&(_=m.apply(l,g)),_||""}}o.renderer=l}if(i.tokenizer){const l=this.defaults.tokenizer||new wa(this.defaults);for(const u in i.tokenizer){if(!(u in l))throw new Error(`tokenizer '${u}' does not exist`);if(["options","rules","lexer"].includes(u))continue;const d=u,p=i.tokenizer[d],m=l[d];l[d]=(...g)=>{let _=p.apply(l,g);return _===!1&&(_=m.apply(l,g)),_}}o.tokenizer=l}if(i.hooks){const l=this.defaults.hooks||new Sr;for(const u in i.hooks){if(!(u in l))throw new Error(`hook '${u}' does not exist`);if(u==="options")continue;const d=u,p=i.hooks[d],m=l[d];Sr.passThroughHooks.has(u)?l[d]=g=>{if(this.defaults.async)return Promise.resolve(p.call(l,g)).then(S=>m.call(l,S));const _=p.call(l,g);return m.call(l,_)}:l[d]=(...g)=>{let _=p.apply(l,g);return _===!1&&(_=m.apply(l,g)),_}}o.hooks=l}if(i.walkTokens){const l=this.defaults.walkTokens,u=i.walkTokens;o.walkTokens=function(d){let p=[];return p.push(u.call(this,d)),l&&(p=p.concat(l.call(this,d))),p}}this.defaults={...this.defaults,...o}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,e){return dn.lex(t,e??this.defaults)}parser(t,e){return pn.parse(t,e??this.defaults)}}zn=new WeakSet,o_=function(t,e,i){switch(e){case"heading":return function(o){return!o.type||o.type!==e?t.apply(this,arguments):t.call(this,i.parser.parseInline(o.tokens),o.depth,Bw(i.parser.parseInline(o.tokens,i.parser.textRenderer)))};case"code":return function(o){return!o.type||o.type!==e?t.apply(this,arguments):t.call(this,o.text,o.lang,!!o.escaped)};case"table":return function(o){if(!o.type||o.type!==e)return t.apply(this,arguments);let l="",u="";for(let p=0;p<o.header.length;p++)u+=this.tablecell({text:o.header[p].text,tokens:o.header[p].tokens,header:!0,align:o.align[p]});l+=this.tablerow({text:u});let d="";for(let p=0;p<o.rows.length;p++){const m=o.rows[p];u="";for(let g=0;g<m.length;g++)u+=this.tablecell({text:m[g].text,tokens:m[g].tokens,header:!1,align:o.align[g]});d+=this.tablerow({text:u})}return t.call(this,l,d)};case"blockquote":return function(o){if(!o.type||o.type!==e)return t.apply(this,arguments);const l=this.parser.parse(o.tokens);return t.call(this,l)};case"list":return function(o){if(!o.type||o.type!==e)return t.apply(this,arguments);const l=o.ordered,u=o.start,d=o.loose;let p="";for(let m=0;m<o.items.length;m++){const g=o.items[m],_=g.checked,S=g.task;let b="";if(g.task){const w=this.checkbox({checked:!!_});d?g.tokens.length>0&&g.tokens[0].type==="paragraph"?(g.tokens[0].text=w+" "+g.tokens[0].text,g.tokens[0].tokens&&g.tokens[0].tokens.length>0&&g.tokens[0].tokens[0].type==="text"&&(g.tokens[0].tokens[0].text=w+" "+g.tokens[0].tokens[0].text)):g.tokens.unshift({type:"text",text:w+" "}):b+=w+" "}b+=this.parser.parse(g.tokens,d),p+=this.listitem({type:"list_item",raw:b,text:b,task:S,checked:!!_,loose:d,tokens:g.tokens})}return t.call(this,p,l,u)};case"html":return function(o){return!o.type||o.type!==e?t.apply(this,arguments):t.call(this,o.text,o.block)};case"paragraph":return function(o){return!o.type||o.type!==e?t.apply(this,arguments):t.call(this,this.parser.parseInline(o.tokens))};case"escape":return function(o){return!o.type||o.type!==e?t.apply(this,arguments):t.call(this,o.text)};case"link":return function(o){return!o.type||o.type!==e?t.apply(this,arguments):t.call(this,o.href,o.title,this.parser.parseInline(o.tokens))};case"image":return function(o){return!o.type||o.type!==e?t.apply(this,arguments):t.call(this,o.href,o.title,o.text)};case"strong":return function(o){return!o.type||o.type!==e?t.apply(this,arguments):t.call(this,this.parser.parseInline(o.tokens))};case"em":return function(o){return!o.type||o.type!==e?t.apply(this,arguments):t.call(this,this.parser.parseInline(o.tokens))};case"codespan":return function(o){return!o.type||o.type!==e?t.apply(this,arguments):t.call(this,o.text)};case"del":return function(o){return!o.type||o.type!==e?t.apply(this,arguments):t.call(this,this.parser.parseInline(o.tokens))};case"text":return function(o){return!o.type||o.type!==e?t.apply(this,arguments):t.call(this,o.text)}}return t},Bh=function(t,e){return(i,o)=>{const l={...o},u={...this.defaults,...l};this.defaults.async===!0&&l.async===!1&&(u.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),u.async=!0);const d=ur(this,zn,r_).call(this,!!u.silent,!!u.async);if(typeof i>"u"||i===null)return d(new Error("marked(): input parameter is undefined or null"));if(typeof i!="string")return d(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(i)+", string expected"));if(u.hooks&&(u.hooks.options=u),u.async)return Promise.resolve(u.hooks?u.hooks.preprocess(i):i).then(p=>t(p,u)).then(p=>u.hooks?u.hooks.processAllTokens(p):p).then(p=>u.walkTokens?Promise.all(this.walkTokens(p,u.walkTokens)).then(()=>p):p).then(p=>e(p,u)).then(p=>u.hooks?u.hooks.postprocess(p):p).catch(d);try{u.hooks&&(i=u.hooks.preprocess(i));let p=t(i,u);u.hooks&&(p=u.hooks.processAllTokens(p)),u.walkTokens&&this.walkTokens(p,u.walkTokens);let m=e(p,u);return u.hooks&&(m=u.hooks.postprocess(m)),m}catch(p){return d(p)}}},r_=function(t,e){return i=>{if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,t){const o="<p>An error occurred:</p><pre>"+Oe(i.message+"",!0)+"</pre>";return e?Promise.resolve(o):o}if(e)return Promise.reject(i);throw i}};const Oi=new mC;function Lt(n,t){return Oi.parse(n,t)}Lt.options=Lt.setOptions=function(n){return Oi.setOptions(n),Lt.defaults=Oi.defaults,W0(Lt.defaults),Lt};Lt.getDefaults=yf;Lt.defaults=Ji;Lt.use=function(...n){return Oi.use(...n),Lt.defaults=Oi.defaults,W0(Lt.defaults),Lt};Lt.walkTokens=function(n,t){return Oi.walkTokens(n,t)};Lt.parseInline=Oi.parseInline;Lt.Parser=pn;Lt.parser=pn.parse;Lt.Renderer=xa;Lt.TextRenderer=Cf;Lt.Lexer=dn;Lt.lexer=dn.lex;Lt.Tokenizer=wa;Lt.Hooks=Sr;Lt.parse=Lt;Lt.options;Lt.setOptions;Lt.use;Lt.walkTokens;Lt.parseInline;pn.parse;dn.lex;const gC=n=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 11.667 0l3.181-3.183m-4.991-2.691v4.992m0 0h-4.992m4.992 0-3.181-3.183a8.25 8.25 0 0 0-11.667 0L2.985 16.652"})}),vC=n=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"})}),yC=n=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"})}),_C=()=>x.jsx("div",{className:"w-8 h-8 rounded-full bg-accent-blue flex items-center justify-center font-bold text-white flex-shrink-0",children:"U"}),SC=()=>x.jsx("div",{className:"w-8 h-8 rounded-full bg-sidebar-bg border border-border-color flex items-center justify-center flex-shrink-0",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 text-accent-blue",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456Z"})})}),nv=({content:n})=>{const t=Lt.parse(n,{gfm:!0,breaks:!0});return x.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:t}})},bC=({result:n})=>{const[t,e]=et.useState(!1),i=n.signal==="BUY"?"text-accent-green":n.signal==="SELL"?"text-accent-red":"text-accent-yellow",o=n.signal==="BUY"?"bg-accent-green-10":n.signal==="SELL"?"bg-accent-red-10":"bg-accent-yellow-10",l=()=>{let u=`Wizz AI Analysis
---
`;u+=`Summary: ${n.summary}
`,u+=`Signal: ${n.signal} (${n.confidence} Confidence)
`,n.trade&&n.confidence==="HIGH"&&(u+=`Entry Price: ${n.trade.entryPrice}
`,u+=`Take Profit: ${n.trade.takeProfit}
`,u+=`Stop Loss: ${n.trade.stopLoss}
`),n.riskRewardRatio&&(u+=`Risk/Reward Ratio: ${n.riskRewardRatio}
`),u+=`AI Confidence Score: ${n.overallConfidenceScore}/100`,navigator.clipboard.writeText(u).then(()=>{e(!0),setTimeout(()=>e(!1),2e3)})};return x.jsxs("div",{className:"border border-border-color rounded-lg space-y-4 bg-sidebar-bg relative",children:[x.jsx("div",{className:"absolute top-2 right-2",children:x.jsx("button",{onClick:l,className:"p-1.5 rounded-md text-text-secondary hover:bg-input-bg hover:text-text-primary transition-colors","aria-label":"Copy analysis to clipboard",children:t?x.jsx(yC,{className:"h-4 w-4 text-accent-green"}):x.jsx(vC,{className:"h-4 w-4"})})}),x.jsxs("div",{className:"p-4 space-y-4",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"font-semibold text-text-primary mb-1",children:"Summary"}),x.jsx("p",{className:"text-sm text-text-secondary",children:n.summary})]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[x.jsxs("div",{className:`p-3 rounded-lg ${o}`,children:[x.jsx("h4",{className:"text-xs font-semibold text-text-secondary mb-1",children:"Signal"}),x.jsx("p",{className:`text-lg font-bold ${i}`,children:n.signal})]}),x.jsxs("div",{className:"p-3 rounded-lg bg-input-bg-50",children:[x.jsx("h4",{className:"text-xs font-semibold text-text-secondary mb-1",children:"Confidence"}),x.jsx("p",{className:`text-lg font-bold ${n.confidence==="HIGH"?"text-text-primary":"text-text-secondary"}`,children:n.confidence})]})]}),n.timeframe&&x.jsxs("div",{children:[x.jsx("h3",{className:"font-semibold text-text-primary mb-2",children:"Analysis Context"}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:[x.jsxs("div",{className:"bg-input-bg-50 p-2 rounded-md",children:[x.jsx("span",{className:"text-text-secondary block text-xs",children:"Chart Timeframe"}),x.jsx("span",{className:"font-mono text-text-primary",children:n.timeframe})]}),n.riskRewardRatio&&x.jsxs("div",{className:"bg-input-bg-50 p-2 rounded-md",children:[x.jsx("span",{className:"text-text-secondary block text-xs",children:"Risk/Reward Ratio"}),x.jsx("span",{className:"font-mono text-text-primary",children:n.riskRewardRatio})]})]})]}),n.trade&&n.confidence==="HIGH"&&x.jsxs("div",{children:[x.jsx("h3",{className:"font-semibold text-text-primary mb-2",children:"Trade Details"}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 text-sm",children:[x.jsxs("div",{className:"bg-input-bg-50 p-2 rounded-md",children:[x.jsx("span",{className:"text-text-secondary block text-xs",children:"Entry Price"}),x.jsx("span",{className:"font-mono text-text-primary",children:n.trade.entryPrice})]}),x.jsxs("div",{className:"bg-input-bg-50 p-2 rounded-md",children:[x.jsx("span",{className:"text-text-secondary block text-xs",children:"Take Profit"}),x.jsx("span",{className:"font-mono text-accent-green",children:n.trade.takeProfit})]}),x.jsxs("div",{className:"bg-input-bg-50 p-2 rounded-md",children:[x.jsx("span",{className:"text-text-secondary block text-xs",children:"Stop Loss"}),x.jsx("span",{className:"font-mono text-accent-red",children:n.trade.stopLoss})]})]})]}),n.confidence==="LOW"&&x.jsx("p",{className:"text-xs text-center text-text-secondary italic",children:"No trade signal provided due to low confidence."}),x.jsxs("div",{children:[x.jsx("h3",{className:"font-semibold text-text-primary mb-2",children:"Verification"}),x.jsxs("div",{className:"bg-input-bg-50 p-3 rounded-lg space-y-2",children:[x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsx("span",{className:"text-sm font-medium text-text-secondary",children:"AI Confidence Score"}),x.jsxs("span",{className:"text-lg font-bold text-text-primary",children:[n.overallConfidenceScore,"/100"]})]}),x.jsx("div",{className:"w-full bg-border-color rounded-full h-2.5",children:x.jsx("div",{className:"bg-accent-blue h-2.5 rounded-full",style:{width:`${n.overallConfidenceScore}%`}})}),x.jsx("p",{className:"text-xs text-text-secondary pt-1",children:n.verificationSummary})]})]})]})]})},TC=Ys.memo(({message:n,isLastMessage:t,isLoading:e,onRegenerate:i})=>{const o=n.role==="user",{content:l,thinkingText:u}=n;if(o){const p=[];return Array.isArray(n.images)&&n.images.length>0?p.push(...n.images):n.image&&p.push(n.image),x.jsxs("div",{className:"flex items-start gap-4 justify-end",children:[x.jsxs("div",{className:"flex-1 max-w-2xl bg-accent-blue rounded-lg p-3 text-white",children:[typeof l=="string"&&l&&x.jsx("p",{className:"whitespace-pre-wrap",children:l}),p.length>0&&x.jsx("div",{className:"mt-2 grid grid-cols-2 md:grid-cols-3 gap-2",children:p.map((m,g)=>x.jsx("img",{src:m,alt:`User upload ${g+1}`,className:"max-w-xs max-h-64 rounded-md border border-blue-400"},g))})]}),x.jsx(_C,{})]})}const d=typeof l=="string"&&(l.startsWith("Error:")||l.startsWith("Sorry, I encountered an error")||l==="Response stopped by user."||l==="An unexpected error occurred. Please try again.");return x.jsxs("div",{className:"flex items-start gap-4",children:[x.jsx(SC,{}),x.jsxs("div",{className:"flex-1 max-w-2xl space-y-4",children:[e&&x.jsxs("div",{className:"flex items-center gap-2 text-text-secondary",children:[x.jsx("div",{className:"h-5 w-5 border-2 border-t-transparent border-accent-blue rounded-full animate-spin"}),x.jsx("span",{children:"Wizz is analyzing..."})]}),u&&x.jsx(nv,{content:u}),typeof l=="object"&&x.jsx(bC,{result:l}),typeof l=="string"&&l&&(d?x.jsx("p",{className:"text-text-secondary italic",children:l}):x.jsx(nv,{content:l})),t&&n.role==="assistant"&&!e&&n.content&&x.jsx("div",{className:"!mt-2 flex justify-start",children:x.jsxs("button",{onClick:i,className:"flex items-center gap-1.5 text-xs text-text-secondary hover:text-text-primary px-2 py-1 rounded-md hover:bg-input-bg transition-colors","aria-label":"Regenerate response",children:[x.jsx(gC,{className:"h-4 w-4"}),x.jsx("span",{children:"Regenerate"})]})})]})]})});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let wC,CC;function xC(){return{geminiUrl:wC,vertexUrl:CC}}function EC(n,t,e,i){var o,l;if(!(n!=null&&n.baseUrl)){const u=xC();return t?(o=u.vertexUrl)!==null&&o!==void 0?o:e:(l=u.geminiUrl)!==null&&l!==void 0?l:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ki{}function ut(n,t){const e=/\{([^}]+)\}/g;return n.replace(e,(i,o)=>{if(Object.prototype.hasOwnProperty.call(t,o)){const l=t[o];return l!=null?String(l):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function h(n,t,e){for(let l=0;l<t.length-1;l++){const u=t[l];if(u.endsWith("[]")){const d=u.slice(0,-2);if(!(d in n))if(Array.isArray(e))n[d]=Array.from({length:e.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[d])){const p=n[d];if(Array.isArray(e))for(let m=0;m<p.length;m++){const g=p[m];h(g,t.slice(l+1),e[m])}else for(const m of p)h(m,t.slice(l+1),e)}return}else if(u.endsWith("[0]")){const d=u.slice(0,-3);d in n||(n[d]=[{}]);const p=n[d];h(p[0],t.slice(l+1),e);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const i=t[t.length-1],o=n[i];if(o!==void 0){if(!e||typeof e=="object"&&Object.keys(e).length===0||e===o)return;if(typeof o=="object"&&typeof e=="object"&&o!==null&&e!==null)Object.assign(o,e);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else n[i]=e}function c(n,t){try{if(t.length===1&&t[0]==="_self")return n;for(let e=0;e<t.length;e++){if(typeof n!="object"||n===null)return;const i=t[e];if(i.endsWith("[]")){const o=i.slice(0,-2);if(o in n){const l=n[o];return Array.isArray(l)?l.map(u=>c(u,t.slice(e+1))):void 0}else return}else n=n[i]}return n}catch(e){if(e instanceof TypeError)return;throw e}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Oh(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var iv;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(iv||(iv={}));var sv;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(sv||(sv={}));var Zt;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Zt||(Zt={}));var ov;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(ov||(ov={}));var rv;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(rv||(rv={}));var lv;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(lv||(lv={}));var av;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(av||(av={}));var uv;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(uv||(uv={}));var cv;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(cv||(cv={}));var hv;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(hv||(hv={}));var fv;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(fv||(fv={}));var dv;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(dv||(dv={}));var pv;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(pv||(pv={}));var mv;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(mv||(mv={}));var gv;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY"})(gv||(gv={}));var vv;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(vv||(vv={}));var Ea;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Ea||(Ea={}));var yv;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(yv||(yv={}));var qh;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(qh||(qh={}));var _v;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(_v||(_v={}));var Sv;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(Sv||(Sv={}));var bv;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(bv||(bv={}));var Tv;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Tv||(Tv={}));var wv;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(wv||(wv={}));var Cv;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(Cv||(Cv={}));var xv;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(xv||(xv={}));var Ev;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(Ev||(Ev={}));var Mv;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Mv||(Mv={}));var Av;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Av||(Av={}));var Rv;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Rv||(Rv={}));var kv;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(kv||(kv={}));var Nv;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(Nv||(Nv={}));var Dv;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(Dv||(Dv={}));var Iv;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(Iv||(Iv={}));var Lv;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(Lv||(Lv={}));var Uv;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Uv||(Uv={}));var Pv;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Pv||(Pv={}));var zv;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(zv||(zv={}));var Vv;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Vv||(Vv={}));var Bv;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(Bv||(Bv={}));var Ov;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Ov||(Ov={}));var qv;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(qv||(qv={}));var Ws;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Ws||(Ws={}));class $h{constructor(t){const e={};for(const i of t.headers.entries())e[i[0]]=i[1];this.headers=e,this.responseInternal=t}json(){return this.responseInternal.json()}}class pr{get text(){var t,e,i,o,l,u,d,p;if(((o=(i=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",g=!1;const _=[];for(const S of(p=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[b,w]of Object.entries(S))b!=="text"&&b!=="thought"&&(w!==null||w!==void 0)&&_.push(b);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;g=!0,m+=S.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),g?m:void 0}get data(){var t,e,i,o,l,u,d,p;if(((o=(i=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const g=[];for(const _ of(p=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[S,b]of Object.entries(_))S!=="inlineData"&&(b!==null||b!==void 0)&&g.push(S);_.inlineData&&typeof _.inlineData.data=="string"&&(m+=atob(_.inlineData.data))}return g.length>0&&console.warn(`there are non-data parts ${g} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var t,e,i,o,l,u,d,p;if(((o=(i=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(p=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(g=>g.functionCall).map(g=>g.functionCall).filter(g=>g!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var t,e,i,o,l,u,d,p,m;if(((o=(i=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const g=(p=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if((g==null?void 0:g.length)!==0)return(m=g==null?void 0:g[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var t,e,i,o,l,u,d,p,m;if(((o=(i=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const g=(p=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if((g==null?void 0:g.length)!==0)return(m=g==null?void 0:g[0])===null||m===void 0?void 0:m.output}}class $v{}class Hv{}class MC{}class AC{}class RC{}class Gv{}class Fv{}class Jv{}class kC{}class Kv{}class Yv{}class Wv{}class Xv{}class NC{}class DC{}class IC{}class Qv{}class LC{get text(){var t,e,i;let o="",l=!1;const u=[];for(const d of(i=(e=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||e===void 0?void 0:e.parts)!==null&&i!==void 0?i:[]){for(const[p,m]of Object.entries(d))p!=="text"&&p!=="thought"&&m!==null&&u.push(p);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;l=!0,o+=d.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?o:void 0}get data(){var t,e,i;let o="";const l=[];for(const u of(i=(e=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||e===void 0?void 0:e.parts)!==null&&i!==void 0?i:[]){for(const[d,p]of Object.entries(u))d!=="inlineData"&&p!==null&&l.push(d);u.inlineData&&typeof u.inlineData.data=="string"&&(o+=atob(u.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class Ma{_fromAPIResponse({apiResponse:t,isVertexAI:e}){const i=new Ma;if(i.name=t.name,i.metadata=t.metadata,i.done=t.done,i.error=t.error,e){const o=t.response;if(o){const l=new Kv,u=o.videos;l.generatedVideos=u==null?void 0:u.map(d=>({video:{uri:d.gcsUri,videoBytes:d.bytesBase64Encoded?Oh(d.bytesBase64Encoded):void 0,mimeType:d.mimeType}})),l.raiMediaFilteredCount=o.raiMediaFilteredCount,l.raiMediaFilteredReasons=o.raiMediaFilteredReasons,i.response=l}}else{const o=t.response;if(o){const l=new Kv,u=o.generateVideoResponse,d=u==null?void 0:u.generatedSamples;l.generatedVideos=d==null?void 0:d.map(p=>{const m=p.video;return{video:{uri:m==null?void 0:m.uri,videoBytes:m!=null&&m.encodedVideo?Oh(m==null?void 0:m.encodedVideo):void 0,mimeType:p.encoding}}}),l.raiMediaFilteredCount=u==null?void 0:u.raiMediaFilteredCount,l.raiMediaFilteredReasons=u==null?void 0:u.raiMediaFilteredReasons,i.response=l}}return i}}class UC{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Nt(n,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const e=t.split("/",2);return`publishers/${e[0]}/models/${e[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function l_(n,t){const e=Nt(n,t);return e?e.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:e.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${e}`:e:""}function a_(n){return Array.isArray(n)?n.map(t=>Aa(t)):[Aa(n)]}function Aa(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function u_(n){const t=Aa(n);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function c_(n){const t=Aa(n);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function Zv(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function h_(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(t=>Zv(t)):[Zv(n)]}function Hh(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function jv(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function ty(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function Se(n){if(n==null)throw new Error("ContentUnion is required");return Hh(n)?n:{role:"user",parts:h_(n)}}function f_(n,t){if(!t)return[];if(n.isVertexAI()&&Array.isArray(t))return t.flatMap(e=>{const i=Se(e);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const e=Se(t);return e.parts&&e.parts.length>0&&e.parts[0].text!==void 0?[e.parts[0].text]:[]}return Array.isArray(t)?t.map(e=>Se(e)):[Se(t)]}function Qe(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(jv(n)||ty(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Se(n)]}const t=[],e=[],i=Hh(n[0]);for(const o of n){const l=Hh(o);if(l!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)t.push(o);else{if(jv(o)||ty(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");e.push(o)}}return i||t.push({role:"user",parts:h_(e)}),t}function PC(n,t){n.includes("null")&&(t.nullable=!0);const e=n.filter(i=>i!=="null");if(e.length===1)t.type=Object.values(Zt).includes(e[0].toUpperCase())?e[0].toUpperCase():Zt.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const i of e)t.anyOf.push({type:Object.values(Zt).includes(i.toUpperCase())?i.toUpperCase():Zt.TYPE_UNSPECIFIED})}}function Zs(n){const t={},e=["items"],i=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(t.nullable=!0,n=l[1]):l[1].type==="null"&&(t.nullable=!0,n=l[0])),n.type instanceof Array&&PC(n.type,t);for(const[u,d]of Object.entries(n))if(d!=null)if(u=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;t.type=Object.values(Zt).includes(d.toUpperCase())?d.toUpperCase():Zt.TYPE_UNSPECIFIED}else if(e.includes(u))t[u]=Zs(d);else if(i.includes(u)){const p=[];for(const m of d){if(m.type=="null"){t.nullable=!0;continue}p.push(Zs(m))}t[u]=p}else if(o.includes(u)){const p={};for(const[m,g]of Object.entries(d))p[m]=Zs(g);t[u]=p}else{if(u==="additionalProperties")continue;t[u]=d}return t}function xf(n){return Zs(n)}function Ef(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Mf(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function oo(n){if(n.functionDeclarations)for(const t of n.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=Zs(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=Zs(t.response));return n}function ro(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const t=[];for(const e of n)t.push(e);return t}function zC(n,t,e,i=1){const o=!t.startsWith(`${e}/`)&&t.split("/").length===i;return n.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${n.getProject()}/${t}`:t.startsWith(`${e}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}/${t}`:t:o?`${e}/${t}`:t}function Vn(n,t){if(typeof t!="string")throw new Error("name must be a string");return zC(n,t,"cachedContents")}function d_(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Yi(n){return Oh(n)}function VC(n){return n!=null&&typeof n=="object"&&"name"in n}function BC(n){return n!=null&&typeof n=="object"&&"video"in n}function OC(n){return n!=null&&typeof n=="object"&&"uri"in n}function p_(n){var t;let e;if(VC(n)&&(e=n.name),!(OC(n)&&(e=n.uri,e===void 0))&&!(BC(n)&&(e=(t=n.video)===null||t===void 0?void 0:t.uri,e===void 0))){if(typeof n=="string"&&(e=n),e===void 0)throw new Error("Could not extract file name from the provided input.");if(e.startsWith("https://")){const o=e.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${e}`);e=o[0]}else e.startsWith("files/")&&(e=e.split("files/")[1]);return e}}function m_(n,t){let e;return n.isVertexAI()?e=t?"publishers/google/models":"models":e=t?"models":"tunedModels",e}function g_(n){for(const t of["models","tunedModels","publisherModels"])if(qC(n,t))return n[t];return[]}function qC(n,t){return n!==null&&typeof n=="object"&&t in n}function $C(n,t={}){const e=n,i={name:e.name,description:e.description,parametersJsonSchema:e.inputSchema};return t.behavior&&(i.behavior=t.behavior),{functionDeclarations:[i]}}function HC(n,t={}){const e=[],i=new Set;for(const o of n){const l=o.name;if(i.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);i.add(l);const u=$C(o,t);u.functionDeclarations&&e.push(...u.functionDeclarations)}return{functionDeclarations:e}}function v_(n,t){if(typeof t!="string"&&!Array.isArray(t)){if(n&&n.isVertexAI()){if(t.gcsUri&&t.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!t.gcsUri&&!t.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(t.inlinedRequests&&t.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!t.inlinedRequests&&!t.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return t}else{if(Array.isArray(t))return{inlinedRequests:t};if(typeof t=="string"){if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:[t]};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};if(t.startsWith("files/"))return{fileName:t}}}throw new Error(`Unsupported source: ${t}`)}function GC(n){if(typeof n!="string")return n;const t=n;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function lo(n,t){const e=t;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(e))return e.split("/").pop();throw new Error(`Invalid batch job name: ${e}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(e))return e.split("/").pop();if(/^\d+$/.test(e))return e;throw new Error(`Invalid batch job name: ${e}.`)}function y_(n){const t=n;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FC(n){const t={},e=c(n,["fps"]);e!=null&&h(t,["fps"],e);const i=c(n,["endOffset"]);i!=null&&h(t,["endOffset"],i);const o=c(n,["startOffset"]);return o!=null&&h(t,["startOffset"],o),t}function JC(n){const t={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=c(n,["data"]);e!=null&&h(t,["data"],e);const i=c(n,["mimeType"]);return i!=null&&h(t,["mimeType"],i),t}function KC(n){const t={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=c(n,["fileUri"]);e!=null&&h(t,["fileUri"],e);const i=c(n,["mimeType"]);return i!=null&&h(t,["mimeType"],i),t}function YC(n){const t={},e=c(n,["videoMetadata"]);e!=null&&h(t,["videoMetadata"],FC(e));const i=c(n,["thought"]);i!=null&&h(t,["thought"],i);const o=c(n,["inlineData"]);o!=null&&h(t,["inlineData"],JC(o));const l=c(n,["fileData"]);l!=null&&h(t,["fileData"],KC(l));const u=c(n,["thoughtSignature"]);u!=null&&h(t,["thoughtSignature"],u);const d=c(n,["codeExecutionResult"]);d!=null&&h(t,["codeExecutionResult"],d);const p=c(n,["executableCode"]);p!=null&&h(t,["executableCode"],p);const m=c(n,["functionCall"]);m!=null&&h(t,["functionCall"],m);const g=c(n,["functionResponse"]);g!=null&&h(t,["functionResponse"],g);const _=c(n,["text"]);return _!=null&&h(t,["text"],_),t}function __(n){const t={},e=c(n,["parts"]);if(e!=null){let o=e;Array.isArray(o)&&(o=o.map(l=>YC(l))),h(t,["parts"],o)}const i=c(n,["role"]);return i!=null&&h(t,["role"],i),t}function WC(n){const t={},e=c(n,["anyOf"]);e!=null&&h(t,["anyOf"],e);const i=c(n,["default"]);i!=null&&h(t,["default"],i);const o=c(n,["description"]);o!=null&&h(t,["description"],o);const l=c(n,["enum"]);l!=null&&h(t,["enum"],l);const u=c(n,["example"]);u!=null&&h(t,["example"],u);const d=c(n,["format"]);d!=null&&h(t,["format"],d);const p=c(n,["items"]);p!=null&&h(t,["items"],p);const m=c(n,["maxItems"]);m!=null&&h(t,["maxItems"],m);const g=c(n,["maxLength"]);g!=null&&h(t,["maxLength"],g);const _=c(n,["maxProperties"]);_!=null&&h(t,["maxProperties"],_);const S=c(n,["maximum"]);S!=null&&h(t,["maximum"],S);const b=c(n,["minItems"]);b!=null&&h(t,["minItems"],b);const w=c(n,["minLength"]);w!=null&&h(t,["minLength"],w);const E=c(n,["minProperties"]);E!=null&&h(t,["minProperties"],E);const M=c(n,["minimum"]);M!=null&&h(t,["minimum"],M);const D=c(n,["nullable"]);D!=null&&h(t,["nullable"],D);const U=c(n,["pattern"]);U!=null&&h(t,["pattern"],U);const k=c(n,["properties"]);k!=null&&h(t,["properties"],k);const V=c(n,["propertyOrdering"]);V!=null&&h(t,["propertyOrdering"],V);const q=c(n,["required"]);q!=null&&h(t,["required"],q);const J=c(n,["title"]);J!=null&&h(t,["title"],J);const W=c(n,["type"]);return W!=null&&h(t,["type"],W),t}function XC(n){const t={};if(c(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const e=c(n,["category"]);e!=null&&h(t,["category"],e);const i=c(n,["threshold"]);return i!=null&&h(t,["threshold"],i),t}function QC(n){const t={},e=c(n,["behavior"]);e!=null&&h(t,["behavior"],e);const i=c(n,["description"]);i!=null&&h(t,["description"],i);const o=c(n,["name"]);o!=null&&h(t,["name"],o);const l=c(n,["parameters"]);l!=null&&h(t,["parameters"],l);const u=c(n,["parametersJsonSchema"]);u!=null&&h(t,["parametersJsonSchema"],u);const d=c(n,["response"]);d!=null&&h(t,["response"],d);const p=c(n,["responseJsonSchema"]);return p!=null&&h(t,["responseJsonSchema"],p),t}function ZC(n){const t={},e=c(n,["startTime"]);e!=null&&h(t,["startTime"],e);const i=c(n,["endTime"]);return i!=null&&h(t,["endTime"],i),t}function jC(n){const t={},e=c(n,["timeRangeFilter"]);return e!=null&&h(t,["timeRangeFilter"],ZC(e)),t}function tx(n){const t={},e=c(n,["mode"]);e!=null&&h(t,["mode"],e);const i=c(n,["dynamicThreshold"]);return i!=null&&h(t,["dynamicThreshold"],i),t}function ex(n){const t={},e=c(n,["dynamicRetrievalConfig"]);return e!=null&&h(t,["dynamicRetrievalConfig"],tx(e)),t}function nx(){return{}}function ix(n){const t={},e=c(n,["functionDeclarations"]);if(e!=null){let p=e;Array.isArray(p)&&(p=p.map(m=>QC(m))),h(t,["functionDeclarations"],p)}if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(n,["googleSearch"]);i!=null&&h(t,["googleSearch"],jC(i));const o=c(n,["googleSearchRetrieval"]);if(o!=null&&h(t,["googleSearchRetrieval"],ex(o)),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(c(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");c(n,["urlContext"])!=null&&h(t,["urlContext"],nx());const u=c(n,["codeExecution"]);u!=null&&h(t,["codeExecution"],u);const d=c(n,["computerUse"]);return d!=null&&h(t,["computerUse"],d),t}function sx(n){const t={},e=c(n,["mode"]);e!=null&&h(t,["mode"],e);const i=c(n,["allowedFunctionNames"]);return i!=null&&h(t,["allowedFunctionNames"],i),t}function ox(n){const t={},e=c(n,["latitude"]);e!=null&&h(t,["latitude"],e);const i=c(n,["longitude"]);return i!=null&&h(t,["longitude"],i),t}function rx(n){const t={},e=c(n,["latLng"]);e!=null&&h(t,["latLng"],ox(e));const i=c(n,["languageCode"]);return i!=null&&h(t,["languageCode"],i),t}function lx(n){const t={},e=c(n,["functionCallingConfig"]);e!=null&&h(t,["functionCallingConfig"],sx(e));const i=c(n,["retrievalConfig"]);return i!=null&&h(t,["retrievalConfig"],rx(i)),t}function ax(n){const t={},e=c(n,["voiceName"]);return e!=null&&h(t,["voiceName"],e),t}function S_(n){const t={},e=c(n,["prebuiltVoiceConfig"]);return e!=null&&h(t,["prebuiltVoiceConfig"],ax(e)),t}function ux(n){const t={},e=c(n,["speaker"]);e!=null&&h(t,["speaker"],e);const i=c(n,["voiceConfig"]);return i!=null&&h(t,["voiceConfig"],S_(i)),t}function cx(n){const t={},e=c(n,["speakerVoiceConfigs"]);if(e!=null){let i=e;Array.isArray(i)&&(i=i.map(o=>ux(o))),h(t,["speakerVoiceConfigs"],i)}return t}function hx(n){const t={},e=c(n,["voiceConfig"]);e!=null&&h(t,["voiceConfig"],S_(e));const i=c(n,["multiSpeakerVoiceConfig"]);i!=null&&h(t,["multiSpeakerVoiceConfig"],cx(i));const o=c(n,["languageCode"]);return o!=null&&h(t,["languageCode"],o),t}function fx(n){const t={},e=c(n,["includeThoughts"]);e!=null&&h(t,["includeThoughts"],e);const i=c(n,["thinkingBudget"]);return i!=null&&h(t,["thinkingBudget"],i),t}function dx(n,t,e){const i={},o=c(t,["systemInstruction"]);e!==void 0&&o!=null&&h(e,["systemInstruction"],__(Se(o)));const l=c(t,["temperature"]);l!=null&&h(i,["temperature"],l);const u=c(t,["topP"]);u!=null&&h(i,["topP"],u);const d=c(t,["topK"]);d!=null&&h(i,["topK"],d);const p=c(t,["candidateCount"]);p!=null&&h(i,["candidateCount"],p);const m=c(t,["maxOutputTokens"]);m!=null&&h(i,["maxOutputTokens"],m);const g=c(t,["stopSequences"]);g!=null&&h(i,["stopSequences"],g);const _=c(t,["responseLogprobs"]);_!=null&&h(i,["responseLogprobs"],_);const S=c(t,["logprobs"]);S!=null&&h(i,["logprobs"],S);const b=c(t,["presencePenalty"]);b!=null&&h(i,["presencePenalty"],b);const w=c(t,["frequencyPenalty"]);w!=null&&h(i,["frequencyPenalty"],w);const E=c(t,["seed"]);E!=null&&h(i,["seed"],E);const M=c(t,["responseMimeType"]);M!=null&&h(i,["responseMimeType"],M);const D=c(t,["responseSchema"]);D!=null&&h(i,["responseSchema"],WC(xf(D)));const U=c(t,["responseJsonSchema"]);if(U!=null&&h(i,["responseJsonSchema"],U),c(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const k=c(t,["safetySettings"]);if(e!==void 0&&k!=null){let K=k;Array.isArray(K)&&(K=K.map(st=>XC(st))),h(e,["safetySettings"],K)}const V=c(t,["tools"]);if(e!==void 0&&V!=null){let K=ro(V);Array.isArray(K)&&(K=K.map(st=>ix(oo(st)))),h(e,["tools"],K)}const q=c(t,["toolConfig"]);if(e!==void 0&&q!=null&&h(e,["toolConfig"],lx(q)),c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const J=c(t,["cachedContent"]);e!==void 0&&J!=null&&h(e,["cachedContent"],Vn(n,J));const W=c(t,["responseModalities"]);W!=null&&h(i,["responseModalities"],W);const rt=c(t,["mediaResolution"]);rt!=null&&h(i,["mediaResolution"],rt);const j=c(t,["speechConfig"]);if(j!=null&&h(i,["speechConfig"],hx(Ef(j))),c(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Q=c(t,["thinkingConfig"]);return Q!=null&&h(i,["thinkingConfig"],fx(Q)),i}function px(n,t){const e={},i=c(t,["model"]);i!=null&&h(e,["request","model"],Nt(n,i));const o=c(t,["contents"]);if(o!=null){let u=Qe(o);Array.isArray(u)&&(u=u.map(d=>__(d))),h(e,["request","contents"],u)}const l=c(t,["config"]);return l!=null&&h(e,["request","generationConfig"],dx(n,l,e)),e}function mx(n,t){const e={};if(c(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=c(t,["fileName"]);i!=null&&h(e,["fileName"],i);const o=c(t,["inlinedRequests"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>px(n,u))),h(e,["requests","requests"],l)}return e}function gx(n,t){const e={},i=c(n,["displayName"]);if(t!==void 0&&i!=null&&h(t,["batch","displayName"],i),c(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return e}function vx(n,t){const e={},i=c(t,["model"]);i!=null&&h(e,["_url","model"],Nt(n,i));const o=c(t,["src"]);o!=null&&h(e,["batch","inputConfig"],mx(n,v_(n,o)));const l=c(t,["config"]);return l!=null&&h(e,["config"],gx(l,e)),e}function yx(n,t){const e={},i=c(t,["name"]);i!=null&&h(e,["_url","name"],lo(n,i));const o=c(t,["config"]);return o!=null&&h(e,["config"],o),e}function _x(n,t){const e={},i=c(t,["name"]);i!=null&&h(e,["_url","name"],lo(n,i));const o=c(t,["config"]);return o!=null&&h(e,["config"],o),e}function Sx(n,t){const e={},i=c(n,["pageSize"]);t!==void 0&&i!=null&&h(t,["_query","pageSize"],i);const o=c(n,["pageToken"]);if(t!==void 0&&o!=null&&h(t,["_query","pageToken"],o),c(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return e}function bx(n){const t={},e=c(n,["config"]);return e!=null&&h(t,["config"],Sx(e,t)),t}function Tx(n,t){const e={},i=c(t,["name"]);i!=null&&h(e,["_url","name"],lo(n,i));const o=c(t,["config"]);return o!=null&&h(e,["config"],o),e}function wx(n){const t={},e=c(n,["format"]);e!=null&&h(t,["instancesFormat"],e);const i=c(n,["gcsUri"]);i!=null&&h(t,["gcsSource","uris"],i);const o=c(n,["bigqueryUri"]);if(o!=null&&h(t,["bigquerySource","inputUri"],o),c(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function Cx(n){const t={},e=c(n,["format"]);e!=null&&h(t,["predictionsFormat"],e);const i=c(n,["gcsUri"]);i!=null&&h(t,["gcsDestination","outputUriPrefix"],i);const o=c(n,["bigqueryUri"]);if(o!=null&&h(t,["bigqueryDestination","outputUri"],o),c(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return t}function xx(n,t){const e={},i=c(n,["displayName"]);t!==void 0&&i!=null&&h(t,["displayName"],i);const o=c(n,["dest"]);return t!==void 0&&o!=null&&h(t,["outputConfig"],Cx(GC(o))),e}function Ex(n,t){const e={},i=c(t,["model"]);i!=null&&h(e,["model"],Nt(n,i));const o=c(t,["src"]);o!=null&&h(e,["inputConfig"],wx(v_(n,o)));const l=c(t,["config"]);return l!=null&&h(e,["config"],xx(l,e)),e}function Mx(n,t){const e={},i=c(t,["name"]);i!=null&&h(e,["_url","name"],lo(n,i));const o=c(t,["config"]);return o!=null&&h(e,["config"],o),e}function Ax(n,t){const e={},i=c(t,["name"]);i!=null&&h(e,["_url","name"],lo(n,i));const o=c(t,["config"]);return o!=null&&h(e,["config"],o),e}function Rx(n,t){const e={},i=c(n,["pageSize"]);t!==void 0&&i!=null&&h(t,["_query","pageSize"],i);const o=c(n,["pageToken"]);t!==void 0&&o!=null&&h(t,["_query","pageToken"],o);const l=c(n,["filter"]);return t!==void 0&&l!=null&&h(t,["_query","filter"],l),e}function kx(n){const t={},e=c(n,["config"]);return e!=null&&h(t,["config"],Rx(e,t)),t}function Nx(n,t){const e={},i=c(t,["name"]);i!=null&&h(e,["_url","name"],lo(n,i));const o=c(t,["config"]);return o!=null&&h(e,["config"],o),e}function Dx(n){const t={},e=c(n,["fps"]);e!=null&&h(t,["fps"],e);const i=c(n,["endOffset"]);i!=null&&h(t,["endOffset"],i);const o=c(n,["startOffset"]);return o!=null&&h(t,["startOffset"],o),t}function Ix(n){const t={},e=c(n,["data"]);e!=null&&h(t,["data"],e);const i=c(n,["mimeType"]);return i!=null&&h(t,["mimeType"],i),t}function Lx(n){const t={},e=c(n,["fileUri"]);e!=null&&h(t,["fileUri"],e);const i=c(n,["mimeType"]);return i!=null&&h(t,["mimeType"],i),t}function Ux(n){const t={},e=c(n,["videoMetadata"]);e!=null&&h(t,["videoMetadata"],Dx(e));const i=c(n,["thought"]);i!=null&&h(t,["thought"],i);const o=c(n,["inlineData"]);o!=null&&h(t,["inlineData"],Ix(o));const l=c(n,["fileData"]);l!=null&&h(t,["fileData"],Lx(l));const u=c(n,["thoughtSignature"]);u!=null&&h(t,["thoughtSignature"],u);const d=c(n,["codeExecutionResult"]);d!=null&&h(t,["codeExecutionResult"],d);const p=c(n,["executableCode"]);p!=null&&h(t,["executableCode"],p);const m=c(n,["functionCall"]);m!=null&&h(t,["functionCall"],m);const g=c(n,["functionResponse"]);g!=null&&h(t,["functionResponse"],g);const _=c(n,["text"]);return _!=null&&h(t,["text"],_),t}function Px(n){const t={},e=c(n,["parts"]);if(e!=null){let o=e;Array.isArray(o)&&(o=o.map(l=>Ux(l))),h(t,["parts"],o)}const i=c(n,["role"]);return i!=null&&h(t,["role"],i),t}function zx(n){const t={},e=c(n,["citationSources"]);return e!=null&&h(t,["citations"],e),t}function Vx(n){const t={},e=c(n,["retrievedUrl"]);e!=null&&h(t,["retrievedUrl"],e);const i=c(n,["urlRetrievalStatus"]);return i!=null&&h(t,["urlRetrievalStatus"],i),t}function Bx(n){const t={},e=c(n,["urlMetadata"]);if(e!=null){let i=e;Array.isArray(i)&&(i=i.map(o=>Vx(o))),h(t,["urlMetadata"],i)}return t}function Ox(n){const t={},e=c(n,["content"]);e!=null&&h(t,["content"],Px(e));const i=c(n,["citationMetadata"]);i!=null&&h(t,["citationMetadata"],zx(i));const o=c(n,["tokenCount"]);o!=null&&h(t,["tokenCount"],o);const l=c(n,["finishReason"]);l!=null&&h(t,["finishReason"],l);const u=c(n,["urlContextMetadata"]);u!=null&&h(t,["urlContextMetadata"],Bx(u));const d=c(n,["avgLogprobs"]);d!=null&&h(t,["avgLogprobs"],d);const p=c(n,["groundingMetadata"]);p!=null&&h(t,["groundingMetadata"],p);const m=c(n,["index"]);m!=null&&h(t,["index"],m);const g=c(n,["logprobsResult"]);g!=null&&h(t,["logprobsResult"],g);const _=c(n,["safetyRatings"]);return _!=null&&h(t,["safetyRatings"],_),t}function qx(n){const t={},e=c(n,["sdkHttpResponse"]);e!=null&&h(t,["sdkHttpResponse"],e);const i=c(n,["candidates"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(m=>Ox(m))),h(t,["candidates"],p)}const o=c(n,["modelVersion"]);o!=null&&h(t,["modelVersion"],o);const l=c(n,["promptFeedback"]);l!=null&&h(t,["promptFeedback"],l);const u=c(n,["responseId"]);u!=null&&h(t,["responseId"],u);const d=c(n,["usageMetadata"]);return d!=null&&h(t,["usageMetadata"],d),t}function b_(n){const t={},e=c(n,["details"]);e!=null&&h(t,["details"],e);const i=c(n,["code"]);i!=null&&h(t,["code"],i);const o=c(n,["message"]);return o!=null&&h(t,["message"],o),t}function $x(n){const t={},e=c(n,["response"]);e!=null&&h(t,["response"],qx(e));const i=c(n,["error"]);return i!=null&&h(t,["error"],b_(i)),t}function Hx(n){const t={},e=c(n,["responsesFile"]);e!=null&&h(t,["fileName"],e);const i=c(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>$x(l))),h(t,["inlinedResponses"],o)}return t}function Gh(n){const t={},e=c(n,["name"]);e!=null&&h(t,["name"],e);const i=c(n,["metadata","displayName"]);i!=null&&h(t,["displayName"],i);const o=c(n,["metadata","state"]);o!=null&&h(t,["state"],y_(o));const l=c(n,["metadata","createTime"]);l!=null&&h(t,["createTime"],l);const u=c(n,["metadata","endTime"]);u!=null&&h(t,["endTime"],u);const d=c(n,["metadata","updateTime"]);d!=null&&h(t,["updateTime"],d);const p=c(n,["metadata","model"]);p!=null&&h(t,["model"],p);const m=c(n,["metadata","output"]);return m!=null&&h(t,["dest"],Hx(m)),t}function Gx(n){const t={},e=c(n,["sdkHttpResponse"]);e!=null&&h(t,["sdkHttpResponse"],e);const i=c(n,["nextPageToken"]);i!=null&&h(t,["nextPageToken"],i);const o=c(n,["operations"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>Gh(u))),h(t,["batchJobs"],l)}return t}function Fx(n){const t={},e=c(n,["sdkHttpResponse"]);e!=null&&h(t,["sdkHttpResponse"],e);const i=c(n,["name"]);i!=null&&h(t,["name"],i);const o=c(n,["done"]);o!=null&&h(t,["done"],o);const l=c(n,["error"]);return l!=null&&h(t,["error"],b_(l)),t}function T_(n){const t={},e=c(n,["details"]);e!=null&&h(t,["details"],e);const i=c(n,["code"]);i!=null&&h(t,["code"],i);const o=c(n,["message"]);return o!=null&&h(t,["message"],o),t}function Jx(n){const t={},e=c(n,["instancesFormat"]);e!=null&&h(t,["format"],e);const i=c(n,["gcsSource","uris"]);i!=null&&h(t,["gcsUri"],i);const o=c(n,["bigquerySource","inputUri"]);return o!=null&&h(t,["bigqueryUri"],o),t}function Kx(n){const t={},e=c(n,["predictionsFormat"]);e!=null&&h(t,["format"],e);const i=c(n,["gcsDestination","outputUriPrefix"]);i!=null&&h(t,["gcsUri"],i);const o=c(n,["bigqueryDestination","outputUri"]);return o!=null&&h(t,["bigqueryUri"],o),t}function Fh(n){const t={},e=c(n,["name"]);e!=null&&h(t,["name"],e);const i=c(n,["displayName"]);i!=null&&h(t,["displayName"],i);const o=c(n,["state"]);o!=null&&h(t,["state"],y_(o));const l=c(n,["error"]);l!=null&&h(t,["error"],T_(l));const u=c(n,["createTime"]);u!=null&&h(t,["createTime"],u);const d=c(n,["startTime"]);d!=null&&h(t,["startTime"],d);const p=c(n,["endTime"]);p!=null&&h(t,["endTime"],p);const m=c(n,["updateTime"]);m!=null&&h(t,["updateTime"],m);const g=c(n,["model"]);g!=null&&h(t,["model"],g);const _=c(n,["inputConfig"]);_!=null&&h(t,["src"],Jx(_));const S=c(n,["outputConfig"]);return S!=null&&h(t,["dest"],Kx(S)),t}function Yx(n){const t={},e=c(n,["sdkHttpResponse"]);e!=null&&h(t,["sdkHttpResponse"],e);const i=c(n,["nextPageToken"]);i!=null&&h(t,["nextPageToken"],i);const o=c(n,["batchPredictionJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>Fh(u))),h(t,["batchJobs"],l)}return t}function Wx(n){const t={},e=c(n,["sdkHttpResponse"]);e!=null&&h(t,["sdkHttpResponse"],e);const i=c(n,["name"]);i!=null&&h(t,["name"],i);const o=c(n,["done"]);o!=null&&h(t,["done"],o);const l=c(n,["error"]);return l!=null&&h(t,["error"],T_(l)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var qi;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(qi||(qi={}));class zr{constructor(t,e,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=e,this.init(t,i,o)}init(t,e,i){var o,l;this.nameInternal=t,this.pageInternal=e[this.nameInternal]||[],this.sdkHttpResponseInternal=e==null?void 0:e.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!i||Object.keys(i).length===0?u={config:{}}:typeof i=="object"?u=Object.assign({},i):u=i,u.config&&(u.config.pageToken=e.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(l=(o=u.config)===null||o===void 0?void 0:o.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Xx extends Ki{constructor(t){super(),this.apiClient=t,this.create=async e=>{if(this.apiClient.isVertexAI()){const o=Date.now().toString();if(Array.isArray(e.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(e.config=e.config||{},e.config.displayName===void 0&&(e.config.displayName="genaiBatchJob_${timestampStr}"),e.config.dest===void 0&&typeof e.src=="string")if(e.src.startsWith("gs://")&&e.src.endsWith(".jsonl"))e.config.dest=`${e.src.slice(0,-6)}/dest`;else if(e.src.startsWith("bq://"))e.config.dest=`${e.src}_dest_${o}`;else throw new Error("Unsupported source:"+e.src)}return await this.createInternal(e)},this.list=async(e={})=>new zr(qi.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(e),e)}async createInternal(t){var e,i,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=Ex(this.apiClient,t);return d=ut("batchPredictionJobs",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),u.then(g=>Fh(g))}else{const m=vx(this.apiClient,t);return d=ut("{model}:batchGenerateContent",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json()),u.then(g=>Gh(g))}}async get(t){var e,i,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=Mx(this.apiClient,t);return d=ut("batchPredictionJobs/{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),u.then(g=>Fh(g))}else{const m=yx(this.apiClient,t);return d=ut("batches/{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json()),u.then(g=>Gh(g))}}async cancel(t){var e,i,o,l;let u="",d={};if(this.apiClient.isVertexAI()){const p=Ax(this.apiClient,t);u=ut("batchPredictionJobs/{name}:cancel",p._url),d=p._query,delete p.config,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}else{const p=_x(this.apiClient,t);u=ut("batches/{name}:cancel",p._url),d=p._query,delete p.config,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(t){var e,i,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=kx(t);return d=ut("batchPredictionJobs",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:g.headers},S})),u.then(g=>{const _=Yx(g),S=new Qv;return Object.assign(S,_),S})}else{const m=bx(t);return d=ut("batches",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:g.headers},S})),u.then(g=>{const _=Gx(g),S=new Qv;return Object.assign(S,_),S})}}async delete(t){var e,i,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=Nx(this.apiClient,t);return d=ut("batchPredictionJobs/{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:g.headers},S})),u.then(g=>Wx(g))}else{const m=Tx(this.apiClient,t);return d=ut("batches/{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:g.headers},S})),u.then(g=>Fx(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qx(n){const t={},e=c(n,["fps"]);e!=null&&h(t,["fps"],e);const i=c(n,["endOffset"]);i!=null&&h(t,["endOffset"],i);const o=c(n,["startOffset"]);return o!=null&&h(t,["startOffset"],o),t}function Zx(n){const t={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=c(n,["data"]);e!=null&&h(t,["data"],e);const i=c(n,["mimeType"]);return i!=null&&h(t,["mimeType"],i),t}function jx(n){const t={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=c(n,["fileUri"]);e!=null&&h(t,["fileUri"],e);const i=c(n,["mimeType"]);return i!=null&&h(t,["mimeType"],i),t}function tE(n){const t={},e=c(n,["videoMetadata"]);e!=null&&h(t,["videoMetadata"],Qx(e));const i=c(n,["thought"]);i!=null&&h(t,["thought"],i);const o=c(n,["inlineData"]);o!=null&&h(t,["inlineData"],Zx(o));const l=c(n,["fileData"]);l!=null&&h(t,["fileData"],jx(l));const u=c(n,["thoughtSignature"]);u!=null&&h(t,["thoughtSignature"],u);const d=c(n,["codeExecutionResult"]);d!=null&&h(t,["codeExecutionResult"],d);const p=c(n,["executableCode"]);p!=null&&h(t,["executableCode"],p);const m=c(n,["functionCall"]);m!=null&&h(t,["functionCall"],m);const g=c(n,["functionResponse"]);g!=null&&h(t,["functionResponse"],g);const _=c(n,["text"]);return _!=null&&h(t,["text"],_),t}function ey(n){const t={},e=c(n,["parts"]);if(e!=null){let o=e;Array.isArray(o)&&(o=o.map(l=>tE(l))),h(t,["parts"],o)}const i=c(n,["role"]);return i!=null&&h(t,["role"],i),t}function eE(n){const t={},e=c(n,["behavior"]);e!=null&&h(t,["behavior"],e);const i=c(n,["description"]);i!=null&&h(t,["description"],i);const o=c(n,["name"]);o!=null&&h(t,["name"],o);const l=c(n,["parameters"]);l!=null&&h(t,["parameters"],l);const u=c(n,["parametersJsonSchema"]);u!=null&&h(t,["parametersJsonSchema"],u);const d=c(n,["response"]);d!=null&&h(t,["response"],d);const p=c(n,["responseJsonSchema"]);return p!=null&&h(t,["responseJsonSchema"],p),t}function nE(n){const t={},e=c(n,["startTime"]);e!=null&&h(t,["startTime"],e);const i=c(n,["endTime"]);return i!=null&&h(t,["endTime"],i),t}function iE(n){const t={},e=c(n,["timeRangeFilter"]);return e!=null&&h(t,["timeRangeFilter"],nE(e)),t}function sE(n){const t={},e=c(n,["mode"]);e!=null&&h(t,["mode"],e);const i=c(n,["dynamicThreshold"]);return i!=null&&h(t,["dynamicThreshold"],i),t}function oE(n){const t={},e=c(n,["dynamicRetrievalConfig"]);return e!=null&&h(t,["dynamicRetrievalConfig"],sE(e)),t}function rE(){return{}}function lE(n){const t={},e=c(n,["functionDeclarations"]);if(e!=null){let p=e;Array.isArray(p)&&(p=p.map(m=>eE(m))),h(t,["functionDeclarations"],p)}if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(n,["googleSearch"]);i!=null&&h(t,["googleSearch"],iE(i));const o=c(n,["googleSearchRetrieval"]);if(o!=null&&h(t,["googleSearchRetrieval"],oE(o)),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(c(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");c(n,["urlContext"])!=null&&h(t,["urlContext"],rE());const u=c(n,["codeExecution"]);u!=null&&h(t,["codeExecution"],u);const d=c(n,["computerUse"]);return d!=null&&h(t,["computerUse"],d),t}function aE(n){const t={},e=c(n,["mode"]);e!=null&&h(t,["mode"],e);const i=c(n,["allowedFunctionNames"]);return i!=null&&h(t,["allowedFunctionNames"],i),t}function uE(n){const t={},e=c(n,["latitude"]);e!=null&&h(t,["latitude"],e);const i=c(n,["longitude"]);return i!=null&&h(t,["longitude"],i),t}function cE(n){const t={},e=c(n,["latLng"]);e!=null&&h(t,["latLng"],uE(e));const i=c(n,["languageCode"]);return i!=null&&h(t,["languageCode"],i),t}function hE(n){const t={},e=c(n,["functionCallingConfig"]);e!=null&&h(t,["functionCallingConfig"],aE(e));const i=c(n,["retrievalConfig"]);return i!=null&&h(t,["retrievalConfig"],cE(i)),t}function fE(n,t){const e={},i=c(n,["ttl"]);t!==void 0&&i!=null&&h(t,["ttl"],i);const o=c(n,["expireTime"]);t!==void 0&&o!=null&&h(t,["expireTime"],o);const l=c(n,["displayName"]);t!==void 0&&l!=null&&h(t,["displayName"],l);const u=c(n,["contents"]);if(t!==void 0&&u!=null){let g=Qe(u);Array.isArray(g)&&(g=g.map(_=>ey(_))),h(t,["contents"],g)}const d=c(n,["systemInstruction"]);t!==void 0&&d!=null&&h(t,["systemInstruction"],ey(Se(d)));const p=c(n,["tools"]);if(t!==void 0&&p!=null){let g=p;Array.isArray(g)&&(g=g.map(_=>lE(_))),h(t,["tools"],g)}const m=c(n,["toolConfig"]);if(t!==void 0&&m!=null&&h(t,["toolConfig"],hE(m)),c(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return e}function dE(n,t){const e={},i=c(t,["model"]);i!=null&&h(e,["model"],l_(n,i));const o=c(t,["config"]);return o!=null&&h(e,["config"],fE(o,e)),e}function pE(n,t){const e={},i=c(t,["name"]);i!=null&&h(e,["_url","name"],Vn(n,i));const o=c(t,["config"]);return o!=null&&h(e,["config"],o),e}function mE(n,t){const e={},i=c(t,["name"]);i!=null&&h(e,["_url","name"],Vn(n,i));const o=c(t,["config"]);return o!=null&&h(e,["config"],o),e}function gE(n,t){const e={},i=c(n,["ttl"]);t!==void 0&&i!=null&&h(t,["ttl"],i);const o=c(n,["expireTime"]);return t!==void 0&&o!=null&&h(t,["expireTime"],o),e}function vE(n,t){const e={},i=c(t,["name"]);i!=null&&h(e,["_url","name"],Vn(n,i));const o=c(t,["config"]);return o!=null&&h(e,["config"],gE(o,e)),e}function yE(n,t){const e={},i=c(n,["pageSize"]);t!==void 0&&i!=null&&h(t,["_query","pageSize"],i);const o=c(n,["pageToken"]);return t!==void 0&&o!=null&&h(t,["_query","pageToken"],o),e}function _E(n){const t={},e=c(n,["config"]);return e!=null&&h(t,["config"],yE(e,t)),t}function SE(n){const t={},e=c(n,["fps"]);e!=null&&h(t,["fps"],e);const i=c(n,["endOffset"]);i!=null&&h(t,["endOffset"],i);const o=c(n,["startOffset"]);return o!=null&&h(t,["startOffset"],o),t}function bE(n){const t={},e=c(n,["displayName"]);e!=null&&h(t,["displayName"],e);const i=c(n,["data"]);i!=null&&h(t,["data"],i);const o=c(n,["mimeType"]);return o!=null&&h(t,["mimeType"],o),t}function TE(n){const t={},e=c(n,["displayName"]);e!=null&&h(t,["displayName"],e);const i=c(n,["fileUri"]);i!=null&&h(t,["fileUri"],i);const o=c(n,["mimeType"]);return o!=null&&h(t,["mimeType"],o),t}function wE(n){const t={},e=c(n,["videoMetadata"]);e!=null&&h(t,["videoMetadata"],SE(e));const i=c(n,["thought"]);i!=null&&h(t,["thought"],i);const o=c(n,["inlineData"]);o!=null&&h(t,["inlineData"],bE(o));const l=c(n,["fileData"]);l!=null&&h(t,["fileData"],TE(l));const u=c(n,["thoughtSignature"]);u!=null&&h(t,["thoughtSignature"],u);const d=c(n,["codeExecutionResult"]);d!=null&&h(t,["codeExecutionResult"],d);const p=c(n,["executableCode"]);p!=null&&h(t,["executableCode"],p);const m=c(n,["functionCall"]);m!=null&&h(t,["functionCall"],m);const g=c(n,["functionResponse"]);g!=null&&h(t,["functionResponse"],g);const _=c(n,["text"]);return _!=null&&h(t,["text"],_),t}function ny(n){const t={},e=c(n,["parts"]);if(e!=null){let o=e;Array.isArray(o)&&(o=o.map(l=>wE(l))),h(t,["parts"],o)}const i=c(n,["role"]);return i!=null&&h(t,["role"],i),t}function CE(n){const t={};if(c(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const e=c(n,["description"]);e!=null&&h(t,["description"],e);const i=c(n,["name"]);i!=null&&h(t,["name"],i);const o=c(n,["parameters"]);o!=null&&h(t,["parameters"],o);const l=c(n,["parametersJsonSchema"]);l!=null&&h(t,["parametersJsonSchema"],l);const u=c(n,["response"]);u!=null&&h(t,["response"],u);const d=c(n,["responseJsonSchema"]);return d!=null&&h(t,["responseJsonSchema"],d),t}function xE(n){const t={},e=c(n,["startTime"]);e!=null&&h(t,["startTime"],e);const i=c(n,["endTime"]);return i!=null&&h(t,["endTime"],i),t}function EE(n){const t={},e=c(n,["timeRangeFilter"]);return e!=null&&h(t,["timeRangeFilter"],xE(e)),t}function ME(n){const t={},e=c(n,["mode"]);e!=null&&h(t,["mode"],e);const i=c(n,["dynamicThreshold"]);return i!=null&&h(t,["dynamicThreshold"],i),t}function AE(n){const t={},e=c(n,["dynamicRetrievalConfig"]);return e!=null&&h(t,["dynamicRetrievalConfig"],ME(e)),t}function RE(){return{}}function kE(n){const t={},e=c(n,["apiKeyString"]);return e!=null&&h(t,["apiKeyString"],e),t}function NE(n){const t={},e=c(n,["apiKeyConfig"]);e!=null&&h(t,["apiKeyConfig"],kE(e));const i=c(n,["authType"]);i!=null&&h(t,["authType"],i);const o=c(n,["googleServiceAccountConfig"]);o!=null&&h(t,["googleServiceAccountConfig"],o);const l=c(n,["httpBasicAuthConfig"]);l!=null&&h(t,["httpBasicAuthConfig"],l);const u=c(n,["oauthConfig"]);u!=null&&h(t,["oauthConfig"],u);const d=c(n,["oidcConfig"]);return d!=null&&h(t,["oidcConfig"],d),t}function DE(n){const t={},e=c(n,["authConfig"]);return e!=null&&h(t,["authConfig"],NE(e)),t}function IE(){return{}}function LE(n){const t={},e=c(n,["functionDeclarations"]);if(e!=null){let _=e;Array.isArray(_)&&(_=_.map(S=>CE(S))),h(t,["functionDeclarations"],_)}const i=c(n,["retrieval"]);i!=null&&h(t,["retrieval"],i);const o=c(n,["googleSearch"]);o!=null&&h(t,["googleSearch"],EE(o));const l=c(n,["googleSearchRetrieval"]);l!=null&&h(t,["googleSearchRetrieval"],AE(l)),c(n,["enterpriseWebSearch"])!=null&&h(t,["enterpriseWebSearch"],RE());const d=c(n,["googleMaps"]);d!=null&&h(t,["googleMaps"],DE(d)),c(n,["urlContext"])!=null&&h(t,["urlContext"],IE());const m=c(n,["codeExecution"]);m!=null&&h(t,["codeExecution"],m);const g=c(n,["computerUse"]);return g!=null&&h(t,["computerUse"],g),t}function UE(n){const t={},e=c(n,["mode"]);e!=null&&h(t,["mode"],e);const i=c(n,["allowedFunctionNames"]);return i!=null&&h(t,["allowedFunctionNames"],i),t}function PE(n){const t={},e=c(n,["latitude"]);e!=null&&h(t,["latitude"],e);const i=c(n,["longitude"]);return i!=null&&h(t,["longitude"],i),t}function zE(n){const t={},e=c(n,["latLng"]);e!=null&&h(t,["latLng"],PE(e));const i=c(n,["languageCode"]);return i!=null&&h(t,["languageCode"],i),t}function VE(n){const t={},e=c(n,["functionCallingConfig"]);e!=null&&h(t,["functionCallingConfig"],UE(e));const i=c(n,["retrievalConfig"]);return i!=null&&h(t,["retrievalConfig"],zE(i)),t}function BE(n,t){const e={},i=c(n,["ttl"]);t!==void 0&&i!=null&&h(t,["ttl"],i);const o=c(n,["expireTime"]);t!==void 0&&o!=null&&h(t,["expireTime"],o);const l=c(n,["displayName"]);t!==void 0&&l!=null&&h(t,["displayName"],l);const u=c(n,["contents"]);if(t!==void 0&&u!=null){let _=Qe(u);Array.isArray(_)&&(_=_.map(S=>ny(S))),h(t,["contents"],_)}const d=c(n,["systemInstruction"]);t!==void 0&&d!=null&&h(t,["systemInstruction"],ny(Se(d)));const p=c(n,["tools"]);if(t!==void 0&&p!=null){let _=p;Array.isArray(_)&&(_=_.map(S=>LE(S))),h(t,["tools"],_)}const m=c(n,["toolConfig"]);t!==void 0&&m!=null&&h(t,["toolConfig"],VE(m));const g=c(n,["kmsKeyName"]);return t!==void 0&&g!=null&&h(t,["encryption_spec","kmsKeyName"],g),e}function OE(n,t){const e={},i=c(t,["model"]);i!=null&&h(e,["model"],l_(n,i));const o=c(t,["config"]);return o!=null&&h(e,["config"],BE(o,e)),e}function qE(n,t){const e={},i=c(t,["name"]);i!=null&&h(e,["_url","name"],Vn(n,i));const o=c(t,["config"]);return o!=null&&h(e,["config"],o),e}function $E(n,t){const e={},i=c(t,["name"]);i!=null&&h(e,["_url","name"],Vn(n,i));const o=c(t,["config"]);return o!=null&&h(e,["config"],o),e}function HE(n,t){const e={},i=c(n,["ttl"]);t!==void 0&&i!=null&&h(t,["ttl"],i);const o=c(n,["expireTime"]);return t!==void 0&&o!=null&&h(t,["expireTime"],o),e}function GE(n,t){const e={},i=c(t,["name"]);i!=null&&h(e,["_url","name"],Vn(n,i));const o=c(t,["config"]);return o!=null&&h(e,["config"],HE(o,e)),e}function FE(n,t){const e={},i=c(n,["pageSize"]);t!==void 0&&i!=null&&h(t,["_query","pageSize"],i);const o=c(n,["pageToken"]);return t!==void 0&&o!=null&&h(t,["_query","pageToken"],o),e}function JE(n){const t={},e=c(n,["config"]);return e!=null&&h(t,["config"],FE(e,t)),t}function Sa(n){const t={},e=c(n,["name"]);e!=null&&h(t,["name"],e);const i=c(n,["displayName"]);i!=null&&h(t,["displayName"],i);const o=c(n,["model"]);o!=null&&h(t,["model"],o);const l=c(n,["createTime"]);l!=null&&h(t,["createTime"],l);const u=c(n,["updateTime"]);u!=null&&h(t,["updateTime"],u);const d=c(n,["expireTime"]);d!=null&&h(t,["expireTime"],d);const p=c(n,["usageMetadata"]);return p!=null&&h(t,["usageMetadata"],p),t}function KE(){return{}}function YE(n){const t={},e=c(n,["sdkHttpResponse"]);e!=null&&h(t,["sdkHttpResponse"],e);const i=c(n,["nextPageToken"]);i!=null&&h(t,["nextPageToken"],i);const o=c(n,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>Sa(u))),h(t,["cachedContents"],l)}return t}function ba(n){const t={},e=c(n,["name"]);e!=null&&h(t,["name"],e);const i=c(n,["displayName"]);i!=null&&h(t,["displayName"],i);const o=c(n,["model"]);o!=null&&h(t,["model"],o);const l=c(n,["createTime"]);l!=null&&h(t,["createTime"],l);const u=c(n,["updateTime"]);u!=null&&h(t,["updateTime"],u);const d=c(n,["expireTime"]);d!=null&&h(t,["expireTime"],d);const p=c(n,["usageMetadata"]);return p!=null&&h(t,["usageMetadata"],p),t}function WE(){return{}}function XE(n){const t={},e=c(n,["sdkHttpResponse"]);e!=null&&h(t,["sdkHttpResponse"],e);const i=c(n,["nextPageToken"]);i!=null&&h(t,["nextPageToken"],i);const o=c(n,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>ba(u))),h(t,["cachedContents"],l)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class QE extends Ki{constructor(t){super(),this.apiClient=t,this.list=async(e={})=>new zr(qi.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(e),e)}async create(t){var e,i,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=OE(this.apiClient,t);return d=ut("cachedContents",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),u.then(g=>ba(g))}else{const m=dE(this.apiClient,t);return d=ut("cachedContents",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json()),u.then(g=>Sa(g))}}async get(t){var e,i,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=qE(this.apiClient,t);return d=ut("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),u.then(g=>ba(g))}else{const m=pE(this.apiClient,t);return d=ut("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json()),u.then(g=>Sa(g))}}async delete(t){var e,i,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=$E(this.apiClient,t);return d=ut("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),u.then(()=>{const g=WE(),_=new Wv;return Object.assign(_,g),_})}else{const m=mE(this.apiClient,t);return d=ut("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json()),u.then(()=>{const g=KE(),_=new Wv;return Object.assign(_,g),_})}}async update(t){var e,i,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=GE(this.apiClient,t);return d=ut("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),u.then(g=>ba(g))}else{const m=vE(this.apiClient,t);return d=ut("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json()),u.then(g=>Sa(g))}}async listInternal(t){var e,i,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=JE(t);return d=ut("cachedContents",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:g.headers},S})),u.then(g=>{const _=XE(g),S=new Xv;return Object.assign(S,_),S})}else{const m=_E(t);return d=ut("cachedContents",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:g.headers},S})),u.then(g=>{const _=YE(g),S=new Xv;return Object.assign(S,_),S})}}}function iy(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],i=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Gt(n){return this instanceof Gt?(this.v=n,this):new Gt(n)}function js(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(n,t||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(b){return function(w){return Promise.resolve(w).then(b,_)}}function d(b,w){i[b]&&(o[b]=function(E){return new Promise(function(M,D){l.push([b,E,M,D])>1||p(b,E)})},w&&(o[b]=w(o[b])))}function p(b,w){try{m(i[b](w))}catch(E){S(l[0][3],E)}}function m(b){b.value instanceof Gt?Promise.resolve(b.value.v).then(g,_):S(l[0][2],b)}function g(b){p("next",b)}function _(b){p("throw",b)}function S(b,w){b(w),l.shift(),l.length&&p(l[0][0],l[0][1])}}function br(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof iy=="function"?iy(n):n[Symbol.iterator](),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(l){e[l]=n[l]&&function(u){return new Promise(function(d,p){u=n[l](u),o(d,p,u.done,u.value)})}}function o(l,u,d,p){Promise.resolve(p).then(function(m){l({value:m,done:d})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ZE(n){var t;if(n.candidates==null||n.candidates.length===0)return!1;const e=(t=n.candidates[0])===null||t===void 0?void 0:t.content;return e===void 0?!1:w_(e)}function w_(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const t of n.parts)if(t===void 0||Object.keys(t).length===0||!t.thought&&t.text!==void 0&&t.text==="")return!1;return!0}function jE(n){if(n.length!==0){for(const t of n)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function sy(n){if(n===void 0||n.length===0)return[];const t=[],e=n.length;let i=0;for(;i<e;)if(n[i].role==="user")t.push(n[i]),i++;else{const o=[];let l=!0;for(;i<e&&n[i].role==="model";)o.push(n[i]),l&&!w_(n[i])&&(l=!1),i++;l?t.push(...o):t.pop()}return t}class t1{constructor(t,e){this.modelsModule=t,this.apiClient=e}create(t){return new e1(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class e1{constructor(t,e,i,o={},l=[]){this.apiClient=t,this.modelsModule=e,this.model=i,this.config=o,this.history=l,this.sendPromise=Promise.resolve(),jE(l)}async sendMessage(t){var e;await this.sendPromise;const i=Se(t.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(e=t.config)!==null&&e!==void 0?e:this.config});return this.sendPromise=(async()=>{var l,u,d;const p=await o,m=(u=(l=p.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content,g=p.automaticFunctionCallingHistory,_=this.getHistory(!0).length;let S=[];g!=null&&(S=(d=g.slice(_))!==null&&d!==void 0?d:[]);const b=m?[m]:[];this.recordHistory(i,b,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(t){var e;await this.sendPromise;const i=Se(t.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(e=t.config)!==null&&e!==void 0?e:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const l=await o;return this.processStreamResponse(l,i)}getHistory(t=!1){const e=t?sy(this.history):this.history;return structuredClone(e)}processStreamResponse(t,e){var i,o;return js(this,arguments,function*(){var u,d,p,m;const g=[];try{for(var _=!0,S=br(t),b;b=yield Gt(S.next()),u=b.done,!u;_=!0){m=b.value,_=!1;const w=m;if(ZE(w)){const E=(o=(i=w.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content;E!==void 0&&g.push(E)}yield yield Gt(w)}}catch(w){d={error:w}}finally{try{!_&&!u&&(p=S.return)&&(yield Gt(p.call(S)))}finally{if(d)throw d.error}}this.recordHistory(e,g)})}recordHistory(t,e,i){let o=[];e.length>0&&e.every(l=>l.role!==void 0)?o=e:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...sy(i)):this.history.push(t),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ua extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,Ua.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function n1(n,t){const e={},i=c(n,["pageSize"]);t!==void 0&&i!=null&&h(t,["_query","pageSize"],i);const o=c(n,["pageToken"]);return t!==void 0&&o!=null&&h(t,["_query","pageToken"],o),e}function i1(n){const t={},e=c(n,["config"]);return e!=null&&h(t,["config"],n1(e,t)),t}function s1(n){const t={},e=c(n,["details"]);e!=null&&h(t,["details"],e);const i=c(n,["message"]);i!=null&&h(t,["message"],i);const o=c(n,["code"]);return o!=null&&h(t,["code"],o),t}function o1(n){const t={},e=c(n,["name"]);e!=null&&h(t,["name"],e);const i=c(n,["displayName"]);i!=null&&h(t,["displayName"],i);const o=c(n,["mimeType"]);o!=null&&h(t,["mimeType"],o);const l=c(n,["sizeBytes"]);l!=null&&h(t,["sizeBytes"],l);const u=c(n,["createTime"]);u!=null&&h(t,["createTime"],u);const d=c(n,["expirationTime"]);d!=null&&h(t,["expirationTime"],d);const p=c(n,["updateTime"]);p!=null&&h(t,["updateTime"],p);const m=c(n,["sha256Hash"]);m!=null&&h(t,["sha256Hash"],m);const g=c(n,["uri"]);g!=null&&h(t,["uri"],g);const _=c(n,["downloadUri"]);_!=null&&h(t,["downloadUri"],_);const S=c(n,["state"]);S!=null&&h(t,["state"],S);const b=c(n,["source"]);b!=null&&h(t,["source"],b);const w=c(n,["videoMetadata"]);w!=null&&h(t,["videoMetadata"],w);const E=c(n,["error"]);return E!=null&&h(t,["error"],s1(E)),t}function r1(n){const t={},e=c(n,["file"]);e!=null&&h(t,["file"],o1(e));const i=c(n,["config"]);return i!=null&&h(t,["config"],i),t}function l1(n){const t={},e=c(n,["name"]);e!=null&&h(t,["_url","file"],p_(e));const i=c(n,["config"]);return i!=null&&h(t,["config"],i),t}function a1(n){const t={},e=c(n,["name"]);e!=null&&h(t,["_url","file"],p_(e));const i=c(n,["config"]);return i!=null&&h(t,["config"],i),t}function u1(n){const t={},e=c(n,["details"]);e!=null&&h(t,["details"],e);const i=c(n,["message"]);i!=null&&h(t,["message"],i);const o=c(n,["code"]);return o!=null&&h(t,["code"],o),t}function Jh(n){const t={},e=c(n,["name"]);e!=null&&h(t,["name"],e);const i=c(n,["displayName"]);i!=null&&h(t,["displayName"],i);const o=c(n,["mimeType"]);o!=null&&h(t,["mimeType"],o);const l=c(n,["sizeBytes"]);l!=null&&h(t,["sizeBytes"],l);const u=c(n,["createTime"]);u!=null&&h(t,["createTime"],u);const d=c(n,["expirationTime"]);d!=null&&h(t,["expirationTime"],d);const p=c(n,["updateTime"]);p!=null&&h(t,["updateTime"],p);const m=c(n,["sha256Hash"]);m!=null&&h(t,["sha256Hash"],m);const g=c(n,["uri"]);g!=null&&h(t,["uri"],g);const _=c(n,["downloadUri"]);_!=null&&h(t,["downloadUri"],_);const S=c(n,["state"]);S!=null&&h(t,["state"],S);const b=c(n,["source"]);b!=null&&h(t,["source"],b);const w=c(n,["videoMetadata"]);w!=null&&h(t,["videoMetadata"],w);const E=c(n,["error"]);return E!=null&&h(t,["error"],u1(E)),t}function c1(n){const t={},e=c(n,["sdkHttpResponse"]);e!=null&&h(t,["sdkHttpResponse"],e);const i=c(n,["nextPageToken"]);i!=null&&h(t,["nextPageToken"],i);const o=c(n,["files"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>Jh(u))),h(t,["files"],l)}return t}function h1(n){const t={},e=c(n,["sdkHttpResponse"]);return e!=null&&h(t,["sdkHttpResponse"],e),t}function f1(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class d1 extends Ki{constructor(t){super(),this.apiClient=t,this.list=async(e={})=>new zr(qi.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(e),e)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(e=>Jh(e))}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var e,i;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=i1(t);return l=ut("files",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:p.headers},g})),o.then(p=>{const m=c1(p),g=new NC;return Object.assign(g,m),g})}}async createInternal(t){var e,i;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=r1(t);return l=ut("upload/v1beta/files",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const m=h1(p),g=new DC;return Object.assign(g,m),g})}}async get(t){var e,i;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=l1(t);return l=ut("files/{file}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>Jh(p))}}async delete(t){var e,i;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=a1(t);return l=ut("files/{file}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(()=>{const p=f1(),m=new IC;return Object.assign(m,p),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function p1(n){const t={},e=c(n,["voiceName"]);return e!=null&&h(t,["voiceName"],e),t}function C_(n){const t={},e=c(n,["prebuiltVoiceConfig"]);return e!=null&&h(t,["prebuiltVoiceConfig"],p1(e)),t}function m1(n){const t={},e=c(n,["speaker"]);e!=null&&h(t,["speaker"],e);const i=c(n,["voiceConfig"]);return i!=null&&h(t,["voiceConfig"],C_(i)),t}function g1(n){const t={},e=c(n,["speakerVoiceConfigs"]);if(e!=null){let i=e;Array.isArray(i)&&(i=i.map(o=>m1(o))),h(t,["speakerVoiceConfigs"],i)}return t}function v1(n){const t={},e=c(n,["voiceConfig"]);e!=null&&h(t,["voiceConfig"],C_(e));const i=c(n,["multiSpeakerVoiceConfig"]);i!=null&&h(t,["multiSpeakerVoiceConfig"],g1(i));const o=c(n,["languageCode"]);return o!=null&&h(t,["languageCode"],o),t}function y1(n){const t={},e=c(n,["fps"]);e!=null&&h(t,["fps"],e);const i=c(n,["endOffset"]);i!=null&&h(t,["endOffset"],i);const o=c(n,["startOffset"]);return o!=null&&h(t,["startOffset"],o),t}function _1(n){const t={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=c(n,["data"]);e!=null&&h(t,["data"],e);const i=c(n,["mimeType"]);return i!=null&&h(t,["mimeType"],i),t}function S1(n){const t={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=c(n,["fileUri"]);e!=null&&h(t,["fileUri"],e);const i=c(n,["mimeType"]);return i!=null&&h(t,["mimeType"],i),t}function b1(n){const t={},e=c(n,["videoMetadata"]);e!=null&&h(t,["videoMetadata"],y1(e));const i=c(n,["thought"]);i!=null&&h(t,["thought"],i);const o=c(n,["inlineData"]);o!=null&&h(t,["inlineData"],_1(o));const l=c(n,["fileData"]);l!=null&&h(t,["fileData"],S1(l));const u=c(n,["thoughtSignature"]);u!=null&&h(t,["thoughtSignature"],u);const d=c(n,["codeExecutionResult"]);d!=null&&h(t,["codeExecutionResult"],d);const p=c(n,["executableCode"]);p!=null&&h(t,["executableCode"],p);const m=c(n,["functionCall"]);m!=null&&h(t,["functionCall"],m);const g=c(n,["functionResponse"]);g!=null&&h(t,["functionResponse"],g);const _=c(n,["text"]);return _!=null&&h(t,["text"],_),t}function T1(n){const t={},e=c(n,["parts"]);if(e!=null){let o=e;Array.isArray(o)&&(o=o.map(l=>b1(l))),h(t,["parts"],o)}const i=c(n,["role"]);return i!=null&&h(t,["role"],i),t}function w1(n){const t={},e=c(n,["behavior"]);e!=null&&h(t,["behavior"],e);const i=c(n,["description"]);i!=null&&h(t,["description"],i);const o=c(n,["name"]);o!=null&&h(t,["name"],o);const l=c(n,["parameters"]);l!=null&&h(t,["parameters"],l);const u=c(n,["parametersJsonSchema"]);u!=null&&h(t,["parametersJsonSchema"],u);const d=c(n,["response"]);d!=null&&h(t,["response"],d);const p=c(n,["responseJsonSchema"]);return p!=null&&h(t,["responseJsonSchema"],p),t}function C1(n){const t={},e=c(n,["startTime"]);e!=null&&h(t,["startTime"],e);const i=c(n,["endTime"]);return i!=null&&h(t,["endTime"],i),t}function x1(n){const t={},e=c(n,["timeRangeFilter"]);return e!=null&&h(t,["timeRangeFilter"],C1(e)),t}function E1(n){const t={},e=c(n,["mode"]);e!=null&&h(t,["mode"],e);const i=c(n,["dynamicThreshold"]);return i!=null&&h(t,["dynamicThreshold"],i),t}function M1(n){const t={},e=c(n,["dynamicRetrievalConfig"]);return e!=null&&h(t,["dynamicRetrievalConfig"],E1(e)),t}function A1(){return{}}function R1(n){const t={},e=c(n,["functionDeclarations"]);if(e!=null){let p=e;Array.isArray(p)&&(p=p.map(m=>w1(m))),h(t,["functionDeclarations"],p)}if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(n,["googleSearch"]);i!=null&&h(t,["googleSearch"],x1(i));const o=c(n,["googleSearchRetrieval"]);if(o!=null&&h(t,["googleSearchRetrieval"],M1(o)),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(c(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");c(n,["urlContext"])!=null&&h(t,["urlContext"],A1());const u=c(n,["codeExecution"]);u!=null&&h(t,["codeExecution"],u);const d=c(n,["computerUse"]);return d!=null&&h(t,["computerUse"],d),t}function k1(n){const t={},e=c(n,["handle"]);if(e!=null&&h(t,["handle"],e),c(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function oy(){return{}}function N1(n){const t={},e=c(n,["disabled"]);e!=null&&h(t,["disabled"],e);const i=c(n,["startOfSpeechSensitivity"]);i!=null&&h(t,["startOfSpeechSensitivity"],i);const o=c(n,["endOfSpeechSensitivity"]);o!=null&&h(t,["endOfSpeechSensitivity"],o);const l=c(n,["prefixPaddingMs"]);l!=null&&h(t,["prefixPaddingMs"],l);const u=c(n,["silenceDurationMs"]);return u!=null&&h(t,["silenceDurationMs"],u),t}function D1(n){const t={},e=c(n,["automaticActivityDetection"]);e!=null&&h(t,["automaticActivityDetection"],N1(e));const i=c(n,["activityHandling"]);i!=null&&h(t,["activityHandling"],i);const o=c(n,["turnCoverage"]);return o!=null&&h(t,["turnCoverage"],o),t}function I1(n){const t={},e=c(n,["targetTokens"]);return e!=null&&h(t,["targetTokens"],e),t}function L1(n){const t={},e=c(n,["triggerTokens"]);e!=null&&h(t,["triggerTokens"],e);const i=c(n,["slidingWindow"]);return i!=null&&h(t,["slidingWindow"],I1(i)),t}function U1(n){const t={},e=c(n,["proactiveAudio"]);return e!=null&&h(t,["proactiveAudio"],e),t}function P1(n,t){const e={},i=c(n,["generationConfig"]);t!==void 0&&i!=null&&h(t,["setup","generationConfig"],i);const o=c(n,["responseModalities"]);t!==void 0&&o!=null&&h(t,["setup","generationConfig","responseModalities"],o);const l=c(n,["temperature"]);t!==void 0&&l!=null&&h(t,["setup","generationConfig","temperature"],l);const u=c(n,["topP"]);t!==void 0&&u!=null&&h(t,["setup","generationConfig","topP"],u);const d=c(n,["topK"]);t!==void 0&&d!=null&&h(t,["setup","generationConfig","topK"],d);const p=c(n,["maxOutputTokens"]);t!==void 0&&p!=null&&h(t,["setup","generationConfig","maxOutputTokens"],p);const m=c(n,["mediaResolution"]);t!==void 0&&m!=null&&h(t,["setup","generationConfig","mediaResolution"],m);const g=c(n,["seed"]);t!==void 0&&g!=null&&h(t,["setup","generationConfig","seed"],g);const _=c(n,["speechConfig"]);t!==void 0&&_!=null&&h(t,["setup","generationConfig","speechConfig"],v1(Mf(_)));const S=c(n,["enableAffectiveDialog"]);t!==void 0&&S!=null&&h(t,["setup","generationConfig","enableAffectiveDialog"],S);const b=c(n,["systemInstruction"]);t!==void 0&&b!=null&&h(t,["setup","systemInstruction"],T1(Se(b)));const w=c(n,["tools"]);if(t!==void 0&&w!=null){let q=ro(w);Array.isArray(q)&&(q=q.map(J=>R1(oo(J)))),h(t,["setup","tools"],q)}const E=c(n,["sessionResumption"]);t!==void 0&&E!=null&&h(t,["setup","sessionResumption"],k1(E));const M=c(n,["inputAudioTranscription"]);t!==void 0&&M!=null&&h(t,["setup","inputAudioTranscription"],oy());const D=c(n,["outputAudioTranscription"]);t!==void 0&&D!=null&&h(t,["setup","outputAudioTranscription"],oy());const U=c(n,["realtimeInputConfig"]);t!==void 0&&U!=null&&h(t,["setup","realtimeInputConfig"],D1(U));const k=c(n,["contextWindowCompression"]);t!==void 0&&k!=null&&h(t,["setup","contextWindowCompression"],L1(k));const V=c(n,["proactivity"]);return t!==void 0&&V!=null&&h(t,["setup","proactivity"],U1(V)),e}function z1(n,t){const e={},i=c(t,["model"]);i!=null&&h(e,["setup","model"],Nt(n,i));const o=c(t,["config"]);return o!=null&&h(e,["config"],P1(o,e)),e}function V1(){return{}}function B1(){return{}}function O1(n){const t={},e=c(n,["media"]);e!=null&&h(t,["mediaChunks"],a_(e));const i=c(n,["audio"]);i!=null&&h(t,["audio"],c_(i));const o=c(n,["audioStreamEnd"]);o!=null&&h(t,["audioStreamEnd"],o);const l=c(n,["video"]);l!=null&&h(t,["video"],u_(l));const u=c(n,["text"]);return u!=null&&h(t,["text"],u),c(n,["activityStart"])!=null&&h(t,["activityStart"],V1()),c(n,["activityEnd"])!=null&&h(t,["activityEnd"],B1()),t}function x_(n){const t={},e=c(n,["text"]);e!=null&&h(t,["text"],e);const i=c(n,["weight"]);return i!=null&&h(t,["weight"],i),t}function q1(n){const t={},e=c(n,["weightedPrompts"]);if(e!=null){let i=e;Array.isArray(i)&&(i=i.map(o=>x_(o))),h(t,["weightedPrompts"],i)}return t}function E_(n){const t={},e=c(n,["temperature"]);e!=null&&h(t,["temperature"],e);const i=c(n,["topK"]);i!=null&&h(t,["topK"],i);const o=c(n,["seed"]);o!=null&&h(t,["seed"],o);const l=c(n,["guidance"]);l!=null&&h(t,["guidance"],l);const u=c(n,["bpm"]);u!=null&&h(t,["bpm"],u);const d=c(n,["density"]);d!=null&&h(t,["density"],d);const p=c(n,["brightness"]);p!=null&&h(t,["brightness"],p);const m=c(n,["scale"]);m!=null&&h(t,["scale"],m);const g=c(n,["muteBass"]);g!=null&&h(t,["muteBass"],g);const _=c(n,["muteDrums"]);_!=null&&h(t,["muteDrums"],_);const S=c(n,["onlyBassAndDrums"]);S!=null&&h(t,["onlyBassAndDrums"],S);const b=c(n,["musicGenerationMode"]);return b!=null&&h(t,["musicGenerationMode"],b),t}function $1(n){const t={},e=c(n,["musicGenerationConfig"]);return e!=null&&h(t,["musicGenerationConfig"],E_(e)),t}function M_(n){const t={},e=c(n,["model"]);return e!=null&&h(t,["model"],e),t}function A_(n){const t={},e=c(n,["weightedPrompts"]);if(e!=null){let i=e;Array.isArray(i)&&(i=i.map(o=>x_(o))),h(t,["weightedPrompts"],i)}return t}function Kh(n){const t={},e=c(n,["setup"]);e!=null&&h(t,["setup"],M_(e));const i=c(n,["clientContent"]);i!=null&&h(t,["clientContent"],A_(i));const o=c(n,["musicGenerationConfig"]);o!=null&&h(t,["musicGenerationConfig"],E_(o));const l=c(n,["playbackControl"]);return l!=null&&h(t,["playbackControl"],l),t}function H1(n){const t={},e=c(n,["voiceName"]);return e!=null&&h(t,["voiceName"],e),t}function G1(n){const t={},e=c(n,["prebuiltVoiceConfig"]);return e!=null&&h(t,["prebuiltVoiceConfig"],H1(e)),t}function F1(n){const t={},e=c(n,["voiceConfig"]);if(e!=null&&h(t,["voiceConfig"],G1(e)),c(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=c(n,["languageCode"]);return i!=null&&h(t,["languageCode"],i),t}function J1(n){const t={},e=c(n,["fps"]);e!=null&&h(t,["fps"],e);const i=c(n,["endOffset"]);i!=null&&h(t,["endOffset"],i);const o=c(n,["startOffset"]);return o!=null&&h(t,["startOffset"],o),t}function K1(n){const t={},e=c(n,["displayName"]);e!=null&&h(t,["displayName"],e);const i=c(n,["data"]);i!=null&&h(t,["data"],i);const o=c(n,["mimeType"]);return o!=null&&h(t,["mimeType"],o),t}function Y1(n){const t={},e=c(n,["displayName"]);e!=null&&h(t,["displayName"],e);const i=c(n,["fileUri"]);i!=null&&h(t,["fileUri"],i);const o=c(n,["mimeType"]);return o!=null&&h(t,["mimeType"],o),t}function W1(n){const t={},e=c(n,["videoMetadata"]);e!=null&&h(t,["videoMetadata"],J1(e));const i=c(n,["thought"]);i!=null&&h(t,["thought"],i);const o=c(n,["inlineData"]);o!=null&&h(t,["inlineData"],K1(o));const l=c(n,["fileData"]);l!=null&&h(t,["fileData"],Y1(l));const u=c(n,["thoughtSignature"]);u!=null&&h(t,["thoughtSignature"],u);const d=c(n,["codeExecutionResult"]);d!=null&&h(t,["codeExecutionResult"],d);const p=c(n,["executableCode"]);p!=null&&h(t,["executableCode"],p);const m=c(n,["functionCall"]);m!=null&&h(t,["functionCall"],m);const g=c(n,["functionResponse"]);g!=null&&h(t,["functionResponse"],g);const _=c(n,["text"]);return _!=null&&h(t,["text"],_),t}function X1(n){const t={},e=c(n,["parts"]);if(e!=null){let o=e;Array.isArray(o)&&(o=o.map(l=>W1(l))),h(t,["parts"],o)}const i=c(n,["role"]);return i!=null&&h(t,["role"],i),t}function Q1(n){const t={};if(c(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const e=c(n,["description"]);e!=null&&h(t,["description"],e);const i=c(n,["name"]);i!=null&&h(t,["name"],i);const o=c(n,["parameters"]);o!=null&&h(t,["parameters"],o);const l=c(n,["parametersJsonSchema"]);l!=null&&h(t,["parametersJsonSchema"],l);const u=c(n,["response"]);u!=null&&h(t,["response"],u);const d=c(n,["responseJsonSchema"]);return d!=null&&h(t,["responseJsonSchema"],d),t}function Z1(n){const t={},e=c(n,["startTime"]);e!=null&&h(t,["startTime"],e);const i=c(n,["endTime"]);return i!=null&&h(t,["endTime"],i),t}function j1(n){const t={},e=c(n,["timeRangeFilter"]);return e!=null&&h(t,["timeRangeFilter"],Z1(e)),t}function tM(n){const t={},e=c(n,["mode"]);e!=null&&h(t,["mode"],e);const i=c(n,["dynamicThreshold"]);return i!=null&&h(t,["dynamicThreshold"],i),t}function eM(n){const t={},e=c(n,["dynamicRetrievalConfig"]);return e!=null&&h(t,["dynamicRetrievalConfig"],tM(e)),t}function nM(){return{}}function iM(n){const t={},e=c(n,["apiKeyString"]);return e!=null&&h(t,["apiKeyString"],e),t}function sM(n){const t={},e=c(n,["apiKeyConfig"]);e!=null&&h(t,["apiKeyConfig"],iM(e));const i=c(n,["authType"]);i!=null&&h(t,["authType"],i);const o=c(n,["googleServiceAccountConfig"]);o!=null&&h(t,["googleServiceAccountConfig"],o);const l=c(n,["httpBasicAuthConfig"]);l!=null&&h(t,["httpBasicAuthConfig"],l);const u=c(n,["oauthConfig"]);u!=null&&h(t,["oauthConfig"],u);const d=c(n,["oidcConfig"]);return d!=null&&h(t,["oidcConfig"],d),t}function oM(n){const t={},e=c(n,["authConfig"]);return e!=null&&h(t,["authConfig"],sM(e)),t}function rM(){return{}}function lM(n){const t={},e=c(n,["functionDeclarations"]);if(e!=null){let _=e;Array.isArray(_)&&(_=_.map(S=>Q1(S))),h(t,["functionDeclarations"],_)}const i=c(n,["retrieval"]);i!=null&&h(t,["retrieval"],i);const o=c(n,["googleSearch"]);o!=null&&h(t,["googleSearch"],j1(o));const l=c(n,["googleSearchRetrieval"]);l!=null&&h(t,["googleSearchRetrieval"],eM(l)),c(n,["enterpriseWebSearch"])!=null&&h(t,["enterpriseWebSearch"],nM());const d=c(n,["googleMaps"]);d!=null&&h(t,["googleMaps"],oM(d)),c(n,["urlContext"])!=null&&h(t,["urlContext"],rM());const m=c(n,["codeExecution"]);m!=null&&h(t,["codeExecution"],m);const g=c(n,["computerUse"]);return g!=null&&h(t,["computerUse"],g),t}function aM(n){const t={},e=c(n,["handle"]);e!=null&&h(t,["handle"],e);const i=c(n,["transparent"]);return i!=null&&h(t,["transparent"],i),t}function ry(){return{}}function uM(n){const t={},e=c(n,["disabled"]);e!=null&&h(t,["disabled"],e);const i=c(n,["startOfSpeechSensitivity"]);i!=null&&h(t,["startOfSpeechSensitivity"],i);const o=c(n,["endOfSpeechSensitivity"]);o!=null&&h(t,["endOfSpeechSensitivity"],o);const l=c(n,["prefixPaddingMs"]);l!=null&&h(t,["prefixPaddingMs"],l);const u=c(n,["silenceDurationMs"]);return u!=null&&h(t,["silenceDurationMs"],u),t}function cM(n){const t={},e=c(n,["automaticActivityDetection"]);e!=null&&h(t,["automaticActivityDetection"],uM(e));const i=c(n,["activityHandling"]);i!=null&&h(t,["activityHandling"],i);const o=c(n,["turnCoverage"]);return o!=null&&h(t,["turnCoverage"],o),t}function hM(n){const t={},e=c(n,["targetTokens"]);return e!=null&&h(t,["targetTokens"],e),t}function fM(n){const t={},e=c(n,["triggerTokens"]);e!=null&&h(t,["triggerTokens"],e);const i=c(n,["slidingWindow"]);return i!=null&&h(t,["slidingWindow"],hM(i)),t}function dM(n){const t={},e=c(n,["proactiveAudio"]);return e!=null&&h(t,["proactiveAudio"],e),t}function pM(n,t){const e={},i=c(n,["generationConfig"]);t!==void 0&&i!=null&&h(t,["setup","generationConfig"],i);const o=c(n,["responseModalities"]);t!==void 0&&o!=null&&h(t,["setup","generationConfig","responseModalities"],o);const l=c(n,["temperature"]);t!==void 0&&l!=null&&h(t,["setup","generationConfig","temperature"],l);const u=c(n,["topP"]);t!==void 0&&u!=null&&h(t,["setup","generationConfig","topP"],u);const d=c(n,["topK"]);t!==void 0&&d!=null&&h(t,["setup","generationConfig","topK"],d);const p=c(n,["maxOutputTokens"]);t!==void 0&&p!=null&&h(t,["setup","generationConfig","maxOutputTokens"],p);const m=c(n,["mediaResolution"]);t!==void 0&&m!=null&&h(t,["setup","generationConfig","mediaResolution"],m);const g=c(n,["seed"]);t!==void 0&&g!=null&&h(t,["setup","generationConfig","seed"],g);const _=c(n,["speechConfig"]);t!==void 0&&_!=null&&h(t,["setup","generationConfig","speechConfig"],F1(Mf(_)));const S=c(n,["enableAffectiveDialog"]);t!==void 0&&S!=null&&h(t,["setup","generationConfig","enableAffectiveDialog"],S);const b=c(n,["systemInstruction"]);t!==void 0&&b!=null&&h(t,["setup","systemInstruction"],X1(Se(b)));const w=c(n,["tools"]);if(t!==void 0&&w!=null){let q=ro(w);Array.isArray(q)&&(q=q.map(J=>lM(oo(J)))),h(t,["setup","tools"],q)}const E=c(n,["sessionResumption"]);t!==void 0&&E!=null&&h(t,["setup","sessionResumption"],aM(E));const M=c(n,["inputAudioTranscription"]);t!==void 0&&M!=null&&h(t,["setup","inputAudioTranscription"],ry());const D=c(n,["outputAudioTranscription"]);t!==void 0&&D!=null&&h(t,["setup","outputAudioTranscription"],ry());const U=c(n,["realtimeInputConfig"]);t!==void 0&&U!=null&&h(t,["setup","realtimeInputConfig"],cM(U));const k=c(n,["contextWindowCompression"]);t!==void 0&&k!=null&&h(t,["setup","contextWindowCompression"],fM(k));const V=c(n,["proactivity"]);return t!==void 0&&V!=null&&h(t,["setup","proactivity"],dM(V)),e}function mM(n,t){const e={},i=c(t,["model"]);i!=null&&h(e,["setup","model"],Nt(n,i));const o=c(t,["config"]);return o!=null&&h(e,["config"],pM(o,e)),e}function gM(){return{}}function vM(){return{}}function yM(n){const t={},e=c(n,["media"]);e!=null&&h(t,["mediaChunks"],a_(e));const i=c(n,["audio"]);i!=null&&h(t,["audio"],c_(i));const o=c(n,["audioStreamEnd"]);o!=null&&h(t,["audioStreamEnd"],o);const l=c(n,["video"]);l!=null&&h(t,["video"],u_(l));const u=c(n,["text"]);return u!=null&&h(t,["text"],u),c(n,["activityStart"])!=null&&h(t,["activityStart"],gM()),c(n,["activityEnd"])!=null&&h(t,["activityEnd"],vM()),t}function _M(){return{}}function SM(n){const t={},e=c(n,["fps"]);e!=null&&h(t,["fps"],e);const i=c(n,["endOffset"]);i!=null&&h(t,["endOffset"],i);const o=c(n,["startOffset"]);return o!=null&&h(t,["startOffset"],o),t}function bM(n){const t={},e=c(n,["data"]);e!=null&&h(t,["data"],e);const i=c(n,["mimeType"]);return i!=null&&h(t,["mimeType"],i),t}function TM(n){const t={},e=c(n,["fileUri"]);e!=null&&h(t,["fileUri"],e);const i=c(n,["mimeType"]);return i!=null&&h(t,["mimeType"],i),t}function wM(n){const t={},e=c(n,["videoMetadata"]);e!=null&&h(t,["videoMetadata"],SM(e));const i=c(n,["thought"]);i!=null&&h(t,["thought"],i);const o=c(n,["inlineData"]);o!=null&&h(t,["inlineData"],bM(o));const l=c(n,["fileData"]);l!=null&&h(t,["fileData"],TM(l));const u=c(n,["thoughtSignature"]);u!=null&&h(t,["thoughtSignature"],u);const d=c(n,["codeExecutionResult"]);d!=null&&h(t,["codeExecutionResult"],d);const p=c(n,["executableCode"]);p!=null&&h(t,["executableCode"],p);const m=c(n,["functionCall"]);m!=null&&h(t,["functionCall"],m);const g=c(n,["functionResponse"]);g!=null&&h(t,["functionResponse"],g);const _=c(n,["text"]);return _!=null&&h(t,["text"],_),t}function CM(n){const t={},e=c(n,["parts"]);if(e!=null){let o=e;Array.isArray(o)&&(o=o.map(l=>wM(l))),h(t,["parts"],o)}const i=c(n,["role"]);return i!=null&&h(t,["role"],i),t}function ly(n){const t={},e=c(n,["text"]);e!=null&&h(t,["text"],e);const i=c(n,["finished"]);return i!=null&&h(t,["finished"],i),t}function xM(n){const t={},e=c(n,["retrievedUrl"]);e!=null&&h(t,["retrievedUrl"],e);const i=c(n,["urlRetrievalStatus"]);return i!=null&&h(t,["urlRetrievalStatus"],i),t}function EM(n){const t={},e=c(n,["urlMetadata"]);if(e!=null){let i=e;Array.isArray(i)&&(i=i.map(o=>xM(o))),h(t,["urlMetadata"],i)}return t}function MM(n){const t={},e=c(n,["modelTurn"]);e!=null&&h(t,["modelTurn"],CM(e));const i=c(n,["turnComplete"]);i!=null&&h(t,["turnComplete"],i);const o=c(n,["interrupted"]);o!=null&&h(t,["interrupted"],o);const l=c(n,["groundingMetadata"]);l!=null&&h(t,["groundingMetadata"],l);const u=c(n,["generationComplete"]);u!=null&&h(t,["generationComplete"],u);const d=c(n,["inputTranscription"]);d!=null&&h(t,["inputTranscription"],ly(d));const p=c(n,["outputTranscription"]);p!=null&&h(t,["outputTranscription"],ly(p));const m=c(n,["urlContextMetadata"]);return m!=null&&h(t,["urlContextMetadata"],EM(m)),t}function AM(n){const t={},e=c(n,["id"]);e!=null&&h(t,["id"],e);const i=c(n,["args"]);i!=null&&h(t,["args"],i);const o=c(n,["name"]);return o!=null&&h(t,["name"],o),t}function RM(n){const t={},e=c(n,["functionCalls"]);if(e!=null){let i=e;Array.isArray(i)&&(i=i.map(o=>AM(o))),h(t,["functionCalls"],i)}return t}function kM(n){const t={},e=c(n,["ids"]);return e!=null&&h(t,["ids"],e),t}function ia(n){const t={},e=c(n,["modality"]);e!=null&&h(t,["modality"],e);const i=c(n,["tokenCount"]);return i!=null&&h(t,["tokenCount"],i),t}function NM(n){const t={},e=c(n,["promptTokenCount"]);e!=null&&h(t,["promptTokenCount"],e);const i=c(n,["cachedContentTokenCount"]);i!=null&&h(t,["cachedContentTokenCount"],i);const o=c(n,["responseTokenCount"]);o!=null&&h(t,["responseTokenCount"],o);const l=c(n,["toolUsePromptTokenCount"]);l!=null&&h(t,["toolUsePromptTokenCount"],l);const u=c(n,["thoughtsTokenCount"]);u!=null&&h(t,["thoughtsTokenCount"],u);const d=c(n,["totalTokenCount"]);d!=null&&h(t,["totalTokenCount"],d);const p=c(n,["promptTokensDetails"]);if(p!=null){let S=p;Array.isArray(S)&&(S=S.map(b=>ia(b))),h(t,["promptTokensDetails"],S)}const m=c(n,["cacheTokensDetails"]);if(m!=null){let S=m;Array.isArray(S)&&(S=S.map(b=>ia(b))),h(t,["cacheTokensDetails"],S)}const g=c(n,["responseTokensDetails"]);if(g!=null){let S=g;Array.isArray(S)&&(S=S.map(b=>ia(b))),h(t,["responseTokensDetails"],S)}const _=c(n,["toolUsePromptTokensDetails"]);if(_!=null){let S=_;Array.isArray(S)&&(S=S.map(b=>ia(b))),h(t,["toolUsePromptTokensDetails"],S)}return t}function DM(n){const t={},e=c(n,["timeLeft"]);return e!=null&&h(t,["timeLeft"],e),t}function IM(n){const t={},e=c(n,["newHandle"]);e!=null&&h(t,["newHandle"],e);const i=c(n,["resumable"]);i!=null&&h(t,["resumable"],i);const o=c(n,["lastConsumedClientMessageIndex"]);return o!=null&&h(t,["lastConsumedClientMessageIndex"],o),t}function LM(n){const t={};c(n,["setupComplete"])!=null&&h(t,["setupComplete"],_M());const i=c(n,["serverContent"]);i!=null&&h(t,["serverContent"],MM(i));const o=c(n,["toolCall"]);o!=null&&h(t,["toolCall"],RM(o));const l=c(n,["toolCallCancellation"]);l!=null&&h(t,["toolCallCancellation"],kM(l));const u=c(n,["usageMetadata"]);u!=null&&h(t,["usageMetadata"],NM(u));const d=c(n,["goAway"]);d!=null&&h(t,["goAway"],DM(d));const p=c(n,["sessionResumptionUpdate"]);return p!=null&&h(t,["sessionResumptionUpdate"],IM(p)),t}function UM(){return{}}function PM(n){const t={},e=c(n,["text"]);e!=null&&h(t,["text"],e);const i=c(n,["weight"]);return i!=null&&h(t,["weight"],i),t}function zM(n){const t={},e=c(n,["weightedPrompts"]);if(e!=null){let i=e;Array.isArray(i)&&(i=i.map(o=>PM(o))),h(t,["weightedPrompts"],i)}return t}function VM(n){const t={},e=c(n,["temperature"]);e!=null&&h(t,["temperature"],e);const i=c(n,["topK"]);i!=null&&h(t,["topK"],i);const o=c(n,["seed"]);o!=null&&h(t,["seed"],o);const l=c(n,["guidance"]);l!=null&&h(t,["guidance"],l);const u=c(n,["bpm"]);u!=null&&h(t,["bpm"],u);const d=c(n,["density"]);d!=null&&h(t,["density"],d);const p=c(n,["brightness"]);p!=null&&h(t,["brightness"],p);const m=c(n,["scale"]);m!=null&&h(t,["scale"],m);const g=c(n,["muteBass"]);g!=null&&h(t,["muteBass"],g);const _=c(n,["muteDrums"]);_!=null&&h(t,["muteDrums"],_);const S=c(n,["onlyBassAndDrums"]);S!=null&&h(t,["onlyBassAndDrums"],S);const b=c(n,["musicGenerationMode"]);return b!=null&&h(t,["musicGenerationMode"],b),t}function BM(n){const t={},e=c(n,["clientContent"]);e!=null&&h(t,["clientContent"],zM(e));const i=c(n,["musicGenerationConfig"]);return i!=null&&h(t,["musicGenerationConfig"],VM(i)),t}function OM(n){const t={},e=c(n,["data"]);e!=null&&h(t,["data"],e);const i=c(n,["mimeType"]);i!=null&&h(t,["mimeType"],i);const o=c(n,["sourceMetadata"]);return o!=null&&h(t,["sourceMetadata"],BM(o)),t}function qM(n){const t={},e=c(n,["audioChunks"]);if(e!=null){let i=e;Array.isArray(i)&&(i=i.map(o=>OM(o))),h(t,["audioChunks"],i)}return t}function $M(n){const t={},e=c(n,["text"]);e!=null&&h(t,["text"],e);const i=c(n,["filteredReason"]);return i!=null&&h(t,["filteredReason"],i),t}function HM(n){const t={};c(n,["setupComplete"])!=null&&h(t,["setupComplete"],UM());const i=c(n,["serverContent"]);i!=null&&h(t,["serverContent"],qM(i));const o=c(n,["filteredPrompt"]);return o!=null&&h(t,["filteredPrompt"],$M(o)),t}function GM(n){const t={},e=c(n,["sessionId"]);return e!=null&&h(t,["sessionId"],e),t}function FM(n){const t={},e=c(n,["fps"]);e!=null&&h(t,["fps"],e);const i=c(n,["endOffset"]);i!=null&&h(t,["endOffset"],i);const o=c(n,["startOffset"]);return o!=null&&h(t,["startOffset"],o),t}function JM(n){const t={},e=c(n,["displayName"]);e!=null&&h(t,["displayName"],e);const i=c(n,["data"]);i!=null&&h(t,["data"],i);const o=c(n,["mimeType"]);return o!=null&&h(t,["mimeType"],o),t}function KM(n){const t={},e=c(n,["displayName"]);e!=null&&h(t,["displayName"],e);const i=c(n,["fileUri"]);i!=null&&h(t,["fileUri"],i);const o=c(n,["mimeType"]);return o!=null&&h(t,["mimeType"],o),t}function YM(n){const t={},e=c(n,["videoMetadata"]);e!=null&&h(t,["videoMetadata"],FM(e));const i=c(n,["thought"]);i!=null&&h(t,["thought"],i);const o=c(n,["inlineData"]);o!=null&&h(t,["inlineData"],JM(o));const l=c(n,["fileData"]);l!=null&&h(t,["fileData"],KM(l));const u=c(n,["thoughtSignature"]);u!=null&&h(t,["thoughtSignature"],u);const d=c(n,["codeExecutionResult"]);d!=null&&h(t,["codeExecutionResult"],d);const p=c(n,["executableCode"]);p!=null&&h(t,["executableCode"],p);const m=c(n,["functionCall"]);m!=null&&h(t,["functionCall"],m);const g=c(n,["functionResponse"]);g!=null&&h(t,["functionResponse"],g);const _=c(n,["text"]);return _!=null&&h(t,["text"],_),t}function WM(n){const t={},e=c(n,["parts"]);if(e!=null){let o=e;Array.isArray(o)&&(o=o.map(l=>YM(l))),h(t,["parts"],o)}const i=c(n,["role"]);return i!=null&&h(t,["role"],i),t}function ay(n){const t={},e=c(n,["text"]);e!=null&&h(t,["text"],e);const i=c(n,["finished"]);return i!=null&&h(t,["finished"],i),t}function XM(n){const t={},e=c(n,["modelTurn"]);e!=null&&h(t,["modelTurn"],WM(e));const i=c(n,["turnComplete"]);i!=null&&h(t,["turnComplete"],i);const o=c(n,["interrupted"]);o!=null&&h(t,["interrupted"],o);const l=c(n,["groundingMetadata"]);l!=null&&h(t,["groundingMetadata"],l);const u=c(n,["generationComplete"]);u!=null&&h(t,["generationComplete"],u);const d=c(n,["inputTranscription"]);d!=null&&h(t,["inputTranscription"],ay(d));const p=c(n,["outputTranscription"]);return p!=null&&h(t,["outputTranscription"],ay(p)),t}function QM(n){const t={},e=c(n,["args"]);e!=null&&h(t,["args"],e);const i=c(n,["name"]);return i!=null&&h(t,["name"],i),t}function ZM(n){const t={},e=c(n,["functionCalls"]);if(e!=null){let i=e;Array.isArray(i)&&(i=i.map(o=>QM(o))),h(t,["functionCalls"],i)}return t}function jM(n){const t={},e=c(n,["ids"]);return e!=null&&h(t,["ids"],e),t}function sa(n){const t={},e=c(n,["modality"]);e!=null&&h(t,["modality"],e);const i=c(n,["tokenCount"]);return i!=null&&h(t,["tokenCount"],i),t}function tA(n){const t={},e=c(n,["promptTokenCount"]);e!=null&&h(t,["promptTokenCount"],e);const i=c(n,["cachedContentTokenCount"]);i!=null&&h(t,["cachedContentTokenCount"],i);const o=c(n,["candidatesTokenCount"]);o!=null&&h(t,["responseTokenCount"],o);const l=c(n,["toolUsePromptTokenCount"]);l!=null&&h(t,["toolUsePromptTokenCount"],l);const u=c(n,["thoughtsTokenCount"]);u!=null&&h(t,["thoughtsTokenCount"],u);const d=c(n,["totalTokenCount"]);d!=null&&h(t,["totalTokenCount"],d);const p=c(n,["promptTokensDetails"]);if(p!=null){let b=p;Array.isArray(b)&&(b=b.map(w=>sa(w))),h(t,["promptTokensDetails"],b)}const m=c(n,["cacheTokensDetails"]);if(m!=null){let b=m;Array.isArray(b)&&(b=b.map(w=>sa(w))),h(t,["cacheTokensDetails"],b)}const g=c(n,["candidatesTokensDetails"]);if(g!=null){let b=g;Array.isArray(b)&&(b=b.map(w=>sa(w))),h(t,["responseTokensDetails"],b)}const _=c(n,["toolUsePromptTokensDetails"]);if(_!=null){let b=_;Array.isArray(b)&&(b=b.map(w=>sa(w))),h(t,["toolUsePromptTokensDetails"],b)}const S=c(n,["trafficType"]);return S!=null&&h(t,["trafficType"],S),t}function eA(n){const t={},e=c(n,["timeLeft"]);return e!=null&&h(t,["timeLeft"],e),t}function nA(n){const t={},e=c(n,["newHandle"]);e!=null&&h(t,["newHandle"],e);const i=c(n,["resumable"]);i!=null&&h(t,["resumable"],i);const o=c(n,["lastConsumedClientMessageIndex"]);return o!=null&&h(t,["lastConsumedClientMessageIndex"],o),t}function iA(n){const t={},e=c(n,["setupComplete"]);e!=null&&h(t,["setupComplete"],GM(e));const i=c(n,["serverContent"]);i!=null&&h(t,["serverContent"],XM(i));const o=c(n,["toolCall"]);o!=null&&h(t,["toolCall"],ZM(o));const l=c(n,["toolCallCancellation"]);l!=null&&h(t,["toolCallCancellation"],jM(l));const u=c(n,["usageMetadata"]);u!=null&&h(t,["usageMetadata"],tA(u));const d=c(n,["goAway"]);d!=null&&h(t,["goAway"],eA(d));const p=c(n,["sessionResumptionUpdate"]);return p!=null&&h(t,["sessionResumptionUpdate"],nA(p)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sA(n){const t={},e=c(n,["fps"]);e!=null&&h(t,["fps"],e);const i=c(n,["endOffset"]);i!=null&&h(t,["endOffset"],i);const o=c(n,["startOffset"]);return o!=null&&h(t,["startOffset"],o),t}function oA(n){const t={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=c(n,["data"]);e!=null&&h(t,["data"],e);const i=c(n,["mimeType"]);return i!=null&&h(t,["mimeType"],i),t}function rA(n){const t={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=c(n,["fileUri"]);e!=null&&h(t,["fileUri"],e);const i=c(n,["mimeType"]);return i!=null&&h(t,["mimeType"],i),t}function lA(n){const t={},e=c(n,["videoMetadata"]);e!=null&&h(t,["videoMetadata"],sA(e));const i=c(n,["thought"]);i!=null&&h(t,["thought"],i);const o=c(n,["inlineData"]);o!=null&&h(t,["inlineData"],oA(o));const l=c(n,["fileData"]);l!=null&&h(t,["fileData"],rA(l));const u=c(n,["thoughtSignature"]);u!=null&&h(t,["thoughtSignature"],u);const d=c(n,["codeExecutionResult"]);d!=null&&h(t,["codeExecutionResult"],d);const p=c(n,["executableCode"]);p!=null&&h(t,["executableCode"],p);const m=c(n,["functionCall"]);m!=null&&h(t,["functionCall"],m);const g=c(n,["functionResponse"]);g!=null&&h(t,["functionResponse"],g);const _=c(n,["text"]);return _!=null&&h(t,["text"],_),t}function Pa(n){const t={},e=c(n,["parts"]);if(e!=null){let o=e;Array.isArray(o)&&(o=o.map(l=>lA(l))),h(t,["parts"],o)}const i=c(n,["role"]);return i!=null&&h(t,["role"],i),t}function aA(n){const t={},e=c(n,["anyOf"]);e!=null&&h(t,["anyOf"],e);const i=c(n,["default"]);i!=null&&h(t,["default"],i);const o=c(n,["description"]);o!=null&&h(t,["description"],o);const l=c(n,["enum"]);l!=null&&h(t,["enum"],l);const u=c(n,["example"]);u!=null&&h(t,["example"],u);const d=c(n,["format"]);d!=null&&h(t,["format"],d);const p=c(n,["items"]);p!=null&&h(t,["items"],p);const m=c(n,["maxItems"]);m!=null&&h(t,["maxItems"],m);const g=c(n,["maxLength"]);g!=null&&h(t,["maxLength"],g);const _=c(n,["maxProperties"]);_!=null&&h(t,["maxProperties"],_);const S=c(n,["maximum"]);S!=null&&h(t,["maximum"],S);const b=c(n,["minItems"]);b!=null&&h(t,["minItems"],b);const w=c(n,["minLength"]);w!=null&&h(t,["minLength"],w);const E=c(n,["minProperties"]);E!=null&&h(t,["minProperties"],E);const M=c(n,["minimum"]);M!=null&&h(t,["minimum"],M);const D=c(n,["nullable"]);D!=null&&h(t,["nullable"],D);const U=c(n,["pattern"]);U!=null&&h(t,["pattern"],U);const k=c(n,["properties"]);k!=null&&h(t,["properties"],k);const V=c(n,["propertyOrdering"]);V!=null&&h(t,["propertyOrdering"],V);const q=c(n,["required"]);q!=null&&h(t,["required"],q);const J=c(n,["title"]);J!=null&&h(t,["title"],J);const W=c(n,["type"]);return W!=null&&h(t,["type"],W),t}function uA(n){const t={};if(c(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const e=c(n,["category"]);e!=null&&h(t,["category"],e);const i=c(n,["threshold"]);return i!=null&&h(t,["threshold"],i),t}function cA(n){const t={},e=c(n,["behavior"]);e!=null&&h(t,["behavior"],e);const i=c(n,["description"]);i!=null&&h(t,["description"],i);const o=c(n,["name"]);o!=null&&h(t,["name"],o);const l=c(n,["parameters"]);l!=null&&h(t,["parameters"],l);const u=c(n,["parametersJsonSchema"]);u!=null&&h(t,["parametersJsonSchema"],u);const d=c(n,["response"]);d!=null&&h(t,["response"],d);const p=c(n,["responseJsonSchema"]);return p!=null&&h(t,["responseJsonSchema"],p),t}function hA(n){const t={},e=c(n,["startTime"]);e!=null&&h(t,["startTime"],e);const i=c(n,["endTime"]);return i!=null&&h(t,["endTime"],i),t}function fA(n){const t={},e=c(n,["timeRangeFilter"]);return e!=null&&h(t,["timeRangeFilter"],hA(e)),t}function dA(n){const t={},e=c(n,["mode"]);e!=null&&h(t,["mode"],e);const i=c(n,["dynamicThreshold"]);return i!=null&&h(t,["dynamicThreshold"],i),t}function pA(n){const t={},e=c(n,["dynamicRetrievalConfig"]);return e!=null&&h(t,["dynamicRetrievalConfig"],dA(e)),t}function mA(){return{}}function gA(n){const t={},e=c(n,["functionDeclarations"]);if(e!=null){let p=e;Array.isArray(p)&&(p=p.map(m=>cA(m))),h(t,["functionDeclarations"],p)}if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(n,["googleSearch"]);i!=null&&h(t,["googleSearch"],fA(i));const o=c(n,["googleSearchRetrieval"]);if(o!=null&&h(t,["googleSearchRetrieval"],pA(o)),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(c(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");c(n,["urlContext"])!=null&&h(t,["urlContext"],mA());const u=c(n,["codeExecution"]);u!=null&&h(t,["codeExecution"],u);const d=c(n,["computerUse"]);return d!=null&&h(t,["computerUse"],d),t}function vA(n){const t={},e=c(n,["mode"]);e!=null&&h(t,["mode"],e);const i=c(n,["allowedFunctionNames"]);return i!=null&&h(t,["allowedFunctionNames"],i),t}function yA(n){const t={},e=c(n,["latitude"]);e!=null&&h(t,["latitude"],e);const i=c(n,["longitude"]);return i!=null&&h(t,["longitude"],i),t}function _A(n){const t={},e=c(n,["latLng"]);e!=null&&h(t,["latLng"],yA(e));const i=c(n,["languageCode"]);return i!=null&&h(t,["languageCode"],i),t}function SA(n){const t={},e=c(n,["functionCallingConfig"]);e!=null&&h(t,["functionCallingConfig"],vA(e));const i=c(n,["retrievalConfig"]);return i!=null&&h(t,["retrievalConfig"],_A(i)),t}function bA(n){const t={},e=c(n,["voiceName"]);return e!=null&&h(t,["voiceName"],e),t}function R_(n){const t={},e=c(n,["prebuiltVoiceConfig"]);return e!=null&&h(t,["prebuiltVoiceConfig"],bA(e)),t}function TA(n){const t={},e=c(n,["speaker"]);e!=null&&h(t,["speaker"],e);const i=c(n,["voiceConfig"]);return i!=null&&h(t,["voiceConfig"],R_(i)),t}function wA(n){const t={},e=c(n,["speakerVoiceConfigs"]);if(e!=null){let i=e;Array.isArray(i)&&(i=i.map(o=>TA(o))),h(t,["speakerVoiceConfigs"],i)}return t}function CA(n){const t={},e=c(n,["voiceConfig"]);e!=null&&h(t,["voiceConfig"],R_(e));const i=c(n,["multiSpeakerVoiceConfig"]);i!=null&&h(t,["multiSpeakerVoiceConfig"],wA(i));const o=c(n,["languageCode"]);return o!=null&&h(t,["languageCode"],o),t}function xA(n){const t={},e=c(n,["includeThoughts"]);e!=null&&h(t,["includeThoughts"],e);const i=c(n,["thinkingBudget"]);return i!=null&&h(t,["thinkingBudget"],i),t}function EA(n,t,e){const i={},o=c(t,["systemInstruction"]);e!==void 0&&o!=null&&h(e,["systemInstruction"],Pa(Se(o)));const l=c(t,["temperature"]);l!=null&&h(i,["temperature"],l);const u=c(t,["topP"]);u!=null&&h(i,["topP"],u);const d=c(t,["topK"]);d!=null&&h(i,["topK"],d);const p=c(t,["candidateCount"]);p!=null&&h(i,["candidateCount"],p);const m=c(t,["maxOutputTokens"]);m!=null&&h(i,["maxOutputTokens"],m);const g=c(t,["stopSequences"]);g!=null&&h(i,["stopSequences"],g);const _=c(t,["responseLogprobs"]);_!=null&&h(i,["responseLogprobs"],_);const S=c(t,["logprobs"]);S!=null&&h(i,["logprobs"],S);const b=c(t,["presencePenalty"]);b!=null&&h(i,["presencePenalty"],b);const w=c(t,["frequencyPenalty"]);w!=null&&h(i,["frequencyPenalty"],w);const E=c(t,["seed"]);E!=null&&h(i,["seed"],E);const M=c(t,["responseMimeType"]);M!=null&&h(i,["responseMimeType"],M);const D=c(t,["responseSchema"]);D!=null&&h(i,["responseSchema"],aA(xf(D)));const U=c(t,["responseJsonSchema"]);if(U!=null&&h(i,["responseJsonSchema"],U),c(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const k=c(t,["safetySettings"]);if(e!==void 0&&k!=null){let K=k;Array.isArray(K)&&(K=K.map(st=>uA(st))),h(e,["safetySettings"],K)}const V=c(t,["tools"]);if(e!==void 0&&V!=null){let K=ro(V);Array.isArray(K)&&(K=K.map(st=>gA(oo(st)))),h(e,["tools"],K)}const q=c(t,["toolConfig"]);if(e!==void 0&&q!=null&&h(e,["toolConfig"],SA(q)),c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const J=c(t,["cachedContent"]);e!==void 0&&J!=null&&h(e,["cachedContent"],Vn(n,J));const W=c(t,["responseModalities"]);W!=null&&h(i,["responseModalities"],W);const rt=c(t,["mediaResolution"]);rt!=null&&h(i,["mediaResolution"],rt);const j=c(t,["speechConfig"]);if(j!=null&&h(i,["speechConfig"],CA(Ef(j))),c(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Q=c(t,["thinkingConfig"]);return Q!=null&&h(i,["thinkingConfig"],xA(Q)),i}function uy(n,t){const e={},i=c(t,["model"]);i!=null&&h(e,["_url","model"],Nt(n,i));const o=c(t,["contents"]);if(o!=null){let u=Qe(o);Array.isArray(u)&&(u=u.map(d=>Pa(d))),h(e,["contents"],u)}const l=c(t,["config"]);return l!=null&&h(e,["generationConfig"],EA(n,l,e)),e}function MA(n,t){const e={},i=c(n,["taskType"]);t!==void 0&&i!=null&&h(t,["requests[]","taskType"],i);const o=c(n,["title"]);t!==void 0&&o!=null&&h(t,["requests[]","title"],o);const l=c(n,["outputDimensionality"]);if(t!==void 0&&l!=null&&h(t,["requests[]","outputDimensionality"],l),c(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return e}function AA(n,t){const e={},i=c(t,["model"]);i!=null&&h(e,["_url","model"],Nt(n,i));const o=c(t,["contents"]);o!=null&&h(e,["requests[]","content"],f_(n,o));const l=c(t,["config"]);l!=null&&h(e,["config"],MA(l,e));const u=c(t,["model"]);return u!==void 0&&h(e,["requests[]","model"],Nt(n,u)),e}function RA(n,t){const e={};if(c(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=c(n,["numberOfImages"]);t!==void 0&&i!=null&&h(t,["parameters","sampleCount"],i);const o=c(n,["aspectRatio"]);t!==void 0&&o!=null&&h(t,["parameters","aspectRatio"],o);const l=c(n,["guidanceScale"]);if(t!==void 0&&l!=null&&h(t,["parameters","guidanceScale"],l),c(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=c(n,["safetyFilterLevel"]);t!==void 0&&u!=null&&h(t,["parameters","safetySetting"],u);const d=c(n,["personGeneration"]);t!==void 0&&d!=null&&h(t,["parameters","personGeneration"],d);const p=c(n,["includeSafetyAttributes"]);t!==void 0&&p!=null&&h(t,["parameters","includeSafetyAttributes"],p);const m=c(n,["includeRaiReason"]);t!==void 0&&m!=null&&h(t,["parameters","includeRaiReason"],m);const g=c(n,["language"]);t!==void 0&&g!=null&&h(t,["parameters","language"],g);const _=c(n,["outputMimeType"]);t!==void 0&&_!=null&&h(t,["parameters","outputOptions","mimeType"],_);const S=c(n,["outputCompressionQuality"]);if(t!==void 0&&S!=null&&h(t,["parameters","outputOptions","compressionQuality"],S),c(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");const b=c(n,["imageSize"]);if(t!==void 0&&b!=null&&h(t,["parameters","sampleImageSize"],b),c(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return e}function kA(n,t){const e={},i=c(t,["model"]);i!=null&&h(e,["_url","model"],Nt(n,i));const o=c(t,["prompt"]);o!=null&&h(e,["instances[0]","prompt"],o);const l=c(t,["config"]);return l!=null&&h(e,["config"],RA(l,e)),e}function NA(n,t){const e={},i=c(t,["model"]);i!=null&&h(e,["_url","name"],Nt(n,i));const o=c(t,["config"]);return o!=null&&h(e,["config"],o),e}function DA(n,t,e){const i={},o=c(t,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const l=c(t,["pageToken"]);e!==void 0&&l!=null&&h(e,["_query","pageToken"],l);const u=c(t,["filter"]);e!==void 0&&u!=null&&h(e,["_query","filter"],u);const d=c(t,["queryBase"]);return e!==void 0&&d!=null&&h(e,["_url","models_url"],m_(n,d)),i}function IA(n,t){const e={},i=c(t,["config"]);return i!=null&&h(e,["config"],DA(n,i,e)),e}function LA(n,t){const e={},i=c(n,["displayName"]);t!==void 0&&i!=null&&h(t,["displayName"],i);const o=c(n,["description"]);t!==void 0&&o!=null&&h(t,["description"],o);const l=c(n,["defaultCheckpointId"]);return t!==void 0&&l!=null&&h(t,["defaultCheckpointId"],l),e}function UA(n,t){const e={},i=c(t,["model"]);i!=null&&h(e,["_url","name"],Nt(n,i));const o=c(t,["config"]);return o!=null&&h(e,["config"],LA(o,e)),e}function PA(n,t){const e={},i=c(t,["model"]);i!=null&&h(e,["_url","name"],Nt(n,i));const o=c(t,["config"]);return o!=null&&h(e,["config"],o),e}function zA(n){const t={};if(c(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(c(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(c(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function VA(n,t){const e={},i=c(t,["model"]);i!=null&&h(e,["_url","model"],Nt(n,i));const o=c(t,["contents"]);if(o!=null){let u=Qe(o);Array.isArray(u)&&(u=u.map(d=>Pa(d))),h(e,["contents"],u)}const l=c(t,["config"]);return l!=null&&h(e,["config"],zA(l)),e}function BA(n){const t={};if(c(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const e=c(n,["imageBytes"]);e!=null&&h(t,["bytesBase64Encoded"],Yi(e));const i=c(n,["mimeType"]);return i!=null&&h(t,["mimeType"],i),t}function OA(n,t){const e={},i=c(n,["numberOfVideos"]);if(t!==void 0&&i!=null&&h(t,["parameters","sampleCount"],i),c(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=c(n,["durationSeconds"]);if(t!==void 0&&o!=null&&h(t,["parameters","durationSeconds"],o),c(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=c(n,["aspectRatio"]);if(t!==void 0&&l!=null&&h(t,["parameters","aspectRatio"],l),c(n,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const u=c(n,["personGeneration"]);if(t!==void 0&&u!=null&&h(t,["parameters","personGeneration"],u),c(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const d=c(n,["negativePrompt"]);t!==void 0&&d!=null&&h(t,["parameters","negativePrompt"],d);const p=c(n,["enhancePrompt"]);if(t!==void 0&&p!=null&&h(t,["parameters","enhancePrompt"],p),c(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(c(n,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(c(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return e}function qA(n,t){const e={},i=c(t,["model"]);i!=null&&h(e,["_url","model"],Nt(n,i));const o=c(t,["prompt"]);o!=null&&h(e,["instances[0]","prompt"],o);const l=c(t,["image"]);if(l!=null&&h(e,["instances[0]","image"],BA(l)),c(t,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const u=c(t,["config"]);return u!=null&&h(e,["config"],OA(u,e)),e}function $A(n){const t={},e=c(n,["fps"]);e!=null&&h(t,["fps"],e);const i=c(n,["endOffset"]);i!=null&&h(t,["endOffset"],i);const o=c(n,["startOffset"]);return o!=null&&h(t,["startOffset"],o),t}function HA(n){const t={},e=c(n,["displayName"]);e!=null&&h(t,["displayName"],e);const i=c(n,["data"]);i!=null&&h(t,["data"],i);const o=c(n,["mimeType"]);return o!=null&&h(t,["mimeType"],o),t}function GA(n){const t={},e=c(n,["displayName"]);e!=null&&h(t,["displayName"],e);const i=c(n,["fileUri"]);i!=null&&h(t,["fileUri"],i);const o=c(n,["mimeType"]);return o!=null&&h(t,["mimeType"],o),t}function FA(n){const t={},e=c(n,["videoMetadata"]);e!=null&&h(t,["videoMetadata"],$A(e));const i=c(n,["thought"]);i!=null&&h(t,["thought"],i);const o=c(n,["inlineData"]);o!=null&&h(t,["inlineData"],HA(o));const l=c(n,["fileData"]);l!=null&&h(t,["fileData"],GA(l));const u=c(n,["thoughtSignature"]);u!=null&&h(t,["thoughtSignature"],u);const d=c(n,["codeExecutionResult"]);d!=null&&h(t,["codeExecutionResult"],d);const p=c(n,["executableCode"]);p!=null&&h(t,["executableCode"],p);const m=c(n,["functionCall"]);m!=null&&h(t,["functionCall"],m);const g=c(n,["functionResponse"]);g!=null&&h(t,["functionResponse"],g);const _=c(n,["text"]);return _!=null&&h(t,["text"],_),t}function ao(n){const t={},e=c(n,["parts"]);if(e!=null){let o=e;Array.isArray(o)&&(o=o.map(l=>FA(l))),h(t,["parts"],o)}const i=c(n,["role"]);return i!=null&&h(t,["role"],i),t}function JA(n){const t={},e=c(n,["anyOf"]);e!=null&&h(t,["anyOf"],e);const i=c(n,["default"]);i!=null&&h(t,["default"],i);const o=c(n,["description"]);o!=null&&h(t,["description"],o);const l=c(n,["enum"]);l!=null&&h(t,["enum"],l);const u=c(n,["example"]);u!=null&&h(t,["example"],u);const d=c(n,["format"]);d!=null&&h(t,["format"],d);const p=c(n,["items"]);p!=null&&h(t,["items"],p);const m=c(n,["maxItems"]);m!=null&&h(t,["maxItems"],m);const g=c(n,["maxLength"]);g!=null&&h(t,["maxLength"],g);const _=c(n,["maxProperties"]);_!=null&&h(t,["maxProperties"],_);const S=c(n,["maximum"]);S!=null&&h(t,["maximum"],S);const b=c(n,["minItems"]);b!=null&&h(t,["minItems"],b);const w=c(n,["minLength"]);w!=null&&h(t,["minLength"],w);const E=c(n,["minProperties"]);E!=null&&h(t,["minProperties"],E);const M=c(n,["minimum"]);M!=null&&h(t,["minimum"],M);const D=c(n,["nullable"]);D!=null&&h(t,["nullable"],D);const U=c(n,["pattern"]);U!=null&&h(t,["pattern"],U);const k=c(n,["properties"]);k!=null&&h(t,["properties"],k);const V=c(n,["propertyOrdering"]);V!=null&&h(t,["propertyOrdering"],V);const q=c(n,["required"]);q!=null&&h(t,["required"],q);const J=c(n,["title"]);J!=null&&h(t,["title"],J);const W=c(n,["type"]);return W!=null&&h(t,["type"],W),t}function KA(n){const t={},e=c(n,["featureSelectionPreference"]);return e!=null&&h(t,["featureSelectionPreference"],e),t}function YA(n){const t={},e=c(n,["method"]);e!=null&&h(t,["method"],e);const i=c(n,["category"]);i!=null&&h(t,["category"],i);const o=c(n,["threshold"]);return o!=null&&h(t,["threshold"],o),t}function WA(n){const t={};if(c(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const e=c(n,["description"]);e!=null&&h(t,["description"],e);const i=c(n,["name"]);i!=null&&h(t,["name"],i);const o=c(n,["parameters"]);o!=null&&h(t,["parameters"],o);const l=c(n,["parametersJsonSchema"]);l!=null&&h(t,["parametersJsonSchema"],l);const u=c(n,["response"]);u!=null&&h(t,["response"],u);const d=c(n,["responseJsonSchema"]);return d!=null&&h(t,["responseJsonSchema"],d),t}function XA(n){const t={},e=c(n,["startTime"]);e!=null&&h(t,["startTime"],e);const i=c(n,["endTime"]);return i!=null&&h(t,["endTime"],i),t}function QA(n){const t={},e=c(n,["timeRangeFilter"]);return e!=null&&h(t,["timeRangeFilter"],XA(e)),t}function ZA(n){const t={},e=c(n,["mode"]);e!=null&&h(t,["mode"],e);const i=c(n,["dynamicThreshold"]);return i!=null&&h(t,["dynamicThreshold"],i),t}function jA(n){const t={},e=c(n,["dynamicRetrievalConfig"]);return e!=null&&h(t,["dynamicRetrievalConfig"],ZA(e)),t}function tR(){return{}}function eR(n){const t={},e=c(n,["apiKeyString"]);return e!=null&&h(t,["apiKeyString"],e),t}function nR(n){const t={},e=c(n,["apiKeyConfig"]);e!=null&&h(t,["apiKeyConfig"],eR(e));const i=c(n,["authType"]);i!=null&&h(t,["authType"],i);const o=c(n,["googleServiceAccountConfig"]);o!=null&&h(t,["googleServiceAccountConfig"],o);const l=c(n,["httpBasicAuthConfig"]);l!=null&&h(t,["httpBasicAuthConfig"],l);const u=c(n,["oauthConfig"]);u!=null&&h(t,["oauthConfig"],u);const d=c(n,["oidcConfig"]);return d!=null&&h(t,["oidcConfig"],d),t}function iR(n){const t={},e=c(n,["authConfig"]);return e!=null&&h(t,["authConfig"],nR(e)),t}function sR(){return{}}function k_(n){const t={},e=c(n,["functionDeclarations"]);if(e!=null){let _=e;Array.isArray(_)&&(_=_.map(S=>WA(S))),h(t,["functionDeclarations"],_)}const i=c(n,["retrieval"]);i!=null&&h(t,["retrieval"],i);const o=c(n,["googleSearch"]);o!=null&&h(t,["googleSearch"],QA(o));const l=c(n,["googleSearchRetrieval"]);l!=null&&h(t,["googleSearchRetrieval"],jA(l)),c(n,["enterpriseWebSearch"])!=null&&h(t,["enterpriseWebSearch"],tR());const d=c(n,["googleMaps"]);d!=null&&h(t,["googleMaps"],iR(d)),c(n,["urlContext"])!=null&&h(t,["urlContext"],sR());const m=c(n,["codeExecution"]);m!=null&&h(t,["codeExecution"],m);const g=c(n,["computerUse"]);return g!=null&&h(t,["computerUse"],g),t}function oR(n){const t={},e=c(n,["mode"]);e!=null&&h(t,["mode"],e);const i=c(n,["allowedFunctionNames"]);return i!=null&&h(t,["allowedFunctionNames"],i),t}function rR(n){const t={},e=c(n,["latitude"]);e!=null&&h(t,["latitude"],e);const i=c(n,["longitude"]);return i!=null&&h(t,["longitude"],i),t}function lR(n){const t={},e=c(n,["latLng"]);e!=null&&h(t,["latLng"],rR(e));const i=c(n,["languageCode"]);return i!=null&&h(t,["languageCode"],i),t}function aR(n){const t={},e=c(n,["functionCallingConfig"]);e!=null&&h(t,["functionCallingConfig"],oR(e));const i=c(n,["retrievalConfig"]);return i!=null&&h(t,["retrievalConfig"],lR(i)),t}function uR(n){const t={},e=c(n,["voiceName"]);return e!=null&&h(t,["voiceName"],e),t}function cR(n){const t={},e=c(n,["prebuiltVoiceConfig"]);return e!=null&&h(t,["prebuiltVoiceConfig"],uR(e)),t}function hR(n){const t={},e=c(n,["voiceConfig"]);if(e!=null&&h(t,["voiceConfig"],cR(e)),c(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=c(n,["languageCode"]);return i!=null&&h(t,["languageCode"],i),t}function fR(n){const t={},e=c(n,["includeThoughts"]);e!=null&&h(t,["includeThoughts"],e);const i=c(n,["thinkingBudget"]);return i!=null&&h(t,["thinkingBudget"],i),t}function dR(n,t,e){const i={},o=c(t,["systemInstruction"]);e!==void 0&&o!=null&&h(e,["systemInstruction"],ao(Se(o)));const l=c(t,["temperature"]);l!=null&&h(i,["temperature"],l);const u=c(t,["topP"]);u!=null&&h(i,["topP"],u);const d=c(t,["topK"]);d!=null&&h(i,["topK"],d);const p=c(t,["candidateCount"]);p!=null&&h(i,["candidateCount"],p);const m=c(t,["maxOutputTokens"]);m!=null&&h(i,["maxOutputTokens"],m);const g=c(t,["stopSequences"]);g!=null&&h(i,["stopSequences"],g);const _=c(t,["responseLogprobs"]);_!=null&&h(i,["responseLogprobs"],_);const S=c(t,["logprobs"]);S!=null&&h(i,["logprobs"],S);const b=c(t,["presencePenalty"]);b!=null&&h(i,["presencePenalty"],b);const w=c(t,["frequencyPenalty"]);w!=null&&h(i,["frequencyPenalty"],w);const E=c(t,["seed"]);E!=null&&h(i,["seed"],E);const M=c(t,["responseMimeType"]);M!=null&&h(i,["responseMimeType"],M);const D=c(t,["responseSchema"]);D!=null&&h(i,["responseSchema"],JA(xf(D)));const U=c(t,["responseJsonSchema"]);U!=null&&h(i,["responseJsonSchema"],U);const k=c(t,["routingConfig"]);k!=null&&h(i,["routingConfig"],k);const V=c(t,["modelSelectionConfig"]);V!=null&&h(i,["modelConfig"],KA(V));const q=c(t,["safetySettings"]);if(e!==void 0&&q!=null){let at=q;Array.isArray(at)&&(at=at.map(B=>YA(B))),h(e,["safetySettings"],at)}const J=c(t,["tools"]);if(e!==void 0&&J!=null){let at=ro(J);Array.isArray(at)&&(at=at.map(B=>k_(oo(B)))),h(e,["tools"],at)}const W=c(t,["toolConfig"]);e!==void 0&&W!=null&&h(e,["toolConfig"],aR(W));const rt=c(t,["labels"]);e!==void 0&&rt!=null&&h(e,["labels"],rt);const j=c(t,["cachedContent"]);e!==void 0&&j!=null&&h(e,["cachedContent"],Vn(n,j));const Q=c(t,["responseModalities"]);Q!=null&&h(i,["responseModalities"],Q);const K=c(t,["mediaResolution"]);K!=null&&h(i,["mediaResolution"],K);const st=c(t,["speechConfig"]);st!=null&&h(i,["speechConfig"],hR(Ef(st)));const lt=c(t,["audioTimestamp"]);lt!=null&&h(i,["audioTimestamp"],lt);const dt=c(t,["thinkingConfig"]);return dt!=null&&h(i,["thinkingConfig"],fR(dt)),i}function cy(n,t){const e={},i=c(t,["model"]);i!=null&&h(e,["_url","model"],Nt(n,i));const o=c(t,["contents"]);if(o!=null){let u=Qe(o);Array.isArray(u)&&(u=u.map(d=>ao(d))),h(e,["contents"],u)}const l=c(t,["config"]);return l!=null&&h(e,["generationConfig"],dR(n,l,e)),e}function pR(n,t){const e={},i=c(n,["taskType"]);t!==void 0&&i!=null&&h(t,["instances[]","task_type"],i);const o=c(n,["title"]);t!==void 0&&o!=null&&h(t,["instances[]","title"],o);const l=c(n,["outputDimensionality"]);t!==void 0&&l!=null&&h(t,["parameters","outputDimensionality"],l);const u=c(n,["mimeType"]);t!==void 0&&u!=null&&h(t,["instances[]","mimeType"],u);const d=c(n,["autoTruncate"]);return t!==void 0&&d!=null&&h(t,["parameters","autoTruncate"],d),e}function mR(n,t){const e={},i=c(t,["model"]);i!=null&&h(e,["_url","model"],Nt(n,i));const o=c(t,["contents"]);o!=null&&h(e,["instances[]","content"],f_(n,o));const l=c(t,["config"]);return l!=null&&h(e,["config"],pR(l,e)),e}function gR(n,t){const e={},i=c(n,["outputGcsUri"]);t!==void 0&&i!=null&&h(t,["parameters","storageUri"],i);const o=c(n,["negativePrompt"]);t!==void 0&&o!=null&&h(t,["parameters","negativePrompt"],o);const l=c(n,["numberOfImages"]);t!==void 0&&l!=null&&h(t,["parameters","sampleCount"],l);const u=c(n,["aspectRatio"]);t!==void 0&&u!=null&&h(t,["parameters","aspectRatio"],u);const d=c(n,["guidanceScale"]);t!==void 0&&d!=null&&h(t,["parameters","guidanceScale"],d);const p=c(n,["seed"]);t!==void 0&&p!=null&&h(t,["parameters","seed"],p);const m=c(n,["safetyFilterLevel"]);t!==void 0&&m!=null&&h(t,["parameters","safetySetting"],m);const g=c(n,["personGeneration"]);t!==void 0&&g!=null&&h(t,["parameters","personGeneration"],g);const _=c(n,["includeSafetyAttributes"]);t!==void 0&&_!=null&&h(t,["parameters","includeSafetyAttributes"],_);const S=c(n,["includeRaiReason"]);t!==void 0&&S!=null&&h(t,["parameters","includeRaiReason"],S);const b=c(n,["language"]);t!==void 0&&b!=null&&h(t,["parameters","language"],b);const w=c(n,["outputMimeType"]);t!==void 0&&w!=null&&h(t,["parameters","outputOptions","mimeType"],w);const E=c(n,["outputCompressionQuality"]);t!==void 0&&E!=null&&h(t,["parameters","outputOptions","compressionQuality"],E);const M=c(n,["addWatermark"]);t!==void 0&&M!=null&&h(t,["parameters","addWatermark"],M);const D=c(n,["imageSize"]);t!==void 0&&D!=null&&h(t,["parameters","sampleImageSize"],D);const U=c(n,["enhancePrompt"]);return t!==void 0&&U!=null&&h(t,["parameters","enhancePrompt"],U),e}function vR(n,t){const e={},i=c(t,["model"]);i!=null&&h(e,["_url","model"],Nt(n,i));const o=c(t,["prompt"]);o!=null&&h(e,["instances[0]","prompt"],o);const l=c(t,["config"]);return l!=null&&h(e,["config"],gR(l,e)),e}function uo(n){const t={},e=c(n,["gcsUri"]);e!=null&&h(t,["gcsUri"],e);const i=c(n,["imageBytes"]);i!=null&&h(t,["bytesBase64Encoded"],Yi(i));const o=c(n,["mimeType"]);return o!=null&&h(t,["mimeType"],o),t}function yR(n){const t={},e=c(n,["maskMode"]);e!=null&&h(t,["maskMode"],e);const i=c(n,["segmentationClasses"]);i!=null&&h(t,["maskClasses"],i);const o=c(n,["maskDilation"]);return o!=null&&h(t,["dilation"],o),t}function _R(n){const t={},e=c(n,["controlType"]);e!=null&&h(t,["controlType"],e);const i=c(n,["enableControlImageComputation"]);return i!=null&&h(t,["computeControl"],i),t}function SR(n){const t={},e=c(n,["styleDescription"]);return e!=null&&h(t,["styleDescription"],e),t}function bR(n){const t={},e=c(n,["subjectType"]);e!=null&&h(t,["subjectType"],e);const i=c(n,["subjectDescription"]);return i!=null&&h(t,["subjectDescription"],i),t}function TR(n){const t={},e=c(n,["referenceImage"]);e!=null&&h(t,["referenceImage"],uo(e));const i=c(n,["referenceId"]);i!=null&&h(t,["referenceId"],i);const o=c(n,["referenceType"]);o!=null&&h(t,["referenceType"],o);const l=c(n,["maskImageConfig"]);l!=null&&h(t,["maskImageConfig"],yR(l));const u=c(n,["controlImageConfig"]);u!=null&&h(t,["controlImageConfig"],_R(u));const d=c(n,["styleImageConfig"]);d!=null&&h(t,["styleImageConfig"],SR(d));const p=c(n,["subjectImageConfig"]);return p!=null&&h(t,["subjectImageConfig"],bR(p)),t}function wR(n,t){const e={},i=c(n,["outputGcsUri"]);t!==void 0&&i!=null&&h(t,["parameters","storageUri"],i);const o=c(n,["negativePrompt"]);t!==void 0&&o!=null&&h(t,["parameters","negativePrompt"],o);const l=c(n,["numberOfImages"]);t!==void 0&&l!=null&&h(t,["parameters","sampleCount"],l);const u=c(n,["aspectRatio"]);t!==void 0&&u!=null&&h(t,["parameters","aspectRatio"],u);const d=c(n,["guidanceScale"]);t!==void 0&&d!=null&&h(t,["parameters","guidanceScale"],d);const p=c(n,["seed"]);t!==void 0&&p!=null&&h(t,["parameters","seed"],p);const m=c(n,["safetyFilterLevel"]);t!==void 0&&m!=null&&h(t,["parameters","safetySetting"],m);const g=c(n,["personGeneration"]);t!==void 0&&g!=null&&h(t,["parameters","personGeneration"],g);const _=c(n,["includeSafetyAttributes"]);t!==void 0&&_!=null&&h(t,["parameters","includeSafetyAttributes"],_);const S=c(n,["includeRaiReason"]);t!==void 0&&S!=null&&h(t,["parameters","includeRaiReason"],S);const b=c(n,["language"]);t!==void 0&&b!=null&&h(t,["parameters","language"],b);const w=c(n,["outputMimeType"]);t!==void 0&&w!=null&&h(t,["parameters","outputOptions","mimeType"],w);const E=c(n,["outputCompressionQuality"]);t!==void 0&&E!=null&&h(t,["parameters","outputOptions","compressionQuality"],E);const M=c(n,["addWatermark"]);t!==void 0&&M!=null&&h(t,["parameters","addWatermark"],M);const D=c(n,["editMode"]);t!==void 0&&D!=null&&h(t,["parameters","editMode"],D);const U=c(n,["baseSteps"]);return t!==void 0&&U!=null&&h(t,["parameters","editConfig","baseSteps"],U),e}function CR(n,t){const e={},i=c(t,["model"]);i!=null&&h(e,["_url","model"],Nt(n,i));const o=c(t,["prompt"]);o!=null&&h(e,["instances[0]","prompt"],o);const l=c(t,["referenceImages"]);if(l!=null){let d=l;Array.isArray(d)&&(d=d.map(p=>TR(p))),h(e,["instances[0]","referenceImages"],d)}const u=c(t,["config"]);return u!=null&&h(e,["config"],wR(u,e)),e}function xR(n,t){const e={},i=c(n,["includeRaiReason"]);t!==void 0&&i!=null&&h(t,["parameters","includeRaiReason"],i);const o=c(n,["outputMimeType"]);t!==void 0&&o!=null&&h(t,["parameters","outputOptions","mimeType"],o);const l=c(n,["outputCompressionQuality"]);t!==void 0&&l!=null&&h(t,["parameters","outputOptions","compressionQuality"],l);const u=c(n,["enhanceInputImage"]);t!==void 0&&u!=null&&h(t,["parameters","upscaleConfig","enhanceInputImage"],u);const d=c(n,["imagePreservationFactor"]);t!==void 0&&d!=null&&h(t,["parameters","upscaleConfig","imagePreservationFactor"],d);const p=c(n,["numberOfImages"]);t!==void 0&&p!=null&&h(t,["parameters","sampleCount"],p);const m=c(n,["mode"]);return t!==void 0&&m!=null&&h(t,["parameters","mode"],m),e}function ER(n,t){const e={},i=c(t,["model"]);i!=null&&h(e,["_url","model"],Nt(n,i));const o=c(t,["image"]);o!=null&&h(e,["instances[0]","image"],uo(o));const l=c(t,["upscaleFactor"]);l!=null&&h(e,["parameters","upscaleConfig","upscaleFactor"],l);const u=c(t,["config"]);return u!=null&&h(e,["config"],xR(u,e)),e}function MR(n){const t={},e=c(n,["productImage"]);return e!=null&&h(t,["image"],uo(e)),t}function AR(n,t){const e={},i=c(n,["prompt"]);t!==void 0&&i!=null&&h(t,["instances[0]","prompt"],i);const o=c(n,["personImage"]);t!==void 0&&o!=null&&h(t,["instances[0]","personImage","image"],uo(o));const l=c(n,["productImages"]);if(t!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>MR(d))),h(t,["instances[0]","productImages"],u)}return e}function RR(n,t){const e={},i=c(n,["numberOfImages"]);t!==void 0&&i!=null&&h(t,["parameters","sampleCount"],i);const o=c(n,["baseSteps"]);t!==void 0&&o!=null&&h(t,["parameters","editConfig","baseSteps"],o);const l=c(n,["outputGcsUri"]);t!==void 0&&l!=null&&h(t,["parameters","storageUri"],l);const u=c(n,["seed"]);t!==void 0&&u!=null&&h(t,["parameters","seed"],u);const d=c(n,["safetyFilterLevel"]);t!==void 0&&d!=null&&h(t,["parameters","safetySetting"],d);const p=c(n,["personGeneration"]);t!==void 0&&p!=null&&h(t,["parameters","personGeneration"],p);const m=c(n,["outputMimeType"]);t!==void 0&&m!=null&&h(t,["parameters","outputOptions","mimeType"],m);const g=c(n,["outputCompressionQuality"]);t!==void 0&&g!=null&&h(t,["parameters","outputOptions","compressionQuality"],g);const _=c(n,["enhancePrompt"]);return t!==void 0&&_!=null&&h(t,["parameters","enhancePrompt"],_),e}function kR(n,t){const e={},i=c(t,["model"]);i!=null&&h(e,["_url","model"],Nt(n,i));const o=c(t,["source"]);o!=null&&h(e,["config"],AR(o,e));const l=c(t,["config"]);return l!=null&&h(e,["config"],RR(l,e)),e}function NR(n,t){const e={},i=c(t,["model"]);i!=null&&h(e,["_url","name"],Nt(n,i));const o=c(t,["config"]);return o!=null&&h(e,["config"],o),e}function DR(n,t,e){const i={},o=c(t,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const l=c(t,["pageToken"]);e!==void 0&&l!=null&&h(e,["_query","pageToken"],l);const u=c(t,["filter"]);e!==void 0&&u!=null&&h(e,["_query","filter"],u);const d=c(t,["queryBase"]);return e!==void 0&&d!=null&&h(e,["_url","models_url"],m_(n,d)),i}function IR(n,t){const e={},i=c(t,["config"]);return i!=null&&h(e,["config"],DR(n,i,e)),e}function LR(n,t){const e={},i=c(n,["displayName"]);t!==void 0&&i!=null&&h(t,["displayName"],i);const o=c(n,["description"]);t!==void 0&&o!=null&&h(t,["description"],o);const l=c(n,["defaultCheckpointId"]);return t!==void 0&&l!=null&&h(t,["defaultCheckpointId"],l),e}function UR(n,t){const e={},i=c(t,["model"]);i!=null&&h(e,["_url","model"],Nt(n,i));const o=c(t,["config"]);return o!=null&&h(e,["config"],LR(o,e)),e}function PR(n,t){const e={},i=c(t,["model"]);i!=null&&h(e,["_url","name"],Nt(n,i));const o=c(t,["config"]);return o!=null&&h(e,["config"],o),e}function zR(n,t){const e={},i=c(n,["systemInstruction"]);t!==void 0&&i!=null&&h(t,["systemInstruction"],ao(Se(i)));const o=c(n,["tools"]);if(t!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>k_(d))),h(t,["tools"],u)}const l=c(n,["generationConfig"]);return t!==void 0&&l!=null&&h(t,["generationConfig"],l),e}function VR(n,t){const e={},i=c(t,["model"]);i!=null&&h(e,["_url","model"],Nt(n,i));const o=c(t,["contents"]);if(o!=null){let u=Qe(o);Array.isArray(u)&&(u=u.map(d=>ao(d))),h(e,["contents"],u)}const l=c(t,["config"]);return l!=null&&h(e,["config"],zR(l,e)),e}function BR(n,t){const e={},i=c(t,["model"]);i!=null&&h(e,["_url","model"],Nt(n,i));const o=c(t,["contents"]);if(o!=null){let u=Qe(o);Array.isArray(u)&&(u=u.map(d=>ao(d))),h(e,["contents"],u)}const l=c(t,["config"]);return l!=null&&h(e,["config"],l),e}function OR(n){const t={},e=c(n,["uri"]);e!=null&&h(t,["gcsUri"],e);const i=c(n,["videoBytes"]);i!=null&&h(t,["bytesBase64Encoded"],Yi(i));const o=c(n,["mimeType"]);return o!=null&&h(t,["mimeType"],o),t}function qR(n,t){const e={},i=c(n,["numberOfVideos"]);t!==void 0&&i!=null&&h(t,["parameters","sampleCount"],i);const o=c(n,["outputGcsUri"]);t!==void 0&&o!=null&&h(t,["parameters","storageUri"],o);const l=c(n,["fps"]);t!==void 0&&l!=null&&h(t,["parameters","fps"],l);const u=c(n,["durationSeconds"]);t!==void 0&&u!=null&&h(t,["parameters","durationSeconds"],u);const d=c(n,["seed"]);t!==void 0&&d!=null&&h(t,["parameters","seed"],d);const p=c(n,["aspectRatio"]);t!==void 0&&p!=null&&h(t,["parameters","aspectRatio"],p);const m=c(n,["resolution"]);t!==void 0&&m!=null&&h(t,["parameters","resolution"],m);const g=c(n,["personGeneration"]);t!==void 0&&g!=null&&h(t,["parameters","personGeneration"],g);const _=c(n,["pubsubTopic"]);t!==void 0&&_!=null&&h(t,["parameters","pubsubTopic"],_);const S=c(n,["negativePrompt"]);t!==void 0&&S!=null&&h(t,["parameters","negativePrompt"],S);const b=c(n,["enhancePrompt"]);t!==void 0&&b!=null&&h(t,["parameters","enhancePrompt"],b);const w=c(n,["generateAudio"]);t!==void 0&&w!=null&&h(t,["parameters","generateAudio"],w);const E=c(n,["lastFrame"]);t!==void 0&&E!=null&&h(t,["instances[0]","lastFrame"],uo(E));const M=c(n,["compressionQuality"]);return t!==void 0&&M!=null&&h(t,["parameters","compressionQuality"],M),e}function $R(n,t){const e={},i=c(t,["model"]);i!=null&&h(e,["_url","model"],Nt(n,i));const o=c(t,["prompt"]);o!=null&&h(e,["instances[0]","prompt"],o);const l=c(t,["image"]);l!=null&&h(e,["instances[0]","image"],uo(l));const u=c(t,["video"]);u!=null&&h(e,["instances[0]","video"],OR(u));const d=c(t,["config"]);return d!=null&&h(e,["config"],qR(d,e)),e}function HR(n){const t={},e=c(n,["fps"]);e!=null&&h(t,["fps"],e);const i=c(n,["endOffset"]);i!=null&&h(t,["endOffset"],i);const o=c(n,["startOffset"]);return o!=null&&h(t,["startOffset"],o),t}function GR(n){const t={},e=c(n,["data"]);e!=null&&h(t,["data"],e);const i=c(n,["mimeType"]);return i!=null&&h(t,["mimeType"],i),t}function FR(n){const t={},e=c(n,["fileUri"]);e!=null&&h(t,["fileUri"],e);const i=c(n,["mimeType"]);return i!=null&&h(t,["mimeType"],i),t}function JR(n){const t={},e=c(n,["videoMetadata"]);e!=null&&h(t,["videoMetadata"],HR(e));const i=c(n,["thought"]);i!=null&&h(t,["thought"],i);const o=c(n,["inlineData"]);o!=null&&h(t,["inlineData"],GR(o));const l=c(n,["fileData"]);l!=null&&h(t,["fileData"],FR(l));const u=c(n,["thoughtSignature"]);u!=null&&h(t,["thoughtSignature"],u);const d=c(n,["codeExecutionResult"]);d!=null&&h(t,["codeExecutionResult"],d);const p=c(n,["executableCode"]);p!=null&&h(t,["executableCode"],p);const m=c(n,["functionCall"]);m!=null&&h(t,["functionCall"],m);const g=c(n,["functionResponse"]);g!=null&&h(t,["functionResponse"],g);const _=c(n,["text"]);return _!=null&&h(t,["text"],_),t}function KR(n){const t={},e=c(n,["parts"]);if(e!=null){let o=e;Array.isArray(o)&&(o=o.map(l=>JR(l))),h(t,["parts"],o)}const i=c(n,["role"]);return i!=null&&h(t,["role"],i),t}function YR(n){const t={},e=c(n,["citationSources"]);return e!=null&&h(t,["citations"],e),t}function WR(n){const t={},e=c(n,["retrievedUrl"]);e!=null&&h(t,["retrievedUrl"],e);const i=c(n,["urlRetrievalStatus"]);return i!=null&&h(t,["urlRetrievalStatus"],i),t}function XR(n){const t={},e=c(n,["urlMetadata"]);if(e!=null){let i=e;Array.isArray(i)&&(i=i.map(o=>WR(o))),h(t,["urlMetadata"],i)}return t}function QR(n){const t={},e=c(n,["content"]);e!=null&&h(t,["content"],KR(e));const i=c(n,["citationMetadata"]);i!=null&&h(t,["citationMetadata"],YR(i));const o=c(n,["tokenCount"]);o!=null&&h(t,["tokenCount"],o);const l=c(n,["finishReason"]);l!=null&&h(t,["finishReason"],l);const u=c(n,["urlContextMetadata"]);u!=null&&h(t,["urlContextMetadata"],XR(u));const d=c(n,["avgLogprobs"]);d!=null&&h(t,["avgLogprobs"],d);const p=c(n,["groundingMetadata"]);p!=null&&h(t,["groundingMetadata"],p);const m=c(n,["index"]);m!=null&&h(t,["index"],m);const g=c(n,["logprobsResult"]);g!=null&&h(t,["logprobsResult"],g);const _=c(n,["safetyRatings"]);return _!=null&&h(t,["safetyRatings"],_),t}function hy(n){const t={},e=c(n,["sdkHttpResponse"]);e!=null&&h(t,["sdkHttpResponse"],e);const i=c(n,["candidates"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(m=>QR(m))),h(t,["candidates"],p)}const o=c(n,["modelVersion"]);o!=null&&h(t,["modelVersion"],o);const l=c(n,["promptFeedback"]);l!=null&&h(t,["promptFeedback"],l);const u=c(n,["responseId"]);u!=null&&h(t,["responseId"],u);const d=c(n,["usageMetadata"]);return d!=null&&h(t,["usageMetadata"],d),t}function ZR(n){const t={},e=c(n,["values"]);return e!=null&&h(t,["values"],e),t}function jR(){return{}}function tk(n){const t={},e=c(n,["sdkHttpResponse"]);e!=null&&h(t,["sdkHttpResponse"],e);const i=c(n,["embeddings"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>ZR(u))),h(t,["embeddings"],l)}return c(n,["metadata"])!=null&&h(t,["metadata"],jR()),t}function ek(n){const t={},e=c(n,["bytesBase64Encoded"]);e!=null&&h(t,["imageBytes"],Yi(e));const i=c(n,["mimeType"]);return i!=null&&h(t,["mimeType"],i),t}function N_(n){const t={},e=c(n,["safetyAttributes","categories"]);e!=null&&h(t,["categories"],e);const i=c(n,["safetyAttributes","scores"]);i!=null&&h(t,["scores"],i);const o=c(n,["contentType"]);return o!=null&&h(t,["contentType"],o),t}function nk(n){const t={},e=c(n,["_self"]);e!=null&&h(t,["image"],ek(e));const i=c(n,["raiFilteredReason"]);i!=null&&h(t,["raiFilteredReason"],i);const o=c(n,["_self"]);return o!=null&&h(t,["safetyAttributes"],N_(o)),t}function ik(n){const t={},e=c(n,["sdkHttpResponse"]);e!=null&&h(t,["sdkHttpResponse"],e);const i=c(n,["predictions"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>nk(u))),h(t,["generatedImages"],l)}const o=c(n,["positivePromptSafetyAttributes"]);return o!=null&&h(t,["positivePromptSafetyAttributes"],N_(o)),t}function sk(n){const t={},e=c(n,["baseModel"]);e!=null&&h(t,["baseModel"],e);const i=c(n,["createTime"]);i!=null&&h(t,["createTime"],i);const o=c(n,["updateTime"]);return o!=null&&h(t,["updateTime"],o),t}function Yh(n){const t={},e=c(n,["name"]);e!=null&&h(t,["name"],e);const i=c(n,["displayName"]);i!=null&&h(t,["displayName"],i);const o=c(n,["description"]);o!=null&&h(t,["description"],o);const l=c(n,["version"]);l!=null&&h(t,["version"],l);const u=c(n,["_self"]);u!=null&&h(t,["tunedModelInfo"],sk(u));const d=c(n,["inputTokenLimit"]);d!=null&&h(t,["inputTokenLimit"],d);const p=c(n,["outputTokenLimit"]);p!=null&&h(t,["outputTokenLimit"],p);const m=c(n,["supportedGenerationMethods"]);return m!=null&&h(t,["supportedActions"],m),t}function ok(n){const t={},e=c(n,["sdkHttpResponse"]);e!=null&&h(t,["sdkHttpResponse"],e);const i=c(n,["nextPageToken"]);i!=null&&h(t,["nextPageToken"],i);const o=c(n,["_self"]);if(o!=null){let l=g_(o);Array.isArray(l)&&(l=l.map(u=>Yh(u))),h(t,["models"],l)}return t}function rk(){return{}}function lk(n){const t={},e=c(n,["sdkHttpResponse"]);e!=null&&h(t,["sdkHttpResponse"],e);const i=c(n,["totalTokens"]);i!=null&&h(t,["totalTokens"],i);const o=c(n,["cachedContentTokenCount"]);return o!=null&&h(t,["cachedContentTokenCount"],o),t}function ak(n){const t={},e=c(n,["video","uri"]);e!=null&&h(t,["uri"],e);const i=c(n,["video","encodedVideo"]);i!=null&&h(t,["videoBytes"],Yi(i));const o=c(n,["encoding"]);return o!=null&&h(t,["mimeType"],o),t}function uk(n){const t={},e=c(n,["_self"]);return e!=null&&h(t,["video"],ak(e)),t}function ck(n){const t={},e=c(n,["generatedSamples"]);if(e!=null){let l=e;Array.isArray(l)&&(l=l.map(u=>uk(u))),h(t,["generatedVideos"],l)}const i=c(n,["raiMediaFilteredCount"]);i!=null&&h(t,["raiMediaFilteredCount"],i);const o=c(n,["raiMediaFilteredReasons"]);return o!=null&&h(t,["raiMediaFilteredReasons"],o),t}function hk(n){const t={},e=c(n,["name"]);e!=null&&h(t,["name"],e);const i=c(n,["metadata"]);i!=null&&h(t,["metadata"],i);const o=c(n,["done"]);o!=null&&h(t,["done"],o);const l=c(n,["error"]);l!=null&&h(t,["error"],l);const u=c(n,["response","generateVideoResponse"]);return u!=null&&h(t,["response"],ck(u)),t}function fk(n){const t={},e=c(n,["fps"]);e!=null&&h(t,["fps"],e);const i=c(n,["endOffset"]);i!=null&&h(t,["endOffset"],i);const o=c(n,["startOffset"]);return o!=null&&h(t,["startOffset"],o),t}function dk(n){const t={},e=c(n,["displayName"]);e!=null&&h(t,["displayName"],e);const i=c(n,["data"]);i!=null&&h(t,["data"],i);const o=c(n,["mimeType"]);return o!=null&&h(t,["mimeType"],o),t}function pk(n){const t={},e=c(n,["displayName"]);e!=null&&h(t,["displayName"],e);const i=c(n,["fileUri"]);i!=null&&h(t,["fileUri"],i);const o=c(n,["mimeType"]);return o!=null&&h(t,["mimeType"],o),t}function mk(n){const t={},e=c(n,["videoMetadata"]);e!=null&&h(t,["videoMetadata"],fk(e));const i=c(n,["thought"]);i!=null&&h(t,["thought"],i);const o=c(n,["inlineData"]);o!=null&&h(t,["inlineData"],dk(o));const l=c(n,["fileData"]);l!=null&&h(t,["fileData"],pk(l));const u=c(n,["thoughtSignature"]);u!=null&&h(t,["thoughtSignature"],u);const d=c(n,["codeExecutionResult"]);d!=null&&h(t,["codeExecutionResult"],d);const p=c(n,["executableCode"]);p!=null&&h(t,["executableCode"],p);const m=c(n,["functionCall"]);m!=null&&h(t,["functionCall"],m);const g=c(n,["functionResponse"]);g!=null&&h(t,["functionResponse"],g);const _=c(n,["text"]);return _!=null&&h(t,["text"],_),t}function gk(n){const t={},e=c(n,["parts"]);if(e!=null){let o=e;Array.isArray(o)&&(o=o.map(l=>mk(l))),h(t,["parts"],o)}const i=c(n,["role"]);return i!=null&&h(t,["role"],i),t}function vk(n){const t={},e=c(n,["citations"]);return e!=null&&h(t,["citations"],e),t}function yk(n){const t={},e=c(n,["retrievedUrl"]);e!=null&&h(t,["retrievedUrl"],e);const i=c(n,["urlRetrievalStatus"]);return i!=null&&h(t,["urlRetrievalStatus"],i),t}function _k(n){const t={},e=c(n,["urlMetadata"]);if(e!=null){let i=e;Array.isArray(i)&&(i=i.map(o=>yk(o))),h(t,["urlMetadata"],i)}return t}function Sk(n){const t={},e=c(n,["content"]);e!=null&&h(t,["content"],gk(e));const i=c(n,["citationMetadata"]);i!=null&&h(t,["citationMetadata"],vk(i));const o=c(n,["finishMessage"]);o!=null&&h(t,["finishMessage"],o);const l=c(n,["finishReason"]);l!=null&&h(t,["finishReason"],l);const u=c(n,["urlContextMetadata"]);u!=null&&h(t,["urlContextMetadata"],_k(u));const d=c(n,["avgLogprobs"]);d!=null&&h(t,["avgLogprobs"],d);const p=c(n,["groundingMetadata"]);p!=null&&h(t,["groundingMetadata"],p);const m=c(n,["index"]);m!=null&&h(t,["index"],m);const g=c(n,["logprobsResult"]);g!=null&&h(t,["logprobsResult"],g);const _=c(n,["safetyRatings"]);return _!=null&&h(t,["safetyRatings"],_),t}function fy(n){const t={},e=c(n,["sdkHttpResponse"]);e!=null&&h(t,["sdkHttpResponse"],e);const i=c(n,["candidates"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(g=>Sk(g))),h(t,["candidates"],m)}const o=c(n,["createTime"]);o!=null&&h(t,["createTime"],o);const l=c(n,["modelVersion"]);l!=null&&h(t,["modelVersion"],l);const u=c(n,["promptFeedback"]);u!=null&&h(t,["promptFeedback"],u);const d=c(n,["responseId"]);d!=null&&h(t,["responseId"],d);const p=c(n,["usageMetadata"]);return p!=null&&h(t,["usageMetadata"],p),t}function bk(n){const t={},e=c(n,["truncated"]);e!=null&&h(t,["truncated"],e);const i=c(n,["token_count"]);return i!=null&&h(t,["tokenCount"],i),t}function Tk(n){const t={},e=c(n,["values"]);e!=null&&h(t,["values"],e);const i=c(n,["statistics"]);return i!=null&&h(t,["statistics"],bk(i)),t}function wk(n){const t={},e=c(n,["billableCharacterCount"]);return e!=null&&h(t,["billableCharacterCount"],e),t}function Ck(n){const t={},e=c(n,["sdkHttpResponse"]);e!=null&&h(t,["sdkHttpResponse"],e);const i=c(n,["predictions[]","embeddings"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>Tk(u))),h(t,["embeddings"],l)}const o=c(n,["metadata"]);return o!=null&&h(t,["metadata"],wk(o)),t}function xk(n){const t={},e=c(n,["gcsUri"]);e!=null&&h(t,["gcsUri"],e);const i=c(n,["bytesBase64Encoded"]);i!=null&&h(t,["imageBytes"],Yi(i));const o=c(n,["mimeType"]);return o!=null&&h(t,["mimeType"],o),t}function D_(n){const t={},e=c(n,["safetyAttributes","categories"]);e!=null&&h(t,["categories"],e);const i=c(n,["safetyAttributes","scores"]);i!=null&&h(t,["scores"],i);const o=c(n,["contentType"]);return o!=null&&h(t,["contentType"],o),t}function za(n){const t={},e=c(n,["_self"]);e!=null&&h(t,["image"],xk(e));const i=c(n,["raiFilteredReason"]);i!=null&&h(t,["raiFilteredReason"],i);const o=c(n,["_self"]);o!=null&&h(t,["safetyAttributes"],D_(o));const l=c(n,["prompt"]);return l!=null&&h(t,["enhancedPrompt"],l),t}function Ek(n){const t={},e=c(n,["sdkHttpResponse"]);e!=null&&h(t,["sdkHttpResponse"],e);const i=c(n,["predictions"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>za(u))),h(t,["generatedImages"],l)}const o=c(n,["positivePromptSafetyAttributes"]);return o!=null&&h(t,["positivePromptSafetyAttributes"],D_(o)),t}function Mk(n){const t={},e=c(n,["sdkHttpResponse"]);e!=null&&h(t,["sdkHttpResponse"],e);const i=c(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>za(l))),h(t,["generatedImages"],o)}return t}function Ak(n){const t={},e=c(n,["sdkHttpResponse"]);e!=null&&h(t,["sdkHttpResponse"],e);const i=c(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>za(l))),h(t,["generatedImages"],o)}return t}function Rk(n){const t={},e=c(n,["predictions"]);if(e!=null){let i=e;Array.isArray(i)&&(i=i.map(o=>za(o))),h(t,["generatedImages"],i)}return t}function kk(n){const t={},e=c(n,["endpoint"]);e!=null&&h(t,["name"],e);const i=c(n,["deployedModelId"]);return i!=null&&h(t,["deployedModelId"],i),t}function Nk(n){const t={},e=c(n,["labels","google-vertex-llm-tuning-base-model-id"]);e!=null&&h(t,["baseModel"],e);const i=c(n,["createTime"]);i!=null&&h(t,["createTime"],i);const o=c(n,["updateTime"]);return o!=null&&h(t,["updateTime"],o),t}function Dk(n){const t={},e=c(n,["checkpointId"]);e!=null&&h(t,["checkpointId"],e);const i=c(n,["epoch"]);i!=null&&h(t,["epoch"],i);const o=c(n,["step"]);return o!=null&&h(t,["step"],o),t}function Wh(n){const t={},e=c(n,["name"]);e!=null&&h(t,["name"],e);const i=c(n,["displayName"]);i!=null&&h(t,["displayName"],i);const o=c(n,["description"]);o!=null&&h(t,["description"],o);const l=c(n,["versionId"]);l!=null&&h(t,["version"],l);const u=c(n,["deployedModels"]);if(u!=null){let _=u;Array.isArray(_)&&(_=_.map(S=>kk(S))),h(t,["endpoints"],_)}const d=c(n,["labels"]);d!=null&&h(t,["labels"],d);const p=c(n,["_self"]);p!=null&&h(t,["tunedModelInfo"],Nk(p));const m=c(n,["defaultCheckpointId"]);m!=null&&h(t,["defaultCheckpointId"],m);const g=c(n,["checkpoints"]);if(g!=null){let _=g;Array.isArray(_)&&(_=_.map(S=>Dk(S))),h(t,["checkpoints"],_)}return t}function Ik(n){const t={},e=c(n,["sdkHttpResponse"]);e!=null&&h(t,["sdkHttpResponse"],e);const i=c(n,["nextPageToken"]);i!=null&&h(t,["nextPageToken"],i);const o=c(n,["_self"]);if(o!=null){let l=g_(o);Array.isArray(l)&&(l=l.map(u=>Wh(u))),h(t,["models"],l)}return t}function Lk(){return{}}function Uk(n){const t={},e=c(n,["sdkHttpResponse"]);e!=null&&h(t,["sdkHttpResponse"],e);const i=c(n,["totalTokens"]);return i!=null&&h(t,["totalTokens"],i),t}function Pk(n){const t={},e=c(n,["sdkHttpResponse"]);e!=null&&h(t,["sdkHttpResponse"],e);const i=c(n,["tokensInfo"]);return i!=null&&h(t,["tokensInfo"],i),t}function zk(n){const t={},e=c(n,["gcsUri"]);e!=null&&h(t,["uri"],e);const i=c(n,["bytesBase64Encoded"]);i!=null&&h(t,["videoBytes"],Yi(i));const o=c(n,["mimeType"]);return o!=null&&h(t,["mimeType"],o),t}function Vk(n){const t={},e=c(n,["_self"]);return e!=null&&h(t,["video"],zk(e)),t}function Bk(n){const t={},e=c(n,["videos"]);if(e!=null){let l=e;Array.isArray(l)&&(l=l.map(u=>Vk(u))),h(t,["generatedVideos"],l)}const i=c(n,["raiMediaFilteredCount"]);i!=null&&h(t,["raiMediaFilteredCount"],i);const o=c(n,["raiMediaFilteredReasons"]);return o!=null&&h(t,["raiMediaFilteredReasons"],o),t}function Ok(n){const t={},e=c(n,["name"]);e!=null&&h(t,["name"],e);const i=c(n,["metadata"]);i!=null&&h(t,["metadata"],i);const o=c(n,["done"]);o!=null&&h(t,["done"],o);const l=c(n,["error"]);l!=null&&h(t,["error"],l);const u=c(n,["response"]);return u!=null&&h(t,["response"],Bk(u)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qk="Content-Type",$k="X-Server-Timeout",Hk="User-Agent",Xh="x-goog-api-client",Gk="1.13.0",Fk=`google-genai-sdk/${Gk}`,Jk="v1beta1",Kk="v1beta",dy=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class Yk{constructor(t){var e,i;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(e=this.clientOptions.apiVersion)!==null&&e!==void 0?e:Jk,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:Kk,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&i.push(t.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),e=new URL(t);return e.protocol=e.protocol=="http:"?"ws":"wss",e.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,e,i){const o=[this.getRequestUrlInternal(e)];return i&&o.push(this.getBaseResourcePath()),t!==""&&o.push(t),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let e=this.clientOptions.httpOptions;t.httpOptions&&(e=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const i=this.shouldPrependVertexProjectPath(t),o=this.constructUrl(t.path,e,i);if(t.queryParams)for(const[u,d]of Object.entries(t.queryParams))o.searchParams.append(u,String(d));let l={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=t.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,e,t.abortSignal),this.unaryApiCall(o,l,t.httpMethod)}patchHttpOptions(t,e){const i=JSON.parse(JSON.stringify(t));for(const[o,l]of Object.entries(e))typeof l=="object"?i[o]=Object.assign(Object.assign({},i[o]),l):l!==void 0&&(i[o]=l);return i}async requestStream(t){let e=this.clientOptions.httpOptions;t.httpOptions&&(e=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const i=this.shouldPrependVertexProjectPath(t),o=this.constructUrl(t.path,e,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let l={};return l.body=t.body,l=await this.includeExtraHttpOptionsToRequestInit(l,e,t.abortSignal),this.streamApiCall(o,l,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,e,i){if(e&&e.timeout||i){const o=new AbortController,l=o.signal;if(e.timeout&&(e==null?void 0:e.timeout)>0){const u=setTimeout(()=>o.abort(),e.timeout);u&&typeof u.unref=="function"&&u.unref()}i&&i.addEventListener("abort",()=>{o.abort()}),t.signal=l}return e&&e.extraBody!==null&&Wk(t,e.extraBody),t.headers=await this.getHeadersInternal(e),t}async unaryApiCall(t,e,i){return this.apiCall(t.toString(),Object.assign(Object.assign({},e),{method:i})).then(async o=>(await py(o),new $h(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(t,e,i){return this.apiCall(t.toString(),Object.assign(Object.assign({},e),{method:i})).then(async o=>(await py(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(t){var e;return js(this,arguments,function*(){const o=(e=t==null?void 0:t.body)===null||e===void 0?void 0:e.getReader(),l=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let u="";for(;;){const{done:d,value:p}=yield Gt(o.read());if(d){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=l.decode(p,{stream:!0});try{const _=JSON.parse(m);if("error"in _){const S=JSON.parse(JSON.stringify(_.error)),b=S.status,w=S.code,E=`got status: ${b}. ${JSON.stringify(_)}`;if(w>=400&&w<600)throw new Ua({message:E,status:w})}}catch(_){if(_.name==="ApiError")throw _}u+=m;let g=u.match(dy);for(;g;){const _=g[1];try{const S=new Response(_,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield Gt(new $h(S)),u=u.slice(g[0].length),g=u.match(dy)}catch(S){throw new Error(`exception parsing stream chunk ${_}. ${S}`)}}}}finally{o.releaseLock()}})}async apiCall(t,e){return fetch(t,e).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const t={},e=Fk+" "+this.clientOptions.userAgentExtra;return t[Hk]=e,t[Xh]=e,t[qk]="application/json",t}async getHeadersInternal(t){const e=new Headers;if(t&&t.headers){for(const[i,o]of Object.entries(t.headers))e.append(i,o);t.timeout&&t.timeout>0&&e.append($k,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(e),e}async uploadFile(t,e){var i;const o={};e!=null&&(o.mimeType=e.mimeType,o.name=e.name,o.displayName=e.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const l=this.clientOptions.uploader,u=await l.stat(t);o.sizeBytes=String(u.size);const d=(i=e==null?void 0:e.mimeType)!==null&&i!==void 0?i:u.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=d;const p=await this.fetchUploadUrl(o,e);return l.upload(t,p,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,e){var i;let o={};e!=null&&e.httpOptions?o=e.httpOptions:o={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${t.mimeType}`}};const l={file:t},u=await this.request({path:ut("upload/v1beta/files",l._url),body:JSON.stringify(l),httpMethod:"POST",httpOptions:o});if(!u||!(u!=null&&u.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const d=(i=u==null?void 0:u.headers)===null||i===void 0?void 0:i["x-goog-upload-url"];if(d===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return d}}async function py(n){var t;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const e=n.status;let i;!((t=n.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=JSON.stringify(i);throw e>=400&&e<600?new Ua({message:o,status:e}):new Error(o)}}function Wk(n,t){if(!t||Object.keys(t).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let e={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))e=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(l,u){const d=Object.assign({},l);for(const p in u)if(Object.prototype.hasOwnProperty.call(u,p)){const m=u[p],g=d[p];m&&typeof m=="object"&&!Array.isArray(m)&&g&&typeof g=="object"&&!Array.isArray(g)?d[p]=i(g,m):(g&&m&&typeof g!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof g}, New type: ${typeof m}. Overwriting.`),d[p]=m)}return d}const o=i(e,t);n.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Xk="mcp_used/unknown";let Qk=!1;function I_(n){for(const t of n)if(Zk(t)||typeof t=="object"&&"inputSchema"in t)return!0;return Qk}function L_(n){var t;const e=(t=n[Xh])!==null&&t!==void 0?t:"";n[Xh]=(e+` ${Xk}`).trimStart()}function Zk(n){return n!==null&&typeof n=="object"&&n instanceof Af}function jk(n,t=100){return js(this,arguments,function*(){let i,o=0;for(;o<t;){const l=yield Gt(n.listTools({cursor:i}));for(const u of l.tools)yield yield Gt(u),o++;if(!l.nextCursor)break;i=l.nextCursor}})}class Af{constructor(t=[],e){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=e}static create(t,e){return new Af(t,e)}async initialize(){var t,e,i,o;if(this.mcpTools.length>0)return;const l={},u=[];for(const g of this.mcpClients)try{for(var d=!0,p=(e=void 0,br(jk(g))),m;m=await p.next(),t=m.done,!t;d=!0){o=m.value,d=!1;const _=o;u.push(_);const S=_.name;if(l[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);l[S]=g}}catch(_){e={error:_}}finally{try{!d&&!t&&(i=p.return)&&await i.call(p)}finally{if(e)throw e.error}}this.mcpTools=u,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),HC(this.mcpTools,this.config)}async callTool(t){await this.initialize();const e=[];for(const i of t)if(i.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[i.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const u=await o.callTool({name:i.name,arguments:i.args},void 0,l);e.push({functionResponse:{name:i.name,response:u.isError?{error:u}:u}})}return e}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function tN(n,t,e){const i=new UC;let o;e.data instanceof Blob?o=JSON.parse(await e.data.text()):o=JSON.parse(e.data);const l=HM(o);Object.assign(i,l),t(i)}class eN{constructor(t,e,i){this.apiClient=t,this.auth=e,this.webSocketFactory=i}async connect(t){var e,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),u=sN(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),p=`${o}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${d}`;let m=()=>{};const g=new Promise(k=>{m=k}),_=t.callbacks,S=function(){m({})},b=this.apiClient,w={onopen:S,onmessage:k=>{tN(b,_.onmessage,k)},onerror:(e=_==null?void 0:_.onerror)!==null&&e!==void 0?e:function(k){},onclose:(i=_==null?void 0:_.onclose)!==null&&i!==void 0?i:function(k){}},E=this.webSocketFactory.create(p,iN(u),w);E.connect(),await g;const M=Nt(this.apiClient,t.model),D=M_({model:M}),U=Kh({setup:D});return E.send(JSON.stringify(U)),new nN(E,this.apiClient)}}class nN{constructor(t,e){this.conn=t,this.apiClient=e}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const e=q1(t),i=A_(e);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const e=$1(t),i=Kh(e);this.conn.send(JSON.stringify(i))}sendPlaybackControl(t){const e=Kh({playbackControl:t});this.conn.send(JSON.stringify(e))}play(){this.sendPlaybackControl(Ws.PLAY)}pause(){this.sendPlaybackControl(Ws.PAUSE)}stop(){this.sendPlaybackControl(Ws.STOP)}resetContext(){this.sendPlaybackControl(Ws.RESET_CONTEXT)}close(){this.conn.close()}}function iN(n){const t={};return n.forEach((e,i)=>{t[i]=e}),t}function sN(n){const t=new Headers;for(const[e,i]of Object.entries(n))t.append(e,i);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oN="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function rN(n,t,e){const i=new LC;let o;e.data instanceof Blob?o=await e.data.text():e.data instanceof ArrayBuffer?o=new TextDecoder().decode(e.data):o=e.data;const l=JSON.parse(o);if(n.isVertexAI()){const u=iA(l);Object.assign(i,u)}else{const u=LM(l);Object.assign(i,u)}t(i)}class lN{constructor(t,e,i){this.apiClient=t,this.auth=e,this.webSocketFactory=i,this.music=new eN(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var e,i,o,l,u,d;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const p=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let g;const _=this.apiClient.getHeaders();t.config&&t.config.tools&&I_(t.config.tools)&&L_(_);const S=hN(_);if(this.apiClient.isVertexAI())g=`${p}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S);else{const j=this.apiClient.getApiKey();let Q="BidiGenerateContent",K="key";j!=null&&j.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),Q="BidiGenerateContentConstrained",K="access_token"),g=`${p}/ws/google.ai.generativelanguage.${m}.GenerativeService.${Q}?${K}=${j}`}let b=()=>{};const w=new Promise(j=>{b=j}),E=t.callbacks,M=function(){var j;(j=E==null?void 0:E.onopen)===null||j===void 0||j.call(E),b({})},D=this.apiClient,U={onopen:M,onmessage:j=>{rN(D,E.onmessage,j)},onerror:(e=E==null?void 0:E.onerror)!==null&&e!==void 0?e:function(j){},onclose:(i=E==null?void 0:E.onclose)!==null&&i!==void 0?i:function(j){}},k=this.webSocketFactory.create(g,cN(S),U);k.connect(),await w;let V=Nt(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&V.startsWith("publishers/")){const j=this.apiClient.getProject(),Q=this.apiClient.getLocation();V=`projects/${j}/locations/${Q}/`+V}let q={};this.apiClient.isVertexAI()&&((o=t.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[Ea.AUDIO]}:t.config.responseModalities=[Ea.AUDIO]),!((l=t.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const J=(d=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[],W=[];for(const j of J)if(this.isCallableTool(j)){const Q=j;W.push(await Q.tool())}else W.push(j);W.length>0&&(t.config.tools=W);const rt={model:V,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?q=mM(this.apiClient,rt):q=z1(this.apiClient,rt),delete q.config,k.send(JSON.stringify(q)),new uN(k,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const aN={turnComplete:!0};class uN{constructor(t,e){this.conn=t,this.apiClient=e}tLiveClientContent(t,e){if(e.turns!==null&&e.turns!==void 0){let i=[];try{i=Qe(e.turns),t.isVertexAI()?i=i.map(o=>ao(o)):i=i.map(o=>Pa(o))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof e.turns}'`)}return{clientContent:{turns:i,turnComplete:e.turnComplete}}}return{clientContent:{turnComplete:e.turnComplete}}}tLiveClienttToolResponse(t,e){let i=[];if(e.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(e.functionResponses)?i=e.functionResponses:i=[e.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const l of i){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!t.isVertexAI()&&!("id"in l))throw new Error(oN)}return{toolResponse:{functionResponses:i}}}sendClientContent(t){t=Object.assign(Object.assign({},aN),t);const e=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(e))}sendRealtimeInput(t){let e={};this.apiClient.isVertexAI()?e={realtimeInput:yM(t)}:e={realtimeInput:O1(t)},this.conn.send(JSON.stringify(e))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const e=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(e))}close(){this.conn.close()}}function cN(n){const t={};return n.forEach((e,i)=>{t[i]=e}),t}function hN(n){const t=new Headers;for(const[e,i]of Object.entries(n))t.append(e,i);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const my=10;function gy(n){var t,e,i;if(!((t=n==null?void 0:n.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let o=!1;for(const u of(e=n==null?void 0:n.tools)!==null&&e!==void 0?e:[])if(to(u)){o=!0;break}if(!o)return!0;const l=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function to(n){return"callTool"in n&&typeof n.callTool=="function"}function fN(n){var t,e,i;return(i=(e=(t=n.config)===null||t===void 0?void 0:t.tools)===null||e===void 0?void 0:e.some(o=>to(o)))!==null&&i!==void 0?i:!1}function dN(n){var t,e,i;return(i=(e=(t=n.config)===null||t===void 0?void 0:t.tools)===null||e===void 0?void 0:e.some(o=>!to(o)))!==null&&i!==void 0?i:!1}function vy(n){var t;return!(!((t=n==null?void 0:n.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pN extends Ki{constructor(t){super(),this.apiClient=t,this.generateContent=async e=>{var i,o,l,u,d;const p=await this.processParamsMaybeAddMcpUsage(e);if(this.maybeMoveToResponseJsonSchem(e),!fN(e)||gy(e.config))return await this.generateContentInternal(p);if(dN(e))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let m,g;const _=Qe(p.contents),S=(l=(o=(i=p.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&l!==void 0?l:my;let b=0;for(;b<S&&(m=await this.generateContentInternal(p),!(!m.functionCalls||m.functionCalls.length===0));){const w=m.candidates[0].content,E=[];for(const M of(d=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[])if(to(M)){const U=await M.callTool(m.functionCalls);E.push(...U)}b++,g={role:"user",parts:E},p.contents=Qe(p.contents),p.contents.push(w),p.contents.push(g),vy(p.config)&&(_.push(w),_.push(g))}return vy(p.config)&&(m.automaticFunctionCallingHistory=_),m},this.generateContentStream=async e=>{if(this.maybeMoveToResponseJsonSchem(e),gy(e.config)){const i=await this.processParamsMaybeAddMcpUsage(e);return await this.generateContentStreamInternal(i)}else return await this.processAfcStream(e)},this.generateImages=async e=>await this.generateImagesInternal(e).then(i=>{var o;let l;const u=[];if(i!=null&&i.generatedImages)for(const p of i.generatedImages)p&&(p!=null&&p.safetyAttributes)&&((o=p==null?void 0:p.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?l=p==null?void 0:p.safetyAttributes:u.push(p);let d;return l?d={generatedImages:u,positivePromptSafetyAttributes:l,sdkHttpResponse:i.sdkHttpResponse}:d={generatedImages:u,sdkHttpResponse:i.sdkHttpResponse},d}),this.list=async e=>{var i;const u={config:Object.assign(Object.assign({},{queryBase:!0}),e==null?void 0:e.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((i=u.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new zr(qi.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(u),u)},this.editImage=async e=>{const i={model:e.model,prompt:e.prompt,referenceImages:[],config:e.config};return e.referenceImages&&e.referenceImages&&(i.referenceImages=e.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async e=>{let i={numberOfImages:1,mode:"upscale"};e.config&&(i=Object.assign(Object.assign({},i),e.config));const o={model:e.model,image:e.image,upscaleFactor:e.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async e=>await this.generateVideosInternal(e)}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var e,i,o;const l=(e=t.config)===null||e===void 0?void 0:e.tools;if(!l)return t;const u=await Promise.all(l.map(async p=>to(p)?await p.tool():p)),d={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:u})};if(d.config.tools=u,t.config&&t.config.tools&&I_(t.config.tools)){const p=(o=(i=t.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let m=Object.assign({},p);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),L_(m),d.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:m})}return d}async initAfcToolsMap(t){var e,i,o;const l=new Map;for(const u of(i=(e=t.config)===null||e===void 0?void 0:e.tools)!==null&&i!==void 0?i:[])if(to(u)){const d=u,p=await d.tool();for(const m of(o=p.functionDeclarations)!==null&&o!==void 0?o:[]){if(!m.name)throw new Error("Function declaration name is required.");if(l.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);l.set(m.name,d)}}return l}async processAfcStream(t){var e,i,o;const l=(o=(i=(e=t.config)===null||e===void 0?void 0:e.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:my;let u=!1,d=0;const p=await this.initAfcToolsMap(t);return function(m,g,_){var S,b;return js(this,arguments,function*(){for(var w,E,M,D;d<l;){u&&(d++,u=!1);const q=yield Gt(m.processParamsMaybeAddMcpUsage(_)),J=yield Gt(m.generateContentStreamInternal(q)),W=[],rt=[];try{for(var U=!0,k=(E=void 0,br(J)),V;V=yield Gt(k.next()),w=V.done,!w;U=!0){D=V.value,U=!1;const j=D;if(yield yield Gt(j),j.candidates&&(!((S=j.candidates[0])===null||S===void 0)&&S.content)){rt.push(j.candidates[0].content);for(const Q of(b=j.candidates[0].content.parts)!==null&&b!==void 0?b:[])if(d<l&&Q.functionCall){if(!Q.functionCall.name)throw new Error("Function call name was not returned by the model.");if(g.has(Q.functionCall.name)){const K=yield Gt(g.get(Q.functionCall.name).callTool([Q.functionCall]));W.push(...K)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${g.keys()}, mising tool: ${Q.functionCall.name}`)}}}}catch(j){E={error:j}}finally{try{!U&&!w&&(M=k.return)&&(yield Gt(M.call(k)))}finally{if(E)throw E.error}}if(W.length>0){u=!0;const j=new pr;j.candidates=[{content:{role:"user",parts:W}}],yield yield Gt(j);const Q=[];Q.push(...rt),Q.push({role:"user",parts:W});const K=Qe(_.contents).concat(Q);_.contents=K}else break}})}(this,p,t)}async generateContentInternal(t){var e,i,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=cy(this.apiClient,t);return d=ut("{model}:generateContent",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:g.headers},S})),u.then(g=>{const _=fy(g),S=new pr;return Object.assign(S,_),S})}else{const m=uy(this.apiClient,t);return d=ut("{model}:generateContent",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:g.headers},S})),u.then(g=>{const _=hy(g),S=new pr;return Object.assign(S,_),S})}}async generateContentStreamInternal(t){var e,i,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=cy(this.apiClient,t);return d=ut("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}),u.then(function(_){return js(this,arguments,function*(){var S,b,w,E;try{for(var M=!0,D=br(_),U;U=yield Gt(D.next()),S=U.done,!S;M=!0){E=U.value,M=!1;const k=E,V=fy(yield Gt(k.json()));V.sdkHttpResponse={headers:k.headers};const q=new pr;Object.assign(q,V),yield yield Gt(q)}}catch(k){b={error:k}}finally{try{!M&&!S&&(w=D.return)&&(yield Gt(w.call(D)))}finally{if(b)throw b.error}}})})}else{const m=uy(this.apiClient,t);return d=ut("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}),u.then(function(_){return js(this,arguments,function*(){var S,b,w,E;try{for(var M=!0,D=br(_),U;U=yield Gt(D.next()),S=U.done,!S;M=!0){E=U.value,M=!1;const k=E,V=hy(yield Gt(k.json()));V.sdkHttpResponse={headers:k.headers};const q=new pr;Object.assign(q,V),yield yield Gt(q)}}catch(k){b={error:k}}finally{try{!M&&!S&&(w=D.return)&&(yield Gt(w.call(D)))}finally{if(b)throw b.error}}})})}}async embedContent(t){var e,i,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=mR(this.apiClient,t);return d=ut("{model}:predict",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:g.headers},S})),u.then(g=>{const _=Ck(g),S=new $v;return Object.assign(S,_),S})}else{const m=AA(this.apiClient,t);return d=ut("{model}:batchEmbedContents",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:g.headers},S})),u.then(g=>{const _=tk(g),S=new $v;return Object.assign(S,_),S})}}async generateImagesInternal(t){var e,i,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=vR(this.apiClient,t);return d=ut("{model}:predict",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:g.headers},S})),u.then(g=>{const _=Ek(g),S=new Hv;return Object.assign(S,_),S})}else{const m=kA(this.apiClient,t);return d=ut("{model}:predict",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:g.headers},S})),u.then(g=>{const _=ik(g),S=new Hv;return Object.assign(S,_),S})}}async editImageInternal(t){var e,i;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=CR(this.apiClient,t);return l=ut("{model}:predict",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:p.headers},g})),o.then(p=>{const m=Mk(p),g=new MC;return Object.assign(g,m),g})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var e,i;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=ER(this.apiClient,t);return l=ut("{model}:predict",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:p.headers},g})),o.then(p=>{const m=Ak(p),g=new AC;return Object.assign(g,m),g})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var e,i;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=kR(this.apiClient,t);return l=ut("{model}:predict",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const m=Rk(p),g=new RC;return Object.assign(g,m),g})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var e,i,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=NR(this.apiClient,t);return d=ut("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),u.then(g=>Wh(g))}else{const m=NA(this.apiClient,t);return d=ut("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json()),u.then(g=>Yh(g))}}async listInternal(t){var e,i,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=IR(this.apiClient,t);return d=ut("{models_url}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:g.headers},S})),u.then(g=>{const _=Ik(g),S=new Gv;return Object.assign(S,_),S})}else{const m=IA(this.apiClient,t);return d=ut("{models_url}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:g.headers},S})),u.then(g=>{const _=ok(g),S=new Gv;return Object.assign(S,_),S})}}async update(t){var e,i,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=UR(this.apiClient,t);return d=ut("{model}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),u.then(g=>Wh(g))}else{const m=UA(this.apiClient,t);return d=ut("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json()),u.then(g=>Yh(g))}}async delete(t){var e,i,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=PR(this.apiClient,t);return d=ut("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),u.then(()=>{const g=Lk(),_=new Fv;return Object.assign(_,g),_})}else{const m=PA(this.apiClient,t);return d=ut("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json()),u.then(()=>{const g=rk(),_=new Fv;return Object.assign(_,g),_})}}async countTokens(t){var e,i,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=VR(this.apiClient,t);return d=ut("{model}:countTokens",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:g.headers},S})),u.then(g=>{const _=Uk(g),S=new Jv;return Object.assign(S,_),S})}else{const m=VA(this.apiClient,t);return d=ut("{model}:countTokens",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:g.headers},S})),u.then(g=>{const _=lk(g),S=new Jv;return Object.assign(S,_),S})}}async computeTokens(t){var e,i;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=BR(this.apiClient,t);return l=ut("{model}:computeTokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:p.headers},g})),o.then(p=>{const m=Pk(p),g=new kC;return Object.assign(g,m),g})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var e,i,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=$R(this.apiClient,t);return d=ut("{model}:predictLongRunning",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),u.then(g=>{const _=Ok(g),S=new Ma;return Object.assign(S,_),S})}else{const m=qA(this.apiClient,t);return d=ut("{model}:predictLongRunning",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json()),u.then(g=>{const _=hk(g),S=new Ma;return Object.assign(S,_),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mN(n){const t={},e=c(n,["operationName"]);e!=null&&h(t,["_url","operationName"],e);const i=c(n,["config"]);return i!=null&&h(t,["config"],i),t}function gN(n){const t={},e=c(n,["operationName"]);e!=null&&h(t,["_url","operationName"],e);const i=c(n,["config"]);return i!=null&&h(t,["config"],i),t}function vN(n){const t={},e=c(n,["operationName"]);e!=null&&h(t,["operationName"],e);const i=c(n,["resourceName"]);i!=null&&h(t,["_url","resourceName"],i);const o=c(n,["config"]);return o!=null&&h(t,["config"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yN extends Ki{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const e=t.operation,i=t.config;if(e.name===void 0||e.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=e.name.split("/operations/")[0];let l;i&&"httpOptions"in i&&(l=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:e.name,resourceName:o,config:{httpOptions:l}});return e._fromAPIResponse({apiResponse:u,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:e.name,config:i});return e._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async get(t){const e=t.operation,i=t.config;if(e.name===void 0||e.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=e.name.split("/operations/")[0];let l;i&&"httpOptions"in i&&(l=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:e.name,resourceName:o,config:{httpOptions:l}});return e._fromAPIResponse({apiResponse:u,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:e.name,config:i});return e._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async getVideosOperationInternal(t){var e,i,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=gN(t);return d=ut("{operationName}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),u}else{const m=mN(t);return d=ut("{operationName}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json()),u}}async fetchPredictVideosOperationInternal(t){var e,i;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=vN(t);return l=ut("{resourceName}:fetchPredictOperation",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _N(n){const t={},e=c(n,["voiceName"]);return e!=null&&h(t,["voiceName"],e),t}function U_(n){const t={},e=c(n,["prebuiltVoiceConfig"]);return e!=null&&h(t,["prebuiltVoiceConfig"],_N(e)),t}function SN(n){const t={},e=c(n,["speaker"]);e!=null&&h(t,["speaker"],e);const i=c(n,["voiceConfig"]);return i!=null&&h(t,["voiceConfig"],U_(i)),t}function bN(n){const t={},e=c(n,["speakerVoiceConfigs"]);if(e!=null){let i=e;Array.isArray(i)&&(i=i.map(o=>SN(o))),h(t,["speakerVoiceConfigs"],i)}return t}function TN(n){const t={},e=c(n,["voiceConfig"]);e!=null&&h(t,["voiceConfig"],U_(e));const i=c(n,["multiSpeakerVoiceConfig"]);i!=null&&h(t,["multiSpeakerVoiceConfig"],bN(i));const o=c(n,["languageCode"]);return o!=null&&h(t,["languageCode"],o),t}function wN(n){const t={},e=c(n,["fps"]);e!=null&&h(t,["fps"],e);const i=c(n,["endOffset"]);i!=null&&h(t,["endOffset"],i);const o=c(n,["startOffset"]);return o!=null&&h(t,["startOffset"],o),t}function CN(n){const t={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=c(n,["data"]);e!=null&&h(t,["data"],e);const i=c(n,["mimeType"]);return i!=null&&h(t,["mimeType"],i),t}function xN(n){const t={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=c(n,["fileUri"]);e!=null&&h(t,["fileUri"],e);const i=c(n,["mimeType"]);return i!=null&&h(t,["mimeType"],i),t}function EN(n){const t={},e=c(n,["videoMetadata"]);e!=null&&h(t,["videoMetadata"],wN(e));const i=c(n,["thought"]);i!=null&&h(t,["thought"],i);const o=c(n,["inlineData"]);o!=null&&h(t,["inlineData"],CN(o));const l=c(n,["fileData"]);l!=null&&h(t,["fileData"],xN(l));const u=c(n,["thoughtSignature"]);u!=null&&h(t,["thoughtSignature"],u);const d=c(n,["codeExecutionResult"]);d!=null&&h(t,["codeExecutionResult"],d);const p=c(n,["executableCode"]);p!=null&&h(t,["executableCode"],p);const m=c(n,["functionCall"]);m!=null&&h(t,["functionCall"],m);const g=c(n,["functionResponse"]);g!=null&&h(t,["functionResponse"],g);const _=c(n,["text"]);return _!=null&&h(t,["text"],_),t}function MN(n){const t={},e=c(n,["parts"]);if(e!=null){let o=e;Array.isArray(o)&&(o=o.map(l=>EN(l))),h(t,["parts"],o)}const i=c(n,["role"]);return i!=null&&h(t,["role"],i),t}function AN(n){const t={},e=c(n,["behavior"]);e!=null&&h(t,["behavior"],e);const i=c(n,["description"]);i!=null&&h(t,["description"],i);const o=c(n,["name"]);o!=null&&h(t,["name"],o);const l=c(n,["parameters"]);l!=null&&h(t,["parameters"],l);const u=c(n,["parametersJsonSchema"]);u!=null&&h(t,["parametersJsonSchema"],u);const d=c(n,["response"]);d!=null&&h(t,["response"],d);const p=c(n,["responseJsonSchema"]);return p!=null&&h(t,["responseJsonSchema"],p),t}function RN(n){const t={},e=c(n,["startTime"]);e!=null&&h(t,["startTime"],e);const i=c(n,["endTime"]);return i!=null&&h(t,["endTime"],i),t}function kN(n){const t={},e=c(n,["timeRangeFilter"]);return e!=null&&h(t,["timeRangeFilter"],RN(e)),t}function NN(n){const t={},e=c(n,["mode"]);e!=null&&h(t,["mode"],e);const i=c(n,["dynamicThreshold"]);return i!=null&&h(t,["dynamicThreshold"],i),t}function DN(n){const t={},e=c(n,["dynamicRetrievalConfig"]);return e!=null&&h(t,["dynamicRetrievalConfig"],NN(e)),t}function IN(){return{}}function LN(n){const t={},e=c(n,["functionDeclarations"]);if(e!=null){let p=e;Array.isArray(p)&&(p=p.map(m=>AN(m))),h(t,["functionDeclarations"],p)}if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(n,["googleSearch"]);i!=null&&h(t,["googleSearch"],kN(i));const o=c(n,["googleSearchRetrieval"]);if(o!=null&&h(t,["googleSearchRetrieval"],DN(o)),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(c(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");c(n,["urlContext"])!=null&&h(t,["urlContext"],IN());const u=c(n,["codeExecution"]);u!=null&&h(t,["codeExecution"],u);const d=c(n,["computerUse"]);return d!=null&&h(t,["computerUse"],d),t}function UN(n){const t={},e=c(n,["handle"]);if(e!=null&&h(t,["handle"],e),c(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function yy(){return{}}function PN(n){const t={},e=c(n,["disabled"]);e!=null&&h(t,["disabled"],e);const i=c(n,["startOfSpeechSensitivity"]);i!=null&&h(t,["startOfSpeechSensitivity"],i);const o=c(n,["endOfSpeechSensitivity"]);o!=null&&h(t,["endOfSpeechSensitivity"],o);const l=c(n,["prefixPaddingMs"]);l!=null&&h(t,["prefixPaddingMs"],l);const u=c(n,["silenceDurationMs"]);return u!=null&&h(t,["silenceDurationMs"],u),t}function zN(n){const t={},e=c(n,["automaticActivityDetection"]);e!=null&&h(t,["automaticActivityDetection"],PN(e));const i=c(n,["activityHandling"]);i!=null&&h(t,["activityHandling"],i);const o=c(n,["turnCoverage"]);return o!=null&&h(t,["turnCoverage"],o),t}function VN(n){const t={},e=c(n,["targetTokens"]);return e!=null&&h(t,["targetTokens"],e),t}function BN(n){const t={},e=c(n,["triggerTokens"]);e!=null&&h(t,["triggerTokens"],e);const i=c(n,["slidingWindow"]);return i!=null&&h(t,["slidingWindow"],VN(i)),t}function ON(n){const t={},e=c(n,["proactiveAudio"]);return e!=null&&h(t,["proactiveAudio"],e),t}function qN(n,t){const e={},i=c(n,["generationConfig"]);t!==void 0&&i!=null&&h(t,["setup","generationConfig"],i);const o=c(n,["responseModalities"]);t!==void 0&&o!=null&&h(t,["setup","generationConfig","responseModalities"],o);const l=c(n,["temperature"]);t!==void 0&&l!=null&&h(t,["setup","generationConfig","temperature"],l);const u=c(n,["topP"]);t!==void 0&&u!=null&&h(t,["setup","generationConfig","topP"],u);const d=c(n,["topK"]);t!==void 0&&d!=null&&h(t,["setup","generationConfig","topK"],d);const p=c(n,["maxOutputTokens"]);t!==void 0&&p!=null&&h(t,["setup","generationConfig","maxOutputTokens"],p);const m=c(n,["mediaResolution"]);t!==void 0&&m!=null&&h(t,["setup","generationConfig","mediaResolution"],m);const g=c(n,["seed"]);t!==void 0&&g!=null&&h(t,["setup","generationConfig","seed"],g);const _=c(n,["speechConfig"]);t!==void 0&&_!=null&&h(t,["setup","generationConfig","speechConfig"],TN(Mf(_)));const S=c(n,["enableAffectiveDialog"]);t!==void 0&&S!=null&&h(t,["setup","generationConfig","enableAffectiveDialog"],S);const b=c(n,["systemInstruction"]);t!==void 0&&b!=null&&h(t,["setup","systemInstruction"],MN(Se(b)));const w=c(n,["tools"]);if(t!==void 0&&w!=null){let q=ro(w);Array.isArray(q)&&(q=q.map(J=>LN(oo(J)))),h(t,["setup","tools"],q)}const E=c(n,["sessionResumption"]);t!==void 0&&E!=null&&h(t,["setup","sessionResumption"],UN(E));const M=c(n,["inputAudioTranscription"]);t!==void 0&&M!=null&&h(t,["setup","inputAudioTranscription"],yy());const D=c(n,["outputAudioTranscription"]);t!==void 0&&D!=null&&h(t,["setup","outputAudioTranscription"],yy());const U=c(n,["realtimeInputConfig"]);t!==void 0&&U!=null&&h(t,["setup","realtimeInputConfig"],zN(U));const k=c(n,["contextWindowCompression"]);t!==void 0&&k!=null&&h(t,["setup","contextWindowCompression"],BN(k));const V=c(n,["proactivity"]);return t!==void 0&&V!=null&&h(t,["setup","proactivity"],ON(V)),e}function $N(n,t){const e={},i=c(t,["model"]);i!=null&&h(e,["setup","model"],Nt(n,i));const o=c(t,["config"]);return o!=null&&h(e,["config"],qN(o,e)),e}function HN(n,t,e){const i={},o=c(t,["expireTime"]);e!==void 0&&o!=null&&h(e,["expireTime"],o);const l=c(t,["newSessionExpireTime"]);e!==void 0&&l!=null&&h(e,["newSessionExpireTime"],l);const u=c(t,["uses"]);e!==void 0&&u!=null&&h(e,["uses"],u);const d=c(t,["liveConnectConstraints"]);e!==void 0&&d!=null&&h(e,["bidiGenerateContentSetup"],$N(n,d));const p=c(t,["lockAdditionalFields"]);return e!==void 0&&p!=null&&h(e,["fieldMask"],p),i}function GN(n,t){const e={},i=c(t,["config"]);return i!=null&&h(e,["config"],HN(n,i,e)),e}function FN(n){const t={},e=c(n,["name"]);return e!=null&&h(t,["name"],e),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function JN(n){const t=[];for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)){const i=n[e];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(l=>`${e}.${l}`);t.push(...o)}else t.push(e)}return t.join(",")}function KN(n,t){let e=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const l=i.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,e=l):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const o=n.fieldMask;if(e){const l=JN(e);if(Array.isArray(t==null?void 0:t.lockAdditionalFields)&&(t==null?void 0:t.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(t!=null&&t.lockAdditionalFields&&t.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];o.length>0&&(d=o.map(m=>u.includes(m)?`generationConfig.${m}`:m));const p=[];l&&p.push(l),d.length>0&&p.push(...d),p.length>0?n.fieldMask=p.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}class YN extends Ki{constructor(t){super(),this.apiClient=t}async create(t){var e,i;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=GN(this.apiClient,t);l=ut("auth_tokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const p=KN(d,t.config);return o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>FN(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function WN(n){const t={},e=c(n,["name"]);e!=null&&h(t,["_url","name"],e);const i=c(n,["config"]);return i!=null&&h(t,["config"],i),t}function XN(n,t){const e={},i=c(n,["pageSize"]);t!==void 0&&i!=null&&h(t,["_query","pageSize"],i);const o=c(n,["pageToken"]);t!==void 0&&o!=null&&h(t,["_query","pageToken"],o);const l=c(n,["filter"]);return t!==void 0&&l!=null&&h(t,["_query","filter"],l),e}function QN(n){const t={},e=c(n,["config"]);return e!=null&&h(t,["config"],XN(e,t)),t}function ZN(n){const t={},e=c(n,["textInput"]);e!=null&&h(t,["textInput"],e);const i=c(n,["output"]);return i!=null&&h(t,["output"],i),t}function jN(n){const t={};if(c(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const e=c(n,["examples"]);if(e!=null){let i=e;Array.isArray(i)&&(i=i.map(o=>ZN(o))),h(t,["examples","examples"],i)}return t}function t2(n,t){const e={};if(c(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=c(n,["tunedModelDisplayName"]);if(t!==void 0&&i!=null&&h(t,["displayName"],i),c(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=c(n,["epochCount"]);t!==void 0&&o!=null&&h(t,["tuningTask","hyperparameters","epochCount"],o);const l=c(n,["learningRateMultiplier"]);if(l!=null&&h(e,["tuningTask","hyperparameters","learningRateMultiplier"],l),c(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(c(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=c(n,["batchSize"]);t!==void 0&&u!=null&&h(t,["tuningTask","hyperparameters","batchSize"],u);const d=c(n,["learningRate"]);return t!==void 0&&d!=null&&h(t,["tuningTask","hyperparameters","learningRate"],d),e}function e2(n){const t={},e=c(n,["baseModel"]);e!=null&&h(t,["baseModel"],e);const i=c(n,["trainingDataset"]);i!=null&&h(t,["tuningTask","trainingData"],jN(i));const o=c(n,["config"]);return o!=null&&h(t,["config"],t2(o,t)),t}function n2(n){const t={},e=c(n,["name"]);e!=null&&h(t,["_url","name"],e);const i=c(n,["config"]);return i!=null&&h(t,["config"],i),t}function i2(n,t){const e={},i=c(n,["pageSize"]);t!==void 0&&i!=null&&h(t,["_query","pageSize"],i);const o=c(n,["pageToken"]);t!==void 0&&o!=null&&h(t,["_query","pageToken"],o);const l=c(n,["filter"]);return t!==void 0&&l!=null&&h(t,["_query","filter"],l),e}function s2(n){const t={},e=c(n,["config"]);return e!=null&&h(t,["config"],i2(e,t)),t}function o2(n,t){const e={},i=c(n,["gcsUri"]);t!==void 0&&i!=null&&h(t,["supervisedTuningSpec","trainingDatasetUri"],i);const o=c(n,["vertexDatasetResource"]);if(t!==void 0&&o!=null&&h(t,["supervisedTuningSpec","trainingDatasetUri"],o),c(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return e}function r2(n,t){const e={},i=c(n,["gcsUri"]);i!=null&&h(e,["validationDatasetUri"],i);const o=c(n,["vertexDatasetResource"]);return t!==void 0&&o!=null&&h(t,["supervisedTuningSpec","trainingDatasetUri"],o),e}function l2(n,t){const e={},i=c(n,["validationDataset"]);t!==void 0&&i!=null&&h(t,["supervisedTuningSpec"],r2(i,e));const o=c(n,["tunedModelDisplayName"]);t!==void 0&&o!=null&&h(t,["tunedModelDisplayName"],o);const l=c(n,["description"]);t!==void 0&&l!=null&&h(t,["description"],l);const u=c(n,["epochCount"]);t!==void 0&&u!=null&&h(t,["supervisedTuningSpec","hyperParameters","epochCount"],u);const d=c(n,["learningRateMultiplier"]);t!==void 0&&d!=null&&h(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],d);const p=c(n,["exportLastCheckpointOnly"]);t!==void 0&&p!=null&&h(t,["supervisedTuningSpec","exportLastCheckpointOnly"],p);const m=c(n,["adapterSize"]);if(t!==void 0&&m!=null&&h(t,["supervisedTuningSpec","hyperParameters","adapterSize"],m),c(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(c(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return e}function a2(n){const t={},e=c(n,["baseModel"]);e!=null&&h(t,["baseModel"],e);const i=c(n,["trainingDataset"]);i!=null&&h(t,["supervisedTuningSpec","trainingDatasetUri"],o2(i,t));const o=c(n,["config"]);return o!=null&&h(t,["config"],l2(o,t)),t}function u2(n){const t={},e=c(n,["name"]);e!=null&&h(t,["model"],e);const i=c(n,["name"]);return i!=null&&h(t,["endpoint"],i),t}function P_(n){const t={},e=c(n,["sdkHttpResponse"]);e!=null&&h(t,["sdkHttpResponse"],e);const i=c(n,["name"]);i!=null&&h(t,["name"],i);const o=c(n,["state"]);o!=null&&h(t,["state"],d_(o));const l=c(n,["createTime"]);l!=null&&h(t,["createTime"],l);const u=c(n,["tuningTask","startTime"]);u!=null&&h(t,["startTime"],u);const d=c(n,["tuningTask","completeTime"]);d!=null&&h(t,["endTime"],d);const p=c(n,["updateTime"]);p!=null&&h(t,["updateTime"],p);const m=c(n,["description"]);m!=null&&h(t,["description"],m);const g=c(n,["baseModel"]);g!=null&&h(t,["baseModel"],g);const _=c(n,["_self"]);_!=null&&h(t,["tunedModel"],u2(_));const S=c(n,["distillationSpec"]);S!=null&&h(t,["distillationSpec"],S);const b=c(n,["experiment"]);b!=null&&h(t,["experiment"],b);const w=c(n,["labels"]);w!=null&&h(t,["labels"],w);const E=c(n,["pipelineJob"]);E!=null&&h(t,["pipelineJob"],E);const M=c(n,["satisfiesPzi"]);M!=null&&h(t,["satisfiesPzi"],M);const D=c(n,["satisfiesPzs"]);D!=null&&h(t,["satisfiesPzs"],D);const U=c(n,["serviceAccount"]);U!=null&&h(t,["serviceAccount"],U);const k=c(n,["tunedModelDisplayName"]);return k!=null&&h(t,["tunedModelDisplayName"],k),t}function c2(n){const t={},e=c(n,["sdkHttpResponse"]);e!=null&&h(t,["sdkHttpResponse"],e);const i=c(n,["nextPageToken"]);i!=null&&h(t,["nextPageToken"],i);const o=c(n,["tunedModels"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>P_(u))),h(t,["tuningJobs"],l)}return t}function h2(n){const t={},e=c(n,["sdkHttpResponse"]);e!=null&&h(t,["sdkHttpResponse"],e);const i=c(n,["name"]);i!=null&&h(t,["name"],i);const o=c(n,["metadata"]);o!=null&&h(t,["metadata"],o);const l=c(n,["done"]);l!=null&&h(t,["done"],l);const u=c(n,["error"]);return u!=null&&h(t,["error"],u),t}function f2(n){const t={},e=c(n,["checkpointId"]);e!=null&&h(t,["checkpointId"],e);const i=c(n,["epoch"]);i!=null&&h(t,["epoch"],i);const o=c(n,["step"]);o!=null&&h(t,["step"],o);const l=c(n,["endpoint"]);return l!=null&&h(t,["endpoint"],l),t}function d2(n){const t={},e=c(n,["model"]);e!=null&&h(t,["model"],e);const i=c(n,["endpoint"]);i!=null&&h(t,["endpoint"],i);const o=c(n,["checkpoints"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>f2(u))),h(t,["checkpoints"],l)}return t}function Qh(n){const t={},e=c(n,["sdkHttpResponse"]);e!=null&&h(t,["sdkHttpResponse"],e);const i=c(n,["name"]);i!=null&&h(t,["name"],i);const o=c(n,["state"]);o!=null&&h(t,["state"],d_(o));const l=c(n,["createTime"]);l!=null&&h(t,["createTime"],l);const u=c(n,["startTime"]);u!=null&&h(t,["startTime"],u);const d=c(n,["endTime"]);d!=null&&h(t,["endTime"],d);const p=c(n,["updateTime"]);p!=null&&h(t,["updateTime"],p);const m=c(n,["error"]);m!=null&&h(t,["error"],m);const g=c(n,["description"]);g!=null&&h(t,["description"],g);const _=c(n,["baseModel"]);_!=null&&h(t,["baseModel"],_);const S=c(n,["tunedModel"]);S!=null&&h(t,["tunedModel"],d2(S));const b=c(n,["supervisedTuningSpec"]);b!=null&&h(t,["supervisedTuningSpec"],b);const w=c(n,["tuningDataStats"]);w!=null&&h(t,["tuningDataStats"],w);const E=c(n,["encryptionSpec"]);E!=null&&h(t,["encryptionSpec"],E);const M=c(n,["partnerModelTuningSpec"]);M!=null&&h(t,["partnerModelTuningSpec"],M);const D=c(n,["distillationSpec"]);D!=null&&h(t,["distillationSpec"],D);const U=c(n,["experiment"]);U!=null&&h(t,["experiment"],U);const k=c(n,["labels"]);k!=null&&h(t,["labels"],k);const V=c(n,["pipelineJob"]);V!=null&&h(t,["pipelineJob"],V);const q=c(n,["satisfiesPzi"]);q!=null&&h(t,["satisfiesPzi"],q);const J=c(n,["satisfiesPzs"]);J!=null&&h(t,["satisfiesPzs"],J);const W=c(n,["serviceAccount"]);W!=null&&h(t,["serviceAccount"],W);const rt=c(n,["tunedModelDisplayName"]);return rt!=null&&h(t,["tunedModelDisplayName"],rt),t}function p2(n){const t={},e=c(n,["sdkHttpResponse"]);e!=null&&h(t,["sdkHttpResponse"],e);const i=c(n,["nextPageToken"]);i!=null&&h(t,["nextPageToken"],i);const o=c(n,["tuningJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>Qh(u))),h(t,["tuningJobs"],l)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class m2 extends Ki{constructor(t){super(),this.apiClient=t,this.get=async e=>await this.getInternal(e),this.list=async(e={})=>new zr(qi.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(e),e),this.tune=async e=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(e);{const i=await this.tuneMldevInternal(e);let o="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?o=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(o=i.name.split("/operations/")[0]),{name:o,state:qh.JOB_STATE_QUEUED}}}}async getInternal(t){var e,i,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=n2(t);return d=ut("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:g.headers},S})),u.then(g=>Qh(g))}else{const m=WN(t);return d=ut("{name}",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:g.headers},S})),u.then(g=>P_(g))}}async listInternal(t){var e,i,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=s2(t);return d=ut("tuningJobs",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:g.headers},S})),u.then(g=>{const _=p2(g),S=new Yv;return Object.assign(S,_),S})}else{const m=QN(t);return d=ut("tunedModels",m._url),p=m._query,delete m.config,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:g.headers},S})),u.then(g=>{const _=c2(g),S=new Yv;return Object.assign(S,_),S})}}async tuneInternal(t){var e,i;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=a2(t);return l=ut("tuningJobs",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:p.headers},g})),o.then(p=>Qh(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var e,i;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=e2(t);return l=ut("tunedModels",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:p.headers},g})),o.then(p=>h2(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class g2{async download(t,e){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const v2=1024*1024*8,y2=3,_2=1e3,S2=2,ch="x-goog-upload-status";async function b2(n,t,e){var i,o,l;let u=0,d=0,p=new $h(new Response),m="upload";for(u=n.size;d<u;){const _=Math.min(v2,u-d),S=n.slice(d,d+_);d+_>=u&&(m+=", finalize");let b=0,w=_2;for(;b<y2&&(p=await e.request({path:"",body:S,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":String(d),"Content-Length":String(_)}}}),!(!((i=p==null?void 0:p.headers)===null||i===void 0)&&i[ch]));)b++,await w2(w),w=w*S2;if(d+=_,((o=p==null?void 0:p.headers)===null||o===void 0?void 0:o[ch])!=="active")break;if(u<=d)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const g=await(p==null?void 0:p.json());if(((l=p==null?void 0:p.headers)===null||l===void 0?void 0:l[ch])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return g.file}async function T2(n){return{size:n.size,type:n.type}}function w2(n){return new Promise(t=>setTimeout(t,n))}class C2{async upload(t,e,i){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await b2(t,e,i)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await T2(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class x2{create(t,e,i){return new E2(t,e,i)}}class E2{constructor(t,e,i){this.url=t,this.headers=e,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _y="x-goog-api-key";class M2{constructor(t){this.apiKey=t}async addAuthHeaders(t){if(t.get(_y)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(_y,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const A2="gl-node/";class R2{constructor(t){var e;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(e=t.vertexai)!==null&&e!==void 0?e:!1,this.apiKey=t.apiKey;const i=EC(t.httpOptions,t.vertexai,void 0,void 0);i&&(t.httpOptions?t.httpOptions.baseUrl=i:t.httpOptions={baseUrl:i}),this.apiVersion=t.apiVersion;const o=new M2(this.apiKey);this.apiClient=new Yk({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:t.httpOptions,userAgentExtra:A2+"web",uploader:new C2,downloader:new g2}),this.models=new pN(this.apiClient),this.live=new lN(this.apiClient,o,new x2),this.batches=new Xx(this.apiClient),this.chats=new t1(this.models,this.apiClient),this.caches=new QE(this.apiClient),this.files=new d1(this.apiClient),this.operations=new yN(this.apiClient),this.authTokens=new YN(this.apiClient),this.tunings=new m2(this.apiClient)}}const k2=void 0;throw new Error("API_KEY environment variable not set");const N2=new R2({apiKey:k2}),D2={type:Zt.OBJECT,properties:{thinkingProcess:{type:Zt.STRING,description:"A detailed, step-by-step analysis of the chart following the required process. This should be in Markdown format."},summary:{type:Zt.STRING,description:"A concise summary of the overall analysis."},signal:{type:Zt.STRING,enum:["BUY","SELL","NEUTRAL"],description:"The final trade signal."},confidence:{type:Zt.STRING,enum:["HIGH","LOW"],description:"The confidence level of the signal. HIGH if overallConfidenceScore >= 70, otherwise LOW."},trade:{type:Zt.OBJECT,nullable:!0,description:"The trade details. Must be null if confidence is LOW or signal is NEUTRAL.",properties:{entryPrice:{type:Zt.STRING},takeProfit:{type:Zt.STRING},stopLoss:{type:Zt.STRING}}},timeframe:{type:Zt.STRING,description:"The chart's timeframe (e.g., '4-Hour', '1-Day')."},riskRewardRatio:{type:Zt.STRING,nullable:!0,description:"The calculated risk/reward ratio as a string (e.g., '2.5:1'). Must be null if no trade is provided."},verificationSummary:{type:Zt.STRING,description:"A brief, critical self-assessment of the analysis, noting any conflicting data or weaknesses."},overallConfidenceScore:{type:Zt.INTEGER,description:"A final numerical confidence score from 0 to 100 based on the verification step."}},required:["thinkingProcess","summary","signal","confidence","trade","timeframe","riskRewardRatio","verificationSummary","overallConfidenceScore"]},I2=`You are Wizz, an elite crypto chart analyst. Your analysis must be precise, quantitative, and strictly confined to the visual data in the chart. Your goal is reproducibility and self-awareness.

First, perform a rigorous 7-step analysis process.
1.  **Identify Timeframe:** State the chart's timeframe.
2.  **Identify Key Levels:** Quantify major support and resistance levels.
3.  **Analyze Chart Patterns:** Name any identified classic patterns and their implications.
4.  **Examine Indicators:** For each visible indicator, state its value and implication.
5.  **Assess Volume:** Describe the volume and correlate it with price action.
6.  **Synthesize Findings:** Briefly summarize the confluence of factors.
7.  **Verification & Confidence Score:** Critically review your own analysis from steps 1-6. Note any conflicting signals, weaknesses, or reasons for caution. Based on this self-critique, provide a final numerical 'overallConfidenceScore' from 0 (no confidence) to 100 (perfect confidence).

After your internal analysis, you MUST provide your entire response as a single, valid, minified JSON object conforming to the provided schema.

- The complete 7-step analysis MUST be placed in the 'thinkingProcess' field as a single Markdown string.
- The self-critique MUST be placed in 'verificationSummary'.
- The final score MUST be placed in 'overallConfidenceScore'.
- The 'confidence' field must be 'HIGH' if 'overallConfidenceScore' is 70 or greater, otherwise it must be 'LOW'.
- If 'confidence' is 'LOW' or 'signal' is 'NEUTRAL', the 'trade' and 'riskRewardRatio' fields MUST be null.
- If you provide a 'trade' signal, you MUST calculate the 'riskRewardRatio'.
  - For a BUY signal: Risk/Reward = (Take Profit - Entry) / (Entry - Stop Loss).
  - For a SELL signal: Risk/Reward = (Entry - Take Profit) / (Stop Loss - Entry).
  - Format the result as a string like "2.5:1". Round to one decimal place.

Do not add any text, formatting, or markdown backticks before or after the final JSON object. Your entire output must be the JSON object itself.`,L2=`You are Wizz Ultra, a world-class quantitative crypto analyst and trading algorithm. Your analysis is not mere technical analysis; it's a multi-layered, institutional-grade assessment. You operate with extreme precision, logical rigor, and a deep, holistic understanding of market dynamics. Mistakes are not an option. Your sole purpose is to provide the most accurate, profitable, and risk-managed analysis possible.

You will conduct a three-pass verification process for every chart:

**PASS 1: Core Technical Analysis (The Foundation)**
1.  **Timeframe & Asset:** Identify the asset and chart timeframe.
2.  **Market Structure:** Define the primary, secondary, and tertiary trends. Identify key swing highs and lows, and market structure breaks (MSB) or changes of character (CHoCH).
3.  **Liquidity Mapping:** Identify key liquidity zones: equal highs/lows, trendline liquidity, old highs/lows. Where is the "smart money" likely to hunt for stops?
4.  **Supply & Demand Zones:** Pinpoint significant, unmitigated order blocks, breaker blocks, and fair value gaps (FVGs) or imbalances. Quantify these price ranges.
5.  **Classic & Advanced Patterns:** Identify any classic patterns (e.g., Head & Shoulders, Triangles) and advanced formations (e.g., Wyckoff accumulation/distribution schematics, Elliott Wave counts). State the textbook implications.
6.  **Indicator Confluence:** Analyze visible indicators (RSI, MACD, MAs, etc.). Note any divergences (regular/hidden), convergences, or key level crosses. Do not just state the reading; state its implication within the current market structure.
7.  **Volume & Volatility Profile:** Analyze volume. Is it confirming price action? Note any high-volume climactic moves or low-volume corrections. Correlate with volatility.

**PASS 2: Cross-Examination & Self-Correction (The Gauntlet)**
-  **Bearish Thesis:** Force yourself to construct the strongest possible argument AGAINST your initial bullish/neutral findings. What could go wrong? Where is the analysis weakest? Identify conflicting signals between indicators, patterns, and market structure.
-  **Bullish Thesis:** Force yourself to construct the strongest possible argument AGAINST your initial bearish/neutral findings. What is the counter-argument? What bullish signals might you be downplaying?
-  **Re-evaluation:** Based on these counter-arguments, critically re-evaluate your findings from Pass 1. Refine your key levels and zones. Does the primary thesis still hold up under this scrutiny?

**PASS 3: Synthesis & Final Verdict (The Execution Plan)**
1.  **Synthesized Narrative:** Combine the findings from all passes into a coherent, final analysis narrative. This is your definitive read of the market.
2.  **Final Confidence Score:** Based on the degree of confluence and the severity of conflicting data found in Pass 2, provide a final 'overallConfidenceScore' from 0 to 100. Be brutally honest.
3.  **Final Signal Generation:** Based on the score, generate the final 'signal' ('BUY', 'SELL', 'NEUTRAL') and 'confidence' ('HIGH' for score >= 70, 'LOW' otherwise).
4.  **Trade Parameters (High Confidence ONLY):** If confidence is 'HIGH', provide a precise 'trade' plan with 'entryPrice', 'takeProfit', and 'stopLoss'. The entry should be a specific level, not a wide range. The stop loss must be placed logically based on market structure (e.g., below a swing low or invalidation point).
5.  **Risk/Reward Calculation:** If a trade is provided, calculate and include the 'riskRewardRatio'.

After this entire internal process, you MUST provide your response as a single, valid, minified JSON object conforming to the provided schema.

- The 'thinkingProcess' field must contain the complete, detailed output of all three passes, formatted in Markdown.
- The 'verificationSummary' will contain a concise summary of the key findings from Pass 2 (the cross-examination).
- Adhere strictly to all schema requirements regarding null fields and data types. Your entire output must be only the JSON object.`,U2="You are Wizz, an expert AI assistant specializing in cryptocurrency and technical analysis. Engage in a helpful and informative conversation with the user. If they ask about analysis but don't provide a chart, ask them to upload one. Maintain a professional and knowledgeable tone. Your answers should be formatted in Markdown.",P2="You are Wizz Ultra, a world-class quantitative crypto analyst AI. Your knowledge is vast and precise. When a user asks a question without a chart, answer it with institutional-grade insight and clarity. If they ask for analysis, politely guide them to upload a chart to unlock your full capabilities. Be direct, insightful, and confident. Your answers should be formatted in Markdown.";async function*Sy(n,t,e,i,o){const l=n.filter(g=>g.role==="user"||g.role==="assistant"&&g.rawResponse).map(g=>{if(g.role==="assistant")return{role:"model",parts:[{text:g.rawResponse}]};const _=[];typeof g.content=="string"&&g.content.trim()&&_.push({text:g.content});const S=[];Array.isArray(g.images)&&g.images.length>0?S.push(...g.images):g.image&&S.push(g.image);for(const b of S){const w=b.split(";base64,");if(w.length===2){const E=w[0].split(":")[1],M=w[1];E&&M&&_.push({inlineData:{mimeType:E,data:M}})}}return{role:"user",parts:_}}).filter(g=>g.parts.length>0),u=[{text:t}];if(Array.isArray(e)&&e.length>0)for(const g of e)u.push({inlineData:{mimeType:g.mimeType,data:g.data}});const d=[...l,{role:"user",parts:u}],p=Array.isArray(e)&&e.length>0,m=p?{systemInstruction:o?L2:I2,temperature:0,topK:1,topP:1,seed:42,responseMimeType:"application/json",responseSchema:D2}:{systemInstruction:o?P2:U2,temperature:0,topK:1,topP:1,seed:42};try{const g=await N2.models.generateContentStream({model:"gemini-2.5-flash",contents:d,config:m});for await(const _ of g){if(i.aborted){console.log("Stream generation aborted by user.");break}yield _.text}}catch(g){if(!(g instanceof Error&&g.name==="AbortError")){console.error("Error during Gemini stream:",g);const _=`Details: ${g instanceof Error?g.message:String(g)}`;p?yield`{"error": "Could not retrieve analysis. ${_}"}`:yield`Sorry, I encountered an error and could not respond. Please try again. ${_}`}}}const by=n=>{let t;const e=new Set,i=(m,g)=>{const _=typeof m=="function"?m(t):m;if(!Object.is(_,t)){const S=t;t=g??(typeof _!="object"||_===null)?_:Object.assign({},t,_),e.forEach(b=>b(t,S))}},o=()=>t,d={setState:i,getState:o,getInitialState:()=>p,subscribe:m=>(e.add(m),()=>e.delete(m))},p=t=n(i,o,d);return d},z2=n=>n?by(n):by,V2=n=>n;function B2(n,t=V2){const e=Ys.useSyncExternalStore(n.subscribe,Ys.useCallback(()=>t(n.getState()),[n,t]),Ys.useCallback(()=>t(n.getInitialState()),[n,t]));return Ys.useDebugValue(e),e}const Ty=n=>{const t=z2(n),e=i=>B2(t,i);return Object.assign(e,t),e},z_=n=>n?Ty(n):Ty,O2="modulepreload",q2=function(n){return"/"+n},wy={},Vr=function(t,e,i){let o=Promise.resolve();if(e&&e.length>0){let u=function(m){return Promise.all(m.map(g=>Promise.resolve(g).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),p=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));o=u(e.map(m=>{if(m=q2(m),m in wy)return;wy[m]=!0;const g=m.endsWith(".css"),_=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${_}`))return;const S=document.createElement("link");if(S.rel=g?"stylesheet":O2,g||(S.as="script"),S.crossOrigin="",S.href=m,p&&S.setAttribute("nonce",p),document.head.appendChild(S),g)return new Promise((b,w)=>{S.addEventListener("load",b),S.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${m}`)))})}))}function l(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return o.then(u=>{for(const d of u||[])d.status==="rejected"&&l(d.reason);return t().catch(l)})},$2=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...e)=>Vr(async()=>{const{default:i}=await Promise.resolve().then(()=>co);return{default:i}},void 0).then(({default:i})=>i(...e)):t=fetch,(...e)=>t(...e)};class Rf extends Error{constructor(t,e="FunctionsError",i){super(t),this.name=e,this.context=i}}class H2 extends Rf{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Cy extends Rf{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class xy extends Rf{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Zh;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(Zh||(Zh={}));var G2=function(n,t,e,i){function o(l){return l instanceof e?l:new e(function(u){u(l)})}return new(e||(e=Promise))(function(l,u){function d(g){try{m(i.next(g))}catch(_){u(_)}}function p(g){try{m(i.throw(g))}catch(_){u(_)}}function m(g){g.done?l(g.value):o(g.value).then(d,p)}m((i=i.apply(n,t||[])).next())})};class F2{constructor(t,{headers:e={},customFetch:i,region:o=Zh.Any}={}){this.url=t,this.headers=e,this.region=o,this.fetch=$2(i)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,e={}){var i;return G2(this,void 0,void 0,function*(){try{const{headers:o,method:l,body:u}=e;let d={},{region:p}=e;p||(p=this.region);const m=new URL(`${this.url}/${t}`);p&&p!=="any"&&(d["x-region"]=p,m.searchParams.set("forceFunctionRegion",p));let g;u&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(d["Content-Type"]="application/octet-stream",g=u):typeof u=="string"?(d["Content-Type"]="text/plain",g=u):typeof FormData<"u"&&u instanceof FormData?g=u:(d["Content-Type"]="application/json",g=JSON.stringify(u)));const _=yield this.fetch(m.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},d),this.headers),o),body:g}).catch(E=>{throw new H2(E)}),S=_.headers.get("x-relay-error");if(S&&S==="true")throw new Cy(_);if(!_.ok)throw new xy(_);let b=((i=_.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),w;return b==="application/json"?w=yield _.json():b==="application/octet-stream"?w=yield _.blob():b==="text/event-stream"?w=_:b==="multipart/form-data"?w=yield _.formData():w=yield _.text(),{data:w,error:null,response:_}}catch(o){return{data:null,error:o,response:o instanceof xy||o instanceof Cy?o.context:void 0}}})}}var he={},Us={},Ps={},zs={},Vs={},Bs={},J2=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},no=J2();const K2=no.fetch,V_=no.fetch.bind(no),B_=no.Headers,Y2=no.Request,W2=no.Response,co=Object.freeze(Object.defineProperty({__proto__:null,Headers:B_,Request:Y2,Response:W2,default:V_,fetch:K2},Symbol.toStringTag,{value:"Module"})),X2=nw(co);var oa={},Ey;function O_(){if(Ey)return oa;Ey=1,Object.defineProperty(oa,"__esModule",{value:!0});class n extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}return oa.default=n,oa}var My;function q_(){if(My)return Bs;My=1;var n=Bs&&Bs.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Bs,"__esModule",{value:!0});const t=n(X2),e=n(O_());class i{constructor(l){this.shouldThrowOnError=!1,this.method=l.method,this.url=l.url,this.headers=l.headers,this.schema=l.schema,this.body=l.body,this.shouldThrowOnError=l.shouldThrowOnError,this.signal=l.signal,this.isMaybeSingle=l.isMaybeSingle,l.fetch?this.fetch=l.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(l,u){return this.headers=Object.assign({},this.headers),this.headers[l]=u,this}then(l,u){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const d=this.fetch;let p=d(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var g,_,S;let b=null,w=null,E=null,M=m.status,D=m.statusText;if(m.ok){if(this.method!=="HEAD"){const q=await m.text();q===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?w=q:w=JSON.parse(q))}const k=(g=this.headers.Prefer)===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),V=(_=m.headers.get("content-range"))===null||_===void 0?void 0:_.split("/");k&&V&&V.length>1&&(E=parseInt(V[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(w)&&(w.length>1?(b={code:"PGRST116",details:`Results contain ${w.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},w=null,E=null,M=406,D="Not Acceptable"):w.length===1?w=w[0]:w=null)}else{const k=await m.text();try{b=JSON.parse(k),Array.isArray(b)&&m.status===404&&(w=[],b=null,M=200,D="OK")}catch{m.status===404&&k===""?(M=204,D="No Content"):b={message:k}}if(b&&this.isMaybeSingle&&(!((S=b==null?void 0:b.details)===null||S===void 0)&&S.includes("0 rows"))&&(b=null,M=200,D="OK"),b&&this.shouldThrowOnError)throw new e.default(b)}return{error:b,data:w,count:E,status:M,statusText:D}});return this.shouldThrowOnError||(p=p.catch(m=>{var g,_,S;return{error:{message:`${(g=m==null?void 0:m.name)!==null&&g!==void 0?g:"FetchError"}: ${m==null?void 0:m.message}`,details:`${(_=m==null?void 0:m.stack)!==null&&_!==void 0?_:""}`,hint:"",code:`${(S=m==null?void 0:m.code)!==null&&S!==void 0?S:""}`},data:null,count:null,status:0,statusText:""}})),p.then(l,u)}returns(){return this}overrideTypes(){return this}}return Bs.default=i,Bs}var Ay;function $_(){if(Ay)return Vs;Ay=1;var n=Vs&&Vs.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Vs,"__esModule",{value:!0});const t=n(q_());class e extends t.default{select(o){let l=!1;const u=(o??"*").split("").map(d=>/\s/.test(d)&&!l?"":(d==='"'&&(l=!l),d)).join("");return this.url.searchParams.set("select",u),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(o,{ascending:l=!0,nullsFirst:u,foreignTable:d,referencedTable:p=d}={}){const m=p?`${p}.order`:"order",g=this.url.searchParams.get(m);return this.url.searchParams.set(m,`${g?`${g},`:""}${o}.${l?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:l,referencedTable:u=l}={}){const d=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(d,`${o}`),this}range(o,l,{foreignTable:u,referencedTable:d=u}={}){const p=typeof d>"u"?"offset":`${d}.offset`,m=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(p,`${o}`),this.url.searchParams.set(m,`${l-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:o=!1,verbose:l=!1,settings:u=!1,buffers:d=!1,wal:p=!1,format:m="text"}={}){var g;const _=[o?"analyze":null,l?"verbose":null,u?"settings":null,d?"buffers":null,p?"wal":null].filter(Boolean).join("|"),S=(g=this.headers.Accept)!==null&&g!==void 0?g:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${m}; for="${S}"; options=${_};`,m==="json"?this:this}rollback(){var o;return((o=this.headers.Prefer)!==null&&o!==void 0?o:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Vs.default=e,Vs}var Ry;function kf(){if(Ry)return zs;Ry=1;var n=zs&&zs.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(zs,"__esModule",{value:!0});const t=n($_());class e extends t.default{eq(o,l){return this.url.searchParams.append(o,`eq.${l}`),this}neq(o,l){return this.url.searchParams.append(o,`neq.${l}`),this}gt(o,l){return this.url.searchParams.append(o,`gt.${l}`),this}gte(o,l){return this.url.searchParams.append(o,`gte.${l}`),this}lt(o,l){return this.url.searchParams.append(o,`lt.${l}`),this}lte(o,l){return this.url.searchParams.append(o,`lte.${l}`),this}like(o,l){return this.url.searchParams.append(o,`like.${l}`),this}likeAllOf(o,l){return this.url.searchParams.append(o,`like(all).{${l.join(",")}}`),this}likeAnyOf(o,l){return this.url.searchParams.append(o,`like(any).{${l.join(",")}}`),this}ilike(o,l){return this.url.searchParams.append(o,`ilike.${l}`),this}ilikeAllOf(o,l){return this.url.searchParams.append(o,`ilike(all).{${l.join(",")}}`),this}ilikeAnyOf(o,l){return this.url.searchParams.append(o,`ilike(any).{${l.join(",")}}`),this}is(o,l){return this.url.searchParams.append(o,`is.${l}`),this}in(o,l){const u=Array.from(new Set(l)).map(d=>typeof d=="string"&&new RegExp("[,()]").test(d)?`"${d}"`:`${d}`).join(",");return this.url.searchParams.append(o,`in.(${u})`),this}contains(o,l){return typeof l=="string"?this.url.searchParams.append(o,`cs.${l}`):Array.isArray(l)?this.url.searchParams.append(o,`cs.{${l.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(l)}`),this}containedBy(o,l){return typeof l=="string"?this.url.searchParams.append(o,`cd.${l}`):Array.isArray(l)?this.url.searchParams.append(o,`cd.{${l.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(l)}`),this}rangeGt(o,l){return this.url.searchParams.append(o,`sr.${l}`),this}rangeGte(o,l){return this.url.searchParams.append(o,`nxl.${l}`),this}rangeLt(o,l){return this.url.searchParams.append(o,`sl.${l}`),this}rangeLte(o,l){return this.url.searchParams.append(o,`nxr.${l}`),this}rangeAdjacent(o,l){return this.url.searchParams.append(o,`adj.${l}`),this}overlaps(o,l){return typeof l=="string"?this.url.searchParams.append(o,`ov.${l}`):this.url.searchParams.append(o,`ov.{${l.join(",")}}`),this}textSearch(o,l,{config:u,type:d}={}){let p="";d==="plain"?p="pl":d==="phrase"?p="ph":d==="websearch"&&(p="w");const m=u===void 0?"":`(${u})`;return this.url.searchParams.append(o,`${p}fts${m}.${l}`),this}match(o){return Object.entries(o).forEach(([l,u])=>{this.url.searchParams.append(l,`eq.${u}`)}),this}not(o,l,u){return this.url.searchParams.append(o,`not.${l}.${u}`),this}or(o,{foreignTable:l,referencedTable:u=l}={}){const d=u?`${u}.or`:"or";return this.url.searchParams.append(d,`(${o})`),this}filter(o,l,u){return this.url.searchParams.append(o,`${l}.${u}`),this}}return zs.default=e,zs}var ky;function H_(){if(ky)return Ps;ky=1;var n=Ps&&Ps.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ps,"__esModule",{value:!0});const t=n(kf());class e{constructor(o,{headers:l={},schema:u,fetch:d}){this.url=o,this.headers=l,this.schema=u,this.fetch=d}select(o,{head:l=!1,count:u}={}){const d=l?"HEAD":"GET";let p=!1;const m=(o??"*").split("").map(g=>/\s/.test(g)&&!p?"":(g==='"'&&(p=!p),g)).join("");return this.url.searchParams.set("select",m),u&&(this.headers.Prefer=`count=${u}`),new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(o,{count:l,defaultToNull:u=!0}={}){const d="POST",p=[];if(this.headers.Prefer&&p.push(this.headers.Prefer),l&&p.push(`count=${l}`),u||p.push("missing=default"),this.headers.Prefer=p.join(","),Array.isArray(o)){const m=o.reduce((g,_)=>g.concat(Object.keys(_)),[]);if(m.length>0){const g=[...new Set(m)].map(_=>`"${_}"`);this.url.searchParams.set("columns",g.join(","))}}return new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}upsert(o,{onConflict:l,ignoreDuplicates:u=!1,count:d,defaultToNull:p=!0}={}){const m="POST",g=[`resolution=${u?"ignore":"merge"}-duplicates`];if(l!==void 0&&this.url.searchParams.set("on_conflict",l),this.headers.Prefer&&g.push(this.headers.Prefer),d&&g.push(`count=${d}`),p||g.push("missing=default"),this.headers.Prefer=g.join(","),Array.isArray(o)){const _=o.reduce((S,b)=>S.concat(Object.keys(b)),[]);if(_.length>0){const S=[...new Set(_)].map(b=>`"${b}"`);this.url.searchParams.set("columns",S.join(","))}}return new t.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}update(o,{count:l}={}){const u="PATCH",d=[];return this.headers.Prefer&&d.push(this.headers.Prefer),l&&d.push(`count=${l}`),this.headers.Prefer=d.join(","),new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}delete({count:o}={}){const l="DELETE",u=[];return o&&u.push(`count=${o}`),this.headers.Prefer&&u.unshift(this.headers.Prefer),this.headers.Prefer=u.join(","),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Ps.default=e,Ps}var mr={},gr={},Ny;function Q2(){return Ny||(Ny=1,Object.defineProperty(gr,"__esModule",{value:!0}),gr.version=void 0,gr.version="0.0.0-automated"),gr}var Dy;function Z2(){if(Dy)return mr;Dy=1,Object.defineProperty(mr,"__esModule",{value:!0}),mr.DEFAULT_HEADERS=void 0;const n=Q2();return mr.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${n.version}`},mr}var Iy;function j2(){if(Iy)return Us;Iy=1;var n=Us&&Us.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Us,"__esModule",{value:!0});const t=n(H_()),e=n(kf()),i=Z2();class o{constructor(u,{headers:d={},schema:p,fetch:m}={}){this.url=u,this.headers=Object.assign(Object.assign({},i.DEFAULT_HEADERS),d),this.schemaName=p,this.fetch=m}from(u){const d=new URL(`${this.url}/${u}`);return new t.default(d,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(u){return new o(this.url,{headers:this.headers,schema:u,fetch:this.fetch})}rpc(u,d={},{head:p=!1,get:m=!1,count:g}={}){let _;const S=new URL(`${this.url}/rpc/${u}`);let b;p||m?(_=p?"HEAD":"GET",Object.entries(d).filter(([E,M])=>M!==void 0).map(([E,M])=>[E,Array.isArray(M)?`{${M.join(",")}}`:`${M}`]).forEach(([E,M])=>{S.searchParams.append(E,M)})):(_="POST",b=d);const w=Object.assign({},this.headers);return g&&(w.Prefer=`count=${g}`),new e.default({method:_,url:S,headers:w,schema:this.schemaName,body:b,fetch:this.fetch,allowEmpty:!1})}}return Us.default=o,Us}var Ly;function tD(){if(Ly)return he;Ly=1;var n=he&&he.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(he,"__esModule",{value:!0}),he.PostgrestError=he.PostgrestBuilder=he.PostgrestTransformBuilder=he.PostgrestFilterBuilder=he.PostgrestQueryBuilder=he.PostgrestClient=void 0;const t=n(j2());he.PostgrestClient=t.default;const e=n(H_());he.PostgrestQueryBuilder=e.default;const i=n(kf());he.PostgrestFilterBuilder=i.default;const o=n($_());he.PostgrestTransformBuilder=o.default;const l=n(q_());he.PostgrestBuilder=l.default;const u=n(O_());return he.PostgrestError=u.default,he.default={PostgrestClient:t.default,PostgrestQueryBuilder:e.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:l.default,PostgrestError:u.default},he}var eD=tD();const nD=gf(eD),{PostgrestClient:iD,PostgrestQueryBuilder:QP,PostgrestFilterBuilder:ZP,PostgrestTransformBuilder:jP,PostgrestBuilder:tz,PostgrestError:ez}=nD;class sD{static dynamicRequire(t){try{return typeof process<"u"&&process.versions&&process.versions.node&&typeof require<"u"?require(t):null}catch{return null}}static detectEnvironment(){var t,e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const i=parseInt(process.versions.node.split(".")[0]);if(i>=22)try{if(typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};const o=this.dynamicRequire("undici");if(o&&o.WebSocket)return{type:"native",constructor:o.WebSocket};throw new Error("undici not available")}catch{return{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:'Install the "ws" package or check your Node.js installation.'}}try{const o=this.dynamicRequire("ws");if(o)return{type:"ws",constructor:(e=o.WebSocket)!==null&&e!==void 0?e:o};throw new Error("ws package not available")}catch{return{type:"unsupported",error:`Node.js ${i} detected without WebSocket support.`,workaround:'Install the "ws" package: npm install ws'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let e=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(e+=`

Suggested solution: ${t.workaround}`),new Error(e)}static createWebSocket(t,e){const i=this.getWebSocketConstructor();return new i(t,e)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const oD="2.15.0",rD=`realtime-js/${oD}`,lD="1.0.0",jh=1e4,aD=1e3,uD=100;var Tr;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Tr||(Tr={}));var oe;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(oe||(oe={}));var nn;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(nn||(nn={}));var tf;(function(n){n.websocket="websocket"})(tf||(tf={}));var zi;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(zi||(zi={}));class cD{constructor(){this.HEADER_LENGTH=1}decode(t,e){return t.constructor===ArrayBuffer?e(this._binaryDecode(t)):e(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const e=new DataView(t),i=new TextDecoder;return this._decodeBroadcast(t,e,i)}_decodeBroadcast(t,e,i){const o=e.getUint8(1),l=e.getUint8(2);let u=this.HEADER_LENGTH+2;const d=i.decode(t.slice(u,u+o));u=u+o;const p=i.decode(t.slice(u,u+l));u=u+l;const m=JSON.parse(i.decode(t.slice(u,t.byteLength)));return{ref:null,topic:d,event:p,payload:m}}}class G_{constructor(t,e){this.callback=t,this.timerCalc=e,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=e}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var $t;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})($t||($t={}));const Uy=(n,t,e={})=>{var i;const o=(i=e.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(t).reduce((l,u)=>(l[u]=hD(u,n,t,o),l),{})},hD=(n,t,e,i)=>{const o=t.find(d=>d.name===n),l=o==null?void 0:o.type,u=e[n];return l&&!i.includes(l)?F_(l,u):ef(u)},F_=(n,t)=>{if(n.charAt(0)==="_"){const e=n.slice(1,n.length);return mD(t,e)}switch(n){case $t.bool:return fD(t);case $t.float4:case $t.float8:case $t.int2:case $t.int4:case $t.int8:case $t.numeric:case $t.oid:return dD(t);case $t.json:case $t.jsonb:return pD(t);case $t.timestamp:return gD(t);case $t.abstime:case $t.date:case $t.daterange:case $t.int4range:case $t.int8range:case $t.money:case $t.reltime:case $t.text:case $t.time:case $t.timestamptz:case $t.timetz:case $t.tsrange:case $t.tstzrange:return ef(t);default:return ef(t)}},ef=n=>n,fD=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},dD=n=>{if(typeof n=="string"){const t=parseFloat(n);if(!Number.isNaN(t))return t}return n},pD=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(t){return console.log(`JSON parse error: ${t}`),n}return n},mD=(n,t)=>{if(typeof n!="string")return n;const e=n.length-1,i=n[e];if(n[0]==="{"&&i==="}"){let l;const u=n.slice(1,e);try{l=JSON.parse("["+u+"]")}catch{l=u?u.split(","):[]}return l.map(d=>F_(t,d))}return n},gD=n=>typeof n=="string"?n.replace(" ","T"):n,J_=n=>{let t=n;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class hh{constructor(t,e,i={},o=jh){this.channel=t,this.event=e,this.payload=i,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,e){var i;return this._hasReceived(t)&&e((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:t,callback:e}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,e){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:e})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:e}){this.recHooks.filter(i=>i.status===t).forEach(i=>i.callback(e))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Py;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(Py||(Py={}));class wr{constructor(t,e){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(e==null?void 0:e.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},o=>{const{onJoin:l,onLeave:u,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=wr.syncState(this.state,o,l,u),this.pendingDiffs.forEach(p=>{this.state=wr.syncDiff(this.state,p,l,u)}),this.pendingDiffs=[],d()}),this.channel._on(i.diff,{},o=>{const{onJoin:l,onLeave:u,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=wr.syncDiff(this.state,o,l,u),d())}),this.onJoin((o,l,u)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:l,newPresences:u})}),this.onLeave((o,l,u)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:l,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,e,i,o){const l=this.cloneDeep(t),u=this.transformState(e),d={},p={};return this.map(l,(m,g)=>{u[m]||(p[m]=g)}),this.map(u,(m,g)=>{const _=l[m];if(_){const S=g.map(M=>M.presence_ref),b=_.map(M=>M.presence_ref),w=g.filter(M=>b.indexOf(M.presence_ref)<0),E=_.filter(M=>S.indexOf(M.presence_ref)<0);w.length>0&&(d[m]=w),E.length>0&&(p[m]=E)}else d[m]=g}),this.syncDiff(l,{joins:d,leaves:p},i,o)}static syncDiff(t,e,i,o){const{joins:l,leaves:u}={joins:this.transformState(e.joins),leaves:this.transformState(e.leaves)};return i||(i=()=>{}),o||(o=()=>{}),this.map(l,(d,p)=>{var m;const g=(m=t[d])!==null&&m!==void 0?m:[];if(t[d]=this.cloneDeep(p),g.length>0){const _=t[d].map(b=>b.presence_ref),S=g.filter(b=>_.indexOf(b.presence_ref)<0);t[d].unshift(...S)}i(d,g,p)}),this.map(u,(d,p)=>{let m=t[d];if(!m)return;const g=p.map(_=>_.presence_ref);m=m.filter(_=>g.indexOf(_.presence_ref)<0),t[d]=m,o(d,m,p),m.length===0&&delete t[d]}),t}static map(t,e){return Object.getOwnPropertyNames(t).map(i=>e(i,t[i]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((e,i)=>{const o=t[i];return"metas"in o?e[i]=o.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):e[i]=o,e},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var zy;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(zy||(zy={}));var Cr;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Cr||(Cr={}));var Dn;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(Dn||(Dn={}));class Nf{constructor(t,e={config:{}},i){this.topic=t,this.params=e,this.socket=i,this.bindings={},this.state=oe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},e.config),this.timeout=this.socket.timeout,this.joinPush=new hh(this,nn.join,this.params,this.timeout),this.rejoinTimer=new G_(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=oe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=oe.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=oe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=oe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=oe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(nn.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new wr(this),this.broadcastEndpointURL=J_(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,e=this.timeout){var i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==oe.closed){const{config:{broadcast:l,presence:u,private:d}}=this.params,p=(o=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(S=>S.filter))!==null&&o!==void 0?o:[],m=!!this.bindings[Cr.PRESENCE]&&this.bindings[Cr.PRESENCE].length>0,g={},_={broadcast:l,presence:Object.assign(Object.assign({},u),{enabled:m}),postgres_changes:p,private:d};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this._onError(S=>t==null?void 0:t(Dn.CHANNEL_ERROR,S)),this._onClose(()=>t==null?void 0:t(Dn.CLOSED)),this.updateJoinPayload(Object.assign({config:_},g)),this.joinedOnce=!0,this._rejoin(e),this.joinPush.receive("ok",async({postgres_changes:S})=>{var b;if(this.socket.setAuth(),S===void 0){t==null||t(Dn.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,E=(b=w==null?void 0:w.length)!==null&&b!==void 0?b:0,M=[];for(let D=0;D<E;D++){const U=w[D],{filter:{event:k,schema:V,table:q,filter:J}}=U,W=S&&S[D];if(W&&W.event===k&&W.schema===V&&W.table===q&&W.filter===J)M.push(Object.assign(Object.assign({},U),{id:W.id}));else{this.unsubscribe(),this.state=oe.errored,t==null||t(Dn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=M,t&&t(Dn.SUBSCRIBED);return}}).receive("error",S=>{this.state=oe.errored,t==null||t(Dn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(S).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Dn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,e={}){return await this.send({type:"presence",event:"track",payload:t},e.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,e,i){return this.state===oe.joined&&t===Cr.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,e,i)}async send(t,e={}){var i,o;if(!this._canPush()&&t.type==="broadcast"){const{event:l,payload:u}=t,p={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:u,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(i=e.timeout)!==null&&i!==void 0?i:this.timeout);return await((o=m.body)===null||o===void 0?void 0:o.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var u,d,p;const m=this._push(t.type,t,e.timeout||this.timeout);t.type==="broadcast"&&!(!((p=(d=(u=this.params)===null||u===void 0?void 0:u.config)===null||d===void 0?void 0:d.broadcast)===null||p===void 0)&&p.ack)&&l("ok"),m.receive("ok",()=>l("ok")),m.receive("error",()=>l("error")),m.receive("timeout",()=>l("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=oe.leaving;const e=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(nn.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(o=>{i=new hh(this,nn.leave,{},t),i.receive("ok",()=>{e(),o("ok")}).receive("timeout",()=>{e(),o("timed out")}).receive("error",()=>{o("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=oe.closed,this.bindings={}}async _fetchWithTimeout(t,e,i){const o=new AbortController,l=setTimeout(()=>o.abort(),i),u=await this.socket.fetch(t,Object.assign(Object.assign({},e),{signal:o.signal}));return clearTimeout(l),u}_push(t,e,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new hh(this,t,e,i);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>uD){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(t,e,i){return e}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,e,i){var o,l;const u=t.toLocaleLowerCase(),{close:d,error:p,leave:m,join:g}=nn;if(i&&[d,p,m,g].indexOf(u)>=0&&i!==this._joinRef())return;let S=this._onMessage(u,e,i);if(e&&!S)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(b=>{var w,E,M;return((w=b.filter)===null||w===void 0?void 0:w.event)==="*"||((M=(E=b.filter)===null||E===void 0?void 0:E.event)===null||M===void 0?void 0:M.toLocaleLowerCase())===u}).map(b=>b.callback(S,i)):(l=this.bindings[u])===null||l===void 0||l.filter(b=>{var w,E,M,D,U,k;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in b){const V=b.id,q=(w=b.filter)===null||w===void 0?void 0:w.event;return V&&((E=e.ids)===null||E===void 0?void 0:E.includes(V))&&(q==="*"||(q==null?void 0:q.toLocaleLowerCase())===((M=e.data)===null||M===void 0?void 0:M.type.toLocaleLowerCase()))}else{const V=(U=(D=b==null?void 0:b.filter)===null||D===void 0?void 0:D.event)===null||U===void 0?void 0:U.toLocaleLowerCase();return V==="*"||V===((k=e==null?void 0:e.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===u}).map(b=>{if(typeof S=="object"&&"ids"in S){const w=S.data,{schema:E,table:M,commit_timestamp:D,type:U,errors:k}=w;S=Object.assign(Object.assign({},{schema:E,table:M,commit_timestamp:D,eventType:U,new:{},old:{},errors:k}),this._getPayloadRecords(w))}b.callback(S,i)})}_isClosed(){return this.state===oe.closed}_isJoined(){return this.state===oe.joined}_isJoining(){return this.state===oe.joining}_isLeaving(){return this.state===oe.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,e,i){const o=t.toLocaleLowerCase(),l={type:o,filter:e,callback:i};return this.bindings[o]?this.bindings[o].push(l):this.bindings[o]=[l],this}_off(t,e){const i=t.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(o=>{var l;return!(((l=o.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===i&&Nf.isEqual(o.filter,e))})),this}static isEqual(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const i in t)if(t[i]!==e[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(nn.close,{},t)}_onError(t){this._on(nn.error,{},e=>t(e))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=oe.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const e={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(e.new=Uy(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(e.old=Uy(t.columns,t.old_record)),e}}const Vy=()=>{},ra={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},vD=[1e3,2e3,5e3,1e4],yD=1e4,_D=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class SD{constructor(t,e){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=jh,this.transport=null,this.heartbeatIntervalMs=ra.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Vy,this.ref=0,this.reconnectTimer=null,this.logger=Vy,this.conn=null,this.sendBuffer=[],this.serializer=new cD,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>{let l;return o?l=o:typeof fetch>"u"?l=(...u)=>Vr(async()=>{const{default:d}=await Promise.resolve().then(()=>co);return{default:d}},void 0).then(({default:d})=>d(...u)).catch(d=>{throw new Error(`Failed to load @supabase/node-fetch: ${d.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):l=fetch,(...u)=>l(...u)},!(!((i=e==null?void 0:e.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=e.params.apikey,this.endPoint=`${t}/${tf.websocket}`,this.httpEndpoint=J_(t),this._initializeOptions(e),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(e==null?void 0:e.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=sD.createWebSocket(this.endpointURL())}catch(t){throw this._setConnectionState("disconnected"),new Error(`WebSocket not available: ${t.message}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:lD}))}disconnect(t,e){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},t?this.conn.close(t,e??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const e=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),e}async removeAllChannels(){const t=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,e,i){this.logger(t,e,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Tr.connecting:return zi.Connecting;case Tr.open:return zi.Open;case Tr.closing:return zi.Closing;default:return zi.Closed}}isConnected(){return this.connectionState()===zi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,e={config:{}}){const i=`realtime:${t}`,o=this.getChannels().find(l=>l.topic===i);if(o)return o;{const l=new Nf(`realtime:${t}`,e,this);return this.channels.push(l),l}}push(t){const{topic:e,event:i,payload:o,ref:l}=t,u=()=>{this.encode(t,d=>{var p;(p=this.conn)===null||p===void 0||p.send(d)})};this.log("push",`${e} ${i} (${l})`,o),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(aD,"heartbeat timeout"),setTimeout(()=>{var e;this.isConnected()||(e=this.reconnectTimer)===null||e===void 0||e.scheduleTimeout()},ra.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let e=this.channels.find(i=>i.topic===t&&(i._isJoined()||i._isJoining()));e&&(this.log("transport",`leaving duplicate topic "${t}"`),e.unsubscribe())}_remove(t){this.channels=this.channels.filter(e=>e.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,e=>{e.topic==="phoenix"&&e.event==="phx_reply"&&this.heartbeatCallback(e.payload.status==="ok"?"ok":"error"),e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:o,payload:l,ref:u}=e,d=u?`(${u})`:"",p=l.status||"";this.log("receive",`${p} ${i} ${o} ${d}`.trim(),l),this.channels.filter(m=>m._isMember(i)).forEach(m=>m._trigger(o,l,u)),this._triggerStateCallbacks("message",e)})}_clearTimer(t){var e;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((e=this.reconnectTimer)===null||e===void 0||e.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{e.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var e;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(e=this.reconnectTimer)===null||e===void 0||e.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(nn.error))}_appendParams(t,e){if(Object.keys(e).length===0)return t;const i=t.match(/\?/)?"&":"?",o=new URLSearchParams(e);return`${t}${i}${o}`}_workerObjectUrl(t){let e;if(t)e=t;else{const i=new Blob([_D],{type:"application/javascript"});e=URL.createObjectURL(i)}return e}_setConnectionState(t,e=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=e)}async _performAuth(t=null){let e;t?e=t:this.accessToken?e=await this.accessToken():e=this.accessTokenValue,this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(i=>{const o={access_token:e,version:rD};e&&i.updateJoinPayload(o),i.joinedOnce&&i._isJoined()&&i._push(nn.access_token,{access_token:e})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(e=>{this.log("error",`error setting auth in ${t}`,e)})}_triggerStateCallbacks(t,e){try{this.stateChangeCallbacks[t].forEach(i=>{try{i(e)}catch(o){this.log("error",`error in ${t} callback`,o)}})}catch(i){this.log("error",`error triggering ${t} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new G_(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ra.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var e,i,o,l,u,d,p,m;if(this.transport=(e=t==null?void 0:t.transport)!==null&&e!==void 0?e:null,this.timeout=(i=t==null?void 0:t.timeout)!==null&&i!==void 0?i:jh,this.heartbeatIntervalMs=(o=t==null?void 0:t.heartbeatIntervalMs)!==null&&o!==void 0?o:ra.HEARTBEAT_INTERVAL,this.worker=(l=t==null?void 0:t.worker)!==null&&l!==void 0?l:!1,this.accessToken=(u=t==null?void 0:t.accessToken)!==null&&u!==void 0?u:null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=t==null?void 0:t.reconnectAfterMs)!==null&&d!==void 0?d:g=>vD[g-1]||yD,this.encode=(p=t==null?void 0:t.encode)!==null&&p!==void 0?p:(g,_)=>_(JSON.stringify(g)),this.decode=(m=t==null?void 0:t.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Df extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function fe(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class bD extends Df{constructor(t,e,i){super(t),this.name="StorageApiError",this.status=e,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class nf extends Df{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}}var TD=function(n,t,e,i){function o(l){return l instanceof e?l:new e(function(u){u(l)})}return new(e||(e=Promise))(function(l,u){function d(g){try{m(i.next(g))}catch(_){u(_)}}function p(g){try{m(i.throw(g))}catch(_){u(_)}}function m(g){g.done?l(g.value):o(g.value).then(d,p)}m((i=i.apply(n,t||[])).next())})};const K_=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...e)=>Vr(async()=>{const{default:i}=await Promise.resolve().then(()=>co);return{default:i}},void 0).then(({default:i})=>i(...e)):t=fetch,(...e)=>t(...e)},wD=()=>TD(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Vr(()=>Promise.resolve().then(()=>co),void 0)).Response:Response}),sf=n=>{if(Array.isArray(n))return n.map(e=>sf(e));if(typeof n=="function"||n!==Object(n))return n;const t={};return Object.entries(n).forEach(([e,i])=>{const o=e.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));t[o]=sf(i)}),t},CD=n=>{if(typeof n!="object"||n===null)return!1;const t=Object.getPrototypeOf(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var Wi=function(n,t,e,i){function o(l){return l instanceof e?l:new e(function(u){u(l)})}return new(e||(e=Promise))(function(l,u){function d(g){try{m(i.next(g))}catch(_){u(_)}}function p(g){try{m(i.throw(g))}catch(_){u(_)}}function m(g){g.done?l(g.value):o(g.value).then(d,p)}m((i=i.apply(n,t||[])).next())})};const fh=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),xD=(n,t,e)=>Wi(void 0,void 0,void 0,function*(){const i=yield wD();n instanceof i&&!(e!=null&&e.noResolveJson)?n.json().then(o=>{const l=n.status||500,u=(o==null?void 0:o.statusCode)||l+"";t(new bD(fh(o),l,u))}).catch(o=>{t(new nf(fh(o),o))}):t(new nf(fh(n),n))}),ED=(n,t,e,i)=>{const o={method:n,headers:(t==null?void 0:t.headers)||{}};return n==="GET"||!i?o:(CD(i)?(o.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),o.body=JSON.stringify(i)):o.body=i,Object.assign(Object.assign({},o),e))};function Br(n,t,e,i,o,l){return Wi(this,void 0,void 0,function*(){return new Promise((u,d)=>{n(e,ED(t,i,o,l)).then(p=>{if(!p.ok)throw p;return i!=null&&i.noResolveJson?p:p.json()}).then(p=>u(p)).catch(p=>xD(p,d,i))})})}function Ra(n,t,e,i){return Wi(this,void 0,void 0,function*(){return Br(n,"GET",t,e,i)})}function In(n,t,e,i,o){return Wi(this,void 0,void 0,function*(){return Br(n,"POST",t,i,o,e)})}function of(n,t,e,i,o){return Wi(this,void 0,void 0,function*(){return Br(n,"PUT",t,i,o,e)})}function MD(n,t,e,i){return Wi(this,void 0,void 0,function*(){return Br(n,"HEAD",t,Object.assign(Object.assign({},e),{noResolveJson:!0}),i)})}function Y_(n,t,e,i,o){return Wi(this,void 0,void 0,function*(){return Br(n,"DELETE",t,i,o,e)})}var Re=function(n,t,e,i){function o(l){return l instanceof e?l:new e(function(u){u(l)})}return new(e||(e=Promise))(function(l,u){function d(g){try{m(i.next(g))}catch(_){u(_)}}function p(g){try{m(i.throw(g))}catch(_){u(_)}}function m(g){g.done?l(g.value):o(g.value).then(d,p)}m((i=i.apply(n,t||[])).next())})};const AD={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},By={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class RD{constructor(t,e={},i,o){this.url=t,this.headers=e,this.bucketId=i,this.fetch=K_(o)}uploadOrUpdate(t,e,i,o){return Re(this,void 0,void 0,function*(){try{let l;const u=Object.assign(Object.assign({},By),o);let d=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(u.upsert)});const p=u.metadata;typeof Blob<"u"&&i instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),p&&l.append("metadata",this.encodeMetadata(p)),l.append("",i)):typeof FormData<"u"&&i instanceof FormData?(l=i,l.append("cacheControl",u.cacheControl),p&&l.append("metadata",this.encodeMetadata(p))):(l=i,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType,p&&(d["x-metadata"]=this.toBase64(this.encodeMetadata(p)))),o!=null&&o.headers&&(d=Object.assign(Object.assign({},d),o.headers));const m=this._removeEmptyFolders(e),g=this._getFinalPath(m),_=yield(t=="PUT"?of:In)(this.fetch,`${this.url}/object/${g}`,l,Object.assign({headers:d},u!=null&&u.duplex?{duplex:u.duplex}:{}));return{data:{path:m,id:_.Id,fullPath:_.Key},error:null}}catch(l){if(fe(l))return{data:null,error:l};throw l}})}upload(t,e,i){return Re(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,e,i)})}uploadToSignedUrl(t,e,i,o){return Re(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(t),u=this._getFinalPath(l),d=new URL(this.url+`/object/upload/sign/${u}`);d.searchParams.set("token",e);try{let p;const m=Object.assign({upsert:By.upsert},o),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&i instanceof Blob?(p=new FormData,p.append("cacheControl",m.cacheControl),p.append("",i)):typeof FormData<"u"&&i instanceof FormData?(p=i,p.append("cacheControl",m.cacheControl)):(p=i,g["cache-control"]=`max-age=${m.cacheControl}`,g["content-type"]=m.contentType);const _=yield of(this.fetch,d.toString(),p,{headers:g});return{data:{path:l,fullPath:_.Key},error:null}}catch(p){if(fe(p))return{data:null,error:p};throw p}})}createSignedUploadUrl(t,e){return Re(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t);const o=Object.assign({},this.headers);e!=null&&e.upsert&&(o["x-upsert"]="true");const l=yield In(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:o}),u=new URL(this.url+l.url),d=u.searchParams.get("token");if(!d)throw new Df("No token returned by API");return{data:{signedUrl:u.toString(),path:t,token:d},error:null}}catch(i){if(fe(i))return{data:null,error:i};throw i}})}update(t,e,i){return Re(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,e,i)})}move(t,e,i){return Re(this,void 0,void 0,function*(){try{return{data:yield In(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(fe(o))return{data:null,error:o};throw o}})}copy(t,e,i){return Re(this,void 0,void 0,function*(){try{return{data:{path:(yield In(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(fe(o))return{data:null,error:o};throw o}})}createSignedUrl(t,e,i){return Re(this,void 0,void 0,function*(){try{let o=this._getFinalPath(t),l=yield In(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:e},i!=null&&i.transform?{transform:i.transform}:{}),{headers:this.headers});const u=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${u}`)},{data:l,error:null}}catch(o){if(fe(o))return{data:null,error:o};throw o}})}createSignedUrls(t,e,i){return Re(this,void 0,void 0,function*(){try{const o=yield In(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:e,paths:t},{headers:this.headers}),l=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:o.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${l}`):null})),error:null}}catch(o){if(fe(o))return{data:null,error:o};throw o}})}download(t,e){return Re(this,void 0,void 0,function*(){const o=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),u=l?`?${l}`:"";try{const d=this._getFinalPath(t);return{data:yield(yield Ra(this.fetch,`${this.url}/${o}/${d}${u}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(d){if(fe(d))return{data:null,error:d};throw d}})}info(t){return Re(this,void 0,void 0,function*(){const e=this._getFinalPath(t);try{const i=yield Ra(this.fetch,`${this.url}/object/info/${e}`,{headers:this.headers});return{data:sf(i),error:null}}catch(i){if(fe(i))return{data:null,error:i};throw i}})}exists(t){return Re(this,void 0,void 0,function*(){const e=this._getFinalPath(t);try{return yield MD(this.fetch,`${this.url}/object/${e}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(fe(i)&&i instanceof nf){const o=i.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:i}}throw i}})}getPublicUrl(t,e){const i=this._getFinalPath(t),o=[],l=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";l!==""&&o.push(l);const d=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",p=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});p!==""&&o.push(p);let m=o.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${i}${m}`)}}}remove(t){return Re(this,void 0,void 0,function*(){try{return{data:yield Y_(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(e){if(fe(e))return{data:null,error:e};throw e}})}list(t,e,i){return Re(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},AD),e),{prefix:t||""});return{data:yield In(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},i),error:null}}catch(o){if(fe(o))return{data:null,error:o};throw o}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}}const kD="2.10.4",ND={"X-Client-Info":`storage-js/${kD}`};var Os=function(n,t,e,i){function o(l){return l instanceof e?l:new e(function(u){u(l)})}return new(e||(e=Promise))(function(l,u){function d(g){try{m(i.next(g))}catch(_){u(_)}}function p(g){try{m(i.throw(g))}catch(_){u(_)}}function m(g){g.done?l(g.value):o(g.value).then(d,p)}m((i=i.apply(n,t||[])).next())})};class DD{constructor(t,e={},i,o){const l=new URL(t);o!=null&&o.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href,this.headers=Object.assign(Object.assign({},ND),e),this.fetch=K_(i)}listBuckets(){return Os(this,void 0,void 0,function*(){try{return{data:yield Ra(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(fe(t))return{data:null,error:t};throw t}})}getBucket(t){return Os(this,void 0,void 0,function*(){try{return{data:yield Ra(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(e){if(fe(e))return{data:null,error:e};throw e}})}createBucket(t,e={public:!1}){return Os(this,void 0,void 0,function*(){try{return{data:yield In(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(fe(i))return{data:null,error:i};throw i}})}updateBucket(t,e){return Os(this,void 0,void 0,function*(){try{return{data:yield of(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(fe(i))return{data:null,error:i};throw i}})}emptyBucket(t){return Os(this,void 0,void 0,function*(){try{return{data:yield In(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(fe(e))return{data:null,error:e};throw e}})}deleteBucket(t){return Os(this,void 0,void 0,function*(){try{return{data:yield Y_(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(e){if(fe(e))return{data:null,error:e};throw e}})}}class ID extends DD{constructor(t,e={},i,o){super(t,e,i,o)}from(t){return new RD(this.url,this.headers,t,this.fetch)}}const LD="2.54.0";let yr="";typeof Deno<"u"?yr="deno":typeof document<"u"?yr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?yr="react-native":yr="node";const UD={"X-Client-Info":`supabase-js-${yr}/${LD}`},PD={headers:UD},zD={schema:"public"},VD={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},BD={};var OD=function(n,t,e,i){function o(l){return l instanceof e?l:new e(function(u){u(l)})}return new(e||(e=Promise))(function(l,u){function d(g){try{m(i.next(g))}catch(_){u(_)}}function p(g){try{m(i.throw(g))}catch(_){u(_)}}function m(g){g.done?l(g.value):o(g.value).then(d,p)}m((i=i.apply(n,t||[])).next())})};const qD=n=>{let t;return n?t=n:typeof fetch>"u"?t=V_:t=fetch,(...e)=>t(...e)},$D=()=>typeof Headers>"u"?B_:Headers,HD=(n,t,e)=>{const i=qD(e),o=$D();return(l,u)=>OD(void 0,void 0,void 0,function*(){var d;const p=(d=yield t())!==null&&d!==void 0?d:n;let m=new o(u==null?void 0:u.headers);return m.has("apikey")||m.set("apikey",n),m.has("Authorization")||m.set("Authorization",`Bearer ${p}`),i(l,Object.assign(Object.assign({},u),{headers:m}))})};var GD=function(n,t,e,i){function o(l){return l instanceof e?l:new e(function(u){u(l)})}return new(e||(e=Promise))(function(l,u){function d(g){try{m(i.next(g))}catch(_){u(_)}}function p(g){try{m(i.throw(g))}catch(_){u(_)}}function m(g){g.done?l(g.value):o(g.value).then(d,p)}m((i=i.apply(n,t||[])).next())})};function FD(n){return n.endsWith("/")?n:n+"/"}function JD(n,t){var e,i;const{db:o,auth:l,realtime:u,global:d}=n,{db:p,auth:m,realtime:g,global:_}=t,S={db:Object.assign(Object.assign({},p),o),auth:Object.assign(Object.assign({},m),l),realtime:Object.assign(Object.assign({},g),u),storage:{},global:Object.assign(Object.assign(Object.assign({},_),d),{headers:Object.assign(Object.assign({},(e=_==null?void 0:_.headers)!==null&&e!==void 0?e:{}),(i=d==null?void 0:d.headers)!==null&&i!==void 0?i:{})}),accessToken:()=>GD(this,void 0,void 0,function*(){return""})};return n.accessToken?S.accessToken=n.accessToken:delete S.accessToken,S}const W_="2.71.1",Js=30*1e3,rf=3,dh=rf*Js,KD="http://localhost:9999",YD="supabase.auth.token",WD={"X-Client-Info":`gotrue-js/${W_}`},lf="X-Supabase-Api-Version",X_={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},XD=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,QD=600*1e3;class If extends Error{constructor(t,e,i){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=e,this.code=i}}function _t(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class ZD extends If{constructor(t,e,i){super(t,e,i),this.name="AuthApiError",this.status=e,this.code=i}}function jD(n){return _t(n)&&n.name==="AuthApiError"}class Q_ extends If{constructor(t,e){super(t),this.name="AuthUnknownError",this.originalError=e}}class pi extends If{constructor(t,e,i,o){super(t,i,o),this.name=e,this.status=i}}class hi extends pi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function tI(n){return _t(n)&&n.name==="AuthSessionMissingError"}class la extends pi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class aa extends pi{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class ua extends pi{constructor(t,e=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function eI(n){return _t(n)&&n.name==="AuthImplicitGrantRedirectError"}class Oy extends pi{constructor(t,e=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class af extends pi{constructor(t,e){super(t,"AuthRetryableFetchError",e,void 0)}}function ph(n){return _t(n)&&n.name==="AuthRetryableFetchError"}class qy extends pi{constructor(t,e,i){super(t,"AuthWeakPasswordError",e,"weak_password"),this.reasons=i}}class uf extends pi{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const ka="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),$y=` 	
\r=`.split(""),nI=(()=>{const n=new Array(128);for(let t=0;t<n.length;t+=1)n[t]=-1;for(let t=0;t<$y.length;t+=1)n[$y[t].charCodeAt(0)]=-2;for(let t=0;t<ka.length;t+=1)n[ka[t].charCodeAt(0)]=t;return n})();function Hy(n,t,e){if(n!==null)for(t.queue=t.queue<<8|n,t.queuedBits+=8;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;e(ka[i]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;e(ka[i]),t.queuedBits-=6}}function Z_(n,t,e){const i=nI[n];if(i>-1)for(t.queue=t.queue<<6|i,t.queuedBits+=6;t.queuedBits>=8;)e(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function Gy(n){const t=[],e=u=>{t.push(String.fromCodePoint(u))},i={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},l=u=>{oI(u,i,e)};for(let u=0;u<n.length;u+=1)Z_(n.charCodeAt(u),o,l);return t.join("")}function iI(n,t){if(n<=127){t(n);return}else if(n<=2047){t(192|n>>6),t(128|n&63);return}else if(n<=65535){t(224|n>>12),t(128|n>>6&63),t(128|n&63);return}else if(n<=1114111){t(240|n>>18),t(128|n>>12&63),t(128|n>>6&63),t(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function sI(n,t){for(let e=0;e<n.length;e+=1){let i=n.charCodeAt(e);if(i>55295&&i<=56319){const o=(i-55296)*1024&65535;i=(n.charCodeAt(e+1)-56320&65535|o)+65536,e+=1}iI(i,t)}}function oI(n,t,e){if(t.utf8seq===0){if(n<=127){e(n);return}for(let i=1;i<6;i+=1)if((n>>7-i&1)===0){t.utf8seq=i;break}if(t.utf8seq===2)t.codepoint=n&31;else if(t.utf8seq===3)t.codepoint=n&15;else if(t.utf8seq===4)t.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|n&63,t.utf8seq-=1,t.utf8seq===0&&e(t.codepoint)}}function rI(n){const t=[],e={queue:0,queuedBits:0},i=o=>{t.push(o)};for(let o=0;o<n.length;o+=1)Z_(n.charCodeAt(o),e,i);return new Uint8Array(t)}function lI(n){const t=[];return sI(n,e=>t.push(e)),new Uint8Array(t)}function aI(n){const t=[],e={queue:0,queuedBits:0},i=o=>{t.push(o)};return n.forEach(o=>Hy(o,e,i)),Hy(null,e,i),t.join("")}function uI(n){return Math.round(Date.now()/1e3)+n}function cI(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const t=Math.random()*16|0;return(n=="x"?t:t&3|8).toString(16)})}const en=()=>typeof window<"u"&&typeof document<"u",Ii={tested:!1,writable:!1},j_=()=>{if(!en())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ii.tested)return Ii.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Ii.tested=!0,Ii.writable=!0}catch{Ii.tested=!0,Ii.writable=!1}return Ii.writable};function hI(n){const t={},e=new URL(n);if(e.hash&&e.hash[0]==="#")try{new URLSearchParams(e.hash.substring(1)).forEach((o,l)=>{t[l]=o})}catch{}return e.searchParams.forEach((i,o)=>{t[o]=i}),t}const tS=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...e)=>Vr(async()=>{const{default:i}=await Promise.resolve().then(()=>co);return{default:i}},void 0).then(({default:i})=>i(...e)):t=fetch,(...e)=>t(...e)},fI=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Ks=async(n,t,e)=>{await n.setItem(t,JSON.stringify(e))},Li=async(n,t)=>{const e=await n.getItem(t);if(!e)return null;try{return JSON.parse(e)}catch{return e}},ui=async(n,t)=>{await n.removeItem(t)};class Va{constructor(){this.promise=new Va.promiseConstructor((t,e)=>{this.resolve=t,this.reject=e})}}Va.promiseConstructor=Promise;function mh(n){const t=n.split(".");if(t.length!==3)throw new uf("Invalid JWT structure");for(let i=0;i<t.length;i++)if(!XD.test(t[i]))throw new uf("JWT not in base64url format");return{header:JSON.parse(Gy(t[0])),payload:JSON.parse(Gy(t[1])),signature:rI(t[2]),raw:{header:t[0],payload:t[1]}}}async function dI(n){return await new Promise(t=>{setTimeout(()=>t(null),n)})}function pI(n,t){return new Promise((i,o)=>{(async()=>{for(let l=0;l<1/0;l++)try{const u=await n(l);if(!t(l,null,u)){i(u);return}}catch(u){if(!t(l,u)){o(u);return}}})()})}function mI(n){return("0"+n.toString(16)).substr(-2)}function gI(){const t=new Uint32Array(56);if(typeof crypto>"u"){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=e.length;let o="";for(let l=0;l<56;l++)o+=e.charAt(Math.floor(Math.random()*i));return o}return crypto.getRandomValues(t),Array.from(t,mI).join("")}async function vI(n){const e=new TextEncoder().encode(n),i=await crypto.subtle.digest("SHA-256",e),o=new Uint8Array(i);return Array.from(o).map(l=>String.fromCharCode(l)).join("")}async function yI(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const e=await vI(n);return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function qs(n,t,e=!1){const i=gI();let o=i;e&&(o+="/PASSWORD_RECOVERY"),await Ks(n,`${t}-code-verifier`,o);const l=await yI(i);return[l,i===l?"plain":"s256"]}const _I=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function SI(n){const t=n.headers.get(lf);if(!t||!t.match(_I))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function bI(n){if(!n)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(n<=t)throw new Error("JWT has expired")}function TI(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const wI=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function $s(n){if(!wI.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function gh(){const n={};return new Proxy(n,{get:(t,e)=>{if(e==="__isUserNotAvailableProxy")return!0;if(typeof e=="symbol"){const i=e.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${e}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,e)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${e}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,e)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${e}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Fy(n){return JSON.parse(JSON.stringify(n))}var CI=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(e[i[o]]=n[i[o]]);return e};const Pi=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),xI=[502,503,504];async function Jy(n){var t;if(!fI(n))throw new af(Pi(n),0);if(xI.includes(n.status))throw new af(Pi(n),n.status);let e;try{e=await n.json()}catch(l){throw new Q_(Pi(l),l)}let i;const o=SI(n);if(o&&o.getTime()>=X_["2024-01-01"].timestamp&&typeof e=="object"&&e&&typeof e.code=="string"?i=e.code:typeof e=="object"&&e&&typeof e.error_code=="string"&&(i=e.error_code),i){if(i==="weak_password")throw new qy(Pi(e),n.status,((t=e.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(i==="session_not_found")throw new hi}else if(typeof e=="object"&&e&&typeof e.weak_password=="object"&&e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.reasons.reduce((l,u)=>l&&typeof u=="string",!0))throw new qy(Pi(e),n.status,e.weak_password.reasons);throw new ZD(Pi(e),n.status||500,i)}const EI=(n,t,e,i)=>{const o={method:n,headers:(t==null?void 0:t.headers)||{}};return n==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),o.body=JSON.stringify(i),Object.assign(Object.assign({},o),e))};async function Mt(n,t,e,i){var o;const l=Object.assign({},i==null?void 0:i.headers);l[lf]||(l[lf]=X_["2024-01-01"].name),i!=null&&i.jwt&&(l.Authorization=`Bearer ${i.jwt}`);const u=(o=i==null?void 0:i.query)!==null&&o!==void 0?o:{};i!=null&&i.redirectTo&&(u.redirect_to=i.redirectTo);const d=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",p=await MI(n,t,e+d,{headers:l,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(p):{data:Object.assign({},p),error:null}}async function MI(n,t,e,i,o,l){const u=EI(t,i,o,l);let d;try{d=await n(e,Object.assign({},u))}catch(p){throw console.error(p),new af(Pi(p),0)}if(d.ok||await Jy(d),i!=null&&i.noResolveJson)return d;try{return await d.json()}catch(p){await Jy(p)}}function Nn(n){var t;let e=null;NI(n)&&(e=Object.assign({},n),n.expires_at||(e.expires_at=uI(n.expires_in)));const i=(t=n.user)!==null&&t!==void 0?t:n;return{data:{session:e,user:i},error:null}}function Ky(n){const t=Nn(n);return!t.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((e,i)=>e&&typeof i=="string",!0)&&(t.data.weak_password=n.weak_password),t}function fi(n){var t;return{data:{user:(t=n.user)!==null&&t!==void 0?t:n},error:null}}function AI(n){return{data:n,error:null}}function RI(n){const{action_link:t,email_otp:e,hashed_token:i,redirect_to:o,verification_type:l}=n,u=CI(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:t,email_otp:e,hashed_token:i,redirect_to:o,verification_type:l},p=Object.assign({},u);return{data:{properties:d,user:p},error:null}}function kI(n){return n}function NI(n){return n.access_token&&n.refresh_token&&n.expires_in}const vh=["global","local","others"];var DI=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(e[i[o]]=n[i[o]]);return e};class II{constructor({url:t="",headers:e={},fetch:i}){this.url=t,this.headers=e,this.fetch=tS(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,e=vh[0]){if(vh.indexOf(e)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${vh.join(", ")}`);try{return await Mt(this.fetch,"POST",`${this.url}/logout?scope=${e}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(i){if(_t(i))return{data:null,error:i};throw i}}async inviteUserByEmail(t,e={}){try{return await Mt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:e.data},headers:this.headers,redirectTo:e.redirectTo,xform:fi})}catch(i){if(_t(i))return{data:{user:null},error:i};throw i}}async generateLink(t){try{const{options:e}=t,i=DI(t,["options"]),o=Object.assign(Object.assign({},i),e);return"newEmail"in i&&(o.new_email=i==null?void 0:i.newEmail,delete o.newEmail),await Mt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:RI,redirectTo:e==null?void 0:e.redirectTo})}catch(e){if(_t(e))return{data:{properties:null,user:null},error:e};throw e}}async createUser(t){try{return await Mt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:fi})}catch(e){if(_t(e))return{data:{user:null},error:e};throw e}}async listUsers(t){var e,i,o,l,u,d,p;try{const m={nextPage:null,lastPage:0,total:0},g=await Mt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(e=t==null?void 0:t.page)===null||e===void 0?void 0:e.toString())!==null&&i!==void 0?i:"",per_page:(l=(o=t==null?void 0:t.perPage)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:""},xform:kI});if(g.error)throw g.error;const _=await g.json(),S=(u=g.headers.get("x-total-count"))!==null&&u!==void 0?u:0,b=(p=(d=g.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&p!==void 0?p:[];return b.length>0&&(b.forEach(w=>{const E=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),M=JSON.parse(w.split(";")[1].split("=")[1]);m[`${M}Page`]=E}),m.total=parseInt(S)),{data:Object.assign(Object.assign({},_),m),error:null}}catch(m){if(_t(m))return{data:{users:[]},error:m};throw m}}async getUserById(t){$s(t);try{return await Mt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:fi})}catch(e){if(_t(e))return{data:{user:null},error:e};throw e}}async updateUserById(t,e){$s(t);try{return await Mt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:e,headers:this.headers,xform:fi})}catch(i){if(_t(i))return{data:{user:null},error:i};throw i}}async deleteUser(t,e=!1){$s(t);try{return await Mt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:e},xform:fi})}catch(i){if(_t(i))return{data:{user:null},error:i};throw i}}async _listFactors(t){$s(t.userId);try{const{data:e,error:i}=await Mt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:e,error:i}}catch(e){if(_t(e))return{data:null,error:e};throw e}}async _deleteFactor(t){$s(t.userId),$s(t.id);try{return{data:await Mt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(e){if(_t(e))return{data:null,error:e};throw e}}}function Yy(n={}){return{getItem:t=>n[t]||null,setItem:(t,e)=>{n[t]=e},removeItem:t=>{delete n[t]}}}function LI(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Hs={debug:!!(globalThis&&j_()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class eS extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class UI extends eS{}async function PI(n,t,e){Hs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,t);const i=new globalThis.AbortController;return t>0&&setTimeout(()=>{i.abort(),Hs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async o=>{if(o){Hs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,o.name);try{return await e()}finally{Hs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,o.name)}}else{if(t===0)throw Hs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new UI(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Hs.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await e()}}))}LI();const zI={url:KD,storageKey:YD,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:WD,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Wy(n,t,e){return await e()}const Gs={};class Rr{constructor(t){var e,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Rr.nextInstanceID,Rr.nextInstanceID+=1,this.instanceID>0&&en()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},zI),t);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new II({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=tS(o.fetch),this.lock=o.lock||Wy,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:en()&&(!((e=globalThis==null?void 0:globalThis.navigator)===null||e===void 0)&&e.locks)?this.lock=PI:this.lock=Wy,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:j_()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Yy(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=Yy(this.memoryStorage)),en()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}get jwks(){var t,e;return(e=(t=Gs[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&e!==void 0?e:{keys:[]}}set jwks(t){Gs[this.storageKey]=Object.assign(Object.assign({},Gs[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,e;return(e=(t=Gs[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&e!==void 0?e:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Gs[this.storageKey]=Object.assign(Object.assign({},Gs[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${W_}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const e=hI(window.location.href);let i="none";if(this._isImplicitGrantCallback(e)?i="implicit":await this._isPKCECallback(e)&&(i="pkce"),en()&&this.detectSessionInUrl&&i!=="none"){const{data:o,error:l}=await this._getSessionFromURL(e,i);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),eI(l)){const p=(t=l.details)===null||t===void 0?void 0:t.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:u,redirectType:d}=o;return this._debug("#_initialize()","detected session in URL",u,"redirect type",d),await this._saveSession(u),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return _t(e)?{error:e}:{error:new Q_("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var e,i,o;try{const l=await Mt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(e=t==null?void 0:t.options)===null||e===void 0?void 0:e.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(o=t==null?void 0:t.options)===null||o===void 0?void 0:o.captchaToken}},xform:Nn}),{data:u,error:d}=l;if(d||!u)return{data:{user:null,session:null},error:d};const p=u.session,m=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",p)),{data:{user:m,session:p},error:null}}catch(l){if(_t(l))return{data:{user:null,session:null},error:l};throw l}}async signUp(t){var e,i,o;try{let l;if("email"in t){const{email:g,password:_,options:S}=t;let b=null,w=null;this.flowType==="pkce"&&([b,w]=await qs(this.storage,this.storageKey)),l=await Mt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:S==null?void 0:S.emailRedirectTo,body:{email:g,password:_,data:(e=S==null?void 0:S.data)!==null&&e!==void 0?e:{},gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken},code_challenge:b,code_challenge_method:w},xform:Nn})}else if("phone"in t){const{phone:g,password:_,options:S}=t;l=await Mt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:_,data:(i=S==null?void 0:S.data)!==null&&i!==void 0?i:{},channel:(o=S==null?void 0:S.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken}},xform:Nn})}else throw new aa("You must provide either an email or phone number and a password");const{data:u,error:d}=l;if(d||!u)return{data:{user:null,session:null},error:d};const p=u.session,m=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",p)),{data:{user:m,session:p},error:null}}catch(l){if(_t(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithPassword(t){try{let e;if("email"in t){const{email:l,password:u,options:d}=t;e=await Mt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:u,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:Ky})}else if("phone"in t){const{phone:l,password:u,options:d}=t;e=await Mt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:u,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:Ky})}else throw new aa("You must provide either an email or phone number and a password");const{data:i,error:o}=e;return o?{data:{user:null,session:null},error:o}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new la}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(e){if(_t(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithOAuth(t){var e,i,o,l;return await this._handleProviderSignIn(t.provider,{redirectTo:(e=t.options)===null||e===void 0?void 0:e.redirectTo,scopes:(i=t.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=t.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(l=t.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:e}=t;if(e==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${e}"`)}async signInWithSolana(t){var e,i,o,l,u,d,p,m,g,_,S,b;let w,E;if("message"in t)w=t.message,E=t.signature;else{const{chain:M,wallet:D,statement:U,options:k}=t;let V;if(en())if(typeof D=="object")V=D;else{const J=window;if("solana"in J&&typeof J.solana=="object"&&("signIn"in J.solana&&typeof J.solana.signIn=="function"||"signMessage"in J.solana&&typeof J.solana.signMessage=="function"))V=J.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof D!="object"||!(k!=null&&k.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");V=D}const q=new URL((e=k==null?void 0:k.url)!==null&&e!==void 0?e:window.location.href);if("signIn"in V&&V.signIn){const J=await V.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},k==null?void 0:k.signInWithSolana),{version:"1",domain:q.host,uri:q.href}),U?{statement:U}:null));let W;if(Array.isArray(J)&&J[0]&&typeof J[0]=="object")W=J[0];else if(J&&typeof J=="object"&&"signedMessage"in J&&"signature"in J)W=J;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in W&&"signature"in W&&(typeof W.signedMessage=="string"||W.signedMessage instanceof Uint8Array)&&W.signature instanceof Uint8Array)w=typeof W.signedMessage=="string"?W.signedMessage:new TextDecoder().decode(W.signedMessage),E=W.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in V)||typeof V.signMessage!="function"||!("publicKey"in V)||typeof V!="object"||!V.publicKey||!("toBase58"in V.publicKey)||typeof V.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${q.host} wants you to sign in with your Solana account:`,V.publicKey.toBase58(),...U?["",U,""]:[""],"Version: 1",`URI: ${q.href}`,`Issued At: ${(o=(i=k==null?void 0:k.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((l=k==null?void 0:k.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${k.signInWithSolana.notBefore}`]:[],...!((u=k==null?void 0:k.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${k.signInWithSolana.expirationTime}`]:[],...!((d=k==null?void 0:k.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${k.signInWithSolana.chainId}`]:[],...!((p=k==null?void 0:k.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${k.signInWithSolana.nonce}`]:[],...!((m=k==null?void 0:k.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${k.signInWithSolana.requestId}`]:[],...!((_=(g=k==null?void 0:k.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||_===void 0)&&_.length?["Resources",...k.signInWithSolana.resources.map(W=>`- ${W}`)]:[]].join(`
`);const J=await V.signMessage(new TextEncoder().encode(w),"utf8");if(!J||!(J instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");E=J}}try{const{data:M,error:D}=await Mt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:aI(E)},!((S=t.options)===null||S===void 0)&&S.captchaToken?{gotrue_meta_security:{captcha_token:(b=t.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:Nn});if(D)throw D;return!M||!M.session||!M.user?{data:{user:null,session:null},error:new la}:(M.session&&(await this._saveSession(M.session),await this._notifyAllSubscribers("SIGNED_IN",M.session)),{data:Object.assign({},M),error:D})}catch(M){if(_t(M))return{data:{user:null,session:null},error:M};throw M}}async _exchangeCodeForSession(t){const e=await Li(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(e??"").split("/");try{const{data:l,error:u}=await Mt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:i},xform:Nn});if(await ui(this.storage,`${this.storageKey}-code-verifier`),u)throw u;return!l||!l.session||!l.user?{data:{user:null,session:null,redirectType:null},error:new la}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:Object.assign(Object.assign({},l),{redirectType:o??null}),error:u})}catch(l){if(_t(l))return{data:{user:null,session:null,redirectType:null},error:l};throw l}}async signInWithIdToken(t){try{const{options:e,provider:i,token:o,access_token:l,nonce:u}=t,d=await Mt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:l,nonce:u,gotrue_meta_security:{captcha_token:e==null?void 0:e.captchaToken}},xform:Nn}),{data:p,error:m}=d;return m?{data:{user:null,session:null},error:m}:!p||!p.session||!p.user?{data:{user:null,session:null},error:new la}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),{data:p,error:m})}catch(e){if(_t(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithOtp(t){var e,i,o,l,u;try{if("email"in t){const{email:d,options:p}=t;let m=null,g=null;this.flowType==="pkce"&&([m,g]=await qs(this.storage,this.storageKey));const{error:_}=await Mt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(e=p==null?void 0:p.data)!==null&&e!==void 0?e:{},create_user:(i=p==null?void 0:p.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:m,code_challenge_method:g},redirectTo:p==null?void 0:p.emailRedirectTo});return{data:{user:null,session:null},error:_}}if("phone"in t){const{phone:d,options:p}=t,{data:m,error:g}=await Mt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(o=p==null?void 0:p.data)!==null&&o!==void 0?o:{},create_user:(l=p==null?void 0:p.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},channel:(u=p==null?void 0:p.channel)!==null&&u!==void 0?u:"sms"}});return{data:{user:null,session:null,messageId:m==null?void 0:m.message_id},error:g}}throw new aa("You must provide either an email or phone number.")}catch(d){if(_t(d))return{data:{user:null,session:null},error:d};throw d}}async verifyOtp(t){var e,i;try{let o,l;"options"in t&&(o=(e=t.options)===null||e===void 0?void 0:e.redirectTo,l=(i=t.options)===null||i===void 0?void 0:i.captchaToken);const{data:u,error:d}=await Mt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:l}}),redirectTo:o,xform:Nn});if(d)throw d;if(!u)throw new Error("An error occurred on token verification.");const p=u.session,m=u.user;return p!=null&&p.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),{data:{user:m,session:p},error:null}}catch(o){if(_t(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(t){var e,i,o;try{let l=null,u=null;return this.flowType==="pkce"&&([l,u]=await qs(this.storage,this.storageKey)),await Mt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(i=(e=t.options)===null||e===void 0?void 0:e.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=t==null?void 0:t.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:u}),headers:this.headers,xform:AI})}catch(l){if(_t(l))return{data:null,error:l};throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:e},error:i}=t;if(i)throw i;if(!e)throw new hi;const{error:o}=await Mt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:e.access_token});return{data:{user:null,session:null},error:o}})}catch(t){if(_t(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const e=`${this.url}/resend`;if("email"in t){const{email:i,type:o,options:l}=t,{error:u}=await Mt(this.fetch,"POST",e,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:u}}else if("phone"in t){const{phone:i,type:o,options:l}=t,{data:u,error:d}=await Mt(this.fetch,"POST",e,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new aa("You must provide either an email or phone number and a type")}catch(e){if(_t(e))return{data:{user:null,session:null},error:e};throw e}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(t,e){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await i,await e()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=e();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const e=await this.__loadSession();return await t(e)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const e=await Li(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",e),e!==null&&(this._isValidSession(e)?t=e:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const i=t.expires_at?t.expires_at*1e3-Date.now()<dh:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",t.expires_at),!i){if(this.userStorage){const u=await Li(this.userStorage,this.storageKey+"-user");u!=null&&u.user?t.user=u.user:t.user=gh()}if(this.storage.isServer&&t.user){let u=this.suppressGetSessionWarning;t=new Proxy(t,{get:(p,m,g)=>(!u&&m==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),u=!0,this.suppressGetSessionWarning=!0),Reflect.get(p,m,g))})}return{data:{session:t},error:null}}const{session:o,error:l}=await this._callRefreshToken(t.refresh_token);return l?{data:{session:null},error:l}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Mt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:fi}):await this._useSession(async e=>{var i,o,l;const{data:u,error:d}=e;if(d)throw d;return!(!((i=u.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new hi}:await Mt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(o=u.session)===null||o===void 0?void 0:o.access_token)!==null&&l!==void 0?l:void 0,xform:fi})})}catch(e){if(_t(e))return tI(e)&&(await this._removeSession(),await ui(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:e};throw e}}async updateUser(t,e={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,e))}async _updateUser(t,e={}){try{return await this._useSession(async i=>{const{data:o,error:l}=i;if(l)throw l;if(!o.session)throw new hi;const u=o.session;let d=null,p=null;this.flowType==="pkce"&&t.email!=null&&([d,p]=await qs(this.storage,this.storageKey));const{data:m,error:g}=await Mt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:e==null?void 0:e.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:d,code_challenge_method:p}),jwt:u.access_token,xform:fi});if(g)throw g;return u.user=m.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}})}catch(i){if(_t(i))return{data:{user:null},error:i};throw i}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new hi;const e=Date.now()/1e3;let i=e,o=!0,l=null;const{payload:u}=mh(t.access_token);if(u.exp&&(i=u.exp,o=i<=e),o){const{session:d,error:p}=await this._callRefreshToken(t.refresh_token);if(p)return{data:{user:null,session:null},error:p};if(!d)return{data:{user:null,session:null},error:null};l=d}else{const{data:d,error:p}=await this._getUser(t.access_token);if(p)throw p;l={access_token:t.access_token,refresh_token:t.refresh_token,user:d.user,token_type:"bearer",expires_in:i-e,expires_at:i},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return{data:{user:l.user,session:l},error:null}}catch(e){if(_t(e))return{data:{session:null,user:null},error:e};throw e}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async e=>{var i;if(!t){const{data:u,error:d}=e;if(d)throw d;t=(i=u.session)!==null&&i!==void 0?i:void 0}if(!(t!=null&&t.refresh_token))throw new hi;const{session:o,error:l}=await this._callRefreshToken(t.refresh_token);return l?{data:{user:null,session:null},error:l}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(e){if(_t(e))return{data:{user:null,session:null},error:e};throw e}}async _getSessionFromURL(t,e){try{if(!en())throw new ua("No browser detected.");if(t.error||t.error_description||t.error_code)throw new ua(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(e){case"implicit":if(this.flowType==="pkce")throw new Oy("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ua("Not a valid implicit grant flow url.");break;default:}if(e==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Oy("No code detected.");const{data:U,error:k}=await this._exchangeCodeForSession(t.code);if(k)throw k;const V=new URL(window.location.href);return V.searchParams.delete("code"),window.history.replaceState(window.history.state,"",V.toString()),{data:{session:U.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:o,access_token:l,refresh_token:u,expires_in:d,expires_at:p,token_type:m}=t;if(!l||!d||!u||!m)throw new ua("No session defined in URL");const g=Math.round(Date.now()/1e3),_=parseInt(d);let S=g+_;p&&(S=parseInt(p));const b=S-g;b*1e3<=Js&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${_}s`);const w=S-_;g-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,S,g):g-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,S,g);const{data:E,error:M}=await this._getUser(l);if(M)throw M;const D={provider_token:i,provider_refresh_token:o,access_token:l,expires_in:_,expires_at:S,refresh_token:u,token_type:m,user:E.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:D,redirectType:t.type},error:null}}catch(i){if(_t(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const e=await Li(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&e)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async e=>{var i;const{data:o,error:l}=e;if(l)return{error:l};const u=(i=o.session)===null||i===void 0?void 0:i.access_token;if(u){const{error:d}=await this.admin.signOut(u,t);if(d&&!(jD(d)&&(d.status===404||d.status===401||d.status===403)))return{error:d}}return t!=="others"&&(await this._removeSession(),await ui(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const e=cI(),i={id:e,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",e),this.stateChangeEmitters.delete(e)}};return this._debug("#onAuthStateChange()","registered callback with id",e),this.stateChangeEmitters.set(e,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(e)})))(),{data:{subscription:i}}}async _emitInitialSession(t){return await this._useSession(async e=>{var i,o;try{const{data:{session:l},error:u}=e;if(u)throw u;await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",t,"session",l)}catch(l){await((o=this.stateChangeEmitters.get(t))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",l),console.error(l)}})}async resetPasswordForEmail(t,e={}){let i=null,o=null;this.flowType==="pkce"&&([i,o]=await qs(this.storage,this.storageKey,!0));try{return await Mt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:e.captchaToken}},headers:this.headers,redirectTo:e.redirectTo})}catch(l){if(_t(l))return{data:null,error:l};throw l}}async getUserIdentities(){var t;try{const{data:e,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(t=e.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(e){if(_t(e))return{data:null,error:e};throw e}}async linkIdentity(t){var e;try{const{data:i,error:o}=await this._useSession(async l=>{var u,d,p,m,g;const{data:_,error:S}=l;if(S)throw S;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(u=t.options)===null||u===void 0?void 0:u.redirectTo,scopes:(d=t.options)===null||d===void 0?void 0:d.scopes,queryParams:(p=t.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await Mt(this.fetch,"GET",b,{headers:this.headers,jwt:(g=(m=_.session)===null||m===void 0?void 0:m.access_token)!==null&&g!==void 0?g:void 0})});if(o)throw o;return en()&&!(!((e=t.options)===null||e===void 0)&&e.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),{data:{provider:t.provider,url:i==null?void 0:i.url},error:null}}catch(i){if(_t(i))return{data:{provider:t.provider,url:null},error:i};throw i}}async unlinkIdentity(t){try{return await this._useSession(async e=>{var i,o;const{data:l,error:u}=e;if(u)throw u;return await Mt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(o=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})})}catch(e){if(_t(e))return{data:null,error:e};throw e}}async _refreshAccessToken(t){const e=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(e,"begin");try{const i=Date.now();return await pI(async o=>(o>0&&await dI(200*Math.pow(2,o-1)),this._debug(e,"refreshing attempt",o),await Mt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Nn})),(o,l)=>{const u=200*Math.pow(2,o);return l&&ph(l)&&Date.now()+u-i<Js})}catch(i){if(this._debug(e,"error",i),_t(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(e,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,e){const i=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:e.redirectTo,scopes:e.scopes,queryParams:e.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",e,"url",i),en()&&!e.skipBrowserRedirect&&window.location.assign(i),{data:{provider:t,url:i},error:null}}async _recoverAndRefresh(){var t,e;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const o=await Li(this.storage,this.storageKey);if(o&&this.userStorage){let u=await Li(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:o.user},await Ks(this.userStorage,this.storageKey+"-user",u)),o.user=(t=u==null?void 0:u.user)!==null&&t!==void 0?t:gh()}else if(o&&!o.user&&!o.user){const u=await Li(this.storage,this.storageKey+"-user");u&&(u!=null&&u.user)?(o.user=u.user,await ui(this.storage,this.storageKey+"-user"),await Ks(this.storage,this.storageKey,o)):o.user=gh()}if(this._debug(i,"session from storage",o),!this._isValidSession(o)){this._debug(i,"session is not valid"),o!==null&&await this._removeSession();return}const l=((e=o.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<dh;if(this._debug(i,`session has${l?"":" not"} expired with margin of ${dh}s`),l){if(this.autoRefreshToken&&o.refresh_token){const{error:u}=await this._callRefreshToken(o.refresh_token);u&&(console.error(u),ph(u)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:d}=await this._getUser(o.access_token);!d&&(u!=null&&u.user)?(o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(i,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(i,"error",o),console.error(o);return}finally{this._debug(i,"end")}}async _callRefreshToken(t){var e,i;if(!t)throw new hi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Va;const{data:l,error:u}=await this._refreshAccessToken(t);if(u)throw u;if(!l.session)throw new hi;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const d={session:l.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(l){if(this._debug(o,"error",l),_t(l)){const u={session:null,error:l};return ph(l)||await this._removeSession(),(e=this.refreshingDeferred)===null||e===void 0||e.resolve(u),u}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(l),l}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(t,e,i=!0){const o=`#_notifyAllSubscribers(${t})`;this._debug(o,"begin",e,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:t,session:e});const l=[],u=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(t,e)}catch(p){l.push(p)}});if(await Promise.all(u),l.length>0){for(let d=0;d<l.length;d+=1)console.error(l[d]);throw l[0]}}finally{this._debug(o,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const e=Object.assign({},t),i=e.user&&e.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&e.user&&await Ks(this.userStorage,this.storageKey+"-user",{user:e.user});const o=Object.assign({},e);delete o.user;const l=Fy(o);await Ks(this.storage,this.storageKey,l)}else{const o=Fy(e);await Ks(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await ui(this.storage,this.storageKey),await ui(this.storage,this.storageKey+"-code-verifier"),await ui(this.storage,this.storageKey+"-user"),this.userStorage&&await ui(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&en()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(e){console.error("removing visibilitychange callback failed",e)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Js);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:i}}=e;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((i.expires_at*1e3-t)/Js);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${Js}ms, refresh threshold is ${rf} ticks`),o<=rf&&await this._callRefreshToken(i.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof eS)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!en()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const e=`#_onVisibilityChanged(${t})`;this._debug(e,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(e,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,e,i){const o=[`provider=${encodeURIComponent(e)}`];if(i!=null&&i.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[l,u]=await qs(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(u)}`});o.push(d.toString())}if(i!=null&&i.queryParams){const l=new URLSearchParams(i.queryParams);o.push(l.toString())}return i!=null&&i.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${t}?${o.join("&")}`}async _unenroll(t){try{return await this._useSession(async e=>{var i;const{data:o,error:l}=e;return l?{data:null,error:l}:await Mt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token})})}catch(e){if(_t(e))return{data:null,error:e};throw e}}async _enroll(t){try{return await this._useSession(async e=>{var i,o;const{data:l,error:u}=e;if(u)return{data:null,error:u};const d=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:p,error:m}=await Mt(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(i=l==null?void 0:l.session)===null||i===void 0?void 0:i.access_token});return m?{data:null,error:m}:(t.factorType==="totp"&&(!((o=p==null?void 0:p.totp)===null||o===void 0)&&o.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),{data:p,error:null})})}catch(e){if(_t(e))return{data:null,error:e};throw e}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async e=>{var i;const{data:o,error:l}=e;if(l)return{data:null,error:l};const{data:u,error:d}=await Mt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token});return d?{data:null,error:d}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:d})})}catch(e){if(_t(e))return{data:null,error:e};throw e}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async e=>{var i;const{data:o,error:l}=e;return l?{data:null,error:l}:await Mt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token})})}catch(e){if(_t(e))return{data:null,error:e};throw e}})}async _challengeAndVerify(t){const{data:e,error:i}=await this._challenge({factorId:t.factorId});return i?{data:null,error:i}:await this._verify({factorId:t.factorId,challengeId:e.id,code:t.code})}async _listFactors(){const{data:{user:t},error:e}=await this.getUser();if(e)return{data:null,error:e};const i=(t==null?void 0:t.factors)||[],o=i.filter(u=>u.factor_type==="totp"&&u.status==="verified"),l=i.filter(u=>u.factor_type==="phone"&&u.status==="verified");return{data:{all:i,totp:o,phone:l},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var e,i;const{data:{session:o},error:l}=t;if(l)return{data:null,error:l};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=mh(o.access_token);let d=null;u.aal&&(d=u.aal);let p=d;((i=(e=o.user.factors)===null||e===void 0?void 0:e.filter(_=>_.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(p="aal2");const g=u.amr||[];return{data:{currentLevel:d,nextLevel:p,currentAuthenticationMethods:g},error:null}}))}async fetchJwk(t,e={keys:[]}){let i=e.keys.find(d=>d.kid===t);if(i)return i;const o=Date.now();if(i=this.jwks.keys.find(d=>d.kid===t),i&&this.jwks_cached_at+QD>o)return i;const{data:l,error:u}=await Mt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=o,i=l.keys.find(d=>d.kid===t),!i)?null:i}async getClaims(t,e={}){try{let i=t;if(!i){const{data:b,error:w}=await this.getSession();if(w||!b.session)return{data:null,error:w};i=b.session.access_token}const{header:o,payload:l,signature:u,raw:{header:d,payload:p}}=mh(i);e!=null&&e.allowExpired||bI(l.exp);const m=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,e!=null&&e.keys?{keys:e.keys}:e==null?void 0:e.jwks);if(!m){const{error:b}=await this.getUser(i);if(b)throw b;return{data:{claims:l,header:o,signature:u},error:null}}const g=TI(o.alg),_=await crypto.subtle.importKey("jwk",m,g,!0,["verify"]);if(!await crypto.subtle.verify(g,_,u,lI(`${d}.${p}`)))throw new uf("Invalid JWT signature");return{data:{claims:l,header:o,signature:u},error:null}}catch(i){if(_t(i))return{data:null,error:i};throw i}}}Rr.nextInstanceID=0;const VI=Rr;class BI extends VI{constructor(t){super(t)}}var OI=function(n,t,e,i){function o(l){return l instanceof e?l:new e(function(u){u(l)})}return new(e||(e=Promise))(function(l,u){function d(g){try{m(i.next(g))}catch(_){u(_)}}function p(g){try{m(i.throw(g))}catch(_){u(_)}}function m(g){g.done?l(g.value):o(g.value).then(d,p)}m((i=i.apply(n,t||[])).next())})};class qI{constructor(t,e,i){var o,l,u;if(this.supabaseUrl=t,this.supabaseKey=e,!t)throw new Error("supabaseUrl is required.");if(!e)throw new Error("supabaseKey is required.");const d=FD(t),p=new URL(d);this.realtimeUrl=new URL("realtime/v1",p),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",p),this.storageUrl=new URL("storage/v1",p),this.functionsUrl=new URL("functions/v1",p);const m=`sb-${p.hostname.split(".")[0]}-auth-token`,g={db:zD,realtime:BD,auth:Object.assign(Object.assign({},VD),{storageKey:m}),global:PD},_=JD(i??{},g);this.storageKey=(o=_.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(l=_.global.headers)!==null&&l!==void 0?l:{},_.accessToken?(this.accessToken=_.accessToken,this.auth=new Proxy({},{get:(S,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=_.auth)!==null&&u!==void 0?u:{},this.headers,_.global.fetch),this.fetch=HD(e,this._getAccessToken.bind(this),_.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},_.realtime)),this.rest=new iD(new URL("rest/v1",p).href,{headers:this.headers,schema:_.db.schema,fetch:this.fetch}),this.storage=new ID(this.storageUrl.href,this.headers,this.fetch,i==null?void 0:i.storage),_.accessToken||this._listenForAuthEvents()}get functions(){return new F2(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},i={}){return this.rest.rpc(t,e,i)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,e;return OI(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:i}=yield this.auth.getSession();return(e=(t=i.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:i,storage:o,storageKey:l,flowType:u,lock:d,debug:p},m,g){const _={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new BI({url:this.authUrl.href,headers:Object.assign(Object.assign({},_),m),storageKey:l,autoRefreshToken:t,persistSession:e,detectSessionInUrl:i,storage:o,flowType:u,lock:d,debug:p,fetch:g,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new SD(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,i)=>{this._handleTokenChanged(e,"CLIENT",i==null?void 0:i.access_token)})}_handleTokenChanged(t,e,i){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==i?this.changedAccessToken=i:t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const $I=(n,t,e)=>new qI(n,t,e);function HI(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const t=n.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}HI()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const GI="https://pxmubamvtgwafzfjpkdx.supabase.co",FI="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InB4bXViYW12dGd3YWZ6Zmpwa2R4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ1MjMxMDQsImV4cCI6MjA3MDA5OTEwNH0.Jmv_IxT2ct0zsu5ohrzh7rvMc3CYnXZs2teOEV2MFxI",re=$I(GI,FI),yh={theme:"dark",default_ultra_mode:!1},JI=async n=>{const t={user_id:n,theme:yh.theme},{error:e}=await re.from("user_preferences").upsert(t,{onConflict:"user_id",ignoreDuplicates:!0});e&&console.error("Error attempting to create default preferences:",e);let i=re.from("user_preferences").select("theme, default_ultra_mode").eq("user_id",n).single(),{data:o,error:l}=await i;if(l&&l.code==="42703"){const u=await re.from("user_preferences").select("theme").eq("user_id",n).single();return u.error?(console.error("Error fetching preferences:",u.error),{...yh}):{theme:u.data.theme==="light"?"light":"dark",default_ultra_mode:!1}}return l?(console.error("Error fetching preferences:",l),{...yh}):{theme:o.theme==="light"?"light":"dark",default_ultra_mode:o.default_ultra_mode??!1}},KI=async(n,t)=>{const e={user_id:n};typeof t.theme<"u"&&(e.theme=t.theme),typeof t.default_ultra_mode<"u"&&(e.default_ultra_mode=t.default_ultra_mode);let{error:i}=await re.from("user_preferences").upsert(e,{onConflict:"user_id"});if(i&&i.code==="42703"&&"default_ultra_mode"in e){const o={user_id:n,...typeof e.theme<"u"?{theme:e.theme}:{}},l=await re.from("user_preferences").upsert(o,{onConflict:"user_id"});if(l.error)throw console.error("Error updating preferences:",l.error),l.error;return}if(i)throw console.error("Error updating preferences:",i),i},YI=async n=>{const{data:t,error:e}=await re.from("sessions").select("*").eq("user_id",n).order("updated_at",{ascending:!1});return e?(console.error("Error fetching sessions:",e),[]):t.map(o=>({...o,messages:o.messages}))},WI=async(n,t)=>{const{data:e,error:i}=await re.from("sessions").insert([{user_id:n,title:t.title,messages:t.messages}]).select().single();if(i)throw console.error("Error creating session:",i),i;return{...e,messages:e.messages}},Xy=async(n,t)=>{const e={...t,...t.messages&&{messages:t.messages}},{error:i}=await re.from("sessions").update(e).eq("id",n);if(i)throw console.error("Error updating session:",i),i},XI=async n=>{const{data:t,error:e}=await re.from("sessions").delete().eq("id",n).select();if(e)throw console.error("Error deleting session:",e),e;if(!t||t.length===0){const i=new Error("Session not found or permission denied.");throw console.error(i.message,`ID: ${n}`),i}},QI=async n=>{const{error:t}=await re.from("sessions").delete().eq("user_id",n);if(t)throw console.error("Error deleting all user sessions:",t),t},ZI=async(n,t)=>{const i=`${n}/${Date.now()}.jpg`,{error:o}=await re.storage.from("avatars").upload(i,t,{contentType:"image/jpeg",upsert:!0});if(o)throw console.error("Error uploading avatar:",o),o;const{data:l}=re.storage.from("avatars").getPublicUrl(i);return l.publicUrl},Ln=z_((n,t)=>({sessions:[],activeSession:null,activeSessionId:null,isLoading:!0,user:null,setSessions:e=>n({sessions:e}),setActiveSessionId:e=>n({activeSessionId:e}),loadSessions:async e=>{n({isLoading:!0,user:e});try{const i=await YI(e.id);n({sessions:i}),i.length>0?n({activeSessionId:i[0].id}):await t().newSession()}catch(i){console.error("Error loading user sessions:",i),n({sessions:[],activeSessionId:null})}finally{n({isLoading:!1})}},newSession:async()=>{const e=t().user;if(e)try{const i=await WI(e.id,{title:"New Analysis",messages:[]});n(o=>({sessions:[i,...o.sessions],activeSessionId:i.id}))}catch(i){console.error("Error creating new session:",i)}},selectSession:e=>{n({activeSessionId:e})},updateSession:async(e,i)=>{n(o=>({sessions:o.sessions.map(l=>l.id===e?{...l,...i}:l)}));try{await Xy(e,i)}catch(o){console.error("Error updating session:",o)}},updateSessionTitle:async(e,i)=>{n(o=>({sessions:o.sessions.map(l=>l.id===e?{...l,title:i}:l)}));try{await Xy(e,{title:i})}catch(o){console.error("Error renaming session:",o)}},deleteSession:async e=>{if(!t().user)return;const o=t().sessions,l=t().activeSessionId;n(u=>{const d=u.sessions.filter(m=>m.id!==e);let p=u.activeSessionId;return u.activeSessionId===e&&(p=d.length>0?d[0].id:null),{sessions:d,activeSessionId:p}});try{await XI(e),t().sessions.length===0&&await t().newSession()}catch(u){console.error("Error deleting session:",u),n({sessions:o,activeSessionId:l})}},clearAllUserSessions:async()=>{const e=t().user;if(e)try{await QI(e.id),n({sessions:[],activeSessionId:null}),await t().newSession()}catch(i){console.error("Error clearing all sessions:",i)}}}));Ln.subscribe(n=>{const t=n.sessions.find(e=>e.id===n.activeSessionId)||null;n.activeSession=t});const jI=({children:n,user:t})=>{const{loadSessions:e,user:i}=Ln();return et.useEffect(()=>{t&&t.id!==(i==null?void 0:i.id)&&e(t)},[t,i,e]),x.jsx(x.Fragment,{children:n})},tL=["Analyze the trend and key levels for this BTC/USD 4H chart.","Is there a bullish or bearish pattern forming here?","Based on the indicators, what's a potential trade setup?"],eL=({text:n,onClick:t})=>x.jsx("button",{onClick:t,className:"w-full text-left p-3 bg-input-bg rounded-lg hover:bg-border-color transition-colors text-sm text-text-secondary",children:n}),nL=({onExampleClick:n})=>x.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center max-w-lg mx-auto",children:[x.jsx("div",{className:"w-16 h-16 bg-accent-blue rounded-full mb-4 flex items-center justify-center",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-8 h-8 text-white",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456Z"})})}),x.jsx("h2",{className:"text-2xl font-semibold text-text-primary",children:"Wizz AI Analyzer"}),x.jsx("p",{className:"text-text-secondary mt-2 mb-8",children:"Upload a crypto chart image and ask a question to begin. Or, try one of these examples:"}),x.jsx("div",{className:"w-full space-y-3",children:tL.map(t=>x.jsx(eL,{text:t,onClick:()=>n(t)},t))})]}),nS="wizz_cache_v1";function Qy(n){try{const t=`${nS}:${n}`,e=localStorage.getItem(t);return e?JSON.parse(e):null}catch{return null}}function Zy(n,t){try{const e=`${nS}:${n}`;localStorage.setItem(e,JSON.stringify(t))}catch{}}function Ft(n){var t=n.width,e=n.height;if(t<0)throw new Error("Negative width is not allowed for Size");if(e<0)throw new Error("Negative height is not allowed for Size");return{width:t,height:e}}function Vi(n,t){return n.width===t.width&&n.height===t.height}var iL=function(){function n(t){var e=this;this._resolutionListener=function(){return e._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=t,this._installResolutionListener()}return n.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(n.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),n.prototype.subscribe=function(t){var e=this,i={next:t};return this._observers.push(i),{unsubscribe:function(){e._observers=e._observers.filter(function(o){return o!==i})}}},n.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var t=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(t,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},n.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},n.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},n.prototype._onResolutionChanged=function(){var t=this;this._observers.forEach(function(e){return e.next(t._window.devicePixelRatio)}),this._reinstallResolutionListener()},n}();function sL(n){return new iL(n)}var oL=function(){function n(t,e,i){var o;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=t,this._canvasElementClientSize=Ft({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=e??function(l){return l},this._allowResizeObserver=(o=i==null?void 0:i.allowResizeObserver)!==null&&o!==void 0?o:!0,this._chooseAndInitObserver()}return n.prototype.dispose=function(){var t,e;if(this._canvasElement===null)throw new Error("Object is disposed");(t=this._canvasElementResizeObserver)===null||t===void 0||t.disconnect(),this._canvasElementResizeObserver=null,(e=this._devicePixelRatioObservable)===null||e===void 0||e.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(n.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"bitmapSize",{get:function(){return Ft({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),n.prototype.resizeCanvasElement=function(t){this._canvasElementClientSize=Ft(t),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},n.prototype.subscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners.push(t)},n.prototype.unsubscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(e){return e!==t})},Object.defineProperty(n.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),n.prototype.subscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners.push(t)},n.prototype.unsubscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(e){return e!==t})},n.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var t=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(t),this._emitSuggestedBitmapSizeChanged(t,this._suggestedBitmapSize)}},n.prototype._resizeBitmap=function(t){var e=this.bitmapSize;Vi(e,t)||(this.canvasElement.width=t.width,this.canvasElement.height=t.height,this._emitBitmapSizeChanged(e,t))},n.prototype._emitBitmapSizeChanged=function(t,e){var i=this;this._bitmapSizeChangedListeners.forEach(function(o){return o.call(i,t,e)})},n.prototype._suggestNewBitmapSize=function(t){var e=this._suggestedBitmapSize,i=Ft(this._transformBitmapSize(t,this._canvasElementClientSize)),o=Vi(this.bitmapSize,i)?null:i;e===null&&o===null||e!==null&&o!==null&&Vi(e,o)||(this._suggestedBitmapSize=o,this._emitSuggestedBitmapSizeChanged(e,o))},n.prototype._emitSuggestedBitmapSizeChanged=function(t,e){var i=this;this._suggestedBitmapSizeChangedListeners.forEach(function(o){return o.call(i,t,e)})},n.prototype._chooseAndInitObserver=function(){var t=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}lL().then(function(e){return e?t._initResizeObserver():t._initDevicePixelRatioObservable()})},n.prototype._initDevicePixelRatioObservable=function(){var t=this;if(this._canvasElement!==null){var e=jy(this._canvasElement);if(e===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=sL(e),this._devicePixelRatioObservable.subscribe(function(){return t._invalidateBitmapSize()}),this._invalidateBitmapSize()}},n.prototype._invalidateBitmapSize=function(){var t,e;if(this._canvasElement!==null){var i=jy(this._canvasElement);if(i!==null){var o=(e=(t=this._devicePixelRatioObservable)===null||t===void 0?void 0:t.value)!==null&&e!==void 0?e:i.devicePixelRatio,l=this._canvasElement.getClientRects(),u=l[0]!==void 0?aL(l[0],o):Ft({width:this._canvasElementClientSize.width*o,height:this._canvasElementClientSize.height*o});this._suggestNewBitmapSize(u)}}},n.prototype._initResizeObserver=function(){var t=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(e){var i=e.find(function(u){return u.target===t._canvasElement});if(!(!i||!i.devicePixelContentBoxSize||!i.devicePixelContentBoxSize[0])){var o=i.devicePixelContentBoxSize[0],l=Ft({width:o.inlineSize,height:o.blockSize});t._suggestNewBitmapSize(l)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},n}();function rL(n,t){return new oL(n,t.transform,t.options)}function jy(n){return n.ownerDocument.defaultView}function lL(){return new Promise(function(n){var t=new ResizeObserver(function(e){n(e.every(function(i){return"devicePixelContentBoxSize"in i})),t.disconnect()});t.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function aL(n,t){return Ft({width:Math.round(n.left*t+n.width*t)-Math.round(n.left*t),height:Math.round(n.top*t+n.height*t)-Math.round(n.top*t)})}var uL=function(){function n(t,e,i){if(e.width===0||e.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=e,i.width===0||i.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=i,this._context=t}return n.prototype.useMediaCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),t({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},n.prototype.useBitmapCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),t({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(n.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),n}();function $i(n,t){var e=n.canvasElementClientSize;if(e.width===0||e.height===0)return null;var i=n.bitmapSize;if(i.width===0||i.height===0)return null;var o=n.canvasElement.getContext("2d",t);return o===null?null:new uL(o,e,i)}/*!
 * @license
 * TradingView Lightweight Charts v4.2.3
 * Copyright (c) 2025 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */const cL={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},hL={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},fL={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},dL={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",invertFilledArea:!1,lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},pL={baseValue:{type:"price",price:0},topFillColor1:"rgba(38, 166, 154, 0.28)",topFillColor2:"rgba(38, 166, 154, 0.05)",topLineColor:"rgba(38, 166, 154, 1)",bottomFillColor1:"rgba(239, 83, 80, 0.05)",bottomFillColor2:"rgba(239, 83, 80, 0.28)",bottomLineColor:"rgba(239, 83, 80, 1)",lineWidth:3,lineStyle:0,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},mL={color:"#26a69a",base:0},iS={color:"#2196f3"},sS={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var t0,e0;function Hi(n,t){const e={0:[],1:[n.lineWidth,n.lineWidth],2:[2*n.lineWidth,2*n.lineWidth],3:[6*n.lineWidth,6*n.lineWidth],4:[n.lineWidth,4*n.lineWidth]}[t];n.setLineDash(e)}function oS(n,t,e,i){n.beginPath();const o=n.lineWidth%2?.5:0;n.moveTo(e,t+o),n.lineTo(i,t+o),n.stroke()}function di(n,t){if(!n)throw new Error("Assertion failed"+(t?": "+t:""))}function we(n){if(n===void 0)throw new Error("Value is undefined");return n}function Y(n){if(n===null)throw new Error("Value is null");return n}function Xs(n){return Y(we(n))}(function(n){n[n.Simple=0]="Simple",n[n.WithSteps=1]="WithSteps",n[n.Curved=2]="Curved"})(t0||(t0={})),function(n){n[n.Solid=0]="Solid",n[n.Dotted=1]="Dotted",n[n.Dashed=2]="Dashed",n[n.LargeDashed=3]="LargeDashed",n[n.SparseDotted=4]="SparseDotted"}(e0||(e0={}));const n0={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function Xe(n){return n<0?0:n>255?255:Math.round(n)||0}function rS(n){return n<=0||n>1?Math.min(Math.max(n,0),1):Math.round(1e4*n)/1e4}const gL=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,vL=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,yL=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,_L=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d*\.?\d+)\s*\)$/;function kr(n){(n=n.toLowerCase())in n0&&(n=n0[n]);{const t=_L.exec(n)||yL.exec(n);if(t)return[Xe(parseInt(t[1],10)),Xe(parseInt(t[2],10)),Xe(parseInt(t[3],10)),rS(t.length<5?1:parseFloat(t[4]))]}{const t=vL.exec(n);if(t)return[Xe(parseInt(t[1],16)),Xe(parseInt(t[2],16)),Xe(parseInt(t[3],16)),1]}{const t=gL.exec(n);if(t)return[Xe(17*parseInt(t[1],16)),Xe(17*parseInt(t[2],16)),Xe(17*parseInt(t[3],16)),1]}throw new Error(`Cannot parse color: ${n}`)}function lS(n){return .199*n[0]+.687*n[1]+.114*n[2]}function Ba(n){const t=kr(n);return{t:`rgb(${t[0]}, ${t[1]}, ${t[2]})`,i:lS(t)>160?"black":"white"}}class jt{constructor(){this.h=[]}l(t,e,i){const o={o:t,_:e,u:i===!0};this.h.push(o)}v(t){const e=this.h.findIndex(i=>t===i.o);e>-1&&this.h.splice(e,1)}p(t){this.h=this.h.filter(e=>e._!==t)}m(t,e,i){const o=[...this.h];this.h=this.h.filter(l=>!l.u),o.forEach(l=>l.o(t,e,i))}M(){return this.h.length>0}S(){this.h=[]}}function sn(n,...t){for(const e of t)for(const i in e)e[i]!==void 0&&Object.prototype.hasOwnProperty.call(e,i)&&!["__proto__","constructor","prototype"].includes(i)&&(typeof e[i]!="object"||n[i]===void 0||Array.isArray(e[i])?n[i]=e[i]:sn(n[i],e[i]));return n}function mn(n){return typeof n=="number"&&isFinite(n)}function Nr(n){return typeof n=="number"&&n%1==0}function Or(n){return typeof n=="string"}function ca(n){return typeof n=="boolean"}function Un(n){const t=n;if(!t||typeof t!="object")return t;let e,i,o;for(i in e=Array.isArray(t)?[]:{},t)t.hasOwnProperty(i)&&(o=t[i],e[i]=o&&typeof o=="object"?Un(o):o);return e}function SL(n){return n!==null}function Dr(n){return n===null?void 0:n}const Lf="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function io(n,t,e){return t===void 0&&(t=Lf),`${e=e!==void 0?`${e} `:""}${n}px ${t}`}class bL{constructor(t){this.k={C:1,T:5,P:NaN,R:"",D:"",V:"",O:"",B:0,A:0,I:0,L:0,N:0},this.F=t}W(){const t=this.k,e=this.j(),i=this.H();return t.P===e&&t.D===i||(t.P=e,t.D=i,t.R=io(e,i),t.L=2.5/12*e,t.B=t.L,t.A=e/12*t.T,t.I=e/12*t.T,t.N=0),t.V=this.$(),t.O=this.U(),this.k}$(){return this.F.W().layout.textColor}U(){return this.F.q()}j(){return this.F.W().layout.fontSize}H(){return this.F.W().layout.fontFamily}}class Uf{constructor(){this.Y=[]}Z(t){this.Y=t}X(t,e,i){this.Y.forEach(o=>{o.X(t,e,i)})}}class on{X(t,e,i){t.useBitmapCoordinateSpace(o=>this.K(o,e,i))}}class TL extends on{constructor(){super(...arguments),this.G=null}J(t){this.G=t}K({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){if(this.G===null||this.G.tt===null)return;const o=this.G.tt,l=this.G,u=Math.max(1,Math.floor(e))%2/2,d=p=>{t.beginPath();for(let m=o.to-1;m>=o.from;--m){const g=l.it[m],_=Math.round(g.nt*e)+u,S=g.st*i,b=p*i+u;t.moveTo(_,S),t.arc(_,S,b,0,2*Math.PI)}t.fill()};l.et>0&&(t.fillStyle=l.rt,d(l.ht+l.et)),t.fillStyle=l.lt,d(l.ht)}}function wL(){return{it:[{nt:0,st:0,ot:0,_t:0}],lt:"",rt:"",ht:0,et:0,tt:null}}const CL={from:0,to:1};class xL{constructor(t,e){this.ut=new Uf,this.ct=[],this.dt=[],this.ft=!0,this.F=t,this.vt=e,this.ut.Z(this.ct)}bt(t){const e=this.F.wt();e.length!==this.ct.length&&(this.dt=e.map(wL),this.ct=this.dt.map(i=>{const o=new TL;return o.J(i),o}),this.ut.Z(this.ct)),this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.ut}Mt(){const t=this.vt.W().mode===2,e=this.F.wt(),i=this.vt.xt(),o=this.F.St();e.forEach((l,u)=>{var d;const p=this.dt[u],m=l.kt(i);if(t||m===null||!l.yt())return void(p.tt=null);const g=Y(l.Ct());p.lt=m.Tt,p.ht=m.ht,p.et=m.Pt,p.it[0]._t=m._t,p.it[0].st=l.Dt().Rt(m._t,g.Vt),p.rt=(d=m.Ot)!==null&&d!==void 0?d:this.F.Bt(p.it[0].st/l.Dt().At()),p.it[0].ot=i,p.it[0].nt=o.It(i),p.tt=CL})}}class EL extends on{constructor(t){super(),this.zt=t}K({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:o}){if(this.zt===null)return;const l=this.zt.Lt.yt,u=this.zt.Et.yt;if(!l&&!u)return;const d=Math.round(this.zt.nt*i),p=Math.round(this.zt.st*o);t.lineCap="butt",l&&d>=0&&(t.lineWidth=Math.floor(this.zt.Lt.et*i),t.strokeStyle=this.zt.Lt.V,t.fillStyle=this.zt.Lt.V,Hi(t,this.zt.Lt.Nt),function(m,g,_,S){m.beginPath();const b=m.lineWidth%2?.5:0;m.moveTo(g+b,_),m.lineTo(g+b,S),m.stroke()}(t,d,0,e.height)),u&&p>=0&&(t.lineWidth=Math.floor(this.zt.Et.et*o),t.strokeStyle=this.zt.Et.V,t.fillStyle=this.zt.Et.V,Hi(t,this.zt.Et.Nt),oS(t,p,0,e.width))}}class ML{constructor(t){this.ft=!0,this.Ft={Lt:{et:1,Nt:0,V:"",yt:!1},Et:{et:1,Nt:0,V:"",yt:!1},nt:0,st:0},this.Wt=new EL(this.Ft),this.jt=t}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){const t=this.jt.yt(),e=Y(this.jt.Ht()),i=e.$t().W().crosshair,o=this.Ft;if(i.mode===2)return o.Et.yt=!1,void(o.Lt.yt=!1);o.Et.yt=t&&this.jt.Ut(e),o.Lt.yt=t&&this.jt.qt(),o.Et.et=i.horzLine.width,o.Et.Nt=i.horzLine.style,o.Et.V=i.horzLine.color,o.Lt.et=i.vertLine.width,o.Lt.Nt=i.vertLine.style,o.Lt.V=i.vertLine.color,o.nt=this.jt.Yt(),o.st=this.jt.Zt()}}function AL(n,t,e,i,o,l){n.fillRect(t+l,e,i-2*l,l),n.fillRect(t+l,e+o-l,i-2*l,l),n.fillRect(t,e,l,o),n.fillRect(t+i-l,e,l,o)}function Oa(n,t,e,i,o,l){n.save(),n.globalCompositeOperation="copy",n.fillStyle=l,n.fillRect(t,e,i,o),n.restore()}function i0(n,t,e,i,o,l){n.beginPath(),n.roundRect?n.roundRect(t,e,i,o,l):(n.lineTo(t+i-l[1],e),l[1]!==0&&n.arcTo(t+i,e,t+i,e+l[1],l[1]),n.lineTo(t+i,e+o-l[2]),l[2]!==0&&n.arcTo(t+i,e+o,t+i-l[2],e+o,l[2]),n.lineTo(t+l[3],e+o),l[3]!==0&&n.arcTo(t,e+o,t,e+o-l[3],l[3]),n.lineTo(t,e+l[0]),l[0]!==0&&n.arcTo(t,e,t+l[0],e,l[0]))}function s0(n,t,e,i,o,l,u=0,d=[0,0,0,0],p=""){if(n.save(),!u||!p||p===l)return i0(n,t,e,i,o,d),n.fillStyle=l,n.fill(),void n.restore();const m=u/2;var g;i0(n,t+m,e+m,i-u,o-u,(g=-m,d.map(_=>_===0?_:_+g))),l!=="transparent"&&(n.fillStyle=l,n.fill()),p!=="transparent"&&(n.lineWidth=u,n.strokeStyle=p,n.closePath(),n.stroke()),n.restore()}function aS(n,t,e,i,o,l,u){n.save(),n.globalCompositeOperation="copy";const d=n.createLinearGradient(0,0,0,o);d.addColorStop(0,l),d.addColorStop(1,u),n.fillStyle=d,n.fillRect(t,e,i,o),n.restore()}class o0{constructor(t,e){this.J(t,e)}J(t,e){this.zt=t,this.Xt=e}At(t,e){return this.zt.yt?t.P+t.L+t.B:0}X(t,e,i,o){if(!this.zt.yt||this.zt.Kt.length===0)return;const l=this.zt.V,u=this.Xt.t,d=t.useBitmapCoordinateSpace(p=>{const m=p.context;m.font=e.R;const g=this.Gt(p,e,i,o),_=g.Jt;return g.Qt?s0(m,_.ti,_.ii,_.ni,_.si,u,_.ei,[_.ht,0,0,_.ht],u):s0(m,_.ri,_.ii,_.ni,_.si,u,_.ei,[0,_.ht,_.ht,0],u),this.zt.hi&&(m.fillStyle=l,m.fillRect(_.ri,_.li,_.ai-_.ri,_.oi)),this.zt._i&&(m.fillStyle=e.O,m.fillRect(g.Qt?_.ui-_.ei:0,_.ii,_.ei,_.ci-_.ii)),g});t.useMediaCoordinateSpace(({context:p})=>{const m=d.di;p.font=e.R,p.textAlign=d.Qt?"right":"left",p.textBaseline="middle",p.fillStyle=l,p.fillText(this.zt.Kt,m.fi,(m.ii+m.ci)/2+m.pi)})}Gt(t,e,i,o){var l;const{context:u,bitmapSize:d,mediaSize:p,horizontalPixelRatio:m,verticalPixelRatio:g}=t,_=this.zt.hi||!this.zt.mi?e.T:0,S=this.zt.bi?e.C:0,b=e.L+this.Xt.wi,w=e.B+this.Xt.gi,E=e.A,M=e.I,D=this.zt.Kt,U=e.P,k=i.Mi(u,D),V=Math.ceil(i.xi(u,D)),q=U+b+w,J=e.C+E+M+V+_,W=Math.max(1,Math.floor(g));let rt=Math.round(q*g);rt%2!=W%2&&(rt+=1);const j=S>0?Math.max(1,Math.floor(S*m)):0,Q=Math.round(J*m),K=Math.round(_*m),st=(l=this.Xt.Si)!==null&&l!==void 0?l:this.Xt.ki,lt=Math.round(st*g)-Math.floor(.5*g),dt=Math.floor(lt+W/2-rt/2),at=dt+rt,B=o==="right",X=B?p.width-S:S,nt=B?d.width-j:j;let bt,R,G;return B?(bt=nt-Q,R=nt-K,G=X-_-E-S):(bt=nt+Q,R=nt+K,G=X+_+E),{Qt:B,Jt:{ii:dt,li:lt,ci:at,ni:Q,si:rt,ht:2*m,ei:j,ti:bt,ri:nt,ai:R,oi:W,ui:d.width},di:{ii:dt/g,ci:at/g,fi:G,pi:k}}}}class qa{constructor(t){this.yi={ki:0,t:"#000",gi:0,wi:0},this.Ci={Kt:"",yt:!1,hi:!0,mi:!1,Ot:"",V:"#FFF",_i:!1,bi:!1},this.Ti={Kt:"",yt:!1,hi:!1,mi:!0,Ot:"",V:"#FFF",_i:!0,bi:!0},this.ft=!0,this.Pi=new(t||o0)(this.Ci,this.yi),this.Ri=new(t||o0)(this.Ti,this.yi)}Kt(){return this.Di(),this.Ci.Kt}ki(){return this.Di(),this.yi.ki}bt(){this.ft=!0}At(t,e=!1){return Math.max(this.Pi.At(t,e),this.Ri.At(t,e))}Vi(){return this.yi.Si||0}Oi(t){this.yi.Si=t}Bi(){return this.Di(),this.Ci.yt||this.Ti.yt}Ai(){return this.Di(),this.Ci.yt}gt(t){return this.Di(),this.Ci.hi=this.Ci.hi&&t.W().ticksVisible,this.Ti.hi=this.Ti.hi&&t.W().ticksVisible,this.Pi.J(this.Ci,this.yi),this.Ri.J(this.Ti,this.yi),this.Pi}Ii(){return this.Di(),this.Pi.J(this.Ci,this.yi),this.Ri.J(this.Ti,this.yi),this.Ri}Di(){this.ft&&(this.Ci.hi=!0,this.Ti.hi=!1,this.zi(this.Ci,this.Ti,this.yi))}}class RL extends qa{constructor(t,e,i){super(),this.jt=t,this.Li=e,this.Ei=i}zi(t,e,i){if(t.yt=!1,this.jt.W().mode===2)return;const o=this.jt.W().horzLine;if(!o.labelVisible)return;const l=this.Li.Ct();if(!this.jt.yt()||this.Li.Ni()||l===null)return;const u=Ba(o.labelBackgroundColor);i.t=u.t,t.V=u.i;const d=2/12*this.Li.P();i.wi=d,i.gi=d;const p=this.Ei(this.Li);i.ki=p.ki,t.Kt=this.Li.Fi(p._t,l),t.yt=!0}}const kL=/[1-9]/g;class uS{constructor(){this.zt=null}J(t){this.zt=t}X(t,e){if(this.zt===null||this.zt.yt===!1||this.zt.Kt.length===0)return;const i=t.useMediaCoordinateSpace(({context:S})=>(S.font=e.R,Math.round(e.Wi.xi(S,Y(this.zt).Kt,kL))));if(i<=0)return;const o=e.ji,l=i+2*o,u=l/2,d=this.zt.Hi;let p=this.zt.ki,m=Math.floor(p-u)+.5;m<0?(p+=Math.abs(0-m),m=Math.floor(p-u)+.5):m+l>d&&(p-=Math.abs(d-(m+l)),m=Math.floor(p-u)+.5);const g=m+l,_=Math.ceil(0+e.C+e.T+e.L+e.P+e.B);t.useBitmapCoordinateSpace(({context:S,horizontalPixelRatio:b,verticalPixelRatio:w})=>{const E=Y(this.zt);S.fillStyle=E.t;const M=Math.round(m*b),D=Math.round(0*w),U=Math.round(g*b),k=Math.round(_*w),V=Math.round(2*b);if(S.beginPath(),S.moveTo(M,D),S.lineTo(M,k-V),S.arcTo(M,k,M+V,k,V),S.lineTo(U-V,k),S.arcTo(U,k,U,k-V,V),S.lineTo(U,D),S.fill(),E.hi){const q=Math.round(E.ki*b),J=D,W=Math.round((J+e.T)*w);S.fillStyle=E.V;const rt=Math.max(1,Math.floor(b)),j=Math.floor(.5*b);S.fillRect(q-j,J,rt,W-J)}}),t.useMediaCoordinateSpace(({context:S})=>{const b=Y(this.zt),w=0+e.C+e.T+e.L+e.P/2;S.font=e.R,S.textAlign="left",S.textBaseline="middle",S.fillStyle=b.V;const E=e.Wi.Mi(S,"Apr0");S.translate(m+o,w+E),S.fillText(b.Kt,0,0)})}}class NL{constructor(t,e,i){this.ft=!0,this.Wt=new uS,this.Ft={yt:!1,t:"#4c525e",V:"white",Kt:"",Hi:0,ki:NaN,hi:!0},this.vt=t,this.$i=e,this.Ei=i}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt.J(this.Ft),this.Wt}Mt(){const t=this.Ft;if(t.yt=!1,this.vt.W().mode===2)return;const e=this.vt.W().vertLine;if(!e.labelVisible)return;const i=this.$i.St();if(i.Ni())return;t.Hi=i.Hi();const o=this.Ei();if(o===null)return;t.ki=o.ki;const l=i.Ui(this.vt.xt());t.Kt=i.qi(Y(l)),t.yt=!0;const u=Ba(e.labelBackgroundColor);t.t=u.t,t.V=u.i,t.hi=i.W().ticksVisible}}class Pf{constructor(){this.Yi=null,this.Zi=0}Xi(){return this.Zi}Ki(t){this.Zi=t}Dt(){return this.Yi}Gi(t){this.Yi=t}Ji(t){return[]}Qi(){return[]}yt(){return!0}}var r0;(function(n){n[n.Normal=0]="Normal",n[n.Magnet=1]="Magnet",n[n.Hidden=2]="Hidden"})(r0||(r0={}));class DL extends Pf{constructor(t,e){super(),this.tn=null,this.nn=NaN,this.sn=0,this.en=!0,this.rn=new Map,this.hn=!1,this.ln=NaN,this.an=NaN,this._n=NaN,this.un=NaN,this.$i=t,this.cn=e,this.dn=new xL(t,this),this.fn=((o,l)=>u=>{const d=l(),p=o();if(u===Y(this.tn).vn())return{_t:p,ki:d};{const m=Y(u.Ct());return{_t:u.pn(d,m),ki:d}}})(()=>this.nn,()=>this.an);const i=((o,l)=>()=>{const u=this.$i.St().mn(o()),d=l();return u&&Number.isFinite(d)?{ot:u,ki:d}:null})(()=>this.sn,()=>this.Yt());this.bn=new NL(this,t,i),this.wn=new ML(this)}W(){return this.cn}gn(t,e){this._n=t,this.un=e}Mn(){this._n=NaN,this.un=NaN}xn(){return this._n}Sn(){return this.un}kn(t,e,i){this.hn||(this.hn=!0),this.en=!0,this.yn(t,e,i)}xt(){return this.sn}Yt(){return this.ln}Zt(){return this.an}yt(){return this.en}Cn(){this.en=!1,this.Tn(),this.nn=NaN,this.ln=NaN,this.an=NaN,this.tn=null,this.Mn()}Pn(t){return this.tn!==null?[this.wn,this.dn]:[]}Ut(t){return t===this.tn&&this.cn.horzLine.visible}qt(){return this.cn.vertLine.visible}Rn(t,e){this.en&&this.tn===t||this.rn.clear();const i=[];return this.tn===t&&i.push(this.Dn(this.rn,e,this.fn)),i}Qi(){return this.en?[this.bn]:[]}Ht(){return this.tn}Vn(){this.wn.bt(),this.rn.forEach(t=>t.bt()),this.bn.bt(),this.dn.bt()}On(t){return t&&!t.vn().Ni()?t.vn():null}yn(t,e,i){this.Bn(t,e,i)&&this.Vn()}Bn(t,e,i){const o=this.ln,l=this.an,u=this.nn,d=this.sn,p=this.tn,m=this.On(i);this.sn=t,this.ln=isNaN(t)?NaN:this.$i.St().It(t),this.tn=i;const g=m!==null?m.Ct():null;return m!==null&&g!==null?(this.nn=e,this.an=m.Rt(e,g)):(this.nn=NaN,this.an=NaN),o!==this.ln||l!==this.an||d!==this.sn||u!==this.nn||p!==this.tn}Tn(){const t=this.$i.wt().map(i=>i.In().An()).filter(SL),e=t.length===0?null:Math.max(...t);this.sn=e!==null?e:NaN}Dn(t,e,i){let o=t.get(e);return o===void 0&&(o=new RL(this,e,i),t.set(e,o)),o}}function $a(n){return n==="left"||n==="right"}class ge{constructor(t){this.zn=new Map,this.Ln=[],this.En=t}Nn(t,e){const i=function(o,l){return o===void 0?l:{Fn:Math.max(o.Fn,l.Fn),Wn:o.Wn||l.Wn}}(this.zn.get(t),e);this.zn.set(t,i)}jn(){return this.En}Hn(t){const e=this.zn.get(t);return e===void 0?{Fn:this.En}:{Fn:Math.max(this.En,e.Fn),Wn:e.Wn}}$n(){this.Un(),this.Ln=[{qn:0}]}Yn(t){this.Un(),this.Ln=[{qn:1,Vt:t}]}Zn(t){this.Xn(),this.Ln.push({qn:5,Vt:t})}Un(){this.Xn(),this.Ln.push({qn:6})}Kn(){this.Un(),this.Ln=[{qn:4}]}Gn(t){this.Un(),this.Ln.push({qn:2,Vt:t})}Jn(t){this.Un(),this.Ln.push({qn:3,Vt:t})}Qn(){return this.Ln}ts(t){for(const e of t.Ln)this.ns(e);this.En=Math.max(this.En,t.En),t.zn.forEach((e,i)=>{this.Nn(i,e)})}static ss(){return new ge(2)}static es(){return new ge(3)}ns(t){switch(t.qn){case 0:this.$n();break;case 1:this.Yn(t.Vt);break;case 2:this.Gn(t.Vt);break;case 3:this.Jn(t.Vt);break;case 4:this.Kn();break;case 5:this.Zn(t.Vt);break;case 6:this.Xn()}}Xn(){const t=this.Ln.findIndex(e=>e.qn===5);t!==-1&&this.Ln.splice(t,1)}}const l0=".";function Pn(n,t){if(!mn(n))return"n/a";if(!Nr(t))throw new TypeError("invalid length");if(t<0||t>16)throw new TypeError("invalid length");return t===0?n.toString():("0000000000000000"+n.toString()).slice(-t)}class Ha{constructor(t,e){if(e||(e=1),mn(t)&&Nr(t)||(t=100),t<0)throw new TypeError("invalid base");this.Li=t,this.rs=e,this.hs()}format(t){const e=t<0?"":"";return t=Math.abs(t),e+this.ls(t)}hs(){if(this._s=0,this.Li>0&&this.rs>0){let t=this.Li;for(;t>1;)t/=10,this._s++}}ls(t){const e=this.Li/this.rs;let i=Math.floor(t),o="";const l=this._s!==void 0?this._s:NaN;if(e>1){let u=+(Math.round(t*e)-i*e).toFixed(this._s);u>=e&&(u-=e,i+=1),o=l0+Pn(+u.toFixed(this._s)*this.rs,l)}else i=Math.round(i*e)/e,l>0&&(o=l0+Pn(0,l));return i.toFixed(0)+o}}class cS extends Ha{constructor(t=100){super(t)}format(t){return`${super.format(t)}%`}}class IL{constructor(t){this.us=t}format(t){let e="";return t<0&&(e="-",t=-t),t<995?e+this.cs(t):t<999995?e+this.cs(t/1e3)+"K":t<999999995?(t=1e3*Math.round(t/1e3),e+this.cs(t/1e6)+"M"):(t=1e6*Math.round(t/1e6),e+this.cs(t/1e9)+"B")}cs(t){let e;const i=Math.pow(10,this.us);return e=(t=Math.round(t*i)/i)>=1e-15&&t<1?t.toFixed(this.us).replace(/\.?0+$/,""):String(t),e.replace(/(\.[1-9]*)0+$/,(o,l)=>l)}}function hS(n,t,e,i,o,l,u){if(t.length===0||i.from>=t.length||i.to<=0)return;const{context:d,horizontalPixelRatio:p,verticalPixelRatio:m}=n,g=t[i.from];let _=l(n,g),S=g;if(i.to-i.from<2){const b=o/2;d.beginPath();const w={nt:g.nt-b,st:g.st},E={nt:g.nt+b,st:g.st};d.moveTo(w.nt*p,w.st*m),d.lineTo(E.nt*p,E.st*m),u(n,_,w,E)}else{const b=(E,M)=>{u(n,_,S,M),d.beginPath(),_=E,S=M};let w=S;d.beginPath(),d.moveTo(g.nt*p,g.st*m);for(let E=i.from+1;E<i.to;++E){w=t[E];const M=l(n,w);switch(e){case 0:d.lineTo(w.nt*p,w.st*m);break;case 1:d.lineTo(w.nt*p,t[E-1].st*m),M!==_&&(b(M,w),d.lineTo(w.nt*p,t[E-1].st*m)),d.lineTo(w.nt*p,w.st*m);break;case 2:{const[D,U]=LL(t,E-1,E);d.bezierCurveTo(D.nt*p,D.st*m,U.nt*p,U.st*m,w.nt*p,w.st*m);break}}e!==1&&M!==_&&(b(M,w),d.moveTo(w.nt*p,w.st*m))}(S!==w||S===w&&e===1)&&u(n,_,S,w)}}const a0=6;function _h(n,t){return{nt:n.nt-t.nt,st:n.st-t.st}}function u0(n,t){return{nt:n.nt/t,st:n.st/t}}function LL(n,t,e){const i=Math.max(0,t-1),o=Math.min(n.length-1,e+1);var l,u;return[(l=n[t],u=u0(_h(n[e],n[i]),a0),{nt:l.nt+u.nt,st:l.st+u.st}),_h(n[e],u0(_h(n[o],n[t]),a0))]}function UL(n,t,e,i,o){const{context:l,horizontalPixelRatio:u,verticalPixelRatio:d}=t;l.lineTo(o.nt*u,n*d),l.lineTo(i.nt*u,n*d),l.closePath(),l.fillStyle=e,l.fill()}class fS extends on{constructor(){super(...arguments),this.G=null}J(t){this.G=t}K(t){var e;if(this.G===null)return;const{it:i,tt:o,ds:l,et:u,Nt:d,fs:p}=this.G,m=(e=this.G.vs)!==null&&e!==void 0?e:this.G.ps?0:t.mediaSize.height;if(o===null)return;const g=t.context;g.lineCap="butt",g.lineJoin="round",g.lineWidth=u,Hi(g,d),g.lineWidth=1,hS(t,i,p,o,l,this.bs.bind(this),UL.bind(null,m))}}function cf(n,t,e){return Math.min(Math.max(n,t),e)}function ha(n,t,e){return t-n<=e}function dS(n){const t=Math.ceil(n);return t%2==0?t-1:t}class zf{ws(t,e){const i=this.gs,{Ms:o,xs:l,Ss:u,ks:d,ys:p,vs:m}=e;if(this.Cs===void 0||i===void 0||i.Ms!==o||i.xs!==l||i.Ss!==u||i.ks!==d||i.vs!==m||i.ys!==p){const g=t.context.createLinearGradient(0,0,0,p);if(g.addColorStop(0,o),m!=null){const _=cf(m*t.verticalPixelRatio/p,0,1);g.addColorStop(_,l),g.addColorStop(_,u)}g.addColorStop(1,d),this.Cs=g,this.gs=e}return this.Cs}}class PL extends fS{constructor(){super(...arguments),this.Ts=new zf}bs(t,e){return this.Ts.ws(t,{Ms:e.Ps,xs:"",Ss:"",ks:e.Rs,ys:t.bitmapSize.height})}}function zL(n,t){const e=n.context;e.strokeStyle=t,e.stroke()}class pS extends on{constructor(){super(...arguments),this.G=null}J(t){this.G=t}K(t){if(this.G===null)return;const{it:e,tt:i,ds:o,fs:l,et:u,Nt:d,Ds:p}=this.G;if(i===null)return;const m=t.context;m.lineCap="butt",m.lineWidth=u*t.verticalPixelRatio,Hi(m,d),m.lineJoin="round";const g=this.Vs.bind(this);l!==void 0&&hS(t,e,l,i,o,g,zL),p&&function(_,S,b,w,E){const{horizontalPixelRatio:M,verticalPixelRatio:D,context:U}=_;let k=null;const V=Math.max(1,Math.floor(M))%2/2,q=b*D+V;for(let J=w.to-1;J>=w.from;--J){const W=S[J];if(W){const rt=E(_,W);rt!==k&&(U.beginPath(),k!==null&&U.fill(),U.fillStyle=rt,k=rt);const j=Math.round(W.nt*M)+V,Q=W.st*D;U.moveTo(j,Q),U.arc(j,Q,q,0,2*Math.PI)}}U.fill()}(t,e,p,i,g)}}class mS extends pS{Vs(t,e){return e.lt}}function gS(n,t,e,i,o=0,l=t.length){let u=l-o;for(;0<u;){const d=u>>1,p=o+d;i(t[p],e)===n?(o=p+1,u-=d+1):u=d}return o}const qr=gS.bind(null,!0),vS=gS.bind(null,!1);function VL(n,t){return n.ot<t}function BL(n,t){return t<n.ot}function yS(n,t,e){const i=t.Os(),o=t.ui(),l=qr(n,i,VL),u=vS(n,o,BL);if(!e)return{from:l,to:u};let d=l,p=u;return l>0&&l<n.length&&n[l].ot>=i&&(d=l-1),u>0&&u<n.length&&n[u-1].ot<=o&&(p=u+1),{from:d,to:p}}class Vf{constructor(t,e,i){this.Bs=!0,this.As=!0,this.Is=!0,this.zs=[],this.Ls=null,this.Es=t,this.Ns=e,this.Fs=i}bt(t){this.Bs=!0,t==="data"&&(this.As=!0),t==="options"&&(this.Is=!0)}gt(){return this.Es.yt()?(this.Ws(),this.Ls===null?null:this.js):null}Hs(){this.zs=this.zs.map(t=>Object.assign(Object.assign({},t),this.Es.Us().$s(t.ot)))}qs(){this.Ls=null}Ws(){this.As&&(this.Ys(),this.As=!1),this.Is&&(this.Hs(),this.Is=!1),this.Bs&&(this.Zs(),this.Bs=!1)}Zs(){const t=this.Es.Dt(),e=this.Ns.St();if(this.qs(),e.Ni()||t.Ni())return;const i=e.Xs();if(i===null||this.Es.In().Ks()===0)return;const o=this.Es.Ct();o!==null&&(this.Ls=yS(this.zs,i,this.Fs),this.Gs(t,e,o.Vt),this.Js())}}class Ga extends Vf{constructor(t,e){super(t,e,!0)}Gs(t,e,i){e.Qs(this.zs,Dr(this.Ls)),t.te(this.zs,i,Dr(this.Ls))}ie(t,e){return{ot:t,_t:e,nt:NaN,st:NaN}}Ys(){const t=this.Es.Us();this.zs=this.Es.In().ne().map(e=>{const i=e.Vt[3];return this.se(e.ee,i,t)})}}class OL extends Ga{constructor(t,e){super(t,e),this.js=new Uf,this.re=new PL,this.he=new mS,this.js.Z([this.re,this.he])}se(t,e,i){return Object.assign(Object.assign({},this.ie(t,e)),i.$s(t))}Js(){const t=this.Es.W();this.re.J({fs:t.lineType,it:this.zs,Nt:t.lineStyle,et:t.lineWidth,vs:null,ps:t.invertFilledArea,tt:this.Ls,ds:this.Ns.St().le()}),this.he.J({fs:t.lineVisible?t.lineType:void 0,it:this.zs,Nt:t.lineStyle,et:t.lineWidth,tt:this.Ls,ds:this.Ns.St().le(),Ds:t.pointMarkersVisible?t.pointMarkersRadius||t.lineWidth/2+2:void 0})}}class qL extends on{constructor(){super(...arguments),this.zt=null,this.ae=0,this.oe=0}J(t){this.zt=t}K({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){if(this.zt===null||this.zt.In.length===0||this.zt.tt===null)return;this.ae=this._e(e),this.ae>=2&&Math.max(1,Math.floor(e))%2!=this.ae%2&&this.ae--,this.oe=this.zt.ue?Math.min(this.ae,Math.floor(e)):this.ae;let o=null;const l=this.oe<=this.ae&&this.zt.le>=Math.floor(1.5*e);for(let u=this.zt.tt.from;u<this.zt.tt.to;++u){const d=this.zt.In[u];o!==d.ce&&(t.fillStyle=d.ce,o=d.ce);const p=Math.floor(.5*this.oe),m=Math.round(d.nt*e),g=m-p,_=this.oe,S=g+_-1,b=Math.min(d.de,d.fe),w=Math.max(d.de,d.fe),E=Math.round(b*i)-p,M=Math.round(w*i)+p,D=Math.max(M-E,this.oe);t.fillRect(g,E,_,D);const U=Math.ceil(1.5*this.ae);if(l){if(this.zt.ve){const J=m-U;let W=Math.max(E,Math.round(d.pe*i)-p),rt=W+_-1;rt>E+D-1&&(rt=E+D-1,W=rt-_+1),t.fillRect(J,W,g-J,rt-W+1)}const k=m+U;let V=Math.max(E,Math.round(d.me*i)-p),q=V+_-1;q>E+D-1&&(q=E+D-1,V=q-_+1),t.fillRect(S+1,V,k-S,q-V+1)}}}_e(t){const e=Math.floor(t);return Math.max(e,Math.floor(function(i,o){return Math.floor(.3*i*o)}(Y(this.zt).le,t)))}}class _S extends Vf{constructor(t,e){super(t,e,!1)}Gs(t,e,i){e.Qs(this.zs,Dr(this.Ls)),t.be(this.zs,i,Dr(this.Ls))}we(t,e,i){return{ot:t,ge:e.Vt[0],Me:e.Vt[1],xe:e.Vt[2],Se:e.Vt[3],nt:NaN,pe:NaN,de:NaN,fe:NaN,me:NaN}}Ys(){const t=this.Es.Us();this.zs=this.Es.In().ne().map(e=>this.se(e.ee,e,t))}}class $L extends _S{constructor(){super(...arguments),this.js=new qL}se(t,e,i){return Object.assign(Object.assign({},this.we(t,e,i)),i.$s(t))}Js(){const t=this.Es.W();this.js.J({In:this.zs,le:this.Ns.St().le(),ve:t.openVisible,ue:t.thinBars,tt:this.Ls})}}class HL extends fS{constructor(){super(...arguments),this.Ts=new zf}bs(t,e){const i=this.G;return this.Ts.ws(t,{Ms:e.ke,xs:e.ye,Ss:e.Ce,ks:e.Te,ys:t.bitmapSize.height,vs:i.vs})}}class GL extends pS{constructor(){super(...arguments),this.Pe=new zf}Vs(t,e){const i=this.G;return this.Pe.ws(t,{Ms:e.Re,xs:e.Re,Ss:e.De,ks:e.De,ys:t.bitmapSize.height,vs:i.vs})}}class FL extends Ga{constructor(t,e){super(t,e),this.js=new Uf,this.Ve=new HL,this.Oe=new GL,this.js.Z([this.Ve,this.Oe])}se(t,e,i){return Object.assign(Object.assign({},this.ie(t,e)),i.$s(t))}Js(){const t=this.Es.Ct();if(t===null)return;const e=this.Es.W(),i=this.Es.Dt().Rt(e.baseValue.price,t.Vt),o=this.Ns.St().le();this.Ve.J({it:this.zs,et:e.lineWidth,Nt:e.lineStyle,fs:e.lineType,vs:i,ps:!1,tt:this.Ls,ds:o}),this.Oe.J({it:this.zs,et:e.lineWidth,Nt:e.lineStyle,fs:e.lineVisible?e.lineType:void 0,Ds:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0,vs:i,tt:this.Ls,ds:o})}}class JL extends on{constructor(){super(...arguments),this.zt=null,this.ae=0}J(t){this.zt=t}K(t){if(this.zt===null||this.zt.In.length===0||this.zt.tt===null)return;const{horizontalPixelRatio:e}=t;this.ae=function(l,u){if(l>=2.5&&l<=4)return Math.floor(3*u);const d=1-.2*Math.atan(Math.max(4,l)-4)/(.5*Math.PI),p=Math.floor(l*d*u),m=Math.floor(l*u),g=Math.min(p,m);return Math.max(Math.floor(u),g)}(this.zt.le,e),this.ae>=2&&Math.floor(e)%2!=this.ae%2&&this.ae--;const i=this.zt.In;this.zt.Be&&this.Ae(t,i,this.zt.tt),this.zt._i&&this.Ie(t,i,this.zt.tt);const o=this.ze(e);(!this.zt._i||this.ae>2*o)&&this.Le(t,i,this.zt.tt)}Ae(t,e,i){if(this.zt===null)return;const{context:o,horizontalPixelRatio:l,verticalPixelRatio:u}=t;let d="",p=Math.min(Math.floor(l),Math.floor(this.zt.le*l));p=Math.max(Math.floor(l),Math.min(p,this.ae));const m=Math.floor(.5*p);let g=null;for(let _=i.from;_<i.to;_++){const S=e[_];S.Ee!==d&&(o.fillStyle=S.Ee,d=S.Ee);const b=Math.round(Math.min(S.pe,S.me)*u),w=Math.round(Math.max(S.pe,S.me)*u),E=Math.round(S.de*u),M=Math.round(S.fe*u);let D=Math.round(l*S.nt)-m;const U=D+p-1;g!==null&&(D=Math.max(g+1,D),D=Math.min(D,U));const k=U-D+1;o.fillRect(D,E,k,b-E),o.fillRect(D,w+1,k,M-w),g=U}}ze(t){let e=Math.floor(1*t);this.ae<=2*e&&(e=Math.floor(.5*(this.ae-1)));const i=Math.max(Math.floor(t),e);return this.ae<=2*i?Math.max(Math.floor(t),Math.floor(1*t)):i}Ie(t,e,i){if(this.zt===null)return;const{context:o,horizontalPixelRatio:l,verticalPixelRatio:u}=t;let d="";const p=this.ze(l);let m=null;for(let g=i.from;g<i.to;g++){const _=e[g];_.Ne!==d&&(o.fillStyle=_.Ne,d=_.Ne);let S=Math.round(_.nt*l)-Math.floor(.5*this.ae);const b=S+this.ae-1,w=Math.round(Math.min(_.pe,_.me)*u),E=Math.round(Math.max(_.pe,_.me)*u);if(m!==null&&(S=Math.max(m+1,S),S=Math.min(S,b)),this.zt.le*l>2*p)AL(o,S,w,b-S+1,E-w+1,p);else{const M=b-S+1;o.fillRect(S,w,M,E-w+1)}m=b}}Le(t,e,i){if(this.zt===null)return;const{context:o,horizontalPixelRatio:l,verticalPixelRatio:u}=t;let d="";const p=this.ze(l);for(let m=i.from;m<i.to;m++){const g=e[m];let _=Math.round(Math.min(g.pe,g.me)*u),S=Math.round(Math.max(g.pe,g.me)*u),b=Math.round(g.nt*l)-Math.floor(.5*this.ae),w=b+this.ae-1;if(g.ce!==d){const E=g.ce;o.fillStyle=E,d=E}this.zt._i&&(b+=p,_+=p,w-=p,S-=p),_>S||o.fillRect(b,_,w-b+1,S-_+1)}}}class KL extends _S{constructor(){super(...arguments),this.js=new JL}se(t,e,i){return Object.assign(Object.assign({},this.we(t,e,i)),i.$s(t))}Js(){const t=this.Es.W();this.js.J({In:this.zs,le:this.Ns.St().le(),Be:t.wickVisible,_i:t.borderVisible,tt:this.Ls})}}class YL{constructor(t,e){this.Fe=t,this.Li=e}X(t,e,i){this.Fe.draw(t,this.Li,e,i)}}class Sh extends Vf{constructor(t,e,i){super(t,e,!1),this.wn=i,this.js=new YL(this.wn.renderer(),o=>{const l=t.Ct();return l===null?null:t.Dt().Rt(o,l.Vt)})}We(t){return this.wn.priceValueBuilder(t)}je(t){return this.wn.isWhitespace(t)}Ys(){const t=this.Es.Us();this.zs=this.Es.In().ne().map(e=>Object.assign(Object.assign({ot:e.ee,nt:NaN},t.$s(e.ee)),{He:e.$e}))}Gs(t,e){e.Qs(this.zs,Dr(this.Ls))}Js(){this.wn.update({bars:this.zs.map(WL),barSpacing:this.Ns.St().le(),visibleRange:this.Ls},this.Es.W())}}function WL(n){return{x:n.nt,time:n.ot,originalData:n.He,barColor:n.ce}}class XL extends on{constructor(){super(...arguments),this.zt=null,this.Ue=[]}J(t){this.zt=t,this.Ue=[]}K({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){if(this.zt===null||this.zt.it.length===0||this.zt.tt===null)return;this.Ue.length||this.qe(e);const o=Math.max(1,Math.floor(i)),l=Math.round(this.zt.Ye*i)-Math.floor(o/2),u=l+o;for(let d=this.zt.tt.from;d<this.zt.tt.to;d++){const p=this.zt.it[d],m=this.Ue[d-this.zt.tt.from],g=Math.round(p.st*i);let _,S;t.fillStyle=p.ce,g<=l?(_=g,S=u):(_=l,S=g-Math.floor(o/2)+o),t.fillRect(m.Os,_,m.ui-m.Os+1,S-_)}}qe(t){if(this.zt===null||this.zt.it.length===0||this.zt.tt===null)return void(this.Ue=[]);const e=Math.ceil(this.zt.le*t)<=1?0:Math.max(1,Math.floor(t)),i=Math.round(this.zt.le*t)-e;this.Ue=new Array(this.zt.tt.to-this.zt.tt.from);for(let l=this.zt.tt.from;l<this.zt.tt.to;l++){const u=this.zt.it[l],d=Math.round(u.nt*t);let p,m;if(i%2){const g=(i-1)/2;p=d-g,m=d+g}else{const g=i/2;p=d-g,m=d+g-1}this.Ue[l-this.zt.tt.from]={Os:p,ui:m,Ze:d,Xe:u.nt*t,ot:u.ot}}for(let l=this.zt.tt.from+1;l<this.zt.tt.to;l++){const u=this.Ue[l-this.zt.tt.from],d=this.Ue[l-this.zt.tt.from-1];u.ot===d.ot+1&&u.Os-d.ui!==e+1&&(d.Ze>d.Xe?d.ui=u.Os-e-1:u.Os=d.ui+e+1)}let o=Math.ceil(this.zt.le*t);for(let l=this.zt.tt.from;l<this.zt.tt.to;l++){const u=this.Ue[l-this.zt.tt.from];u.ui<u.Os&&(u.ui=u.Os);const d=u.ui-u.Os+1;o=Math.min(d,o)}if(e>0&&o<4)for(let l=this.zt.tt.from;l<this.zt.tt.to;l++){const u=this.Ue[l-this.zt.tt.from];u.ui-u.Os+1>o&&(u.Ze>u.Xe?u.ui-=1:u.Os+=1)}}}class QL extends Ga{constructor(){super(...arguments),this.js=new XL}se(t,e,i){return Object.assign(Object.assign({},this.ie(t,e)),i.$s(t))}Js(){const t={it:this.zs,le:this.Ns.St().le(),tt:this.Ls,Ye:this.Es.Dt().Rt(this.Es.W().base,Y(this.Es.Ct()).Vt)};this.js.J(t)}}class ZL extends Ga{constructor(){super(...arguments),this.js=new mS}se(t,e,i){return Object.assign(Object.assign({},this.ie(t,e)),i.$s(t))}Js(){const t=this.Es.W(),e={it:this.zs,Nt:t.lineStyle,fs:t.lineVisible?t.lineType:void 0,et:t.lineWidth,Ds:t.pointMarkersVisible?t.pointMarkersRadius||t.lineWidth/2+2:void 0,tt:this.Ls,ds:this.Ns.St().le()};this.js.J(e)}}const jL=/[2-9]/g;class Ir{constructor(t=50){this.Ke=0,this.Ge=1,this.Je=1,this.Qe={},this.tr=new Map,this.ir=t}nr(){this.Ke=0,this.tr.clear(),this.Ge=1,this.Je=1,this.Qe={}}xi(t,e,i){return this.sr(t,e,i).width}Mi(t,e,i){const o=this.sr(t,e,i);return((o.actualBoundingBoxAscent||0)-(o.actualBoundingBoxDescent||0))/2}sr(t,e,i){const o=i||jL,l=String(e).replace(o,"0");if(this.tr.has(l))return we(this.tr.get(l)).er;if(this.Ke===this.ir){const d=this.Qe[this.Je];delete this.Qe[this.Je],this.tr.delete(d),this.Je++,this.Ke--}t.save(),t.textBaseline="middle";const u=t.measureText(l);return t.restore(),u.width===0&&e.length||(this.tr.set(l,{er:u,rr:this.Ge}),this.Qe[this.Ge]=l,this.Ke++,this.Ge++),u}}class tU{constructor(t){this.hr=null,this.k=null,this.lr="right",this.ar=t}_r(t,e,i){this.hr=t,this.k=e,this.lr=i}X(t){this.k!==null&&this.hr!==null&&this.hr.X(t,this.k,this.ar,this.lr)}}class SS{constructor(t,e,i){this.ur=t,this.ar=new Ir(50),this.cr=e,this.F=i,this.j=-1,this.Wt=new tU(this.ar)}gt(){const t=this.F.dr(this.cr);if(t===null)return null;const e=t.vr(this.cr)?t.pr():this.cr.Dt();if(e===null)return null;const i=t.mr(e);if(i==="overlay")return null;const o=this.F.br();return o.P!==this.j&&(this.j=o.P,this.ar.nr()),this.Wt._r(this.ur.Ii(),o,i),this.Wt}}class eU extends on{constructor(){super(...arguments),this.zt=null}J(t){this.zt=t}wr(t,e){var i;if(!(!((i=this.zt)===null||i===void 0)&&i.yt))return null;const{st:o,et:l,gr:u}=this.zt;return e>=o-l-7&&e<=o+l+7?{Mr:this.zt,gr:u}:null}K({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:o}){if(this.zt===null||this.zt.yt===!1)return;const l=Math.round(this.zt.st*o);l<0||l>e.height||(t.lineCap="butt",t.strokeStyle=this.zt.V,t.lineWidth=Math.floor(this.zt.et*i),Hi(t,this.zt.Nt),oS(t,l,0,e.width))}}class Bf{constructor(t){this.Sr={st:0,V:"rgba(0, 0, 0, 0)",et:1,Nt:0,yt:!1},this.kr=new eU,this.ft=!0,this.Es=t,this.Ns=t.$t(),this.kr.J(this.Sr)}bt(){this.ft=!0}gt(){return this.Es.yt()?(this.ft&&(this.yr(),this.ft=!1),this.kr):null}}class nU extends Bf{constructor(t){super(t)}yr(){this.Sr.yt=!1;const t=this.Es.Dt(),e=t.Cr().Cr;if(e!==2&&e!==3)return;const i=this.Es.W();if(!i.baseLineVisible||!this.Es.yt())return;const o=this.Es.Ct();o!==null&&(this.Sr.yt=!0,this.Sr.st=t.Rt(o.Vt,o.Vt),this.Sr.V=i.baseLineColor,this.Sr.et=i.baseLineWidth,this.Sr.Nt=i.baseLineStyle)}}class iU extends on{constructor(){super(...arguments),this.zt=null}J(t){this.zt=t}$e(){return this.zt}K({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){const o=this.zt;if(o===null)return;const l=Math.max(1,Math.floor(e)),u=l%2/2,d=Math.round(o.Xe.x*e)+u,p=o.Xe.y*i;t.fillStyle=o.Tr,t.beginPath();const m=Math.max(2,1.5*o.Pr)*e;t.arc(d,p,m,0,2*Math.PI,!1),t.fill(),t.fillStyle=o.Rr,t.beginPath(),t.arc(d,p,o.ht*e,0,2*Math.PI,!1),t.fill(),t.lineWidth=l,t.strokeStyle=o.Dr,t.beginPath(),t.arc(d,p,o.ht*e+l/2,0,2*Math.PI,!1),t.stroke()}}const sU=[{Vr:0,Or:.25,Br:4,Ar:10,Ir:.25,zr:0,Lr:.4,Er:.8},{Vr:.25,Or:.525,Br:10,Ar:14,Ir:0,zr:0,Lr:.8,Er:0},{Vr:.525,Or:1,Br:14,Ar:14,Ir:0,zr:0,Lr:0,Er:0}];function c0(n,t,e,i){return function(o,l){if(o==="transparent")return o;const u=kr(o),d=u[3];return`rgba(${u[0]}, ${u[1]}, ${u[2]}, ${l*d})`}(n,e+(i-e)*t)}function h0(n,t){const e=n%2600/2600;let i;for(const p of sU)if(e>=p.Vr&&e<=p.Or){i=p;break}di(i!==void 0,"Last price animation internal logic error");const o=(e-i.Vr)/(i.Or-i.Vr);return{Rr:c0(t,o,i.Ir,i.zr),Dr:c0(t,o,i.Lr,i.Er),ht:(l=o,u=i.Br,d=i.Ar,u+(d-u)*l)};var l,u,d}class oU{constructor(t){this.Wt=new iU,this.ft=!0,this.Nr=!0,this.Fr=performance.now(),this.Wr=this.Fr-1,this.jr=t}Hr(){this.Wr=this.Fr-1,this.bt()}$r(){if(this.bt(),this.jr.W().lastPriceAnimation===2){const t=performance.now(),e=this.Wr-t;if(e>0)return void(e<650&&(this.Wr+=2600));this.Fr=t,this.Wr=t+2600}}bt(){this.ft=!0}Ur(){this.Nr=!0}yt(){return this.jr.W().lastPriceAnimation!==0}qr(){switch(this.jr.W().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Wr}}gt(){return this.ft?(this.Mt(),this.ft=!1,this.Nr=!1):this.Nr&&(this.Yr(),this.Nr=!1),this.Wt}Mt(){this.Wt.J(null);const t=this.jr.$t().St(),e=t.Xs(),i=this.jr.Ct();if(e===null||i===null)return;const o=this.jr.Zr(!0);if(o.Xr||!e.Kr(o.ee))return;const l={x:t.It(o.ee),y:this.jr.Dt().Rt(o._t,i.Vt)},u=o.V,d=this.jr.W().lineWidth,p=h0(this.Gr(),u);this.Wt.J({Tr:u,Pr:d,Rr:p.Rr,Dr:p.Dr,ht:p.ht,Xe:l})}Yr(){const t=this.Wt.$e();if(t!==null){const e=h0(this.Gr(),t.Tr);t.Rr=e.Rr,t.Dr=e.Dr,t.ht=e.ht}}Gr(){return this.qr()?performance.now()-this.Fr:2599}}function xr(n,t){return dS(Math.min(Math.max(n,12),30)*t)}function Lr(n,t){switch(n){case"arrowDown":case"arrowUp":return xr(t,1);case"circle":return xr(t,.8);case"square":return xr(t,.7)}}function bS(n){return function(t){const e=Math.ceil(t);return e%2!=0?e-1:e}(xr(n,1))}function f0(n){return Math.max(xr(n,.1),3)}function d0(n,t,e){return t?n:e?Math.ceil(n/2):0}function TS(n,t,e,i,o){const l=Lr("square",e),u=(l-1)/2,d=n-u,p=t-u;return i>=d&&i<=d+l&&o>=p&&o<=p+l}function p0(n,t,e,i){const o=(Lr("arrowUp",i)-1)/2*e.Jr,l=(dS(i/2)-1)/2*e.Jr;t.beginPath(),n?(t.moveTo(e.nt-o,e.st),t.lineTo(e.nt,e.st-o),t.lineTo(e.nt+o,e.st),t.lineTo(e.nt+l,e.st),t.lineTo(e.nt+l,e.st+o),t.lineTo(e.nt-l,e.st+o),t.lineTo(e.nt-l,e.st)):(t.moveTo(e.nt-o,e.st),t.lineTo(e.nt,e.st+o),t.lineTo(e.nt+o,e.st),t.lineTo(e.nt+l,e.st),t.lineTo(e.nt+l,e.st-o),t.lineTo(e.nt-l,e.st-o),t.lineTo(e.nt-l,e.st)),t.fill()}function rU(n,t,e,i,o,l){return TS(t,e,i,o,l)}class lU extends on{constructor(){super(...arguments),this.zt=null,this.ar=new Ir,this.j=-1,this.H="",this.Qr=""}J(t){this.zt=t}_r(t,e){this.j===t&&this.H===e||(this.j=t,this.H=e,this.Qr=io(t,e),this.ar.nr())}wr(t,e){if(this.zt===null||this.zt.tt===null)return null;for(let i=this.zt.tt.from;i<this.zt.tt.to;i++){const o=this.zt.it[i];if(uU(o,t,e))return{Mr:o.th,gr:o.gr}}return null}K({context:t,horizontalPixelRatio:e,verticalPixelRatio:i},o,l){if(this.zt!==null&&this.zt.tt!==null){t.textBaseline="middle",t.font=this.Qr;for(let u=this.zt.tt.from;u<this.zt.tt.to;u++){const d=this.zt.it[u];d.Kt!==void 0&&(d.Kt.Hi=this.ar.xi(t,d.Kt.ih),d.Kt.At=this.j,d.Kt.nt=d.nt-d.Kt.Hi/2),aU(d,t,e,i)}}}}function aU(n,t,e,i){t.fillStyle=n.V,n.Kt!==void 0&&function(o,l,u,d,p,m){o.save(),o.scale(p,m),o.fillText(l,u,d),o.restore()}(t,n.Kt.ih,n.Kt.nt,n.Kt.st,e,i),function(o,l,u){if(o.Ks!==0){switch(o.nh){case"arrowDown":return void p0(!1,l,u,o.Ks);case"arrowUp":return void p0(!0,l,u,o.Ks);case"circle":return void function(d,p,m){const g=(Lr("circle",m)-1)/2;d.beginPath(),d.arc(p.nt,p.st,g*p.Jr,0,2*Math.PI,!1),d.fill()}(l,u,o.Ks);case"square":return void function(d,p,m){const g=Lr("square",m),_=(g-1)*p.Jr/2,S=p.nt-_,b=p.st-_;d.fillRect(S,b,g*p.Jr,g*p.Jr)}(l,u,o.Ks)}o.nh}}(n,t,function(o,l,u){const d=Math.max(1,Math.floor(l))%2/2;return{nt:Math.round(o.nt*l)+d,st:o.st*u,Jr:l}}(n,e,i))}function uU(n,t,e){return!(n.Kt===void 0||!function(i,o,l,u,d,p){const m=u/2;return d>=i&&d<=i+l&&p>=o-m&&p<=o+m}(n.Kt.nt,n.Kt.st,n.Kt.Hi,n.Kt.At,t,e))||function(i,o,l){if(i.Ks===0)return!1;switch(i.nh){case"arrowDown":case"arrowUp":return rU(0,i.nt,i.st,i.Ks,o,l);case"circle":return function(u,d,p,m,g){const _=2+Lr("circle",p)/2,S=u-m,b=d-g;return Math.sqrt(S*S+b*b)<=_}(i.nt,i.st,i.Ks,o,l);case"square":return TS(i.nt,i.st,i.Ks,o,l)}}(n,t,e)}function cU(n,t,e,i,o,l,u,d,p){const m=mn(e)?e:e.Se,g=mn(e)?e:e.Me,_=mn(e)?e:e.xe,S=mn(t.size)?Math.max(t.size,0):1,b=bS(d.le())*S,w=b/2;switch(n.Ks=b,t.position){case"inBar":return n.st=u.Rt(m,p),void(n.Kt!==void 0&&(n.Kt.st=n.st+w+l+.6*o));case"aboveBar":return n.st=u.Rt(g,p)-w-i.sh,n.Kt!==void 0&&(n.Kt.st=n.st-w-.6*o,i.sh+=1.2*o),void(i.sh+=b+l);case"belowBar":return n.st=u.Rt(_,p)+w+i.eh,n.Kt!==void 0&&(n.Kt.st=n.st+w+l+.6*o,i.eh+=1.2*o),void(i.eh+=b+l)}t.position}class hU{constructor(t,e){this.ft=!0,this.rh=!0,this.hh=!0,this.ah=null,this.oh=null,this.Wt=new lU,this.jr=t,this.$i=e,this.zt={it:[],tt:null}}bt(t){this.ft=!0,this.hh=!0,t==="data"&&(this.rh=!0,this.oh=null)}gt(t){if(!this.jr.yt())return null;this.ft&&this._h();const e=this.$i.W().layout;return this.Wt._r(e.fontSize,e.fontFamily),this.Wt.J(this.zt),this.Wt}uh(){if(this.hh){if(this.jr.dh().length>0){const t=this.$i.St().le(),e=f0(t),i=1.5*bS(t)+2*e,o=this.fh();this.ah={above:d0(i,o.aboveBar,o.inBar),below:d0(i,o.belowBar,o.inBar)}}else this.ah=null;this.hh=!1}return this.ah}fh(){return this.oh===null&&(this.oh=this.jr.dh().reduce((t,e)=>(t[e.position]||(t[e.position]=!0),t),{inBar:!1,aboveBar:!1,belowBar:!1})),this.oh}_h(){const t=this.jr.Dt(),e=this.$i.St(),i=this.jr.dh();this.rh&&(this.zt.it=i.map(g=>({ot:g.time,nt:0,st:0,Ks:0,nh:g.shape,V:g.color,th:g.th,gr:g.id,Kt:void 0})),this.rh=!1);const o=this.$i.W().layout;this.zt.tt=null;const l=e.Xs();if(l===null)return;const u=this.jr.Ct();if(u===null||this.zt.it.length===0)return;let d=NaN;const p=f0(e.le()),m={sh:p,eh:p};this.zt.tt=yS(this.zt.it,l,!0);for(let g=this.zt.tt.from;g<this.zt.tt.to;g++){const _=i[g];_.time!==d&&(m.sh=p,m.eh=p,d=_.time);const S=this.zt.it[g];S.nt=e.It(_.time),_.text!==void 0&&_.text.length>0&&(S.Kt={ih:_.text,nt:0,st:0,Hi:0,At:0});const b=this.jr.ph(_.time);b!==null&&cU(S,_,b,m,o.fontSize,p,t,e,u.Vt)}this.ft=!1}}class fU extends Bf{constructor(t){super(t)}yr(){const t=this.Sr;t.yt=!1;const e=this.Es.W();if(!e.priceLineVisible||!this.Es.yt())return;const i=this.Es.Zr(e.priceLineSource===0);i.Xr||(t.yt=!0,t.st=i.ki,t.V=this.Es.mh(i.V),t.et=e.priceLineWidth,t.Nt=e.priceLineStyle)}}class dU extends qa{constructor(t){super(),this.jt=t}zi(t,e,i){t.yt=!1,e.yt=!1;const o=this.jt;if(!o.yt())return;const l=o.W(),u=l.lastValueVisible,d=o.bh()!=="",p=l.seriesLastValueMode===0,m=o.Zr(!1);if(m.Xr)return;u&&(t.Kt=this.wh(m,u,p),t.yt=t.Kt.length!==0),(d||p)&&(e.Kt=this.gh(m,u,d,p),e.yt=e.Kt.length>0);const g=o.mh(m.V),_=Ba(g);i.t=_.t,i.ki=m.ki,e.Ot=o.$t().Bt(m.ki/o.Dt().At()),t.Ot=g,t.V=_.i,e.V=_.i}gh(t,e,i,o){let l="";const u=this.jt.bh();return i&&u.length!==0&&(l+=`${u} `),e&&o&&(l+=this.jt.Dt().Mh()?t.xh:t.Sh),l.trim()}wh(t,e,i){return e?i?this.jt.Dt().Mh()?t.Sh:t.xh:t.Kt:""}}function m0(n,t,e,i){const o=Number.isFinite(t),l=Number.isFinite(e);return o&&l?n(t,e):o||l?o?t:e:i}class ke{constructor(t,e){this.kh=t,this.yh=e}Ch(t){return t!==null&&this.kh===t.kh&&this.yh===t.yh}Th(){return new ke(this.kh,this.yh)}Ph(){return this.kh}Rh(){return this.yh}Dh(){return this.yh-this.kh}Ni(){return this.yh===this.kh||Number.isNaN(this.yh)||Number.isNaN(this.kh)}ts(t){return t===null?this:new ke(m0(Math.min,this.Ph(),t.Ph(),-1/0),m0(Math.max,this.Rh(),t.Rh(),1/0))}Vh(t){if(!mn(t)||this.yh-this.kh===0)return;const e=.5*(this.yh+this.kh);let i=this.yh-e,o=this.kh-e;i*=t,o*=t,this.yh=e+i,this.kh=e+o}Oh(t){mn(t)&&(this.yh+=t,this.kh+=t)}Bh(){return{minValue:this.kh,maxValue:this.yh}}static Ah(t){return t===null?null:new ke(t.minValue,t.maxValue)}}class Na{constructor(t,e){this.Ih=t,this.zh=e||null}Lh(){return this.Ih}Eh(){return this.zh}Bh(){return this.Ih===null?null:{priceRange:this.Ih.Bh(),margins:this.zh||void 0}}static Ah(t){return t===null?null:new Na(ke.Ah(t.priceRange),t.margins)}}class pU extends Bf{constructor(t,e){super(t),this.Nh=e}yr(){const t=this.Sr;t.yt=!1;const e=this.Nh.W();if(!this.Es.yt()||!e.lineVisible)return;const i=this.Nh.Fh();i!==null&&(t.yt=!0,t.st=i,t.V=e.color,t.et=e.lineWidth,t.Nt=e.lineStyle,t.gr=this.Nh.W().id)}}class mU extends qa{constructor(t,e){super(),this.jr=t,this.Nh=e}zi(t,e,i){t.yt=!1,e.yt=!1;const o=this.Nh.W(),l=o.axisLabelVisible,u=o.title!=="",d=this.jr;if(!l||!d.yt())return;const p=this.Nh.Fh();if(p===null)return;u&&(e.Kt=o.title,e.yt=!0),e.Ot=d.$t().Bt(p/d.Dt().At()),t.Kt=this.Wh(o.price),t.yt=!0;const m=Ba(o.axisLabelColor||o.color);i.t=m.t;const g=o.axisLabelTextColor||m.i;t.V=g,e.V=g,i.ki=p}Wh(t){const e=this.jr.Ct();return e===null?"":this.jr.Dt().Fi(t,e.Vt)}}class gU{constructor(t,e){this.jr=t,this.cn=e,this.jh=new pU(t,this),this.ur=new mU(t,this),this.Hh=new SS(this.ur,t,t.$t())}$h(t){sn(this.cn,t),this.bt(),this.jr.$t().Uh()}W(){return this.cn}qh(){return this.jh}Yh(){return this.Hh}Zh(){return this.ur}bt(){this.jh.bt(),this.ur.bt()}Fh(){const t=this.jr,e=t.Dt();if(t.$t().St().Ni()||e.Ni())return null;const i=t.Ct();return i===null?null:e.Rt(this.cn.price,i.Vt)}}class vU extends Pf{constructor(t){super(),this.$i=t}$t(){return this.$i}}const yU={Bar:(n,t,e,i)=>{var o;const l=t.upColor,u=t.downColor,d=Y(n(e,i)),p=Xs(d.Vt[0])<=Xs(d.Vt[3]);return{ce:(o=d.V)!==null&&o!==void 0?o:p?l:u}},Candlestick:(n,t,e,i)=>{var o,l,u;const d=t.upColor,p=t.downColor,m=t.borderUpColor,g=t.borderDownColor,_=t.wickUpColor,S=t.wickDownColor,b=Y(n(e,i)),w=Xs(b.Vt[0])<=Xs(b.Vt[3]);return{ce:(o=b.V)!==null&&o!==void 0?o:w?d:p,Ne:(l=b.Ot)!==null&&l!==void 0?l:w?m:g,Ee:(u=b.Xh)!==null&&u!==void 0?u:w?_:S}},Custom:(n,t,e,i)=>{var o;return{ce:(o=Y(n(e,i)).V)!==null&&o!==void 0?o:t.color}},Area:(n,t,e,i)=>{var o,l,u,d;const p=Y(n(e,i));return{ce:(o=p.lt)!==null&&o!==void 0?o:t.lineColor,lt:(l=p.lt)!==null&&l!==void 0?l:t.lineColor,Ps:(u=p.Ps)!==null&&u!==void 0?u:t.topColor,Rs:(d=p.Rs)!==null&&d!==void 0?d:t.bottomColor}},Baseline:(n,t,e,i)=>{var o,l,u,d,p,m;const g=Y(n(e,i));return{ce:g.Vt[3]>=t.baseValue.price?t.topLineColor:t.bottomLineColor,Re:(o=g.Re)!==null&&o!==void 0?o:t.topLineColor,De:(l=g.De)!==null&&l!==void 0?l:t.bottomLineColor,ke:(u=g.ke)!==null&&u!==void 0?u:t.topFillColor1,ye:(d=g.ye)!==null&&d!==void 0?d:t.topFillColor2,Ce:(p=g.Ce)!==null&&p!==void 0?p:t.bottomFillColor1,Te:(m=g.Te)!==null&&m!==void 0?m:t.bottomFillColor2}},Line:(n,t,e,i)=>{var o,l;const u=Y(n(e,i));return{ce:(o=u.V)!==null&&o!==void 0?o:t.color,lt:(l=u.V)!==null&&l!==void 0?l:t.color}},Histogram:(n,t,e,i)=>{var o;return{ce:(o=Y(n(e,i)).V)!==null&&o!==void 0?o:t.color}}};class _U{constructor(t){this.Kh=(e,i)=>i!==void 0?i.Vt:this.jr.In().Gh(e),this.jr=t,this.Jh=yU[t.Qh()]}$s(t,e){return this.Jh(this.Kh,this.jr.W(),t,e)}}var g0;(function(n){n[n.NearestLeft=-1]="NearestLeft",n[n.None=0]="None",n[n.NearestRight=1]="NearestRight"})(g0||(g0={}));const ci=30;class SU{constructor(){this.tl=[],this.il=new Map,this.nl=new Map}sl(){return this.Ks()>0?this.tl[this.tl.length-1]:null}el(){return this.Ks()>0?this.rl(0):null}An(){return this.Ks()>0?this.rl(this.tl.length-1):null}Ks(){return this.tl.length}Ni(){return this.Ks()===0}Kr(t){return this.hl(t,0)!==null}Gh(t){return this.ll(t)}ll(t,e=0){const i=this.hl(t,e);return i===null?null:Object.assign(Object.assign({},this.al(i)),{ee:this.rl(i)})}ne(){return this.tl}ol(t,e,i){if(this.Ni())return null;let o=null;for(const l of i)o=fa(o,this._l(t,e,l));return o}J(t){this.nl.clear(),this.il.clear(),this.tl=t}rl(t){return this.tl[t].ee}al(t){return this.tl[t]}hl(t,e){const i=this.ul(t);if(i===null&&e!==0)switch(e){case-1:return this.cl(t);case 1:return this.dl(t);default:throw new TypeError("Unknown search mode")}return i}cl(t){let e=this.fl(t);return e>0&&(e-=1),e!==this.tl.length&&this.rl(e)<t?e:null}dl(t){const e=this.vl(t);return e!==this.tl.length&&t<this.rl(e)?e:null}ul(t){const e=this.fl(t);return e===this.tl.length||t<this.tl[e].ee?null:e}fl(t){return qr(this.tl,t,(e,i)=>e.ee<i)}vl(t){return vS(this.tl,t,(e,i)=>e.ee>i)}pl(t,e,i){let o=null;for(let l=t;l<e;l++){const u=this.tl[l].Vt[i];Number.isNaN(u)||(o===null?o={ml:u,bl:u}:(u<o.ml&&(o.ml=u),u>o.bl&&(o.bl=u)))}return o}_l(t,e,i){if(this.Ni())return null;let o=null;const l=Y(this.el()),u=Y(this.An()),d=Math.max(t,l),p=Math.min(e,u),m=Math.ceil(d/ci)*ci,g=Math.max(m,Math.floor(p/ci)*ci);{const S=this.fl(d),b=this.vl(Math.min(p,m,e));o=fa(o,this.pl(S,b,i))}let _=this.il.get(i);_===void 0&&(_=new Map,this.il.set(i,_));for(let S=Math.max(m+1,d);S<g;S+=ci){const b=Math.floor(S/ci);let w=_.get(b);if(w===void 0){const E=this.fl(b*ci),M=this.vl((b+1)*ci-1);w=this.pl(E,M,i),_.set(b,w)}o=fa(o,w)}{const S=this.fl(g),b=this.vl(p);o=fa(o,this.pl(S,b,i))}return o}}function fa(n,t){return n===null?t:t===null?n:{ml:Math.min(n.ml,t.ml),bl:Math.max(n.bl,t.bl)}}class bU{constructor(t){this.wl=t}X(t,e,i){this.wl.draw(t)}gl(t,e,i){var o,l;(l=(o=this.wl).drawBackground)===null||l===void 0||l.call(o,t)}}class bh{constructor(t){this.tr=null,this.wn=t}gt(){var t;const e=this.wn.renderer();if(e===null)return null;if(((t=this.tr)===null||t===void 0?void 0:t.Ml)===e)return this.tr.xl;const i=new bU(e);return this.tr={Ml:e,xl:i},i}Sl(){var t,e,i;return(i=(e=(t=this.wn).zOrder)===null||e===void 0?void 0:e.call(t))!==null&&i!==void 0?i:"normal"}}function wS(n){var t,e,i,o,l;return{Kt:n.text(),ki:n.coordinate(),Si:(t=n.fixedCoordinate)===null||t===void 0?void 0:t.call(n),V:n.textColor(),t:n.backColor(),yt:(i=(e=n.visible)===null||e===void 0?void 0:e.call(n))===null||i===void 0||i,hi:(l=(o=n.tickVisible)===null||o===void 0?void 0:o.call(n))===null||l===void 0||l}}class TU{constructor(t,e){this.Wt=new uS,this.kl=t,this.yl=e}gt(){return this.Wt.J(Object.assign({Hi:this.yl.Hi()},wS(this.kl))),this.Wt}}class wU extends qa{constructor(t,e){super(),this.kl=t,this.Li=e}zi(t,e,i){const o=wS(this.kl);i.t=o.t,t.V=o.V;const l=2/12*this.Li.P();i.wi=l,i.gi=l,i.ki=o.ki,i.Si=o.Si,t.Kt=o.Kt,t.yt=o.yt,t.hi=o.hi}}class CU{constructor(t,e){this.Cl=null,this.Tl=null,this.Pl=null,this.Rl=null,this.Dl=null,this.Vl=t,this.jr=e}Ol(){return this.Vl}Vn(){var t,e;(e=(t=this.Vl).updateAllViews)===null||e===void 0||e.call(t)}Pn(){var t,e,i,o;const l=(i=(e=(t=this.Vl).paneViews)===null||e===void 0?void 0:e.call(t))!==null&&i!==void 0?i:[];if(((o=this.Cl)===null||o===void 0?void 0:o.Ml)===l)return this.Cl.xl;const u=l.map(d=>new bh(d));return this.Cl={Ml:l,xl:u},u}Qi(){var t,e,i,o;const l=(i=(e=(t=this.Vl).timeAxisViews)===null||e===void 0?void 0:e.call(t))!==null&&i!==void 0?i:[];if(((o=this.Tl)===null||o===void 0?void 0:o.Ml)===l)return this.Tl.xl;const u=this.jr.$t().St(),d=l.map(p=>new TU(p,u));return this.Tl={Ml:l,xl:d},d}Rn(){var t,e,i,o;const l=(i=(e=(t=this.Vl).priceAxisViews)===null||e===void 0?void 0:e.call(t))!==null&&i!==void 0?i:[];if(((o=this.Pl)===null||o===void 0?void 0:o.Ml)===l)return this.Pl.xl;const u=this.jr.Dt(),d=l.map(p=>new wU(p,u));return this.Pl={Ml:l,xl:d},d}Bl(){var t,e,i,o;const l=(i=(e=(t=this.Vl).priceAxisPaneViews)===null||e===void 0?void 0:e.call(t))!==null&&i!==void 0?i:[];if(((o=this.Rl)===null||o===void 0?void 0:o.Ml)===l)return this.Rl.xl;const u=l.map(d=>new bh(d));return this.Rl={Ml:l,xl:u},u}Al(){var t,e,i,o;const l=(i=(e=(t=this.Vl).timeAxisPaneViews)===null||e===void 0?void 0:e.call(t))!==null&&i!==void 0?i:[];if(((o=this.Dl)===null||o===void 0?void 0:o.Ml)===l)return this.Dl.xl;const u=l.map(d=>new bh(d));return this.Dl={Ml:l,xl:u},u}Il(t,e){var i,o,l;return(l=(o=(i=this.Vl).autoscaleInfo)===null||o===void 0?void 0:o.call(i,t,e))!==null&&l!==void 0?l:null}wr(t,e){var i,o,l;return(l=(o=(i=this.Vl).hitTest)===null||o===void 0?void 0:o.call(i,t,e))!==null&&l!==void 0?l:null}}function Th(n,t,e,i){n.forEach(o=>{t(o).forEach(l=>{l.Sl()===e&&i.push(l)})})}function wh(n){return n.Pn()}function xU(n){return n.Bl()}function EU(n){return n.Al()}class Of extends vU{constructor(t,e,i,o,l){super(t),this.zt=new SU,this.jh=new fU(this),this.zl=[],this.Ll=new nU(this),this.El=null,this.Nl=null,this.Fl=[],this.Wl=[],this.jl=null,this.Hl=[],this.cn=e,this.$l=i;const u=new dU(this);this.rn=[u],this.Hh=new SS(u,this,t),i!=="Area"&&i!=="Line"&&i!=="Baseline"||(this.El=new oU(this)),this.Ul(),this.ql(l)}S(){this.jl!==null&&clearTimeout(this.jl)}mh(t){return this.cn.priceLineColor||t}Zr(t){const e={Xr:!0},i=this.Dt();if(this.$t().St().Ni()||i.Ni()||this.zt.Ni())return e;const o=this.$t().St().Xs(),l=this.Ct();if(o===null||l===null)return e;let u,d;if(t){const _=this.zt.sl();if(_===null)return e;u=_,d=_.ee}else{const _=this.zt.ll(o.ui(),-1);if(_===null||(u=this.zt.Gh(_.ee),u===null))return e;d=_.ee}const p=u.Vt[3],m=this.Us().$s(d,{Vt:u}),g=i.Rt(p,l.Vt);return{Xr:!1,_t:p,Kt:i.Fi(p,l.Vt),xh:i.Yl(p),Sh:i.Zl(p,l.Vt),V:m.ce,ki:g,ee:d}}Us(){return this.Nl!==null||(this.Nl=new _U(this)),this.Nl}W(){return this.cn}$h(t){const e=t.priceScaleId;e!==void 0&&e!==this.cn.priceScaleId&&this.$t().Xl(this,e),sn(this.cn,t),t.priceFormat!==void 0&&(this.Ul(),this.$t().Kl()),this.$t().Gl(this),this.$t().Jl(),this.wn.bt("options")}J(t,e){this.zt.J(t),this.Ql(),this.wn.bt("data"),this.dn.bt("data"),this.El!==null&&(e&&e.ta?this.El.$r():t.length===0&&this.El.Hr());const i=this.$t().dr(this);this.$t().ia(i),this.$t().Gl(this),this.$t().Jl(),this.$t().Uh()}na(t){this.Fl=t,this.Ql();const e=this.$t().dr(this);this.dn.bt("data"),this.$t().ia(e),this.$t().Gl(this),this.$t().Jl(),this.$t().Uh()}sa(){return this.Fl}dh(){return this.Wl}ea(t){const e=new gU(this,t);return this.zl.push(e),this.$t().Gl(this),e}ra(t){const e=this.zl.indexOf(t);e!==-1&&this.zl.splice(e,1),this.$t().Gl(this)}Qh(){return this.$l}Ct(){const t=this.ha();return t===null?null:{Vt:t.Vt[3],la:t.ot}}ha(){const t=this.$t().St().Xs();if(t===null)return null;const e=t.Os();return this.zt.ll(e,1)}In(){return this.zt}ph(t){const e=this.zt.Gh(t);return e===null?null:this.$l==="Bar"||this.$l==="Candlestick"||this.$l==="Custom"?{ge:e.Vt[0],Me:e.Vt[1],xe:e.Vt[2],Se:e.Vt[3]}:e.Vt[3]}aa(t){const e=[];Th(this.Hl,wh,"top",e);const i=this.El;return i!==null&&i.yt()&&(this.jl===null&&i.qr()&&(this.jl=setTimeout(()=>{this.jl=null,this.$t().oa()},0)),i.Ur(),e.unshift(i)),e}Pn(){const t=[];this._a()||t.push(this.Ll),t.push(this.wn,this.jh,this.dn);const e=this.zl.map(i=>i.qh());return t.push(...e),Th(this.Hl,wh,"normal",t),t}ua(){return this.ca(wh,"bottom")}da(t){return this.ca(xU,t)}fa(t){return this.ca(EU,t)}va(t,e){return this.Hl.map(i=>i.wr(t,e)).filter(i=>i!==null)}Ji(t){return[this.Hh,...this.zl.map(e=>e.Yh())]}Rn(t,e){if(e!==this.Yi&&!this._a())return[];const i=[...this.rn];for(const o of this.zl)i.push(o.Zh());return this.Hl.forEach(o=>{i.push(...o.Rn())}),i}Qi(){const t=[];return this.Hl.forEach(e=>{t.push(...e.Qi())}),t}Il(t,e){if(this.cn.autoscaleInfoProvider!==void 0){const i=this.cn.autoscaleInfoProvider(()=>{const o=this.pa(t,e);return o===null?null:o.Bh()});return Na.Ah(i)}return this.pa(t,e)}ma(){return this.cn.priceFormat.minMove}ba(){return this.wa}Vn(){var t;this.wn.bt(),this.dn.bt();for(const e of this.rn)e.bt();for(const e of this.zl)e.bt();this.jh.bt(),this.Ll.bt(),(t=this.El)===null||t===void 0||t.bt(),this.Hl.forEach(e=>e.Vn())}Dt(){return Y(super.Dt())}kt(t){if(!((this.$l==="Line"||this.$l==="Area"||this.$l==="Baseline")&&this.cn.crosshairMarkerVisible))return null;const e=this.zt.Gh(t);return e===null?null:{_t:e.Vt[3],ht:this.ga(),Ot:this.Ma(),Pt:this.xa(),Tt:this.Sa(t)}}bh(){return this.cn.title}yt(){return this.cn.visible}ka(t){this.Hl.push(new CU(t,this))}ya(t){this.Hl=this.Hl.filter(e=>e.Ol()!==t)}Ca(){if(this.wn instanceof Sh)return t=>this.wn.We(t)}Ta(){if(this.wn instanceof Sh)return t=>this.wn.je(t)}_a(){return!$a(this.Dt().Pa())}pa(t,e){if(!Nr(t)||!Nr(e)||this.zt.Ni())return null;const i=this.$l==="Line"||this.$l==="Area"||this.$l==="Baseline"||this.$l==="Histogram"?[3]:[2,1],o=this.zt.ol(t,e,i);let l=o!==null?new ke(o.ml,o.bl):null;if(this.Qh()==="Histogram"){const d=this.cn.base,p=new ke(d,d);l=l!==null?l.ts(p):p}let u=this.dn.uh();return this.Hl.forEach(d=>{const p=d.Il(t,e);if(p!=null&&p.priceRange){const b=new ke(p.priceRange.minValue,p.priceRange.maxValue);l=l!==null?l.ts(b):b}var m,g,_,S;p!=null&&p.margins&&(m=u,g=p.margins,u={above:Math.max((_=m==null?void 0:m.above)!==null&&_!==void 0?_:0,g.above),below:Math.max((S=m==null?void 0:m.below)!==null&&S!==void 0?S:0,g.below)})}),new Na(l,u)}ga(){switch(this.$l){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerRadius}return 0}Ma(){switch(this.$l){case"Line":case"Area":case"Baseline":{const t=this.cn.crosshairMarkerBorderColor;if(t.length!==0)return t}}return null}xa(){switch(this.$l){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerBorderWidth}return 0}Sa(t){switch(this.$l){case"Line":case"Area":case"Baseline":{const e=this.cn.crosshairMarkerBackgroundColor;if(e.length!==0)return e}}return this.Us().$s(t).ce}Ul(){switch(this.cn.priceFormat.type){case"custom":this.wa={format:this.cn.priceFormat.formatter};break;case"volume":this.wa=new IL(this.cn.priceFormat.precision);break;case"percent":this.wa=new cS(this.cn.priceFormat.precision);break;default:{const t=Math.pow(10,this.cn.priceFormat.precision);this.wa=new Ha(t,this.cn.priceFormat.minMove*t)}}this.Yi!==null&&this.Yi.Ra()}Ql(){const t=this.$t().St();if(!t.Da()||this.zt.Ni())return void(this.Wl=[]);const e=Y(this.zt.el());this.Wl=this.Fl.map((i,o)=>{const l=Y(t.Va(i.time,!0)),u=l<e?1:-1;return{time:Y(this.zt.ll(l,u)).ee,position:i.position,shape:i.shape,color:i.color,id:i.id,th:o,text:i.text,size:i.size,originalTime:i.originalTime}})}ql(t){switch(this.dn=new hU(this,this.$t()),this.$l){case"Bar":this.wn=new $L(this,this.$t());break;case"Candlestick":this.wn=new KL(this,this.$t());break;case"Line":this.wn=new ZL(this,this.$t());break;case"Custom":this.wn=new Sh(this,this.$t(),we(t));break;case"Area":this.wn=new OL(this,this.$t());break;case"Baseline":this.wn=new FL(this,this.$t());break;case"Histogram":this.wn=new QL(this,this.$t());break;default:throw Error("Unknown chart style assigned: "+this.$l)}}ca(t,e){const i=[];return Th(this.Hl,t,e,i),i}}class MU{constructor(t){this.cn=t}Oa(t,e,i){let o=t;if(this.cn.mode===0)return o;const l=i.vn(),u=l.Ct();if(u===null)return o;const d=l.Rt(t,u),p=i.Ba().filter(g=>g instanceof Of).reduce((g,_)=>{if(i.vr(_)||!_.yt())return g;const S=_.Dt(),b=_.In();if(S.Ni()||!b.Kr(e))return g;const w=b.Gh(e);if(w===null)return g;const E=Xs(_.Ct());return g.concat([S.Rt(w.Vt[3],E.Vt)])},[]);if(p.length===0)return o;p.sort((g,_)=>Math.abs(g-d)-Math.abs(_-d));const m=p[0];return o=l.pn(m,u),o}}class AU extends on{constructor(){super(...arguments),this.zt=null}J(t){this.zt=t}K({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:o}){if(this.zt===null)return;const l=Math.max(1,Math.floor(i));t.lineWidth=l,function(u,d){u.save(),u.lineWidth%2&&u.translate(.5,.5),d(),u.restore()}(t,()=>{const u=Y(this.zt);if(u.Aa){t.strokeStyle=u.Ia,Hi(t,u.za),t.beginPath();for(const d of u.La){const p=Math.round(d.Ea*i);t.moveTo(p,-l),t.lineTo(p,e.height+l)}t.stroke()}if(u.Na){t.strokeStyle=u.Fa,Hi(t,u.Wa),t.beginPath();for(const d of u.ja){const p=Math.round(d.Ea*o);t.moveTo(-l,p),t.lineTo(e.width+l,p)}t.stroke()}})}}class RU{constructor(t){this.Wt=new AU,this.ft=!0,this.tn=t}bt(){this.ft=!0}gt(){if(this.ft){const t=this.tn.$t().W().grid,e={Na:t.horzLines.visible,Aa:t.vertLines.visible,Fa:t.horzLines.color,Ia:t.vertLines.color,Wa:t.horzLines.style,za:t.vertLines.style,ja:this.tn.vn().Ha(),La:(this.tn.$t().St().Ha()||[]).map(i=>({Ea:i.coord}))};this.Wt.J(e),this.ft=!1}return this.Wt}}class kU{constructor(t){this.wn=new RU(t)}qh(){return this.wn}}const Ch={$a:4,Ua:1e-4};function Qs(n,t){const e=100*(n-t)/t;return t<0?-e:e}function NU(n,t){const e=Qs(n.Ph(),t),i=Qs(n.Rh(),t);return new ke(e,i)}function Er(n,t){const e=100*(n-t)/t+100;return t<0?-e:e}function DU(n,t){const e=Er(n.Ph(),t),i=Er(n.Rh(),t);return new ke(e,i)}function Da(n,t){const e=Math.abs(n);if(e<1e-15)return 0;const i=Math.log10(e+t.Ua)+t.$a;return n<0?-i:i}function Mr(n,t){const e=Math.abs(n);if(e<1e-15)return 0;const i=Math.pow(10,e-t.$a)-t.Ua;return n<0?-i:i}function vr(n,t){if(n===null)return null;const e=Da(n.Ph(),t),i=Da(n.Rh(),t);return new ke(e,i)}function da(n,t){if(n===null)return null;const e=Mr(n.Ph(),t),i=Mr(n.Rh(),t);return new ke(e,i)}function xh(n){if(n===null)return Ch;const t=Math.abs(n.Rh()-n.Ph());if(t>=1||t<1e-15)return Ch;const e=Math.ceil(Math.abs(Math.log10(t))),i=Ch.$a+e;return{$a:i,Ua:1/Math.pow(10,i)}}class Eh{constructor(t,e){if(this.qa=t,this.Ya=e,function(i){if(i<0)return!1;for(let o=i;o>1;o/=10)if(o%10!=0)return!1;return!0}(this.qa))this.Za=[2,2.5,2];else{this.Za=[];for(let i=this.qa;i!==1;){if(i%2==0)this.Za.push(2),i/=2;else{if(i%5!=0)throw new Error("unexpected base");this.Za.push(2,2.5),i/=5}if(this.Za.length>100)throw new Error("something wrong with base")}}}Xa(t,e,i){const o=this.qa===0?0:1/this.qa;let l=Math.pow(10,Math.max(0,Math.ceil(Math.log10(t-e)))),u=0,d=this.Ya[0];for(;;){const _=ha(l,o,1e-14)&&l>o+1e-14,S=ha(l,i*d,1e-14),b=ha(l,1,1e-14);if(!(_&&S&&b))break;l/=d,d=this.Ya[++u%this.Ya.length]}if(l<=o+1e-14&&(l=o),l=Math.max(1,l),this.Za.length>0&&(p=l,m=1,g=1e-14,Math.abs(p-m)<g))for(u=0,d=this.Za[0];ha(l,i*d,1e-14)&&l>o+1e-14;)l/=d,d=this.Za[++u%this.Za.length];var p,m,g;return l}}class v0{constructor(t,e,i,o){this.Ka=[],this.Li=t,this.qa=e,this.Ga=i,this.Ja=o}Xa(t,e){if(t<e)throw new Error("high < low");const i=this.Li.At(),o=(t-e)*this.Qa()/i,l=new Eh(this.qa,[2,2.5,2]),u=new Eh(this.qa,[2,2,2.5]),d=new Eh(this.qa,[2.5,2,2]),p=[];return p.push(l.Xa(t,e,o),u.Xa(t,e,o),d.Xa(t,e,o)),function(m){if(m.length<1)throw Error("array is empty");let g=m[0];for(let _=1;_<m.length;++_)m[_]<g&&(g=m[_]);return g}(p)}io(){const t=this.Li,e=t.Ct();if(e===null)return void(this.Ka=[]);const i=t.At(),o=this.Ga(i-1,e),l=this.Ga(0,e),u=this.Li.W().entireTextOnly?this.no()/2:0,d=u,p=i-1-u,m=Math.max(o,l),g=Math.min(o,l);if(m===g)return void(this.Ka=[]);let _=this.Xa(m,g),S=m%_;S+=S<0?_:0;const b=m>=g?1:-1;let w=null,E=0;for(let M=m-S;M>g;M-=_){const D=this.Ja(M,e,!0);w!==null&&Math.abs(D-w)<this.Qa()||D<d||D>p||(E<this.Ka.length?(this.Ka[E].Ea=D,this.Ka[E].so=t.eo(M)):this.Ka.push({Ea:D,so:t.eo(M)}),E++,w=D,t.ro()&&(_=this.Xa(M*b,g)))}this.Ka.length=E}Ha(){return this.Ka}no(){return this.Li.P()}Qa(){return Math.ceil(2.5*this.no())}}function CS(n){return n.slice().sort((t,e)=>Y(t.Xi())-Y(e.Xi()))}var y0;(function(n){n[n.Normal=0]="Normal",n[n.Logarithmic=1]="Logarithmic",n[n.Percentage=2]="Percentage",n[n.IndexedTo100=3]="IndexedTo100"})(y0||(y0={}));const _0=new cS,S0=new Ha(100,1);class IU{constructor(t,e,i,o){this.ho=0,this.lo=null,this.Ih=null,this.ao=null,this.oo={_o:!1,uo:null},this.co=0,this.do=0,this.fo=new jt,this.vo=new jt,this.po=[],this.mo=null,this.bo=null,this.wo=null,this.Mo=null,this.wa=S0,this.xo=xh(null),this.So=t,this.cn=e,this.ko=i,this.yo=o,this.Co=new v0(this,100,this.To.bind(this),this.Po.bind(this))}Pa(){return this.So}W(){return this.cn}$h(t){if(sn(this.cn,t),this.Ra(),t.mode!==void 0&&this.Ro({Cr:t.mode}),t.scaleMargins!==void 0){const e=we(t.scaleMargins.top),i=we(t.scaleMargins.bottom);if(e<0||e>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${e}`);if(i<0||i>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${i}`);if(e+i>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${e+i}`);this.Do(),this.bo=null}}Vo(){return this.cn.autoScale}ro(){return this.cn.mode===1}Mh(){return this.cn.mode===2}Oo(){return this.cn.mode===3}Cr(){return{Wn:this.cn.autoScale,Bo:this.cn.invertScale,Cr:this.cn.mode}}Ro(t){const e=this.Cr();let i=null;t.Wn!==void 0&&(this.cn.autoScale=t.Wn),t.Cr!==void 0&&(this.cn.mode=t.Cr,t.Cr!==2&&t.Cr!==3||(this.cn.autoScale=!0),this.oo._o=!1),e.Cr===1&&t.Cr!==e.Cr&&(function(l,u){if(l===null)return!1;const d=Mr(l.Ph(),u),p=Mr(l.Rh(),u);return isFinite(d)&&isFinite(p)}(this.Ih,this.xo)?(i=da(this.Ih,this.xo),i!==null&&this.Ao(i)):this.cn.autoScale=!0),t.Cr===1&&t.Cr!==e.Cr&&(i=vr(this.Ih,this.xo),i!==null&&this.Ao(i));const o=e.Cr!==this.cn.mode;o&&(e.Cr===2||this.Mh())&&this.Ra(),o&&(e.Cr===3||this.Oo())&&this.Ra(),t.Bo!==void 0&&e.Bo!==t.Bo&&(this.cn.invertScale=t.Bo,this.Io()),this.vo.m(e,this.Cr())}zo(){return this.vo}P(){return this.ko.fontSize}At(){return this.ho}Lo(t){this.ho!==t&&(this.ho=t,this.Do(),this.bo=null)}Eo(){if(this.lo)return this.lo;const t=this.At()-this.No()-this.Fo();return this.lo=t,t}Lh(){return this.Wo(),this.Ih}Ao(t,e){const i=this.Ih;(e||i===null&&t!==null||i!==null&&!i.Ch(t))&&(this.bo=null,this.Ih=t)}Ni(){return this.Wo(),this.ho===0||!this.Ih||this.Ih.Ni()}jo(t){return this.Bo()?t:this.At()-1-t}Rt(t,e){return this.Mh()?t=Qs(t,e):this.Oo()&&(t=Er(t,e)),this.Po(t,e)}te(t,e,i){this.Wo();const o=this.Fo(),l=Y(this.Lh()),u=l.Ph(),d=l.Rh(),p=this.Eo()-1,m=this.Bo(),g=p/(d-u),_=i===void 0?0:i.from,S=i===void 0?t.length:i.to,b=this.Ho();for(let w=_;w<S;w++){const E=t[w],M=E._t;if(isNaN(M))continue;let D=M;b!==null&&(D=b(E._t,e));const U=o+g*(D-u),k=m?U:this.ho-1-U;E.st=k}}be(t,e,i){this.Wo();const o=this.Fo(),l=Y(this.Lh()),u=l.Ph(),d=l.Rh(),p=this.Eo()-1,m=this.Bo(),g=p/(d-u),_=i===void 0?0:i.from,S=i===void 0?t.length:i.to,b=this.Ho();for(let w=_;w<S;w++){const E=t[w];let M=E.ge,D=E.Me,U=E.xe,k=E.Se;b!==null&&(M=b(E.ge,e),D=b(E.Me,e),U=b(E.xe,e),k=b(E.Se,e));let V=o+g*(M-u),q=m?V:this.ho-1-V;E.pe=q,V=o+g*(D-u),q=m?V:this.ho-1-V,E.de=q,V=o+g*(U-u),q=m?V:this.ho-1-V,E.fe=q,V=o+g*(k-u),q=m?V:this.ho-1-V,E.me=q}}pn(t,e){const i=this.To(t,e);return this.$o(i,e)}$o(t,e){let i=t;return this.Mh()?i=function(o,l){return l<0&&(o=-o),o/100*l+l}(i,e):this.Oo()&&(i=function(o,l){return o-=100,l<0&&(o=-o),o/100*l+l}(i,e)),i}Ba(){return this.po}Uo(){if(this.mo)return this.mo;let t=[];for(let e=0;e<this.po.length;e++){const i=this.po[e];i.Xi()===null&&i.Ki(e+1),t.push(i)}return t=CS(t),this.mo=t,this.mo}qo(t){this.po.indexOf(t)===-1&&(this.po.push(t),this.Ra(),this.Yo())}Zo(t){const e=this.po.indexOf(t);if(e===-1)throw new Error("source is not attached to scale");this.po.splice(e,1),this.po.length===0&&(this.Ro({Wn:!0}),this.Ao(null)),this.Ra(),this.Yo()}Ct(){let t=null;for(const e of this.po){const i=e.Ct();i!==null&&(t===null||i.la<t.la)&&(t=i)}return t===null?null:t.Vt}Bo(){return this.cn.invertScale}Ha(){const t=this.Ct()===null;if(this.bo!==null&&(t||this.bo.Xo===t))return this.bo.Ha;this.Co.io();const e=this.Co.Ha();return this.bo={Ha:e,Xo:t},this.fo.m(),e}Ko(){return this.fo}Go(t){this.Mh()||this.Oo()||this.wo===null&&this.ao===null&&(this.Ni()||(this.wo=this.ho-t,this.ao=Y(this.Lh()).Th()))}Jo(t){if(this.Mh()||this.Oo()||this.wo===null)return;this.Ro({Wn:!1}),(t=this.ho-t)<0&&(t=0);let e=(this.wo+.2*(this.ho-1))/(t+.2*(this.ho-1));const i=Y(this.ao).Th();e=Math.max(e,.1),i.Vh(e),this.Ao(i)}Qo(){this.Mh()||this.Oo()||(this.wo=null,this.ao=null)}t_(t){this.Vo()||this.Mo===null&&this.ao===null&&(this.Ni()||(this.Mo=t,this.ao=Y(this.Lh()).Th()))}i_(t){if(this.Vo()||this.Mo===null)return;const e=Y(this.Lh()).Dh()/(this.Eo()-1);let i=t-this.Mo;this.Bo()&&(i*=-1);const o=i*e,l=Y(this.ao).Th();l.Oh(o),this.Ao(l,!0),this.bo=null}n_(){this.Vo()||this.Mo!==null&&(this.Mo=null,this.ao=null)}ba(){return this.wa||this.Ra(),this.wa}Fi(t,e){switch(this.cn.mode){case 2:return this.s_(Qs(t,e));case 3:return this.ba().format(Er(t,e));default:return this.Wh(t)}}eo(t){switch(this.cn.mode){case 2:return this.s_(t);case 3:return this.ba().format(t);default:return this.Wh(t)}}Yl(t){return this.Wh(t,Y(this.e_()).ba())}Zl(t,e){return t=Qs(t,e),this.s_(t,_0)}r_(){return this.po}h_(t){this.oo={uo:t,_o:!1}}Vn(){this.po.forEach(t=>t.Vn())}Ra(){this.bo=null;const t=this.e_();let e=100;t!==null&&(e=Math.round(1/t.ma())),this.wa=S0,this.Mh()?(this.wa=_0,e=100):this.Oo()?(this.wa=new Ha(100,1),e=100):t!==null&&(this.wa=t.ba()),this.Co=new v0(this,e,this.To.bind(this),this.Po.bind(this)),this.Co.io()}Yo(){this.mo=null}e_(){return this.po[0]||null}No(){return this.Bo()?this.cn.scaleMargins.bottom*this.At()+this.do:this.cn.scaleMargins.top*this.At()+this.co}Fo(){return this.Bo()?this.cn.scaleMargins.top*this.At()+this.co:this.cn.scaleMargins.bottom*this.At()+this.do}Wo(){this.oo._o||(this.oo._o=!0,this.l_())}Do(){this.lo=null}Po(t,e){if(this.Wo(),this.Ni())return 0;t=this.ro()&&t?Da(t,this.xo):t;const i=Y(this.Lh()),o=this.Fo()+(this.Eo()-1)*(t-i.Ph())/i.Dh();return this.jo(o)}To(t,e){if(this.Wo(),this.Ni())return 0;const i=this.jo(t),o=Y(this.Lh()),l=o.Ph()+o.Dh()*((i-this.Fo())/(this.Eo()-1));return this.ro()?Mr(l,this.xo):l}Io(){this.bo=null,this.Co.io()}l_(){const t=this.oo.uo;if(t===null)return;let e=null;const i=this.r_();let o=0,l=0;for(const p of i){if(!p.yt())continue;const m=p.Ct();if(m===null)continue;const g=p.Il(t.Os(),t.ui());let _=g&&g.Lh();if(_!==null){switch(this.cn.mode){case 1:_=vr(_,this.xo);break;case 2:_=NU(_,m.Vt);break;case 3:_=DU(_,m.Vt)}if(e=e===null?_:e.ts(Y(_)),g!==null){const S=g.Eh();S!==null&&(o=Math.max(o,S.above),l=Math.max(l,S.below))}}}if(o===this.co&&l===this.do||(this.co=o,this.do=l,this.bo=null,this.Do()),e!==null){if(e.Ph()===e.Rh()){const p=this.e_(),m=5*(p===null||this.Mh()||this.Oo()?1:p.ma());this.ro()&&(e=da(e,this.xo)),e=new ke(e.Ph()-m,e.Rh()+m),this.ro()&&(e=vr(e,this.xo))}if(this.ro()){const p=da(e,this.xo),m=xh(p);if(u=m,d=this.xo,u.$a!==d.$a||u.Ua!==d.Ua){const g=this.ao!==null?da(this.ao,this.xo):null;this.xo=m,e=vr(p,m),g!==null&&(this.ao=vr(g,m))}}this.Ao(e)}else this.Ih===null&&(this.Ao(new ke(-.5,.5)),this.xo=xh(null));var u,d;this.oo._o=!0}Ho(){return this.Mh()?Qs:this.Oo()?Er:this.ro()?t=>Da(t,this.xo):null}a_(t,e,i){return e===void 0?(i===void 0&&(i=this.ba()),i.format(t)):e(t)}Wh(t,e){return this.a_(t,this.yo.priceFormatter,e)}s_(t,e){return this.a_(t,this.yo.percentageFormatter,e)}}class LU{constructor(t,e){this.po=[],this.o_=new Map,this.ho=0,this.__=0,this.u_=1e3,this.mo=null,this.c_=new jt,this.yl=t,this.$i=e,this.d_=new kU(this);const i=e.W();this.f_=this.v_("left",i.leftPriceScale),this.p_=this.v_("right",i.rightPriceScale),this.f_.zo().l(this.m_.bind(this,this.f_),this),this.p_.zo().l(this.m_.bind(this,this.p_),this),this.b_(i)}b_(t){if(t.leftPriceScale&&this.f_.$h(t.leftPriceScale),t.rightPriceScale&&this.p_.$h(t.rightPriceScale),t.localization&&(this.f_.Ra(),this.p_.Ra()),t.overlayPriceScales){const e=Array.from(this.o_.values());for(const i of e){const o=Y(i[0].Dt());o.$h(t.overlayPriceScales),t.localization&&o.Ra()}}}w_(t){switch(t){case"left":return this.f_;case"right":return this.p_}return this.o_.has(t)?we(this.o_.get(t))[0].Dt():null}S(){this.$t().g_().p(this),this.f_.zo().p(this),this.p_.zo().p(this),this.po.forEach(t=>{t.S&&t.S()}),this.c_.m()}M_(){return this.u_}x_(t){this.u_=t}$t(){return this.$i}Hi(){return this.__}At(){return this.ho}S_(t){this.__=t,this.k_()}Lo(t){this.ho=t,this.f_.Lo(t),this.p_.Lo(t),this.po.forEach(e=>{if(this.vr(e)){const i=e.Dt();i!==null&&i.Lo(t)}}),this.k_()}Ba(){return this.po}vr(t){const e=t.Dt();return e===null||this.f_!==e&&this.p_!==e}qo(t,e,i){const o=i!==void 0?i:this.C_().y_+1;this.T_(t,e,o)}Zo(t){const e=this.po.indexOf(t);di(e!==-1,"removeDataSource: invalid data source"),this.po.splice(e,1);const i=Y(t.Dt()).Pa();if(this.o_.has(i)){const l=we(this.o_.get(i)),u=l.indexOf(t);u!==-1&&(l.splice(u,1),l.length===0&&this.o_.delete(i))}const o=t.Dt();o&&o.Ba().indexOf(t)>=0&&o.Zo(t),o!==null&&(o.Yo(),this.P_(o)),this.mo=null}mr(t){return t===this.f_?"left":t===this.p_?"right":"overlay"}R_(){return this.f_}D_(){return this.p_}V_(t,e){t.Go(e)}O_(t,e){t.Jo(e),this.k_()}B_(t){t.Qo()}A_(t,e){t.t_(e)}I_(t,e){t.i_(e),this.k_()}z_(t){t.n_()}k_(){this.po.forEach(t=>{t.Vn()})}vn(){let t=null;return this.$i.W().rightPriceScale.visible&&this.p_.Ba().length!==0?t=this.p_:this.$i.W().leftPriceScale.visible&&this.f_.Ba().length!==0?t=this.f_:this.po.length!==0&&(t=this.po[0].Dt()),t===null&&(t=this.p_),t}pr(){let t=null;return this.$i.W().rightPriceScale.visible?t=this.p_:this.$i.W().leftPriceScale.visible&&(t=this.f_),t}P_(t){t!==null&&t.Vo()&&this.L_(t)}E_(t){const e=this.yl.Xs();t.Ro({Wn:!0}),e!==null&&t.h_(e),this.k_()}N_(){this.L_(this.f_),this.L_(this.p_)}F_(){this.P_(this.f_),this.P_(this.p_),this.po.forEach(t=>{this.vr(t)&&this.P_(t.Dt())}),this.k_(),this.$i.Uh()}Uo(){return this.mo===null&&(this.mo=CS(this.po)),this.mo}W_(){return this.c_}j_(){return this.d_}L_(t){const e=t.r_();if(e&&e.length>0&&!this.yl.Ni()){const i=this.yl.Xs();i!==null&&t.h_(i)}t.Vn()}C_(){const t=this.Uo();if(t.length===0)return{H_:0,y_:0};let e=0,i=0;for(let o=0;o<t.length;o++){const l=t[o].Xi();l!==null&&(l<e&&(e=l),l>i&&(i=l))}return{H_:e,y_:i}}T_(t,e,i){let o=this.w_(e);if(o===null&&(o=this.v_(e,this.$i.W().overlayPriceScales)),this.po.push(t),!$a(e)){const l=this.o_.get(e)||[];l.push(t),this.o_.set(e,l)}o.qo(t),t.Gi(o),t.Ki(i),this.P_(o),this.mo=null}m_(t,e,i){e.Cr!==i.Cr&&this.L_(t)}v_(t,e){const i=Object.assign({visible:!0,autoScale:!0},Un(e)),o=new IU(t,i,this.$i.W().layout,this.$i.W().localization);return o.Lo(this.At()),o}}class UU{constructor(t,e,i=50){this.Ke=0,this.Ge=1,this.Je=1,this.tr=new Map,this.Qe=new Map,this.U_=t,this.q_=e,this.ir=i}Y_(t){const e=t.time,i=this.q_.cacheKey(e),o=this.tr.get(i);if(o!==void 0)return o.Z_;if(this.Ke===this.ir){const u=this.Qe.get(this.Je);this.Qe.delete(this.Je),this.tr.delete(we(u)),this.Je++,this.Ke--}const l=this.U_(t);return this.tr.set(i,{Z_:l,rr:this.Ge}),this.Qe.set(this.Ge,i),this.Ke++,this.Ge++,l}}class Ar{constructor(t,e){di(t<=e,"right should be >= left"),this.X_=t,this.K_=e}Os(){return this.X_}ui(){return this.K_}G_(){return this.K_-this.X_+1}Kr(t){return this.X_<=t&&t<=this.K_}Ch(t){return this.X_===t.Os()&&this.K_===t.ui()}}function b0(n,t){return n===null||t===null?n===t:n.Ch(t)}class PU{constructor(){this.J_=new Map,this.tr=null,this.Q_=!1}tu(t){this.Q_=t,this.tr=null}iu(t,e){this.nu(e),this.tr=null;for(let i=e;i<t.length;++i){const o=t[i];let l=this.J_.get(o.timeWeight);l===void 0&&(l=[],this.J_.set(o.timeWeight,l)),l.push({index:i,time:o.time,weight:o.timeWeight,originalTime:o.originalTime})}}su(t,e){const i=Math.ceil(e/t);return this.tr!==null&&this.tr.eu===i||(this.tr={Ha:this.ru(i),eu:i}),this.tr.Ha}nu(t){if(t===0)return void this.J_.clear();const e=[];this.J_.forEach((i,o)=>{t<=i[0].index?e.push(o):i.splice(qr(i,t,l=>l.index<t),1/0)});for(const i of e)this.J_.delete(i)}ru(t){let e=[];for(const i of Array.from(this.J_.keys()).sort((o,l)=>l-o)){if(!this.J_.get(i))continue;const o=e;e=[];const l=o.length;let u=0;const d=we(this.J_.get(i)),p=d.length;let m=1/0,g=-1/0;for(let _=0;_<p;_++){const S=d[_],b=S.index;for(;u<l;){const w=o[u],E=w.index;if(!(E<b)){m=E;break}u++,e.push(w),g=E,m=1/0}if(m-b>=t&&b-g>=t)e.push(S),g=b;else if(this.Q_)return o}for(;u<l;u++)e.push(o[u])}return e}}class eo{constructor(t){this.hu=t}lu(){return this.hu===null?null:new Ar(Math.floor(this.hu.Os()),Math.ceil(this.hu.ui()))}au(){return this.hu}static ou(){return new eo(null)}}function zU(n,t){return n.weight>t.weight?n:t}class VU{constructor(t,e,i,o){this.__=0,this._u=null,this.uu=[],this.Mo=null,this.wo=null,this.cu=new PU,this.du=new Map,this.fu=eo.ou(),this.vu=!0,this.pu=new jt,this.mu=new jt,this.bu=new jt,this.wu=null,this.gu=null,this.Mu=[],this.cn=e,this.yo=i,this.xu=e.rightOffset,this.Su=e.barSpacing,this.$i=t,this.q_=o,this.ku(),this.cu.tu(e.uniformDistribution)}W(){return this.cn}yu(t){sn(this.yo,t),this.Cu(),this.ku()}$h(t,e){var i;sn(this.cn,t),this.cn.fixLeftEdge&&this.Tu(),this.cn.fixRightEdge&&this.Pu(),t.barSpacing!==void 0&&this.$i.Gn(t.barSpacing),t.rightOffset!==void 0&&this.$i.Jn(t.rightOffset),t.minBarSpacing!==void 0&&this.$i.Gn((i=t.barSpacing)!==null&&i!==void 0?i:this.Su),this.Cu(),this.ku(),this.bu.m()}mn(t){var e,i;return(i=(e=this.uu[t])===null||e===void 0?void 0:e.time)!==null&&i!==void 0?i:null}Ui(t){var e;return(e=this.uu[t])!==null&&e!==void 0?e:null}Va(t,e){if(this.uu.length<1)return null;if(this.q_.key(t)>this.q_.key(this.uu[this.uu.length-1].time))return e?this.uu.length-1:null;const i=qr(this.uu,this.q_.key(t),(o,l)=>this.q_.key(o.time)<l);return this.q_.key(t)<this.q_.key(this.uu[i].time)?e?i:null:i}Ni(){return this.__===0||this.uu.length===0||this._u===null}Da(){return this.uu.length>0}Xs(){return this.Ru(),this.fu.lu()}Du(){return this.Ru(),this.fu.au()}Vu(){const t=this.Xs();if(t===null)return null;const e={from:t.Os(),to:t.ui()};return this.Ou(e)}Ou(t){const e=Math.round(t.from),i=Math.round(t.to),o=Y(this.Bu()),l=Y(this.Au());return{from:Y(this.Ui(Math.max(o,e))),to:Y(this.Ui(Math.min(l,i)))}}Iu(t){return{from:Y(this.Va(t.from,!0)),to:Y(this.Va(t.to,!0))}}Hi(){return this.__}S_(t){if(!isFinite(t)||t<=0||this.__===t)return;const e=this.Du(),i=this.__;if(this.__=t,this.vu=!0,this.cn.lockVisibleTimeRangeOnResize&&i!==0){const o=this.Su*t/i;this.Su=o}if(this.cn.fixLeftEdge&&e!==null&&e.Os()<=0){const o=i-t;this.xu-=Math.round(o/this.Su)+1,this.vu=!0}this.zu(),this.Lu()}It(t){if(this.Ni()||!Nr(t))return 0;const e=this.Eu()+this.xu-t;return this.__-(e+.5)*this.Su-1}Qs(t,e){const i=this.Eu(),o=e===void 0?0:e.from,l=e===void 0?t.length:e.to;for(let u=o;u<l;u++){const d=t[u].ot,p=i+this.xu-d,m=this.__-(p+.5)*this.Su-1;t[u].nt=m}}Nu(t){return Math.ceil(this.Fu(t))}Jn(t){this.vu=!0,this.xu=t,this.Lu(),this.$i.Wu(),this.$i.Uh()}le(){return this.Su}Gn(t){this.ju(t),this.Lu(),this.$i.Wu(),this.$i.Uh()}Hu(){return this.xu}Ha(){if(this.Ni())return null;if(this.gu!==null)return this.gu;const t=this.Su,e=5*(this.$i.W().layout.fontSize+4)/8*(this.cn.tickMarkMaxCharacterLength||8),i=Math.round(e/t),o=Y(this.Xs()),l=Math.max(o.Os(),o.Os()-i),u=Math.max(o.ui(),o.ui()-i),d=this.cu.su(t,e),p=this.Bu()+i,m=this.Au()-i,g=this.$u(),_=this.cn.fixLeftEdge||g,S=this.cn.fixRightEdge||g;let b=0;for(const w of d){if(!(l<=w.index&&w.index<=u))continue;let E;b<this.Mu.length?(E=this.Mu[b],E.coord=this.It(w.index),E.label=this.Uu(w),E.weight=w.weight):(E={needAlignCoordinate:!1,coord:this.It(w.index),label:this.Uu(w),weight:w.weight},this.Mu.push(E)),this.Su>e/2&&!g?E.needAlignCoordinate=!1:E.needAlignCoordinate=_&&w.index<=p||S&&w.index>=m,b++}return this.Mu.length=b,this.gu=this.Mu,this.Mu}qu(){this.vu=!0,this.Gn(this.cn.barSpacing),this.Jn(this.cn.rightOffset)}Yu(t){this.vu=!0,this._u=t,this.Lu(),this.Tu()}Zu(t,e){const i=this.Fu(t),o=this.le(),l=o+e*(o/10);this.Gn(l),this.cn.rightBarStaysOnScroll||this.Jn(this.Hu()+(i-this.Fu(t)))}Go(t){this.Mo&&this.n_(),this.wo===null&&this.wu===null&&(this.Ni()||(this.wo=t,this.Xu()))}Jo(t){if(this.wu===null)return;const e=cf(this.__-t,0,this.__),i=cf(this.__-Y(this.wo),0,this.__);e!==0&&i!==0&&this.Gn(this.wu.le*e/i)}Qo(){this.wo!==null&&(this.wo=null,this.Ku())}t_(t){this.Mo===null&&this.wu===null&&(this.Ni()||(this.Mo=t,this.Xu()))}i_(t){if(this.Mo===null)return;const e=(this.Mo-t)/this.le();this.xu=Y(this.wu).Hu+e,this.vu=!0,this.Lu()}n_(){this.Mo!==null&&(this.Mo=null,this.Ku())}Gu(){this.Ju(this.cn.rightOffset)}Ju(t,e=400){if(!isFinite(t))throw new RangeError("offset is required and must be finite number");if(!isFinite(e)||e<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const i=this.xu,o=performance.now();this.$i.Zn({Qu:l=>(l-o)/e>=1,tc:l=>{const u=(l-o)/e;return u>=1?t:i+(t-i)*u}})}bt(t,e){this.vu=!0,this.uu=t,this.cu.iu(t,e),this.Lu()}nc(){return this.pu}sc(){return this.mu}ec(){return this.bu}Eu(){return this._u||0}rc(t){const e=t.G_();this.ju(this.__/e),this.xu=t.ui()-this.Eu(),this.Lu(),this.vu=!0,this.$i.Wu(),this.$i.Uh()}hc(){const t=this.Bu(),e=this.Au();t!==null&&e!==null&&this.rc(new Ar(t,e+this.cn.rightOffset))}lc(t){const e=new Ar(t.from,t.to);this.rc(e)}qi(t){return this.yo.timeFormatter!==void 0?this.yo.timeFormatter(t.originalTime):this.q_.formatHorzItem(t.time)}$u(){const{handleScroll:t,handleScale:e}=this.$i.W();return!(t.horzTouchDrag||t.mouseWheel||t.pressedMouseMove||t.vertTouchDrag||e.axisDoubleClickReset.time||e.axisPressedMouseMove.time||e.mouseWheel||e.pinch)}Bu(){return this.uu.length===0?null:0}Au(){return this.uu.length===0?null:this.uu.length-1}ac(t){return(this.__-1-t)/this.Su}Fu(t){const e=this.ac(t),i=this.Eu()+this.xu-e;return Math.round(1e6*i)/1e6}ju(t){const e=this.Su;this.Su=t,this.zu(),e!==this.Su&&(this.vu=!0,this.oc())}Ru(){if(!this.vu)return;if(this.vu=!1,this.Ni())return void this._c(eo.ou());const t=this.Eu(),e=this.__/this.Su,i=this.xu+t,o=new Ar(i-e+1,i);this._c(new eo(o))}zu(){const t=this.uc();if(this.Su<t&&(this.Su=t,this.vu=!0),this.__!==0){const e=.5*this.__;this.Su>e&&(this.Su=e,this.vu=!0)}}uc(){return this.cn.fixLeftEdge&&this.cn.fixRightEdge&&this.uu.length!==0?this.__/this.uu.length:this.cn.minBarSpacing}Lu(){const t=this.cc();t!==null&&this.xu<t&&(this.xu=t,this.vu=!0);const e=this.dc();this.xu>e&&(this.xu=e,this.vu=!0)}cc(){const t=this.Bu(),e=this._u;return t===null||e===null?null:t-e-1+(this.cn.fixLeftEdge?this.__/this.Su:Math.min(2,this.uu.length))}dc(){return this.cn.fixRightEdge?0:this.__/this.Su-Math.min(2,this.uu.length)}Xu(){this.wu={le:this.le(),Hu:this.Hu()}}Ku(){this.wu=null}Uu(t){let e=this.du.get(t.weight);return e===void 0&&(e=new UU(i=>this.fc(i),this.q_),this.du.set(t.weight,e)),e.Y_(t)}fc(t){return this.q_.formatTickmark(t,this.yo)}_c(t){const e=this.fu;this.fu=t,b0(e.lu(),this.fu.lu())||this.pu.m(),b0(e.au(),this.fu.au())||this.mu.m(),this.oc()}oc(){this.gu=null}Cu(){this.oc(),this.du.clear()}ku(){this.q_.updateFormatter(this.yo)}Tu(){if(!this.cn.fixLeftEdge)return;const t=this.Bu();if(t===null)return;const e=this.Xs();if(e===null)return;const i=e.Os()-t;if(i<0){const o=this.xu-i-1;this.Jn(o)}this.zu()}Pu(){this.Lu(),this.zu()}}class BU{X(t,e,i){t.useMediaCoordinateSpace(o=>this.K(o,e,i))}gl(t,e,i){t.useMediaCoordinateSpace(o=>this.vc(o,e,i))}vc(t,e,i){}}class OU extends BU{constructor(t){super(),this.mc=new Map,this.zt=t}K(t){}vc(t){if(!this.zt.yt)return;const{context:e,mediaSize:i}=t;let o=0;for(const u of this.zt.bc){if(u.Kt.length===0)continue;e.font=u.R;const d=this.wc(e,u.Kt);d>i.width?u.Zu=i.width/d:u.Zu=1,o+=u.gc*u.Zu}let l=0;switch(this.zt.Mc){case"top":l=0;break;case"center":l=Math.max((i.height-o)/2,0);break;case"bottom":l=Math.max(i.height-o,0)}e.fillStyle=this.zt.V;for(const u of this.zt.bc){e.save();let d=0;switch(this.zt.xc){case"left":e.textAlign="left",d=u.gc/2;break;case"center":e.textAlign="center",d=i.width/2;break;case"right":e.textAlign="right",d=i.width-1-u.gc/2}e.translate(d,l),e.textBaseline="top",e.font=u.R,e.scale(u.Zu,u.Zu),e.fillText(u.Kt,0,u.Sc),e.restore(),l+=u.gc*u.Zu}}wc(t,e){const i=this.kc(t.font);let o=i.get(e);return o===void 0&&(o=t.measureText(e).width,i.set(e,o)),o}kc(t){let e=this.mc.get(t);return e===void 0&&(e=new Map,this.mc.set(t,e)),e}}class qU{constructor(t){this.ft=!0,this.Ft={yt:!1,V:"",bc:[],Mc:"center",xc:"center"},this.Wt=new OU(this.Ft),this.jt=t}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){const t=this.jt.W(),e=this.Ft;e.yt=t.visible,e.yt&&(e.V=t.color,e.xc=t.horzAlign,e.Mc=t.vertAlign,e.bc=[{Kt:t.text,R:io(t.fontSize,t.fontFamily,t.fontStyle),gc:1.2*t.fontSize,Sc:0,Zu:0}])}}class $U extends Pf{constructor(t,e){super(),this.cn=e,this.wn=new qU(this)}Rn(){return[]}Pn(){return[this.wn]}W(){return this.cn}Vn(){this.wn.bt()}}var T0,w0,C0,Ia,x0;(function(n){n[n.OnTouchEnd=0]="OnTouchEnd",n[n.OnNextTap=1]="OnNextTap"})(T0||(T0={}));class HU{constructor(t,e,i){this.yc=[],this.Cc=[],this.__=0,this.Tc=null,this.Pc=new jt,this.Rc=new jt,this.Dc=null,this.Vc=t,this.cn=e,this.q_=i,this.Oc=new bL(this),this.yl=new VU(this,e.timeScale,this.cn.localization,i),this.vt=new DL(this,e.crosshair),this.Bc=new MU(e.crosshair),this.Ac=new $U(this,e.watermark),this.Ic(),this.yc[0].x_(2e3),this.zc=this.Lc(0),this.Ec=this.Lc(1)}Kl(){this.Nc(ge.es())}Uh(){this.Nc(ge.ss())}oa(){this.Nc(new ge(1))}Gl(t){const e=this.Fc(t);this.Nc(e)}Wc(){return this.Tc}jc(t){const e=this.Tc;this.Tc=t,e!==null&&this.Gl(e.Hc),t!==null&&this.Gl(t.Hc)}W(){return this.cn}$h(t){sn(this.cn,t),this.yc.forEach(e=>e.b_(t)),t.timeScale!==void 0&&this.yl.$h(t.timeScale),t.localization!==void 0&&this.yl.yu(t.localization),(t.leftPriceScale||t.rightPriceScale)&&this.Pc.m(),this.zc=this.Lc(0),this.Ec=this.Lc(1),this.Kl()}$c(t,e){if(t==="left")return void this.$h({leftPriceScale:e});if(t==="right")return void this.$h({rightPriceScale:e});const i=this.Uc(t);i!==null&&(i.Dt.$h(e),this.Pc.m())}Uc(t){for(const e of this.yc){const i=e.w_(t);if(i!==null)return{Ht:e,Dt:i}}return null}St(){return this.yl}qc(){return this.yc}Yc(){return this.Ac}Zc(){return this.vt}Xc(){return this.Rc}Kc(t,e){t.Lo(e),this.Wu()}S_(t){this.__=t,this.yl.S_(this.__),this.yc.forEach(e=>e.S_(t)),this.Wu()}Ic(t){const e=new LU(this.yl,this);t!==void 0?this.yc.splice(t,0,e):this.yc.push(e);const i=t===void 0?this.yc.length-1:t,o=ge.es();return o.Nn(i,{Fn:0,Wn:!0}),this.Nc(o),e}V_(t,e,i){t.V_(e,i)}O_(t,e,i){t.O_(e,i),this.Jl(),this.Nc(this.Gc(t,2))}B_(t,e){t.B_(e),this.Nc(this.Gc(t,2))}A_(t,e,i){e.Vo()||t.A_(e,i)}I_(t,e,i){e.Vo()||(t.I_(e,i),this.Jl(),this.Nc(this.Gc(t,2)))}z_(t,e){e.Vo()||(t.z_(e),this.Nc(this.Gc(t,2)))}E_(t,e){t.E_(e),this.Nc(this.Gc(t,2))}Jc(t){this.yl.Go(t)}Qc(t,e){const i=this.St();if(i.Ni()||e===0)return;const o=i.Hi();t=Math.max(1,Math.min(t,o)),i.Zu(t,e),this.Wu()}td(t){this.nd(0),this.sd(t),this.ed()}rd(t){this.yl.Jo(t),this.Wu()}hd(){this.yl.Qo(),this.Uh()}nd(t){this.yl.t_(t)}sd(t){this.yl.i_(t),this.Wu()}ed(){this.yl.n_(),this.Uh()}wt(){return this.Cc}ld(t,e,i,o,l){this.vt.gn(t,e);let u=NaN,d=this.yl.Nu(t);const p=this.yl.Xs();p!==null&&(d=Math.min(Math.max(p.Os(),d),p.ui()));const m=o.vn(),g=m.Ct();g!==null&&(u=m.pn(e,g)),u=this.Bc.Oa(u,d,o),this.vt.kn(d,u,o),this.oa(),l||this.Rc.m(this.vt.xt(),{x:t,y:e},i)}ad(t,e,i){const o=i.vn(),l=o.Ct(),u=o.Rt(t,Y(l)),d=this.yl.Va(e,!0),p=this.yl.It(Y(d));this.ld(p,u,null,i,!0)}od(t){this.Zc().Cn(),this.oa(),t||this.Rc.m(null,null,null)}Jl(){const t=this.vt.Ht();if(t!==null){const e=this.vt.xn(),i=this.vt.Sn();this.ld(e,i,null,t)}this.vt.Vn()}_d(t,e,i){const o=this.yl.mn(0);e!==void 0&&i!==void 0&&this.yl.bt(e,i);const l=this.yl.mn(0),u=this.yl.Eu(),d=this.yl.Xs();if(d!==null&&o!==null&&l!==null){const p=d.Kr(u),m=this.q_.key(o)>this.q_.key(l),g=t!==null&&t>u&&!m,_=this.yl.W().allowShiftVisibleRangeOnWhitespaceReplacement,S=p&&(i!==void 0||_)&&this.yl.W().shiftVisibleRangeOnNewBar;if(g&&!S){const b=t-u;this.yl.Jn(this.yl.Hu()-b)}}this.yl.Yu(t)}ia(t){t!==null&&t.F_()}dr(t){const e=this.yc.find(i=>i.Uo().includes(t));return e===void 0?null:e}Wu(){this.Ac.Vn(),this.yc.forEach(t=>t.F_()),this.Jl()}S(){this.yc.forEach(t=>t.S()),this.yc.length=0,this.cn.localization.priceFormatter=void 0,this.cn.localization.percentageFormatter=void 0,this.cn.localization.timeFormatter=void 0}ud(){return this.Oc}br(){return this.Oc.W()}g_(){return this.Pc}dd(t,e,i){const o=this.yc[0],l=this.fd(e,t,o,i);return this.Cc.push(l),this.Cc.length===1?this.Kl():this.Uh(),l}vd(t){const e=this.dr(t),i=this.Cc.indexOf(t);di(i!==-1,"Series not found"),this.Cc.splice(i,1),Y(e).Zo(t),t.S&&t.S()}Xl(t,e){const i=Y(this.dr(t));i.Zo(t);const o=this.Uc(e);if(o===null){const l=t.Xi();i.qo(t,e,l)}else{const l=o.Ht===i?t.Xi():void 0;o.Ht.qo(t,e,l)}}hc(){const t=ge.ss();t.$n(),this.Nc(t)}pd(t){const e=ge.ss();e.Yn(t),this.Nc(e)}Kn(){const t=ge.ss();t.Kn(),this.Nc(t)}Gn(t){const e=ge.ss();e.Gn(t),this.Nc(e)}Jn(t){const e=ge.ss();e.Jn(t),this.Nc(e)}Zn(t){const e=ge.ss();e.Zn(t),this.Nc(e)}Un(){const t=ge.ss();t.Un(),this.Nc(t)}md(){return this.cn.rightPriceScale.visible?"right":"left"}bd(){return this.Ec}q(){return this.zc}Bt(t){const e=this.Ec,i=this.zc;if(e===i)return e;if(t=Math.max(0,Math.min(100,Math.round(100*t))),this.Dc===null||this.Dc.Ps!==i||this.Dc.Rs!==e)this.Dc={Ps:i,Rs:e,wd:new Map};else{const l=this.Dc.wd.get(t);if(l!==void 0)return l}const o=function(l,u,d){const[p,m,g,_]=kr(l),[S,b,w,E]=kr(u),M=[Xe(p+d*(S-p)),Xe(m+d*(b-m)),Xe(g+d*(w-g)),rS(_+d*(E-_))];return`rgba(${M[0]}, ${M[1]}, ${M[2]}, ${M[3]})`}(i,e,t/100);return this.Dc.wd.set(t,o),o}Gc(t,e){const i=new ge(e);if(t!==null){const o=this.yc.indexOf(t);i.Nn(o,{Fn:e})}return i}Fc(t,e){return e===void 0&&(e=2),this.Gc(this.dr(t),e)}Nc(t){this.Vc&&this.Vc(t),this.yc.forEach(e=>e.j_().qh().bt())}fd(t,e,i,o){const l=new Of(this,t,e,i,o),u=t.priceScaleId!==void 0?t.priceScaleId:this.md();return i.qo(l,u),$a(u)||l.$h(t),l}Lc(t){const e=this.cn.layout;return e.background.type==="gradient"?t===0?e.background.topColor:e.background.bottomColor:e.background.color}}function hf(n){return!mn(n)&&!Or(n)}function xS(n){return mn(n)}(function(n){n[n.Disabled=0]="Disabled",n[n.Continuous=1]="Continuous",n[n.OnDataUpdate=2]="OnDataUpdate"})(w0||(w0={})),function(n){n[n.LastBar=0]="LastBar",n[n.LastVisible=1]="LastVisible"}(C0||(C0={})),function(n){n.Solid="solid",n.VerticalGradient="gradient"}(Ia||(Ia={})),function(n){n[n.Year=0]="Year",n[n.Month=1]="Month",n[n.DayOfMonth=2]="DayOfMonth",n[n.Time=3]="Time",n[n.TimeWithSeconds=4]="TimeWithSeconds"}(x0||(x0={}));const E0=n=>n.getUTCFullYear();function GU(n,t,e){return t.replace(/yyyy/g,(i=>Pn(E0(i),4))(n)).replace(/yy/g,(i=>Pn(E0(i)%100,2))(n)).replace(/MMMM/g,((i,o)=>new Date(i.getUTCFullYear(),i.getUTCMonth(),1).toLocaleString(o,{month:"long"}))(n,e)).replace(/MMM/g,((i,o)=>new Date(i.getUTCFullYear(),i.getUTCMonth(),1).toLocaleString(o,{month:"short"}))(n,e)).replace(/MM/g,(i=>Pn((o=>o.getUTCMonth()+1)(i),2))(n)).replace(/dd/g,(i=>Pn((o=>o.getUTCDate())(i),2))(n))}class ES{constructor(t="yyyy-MM-dd",e="default"){this.gd=t,this.Md=e}Y_(t){return GU(t,this.gd,this.Md)}}class FU{constructor(t){this.xd=t||"%h:%m:%s"}Y_(t){return this.xd.replace("%h",Pn(t.getUTCHours(),2)).replace("%m",Pn(t.getUTCMinutes(),2)).replace("%s",Pn(t.getUTCSeconds(),2))}}const JU={Sd:"yyyy-MM-dd",kd:"%h:%m:%s",yd:" ",Cd:"default"};class KU{constructor(t={}){const e=Object.assign(Object.assign({},JU),t);this.Td=new ES(e.Sd,e.Cd),this.Pd=new FU(e.kd),this.Rd=e.yd}Y_(t){return`${this.Td.Y_(t)}${this.Rd}${this.Pd.Y_(t)}`}}function pa(n){return 60*n*60*1e3}function Mh(n){return 60*n*1e3}const ma=[{Dd:(M0=1,1e3*M0),Vd:10},{Dd:Mh(1),Vd:20},{Dd:Mh(5),Vd:21},{Dd:Mh(30),Vd:22},{Dd:pa(1),Vd:30},{Dd:pa(3),Vd:31},{Dd:pa(6),Vd:32},{Dd:pa(12),Vd:33}];var M0;function A0(n,t){if(n.getUTCFullYear()!==t.getUTCFullYear())return 70;if(n.getUTCMonth()!==t.getUTCMonth())return 60;if(n.getUTCDate()!==t.getUTCDate())return 50;for(let e=ma.length-1;e>=0;--e)if(Math.floor(t.getTime()/ma[e].Dd)!==Math.floor(n.getTime()/ma[e].Dd))return ma[e].Vd;return 0}function Ah(n){let t=n;if(Or(n)&&(t=qf(n)),!hf(t))throw new Error("time must be of type BusinessDay");const e=new Date(Date.UTC(t.year,t.month-1,t.day,0,0,0,0));return{Od:Math.round(e.getTime()/1e3),Bd:t}}function R0(n){if(!xS(n))throw new Error("time must be of type isUTCTimestamp");return{Od:n}}function qf(n){const t=new Date(n);if(isNaN(t.getTime()))throw new Error(`Invalid date string=${n}, expected format=yyyy-mm-dd`);return{day:t.getUTCDate(),month:t.getUTCMonth()+1,year:t.getUTCFullYear()}}function k0(n){Or(n.time)&&(n.time=qf(n.time))}class N0{options(){return this.cn}setOptions(t){this.cn=t,this.updateFormatter(t.localization)}preprocessData(t){Array.isArray(t)?function(e){e.forEach(k0)}(t):k0(t)}createConverterToInternalObj(t){return Y(function(e){return e.length===0?null:hf(e[0].time)||Or(e[0].time)?Ah:R0}(t))}key(t){return typeof t=="object"&&"Od"in t?t.Od:this.key(this.convertHorzItemToInternal(t))}cacheKey(t){const e=t;return e.Bd===void 0?new Date(1e3*e.Od).getTime():new Date(Date.UTC(e.Bd.year,e.Bd.month-1,e.Bd.day)).getTime()}convertHorzItemToInternal(t){return xS(e=t)?R0(e):hf(e)?Ah(e):Ah(qf(e));var e}updateFormatter(t){if(!this.cn)return;const e=t.dateFormat;this.cn.timeScale.timeVisible?this.Ad=new KU({Sd:e,kd:this.cn.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",yd:"   ",Cd:t.locale}):this.Ad=new ES(e,t.locale)}formatHorzItem(t){const e=t;return this.Ad.Y_(new Date(1e3*e.Od))}formatTickmark(t,e){const i=function(l,u,d){switch(l){case 0:case 10:return u?d?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return u?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(t.weight,this.cn.timeScale.timeVisible,this.cn.timeScale.secondsVisible),o=this.cn.timeScale;if(o.tickMarkFormatter!==void 0){const l=o.tickMarkFormatter(t.originalTime,i,e.locale);if(l!==null)return l}return function(l,u,d){const p={};switch(u){case 0:p.year="numeric";break;case 1:p.month="short";break;case 2:p.day="numeric";break;case 3:p.hour12=!1,p.hour="2-digit",p.minute="2-digit";break;case 4:p.hour12=!1,p.hour="2-digit",p.minute="2-digit",p.second="2-digit"}const m=l.Bd===void 0?new Date(1e3*l.Od):new Date(Date.UTC(l.Bd.year,l.Bd.month-1,l.Bd.day));return new Date(m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate(),m.getUTCHours(),m.getUTCMinutes(),m.getUTCSeconds(),m.getUTCMilliseconds()).toLocaleString(d,p)}(t.time,i,e.locale)}maxTickMarkWeight(t){let e=t.reduce(zU,t[0]).weight;return e>30&&e<50&&(e=30),e}fillWeightsForPoints(t,e){(function(i,o=0){if(i.length===0)return;let l=o===0?null:i[o-1].time.Od,u=l!==null?new Date(1e3*l):null,d=0;for(let p=o;p<i.length;++p){const m=i[p],g=new Date(1e3*m.time.Od);u!==null&&(m.timeWeight=A0(g,u)),d+=m.time.Od-(l||m.time.Od),l=m.time.Od,u=g}if(o===0&&i.length>1){const p=Math.ceil(d/(i.length-1)),m=new Date(1e3*(i[0].time.Od-p));i[0].timeWeight=A0(new Date(1e3*i[0].time.Od),m)}})(t,e)}static Id(t){return sn({localization:{dateFormat:"dd MMM 'yy"}},t??{})}}const so=typeof window<"u";function D0(){return!!so&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function Rh(){return!!so&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function ff(n){return n+n%2}function kh(n,t){return n.zd-t.zd}function Nh(n,t,e){const i=(n.zd-t.zd)/(n.ot-t.ot);return Math.sign(i)*Math.min(Math.abs(i),e)}class YU{constructor(t,e,i,o){this.Ld=null,this.Ed=null,this.Nd=null,this.Fd=null,this.Wd=null,this.jd=0,this.Hd=0,this.$d=t,this.Ud=e,this.qd=i,this.rs=o}Yd(t,e){if(this.Ld!==null){if(this.Ld.ot===e)return void(this.Ld.zd=t);if(Math.abs(this.Ld.zd-t)<this.rs)return}this.Fd=this.Nd,this.Nd=this.Ed,this.Ed=this.Ld,this.Ld={ot:e,zd:t}}Vr(t,e){if(this.Ld===null||this.Ed===null||e-this.Ld.ot>50)return;let i=0;const o=Nh(this.Ld,this.Ed,this.Ud),l=kh(this.Ld,this.Ed),u=[o],d=[l];if(i+=l,this.Nd!==null){const m=Nh(this.Ed,this.Nd,this.Ud);if(Math.sign(m)===Math.sign(o)){const g=kh(this.Ed,this.Nd);if(u.push(m),d.push(g),i+=g,this.Fd!==null){const _=Nh(this.Nd,this.Fd,this.Ud);if(Math.sign(_)===Math.sign(o)){const S=kh(this.Nd,this.Fd);u.push(_),d.push(S),i+=S}}}}let p=0;for(let m=0;m<u.length;++m)p+=d[m]/i*u[m];Math.abs(p)<this.$d||(this.Wd={zd:t,ot:e},this.Hd=p,this.jd=function(m,g){const _=Math.log(g);return Math.log(1*_/-m)/_}(Math.abs(p),this.qd))}tc(t){const e=Y(this.Wd),i=t-e.ot;return e.zd+this.Hd*(Math.pow(this.qd,i)-1)/Math.log(this.qd)}Qu(t){return this.Wd===null||this.Zd(t)===this.jd}Zd(t){const e=t-Y(this.Wd).ot;return Math.min(e,this.jd)}}class WU{constructor(t,e){this.Xd=void 0,this.Kd=void 0,this.Gd=void 0,this.en=!1,this.Jd=t,this.Qd=e,this.tf()}bt(){this.tf()}if(){this.Xd&&this.Jd.removeChild(this.Xd),this.Kd&&this.Jd.removeChild(this.Kd),this.Xd=void 0,this.Kd=void 0}nf(){return this.en!==this.sf()||this.Gd!==this.ef()}ef(){return lS(kr(this.Qd.W().layout.textColor))>160?"dark":"light"}sf(){return this.Qd.W().layout.attributionLogo}rf(){const t=new URL(location.href);return t.hostname?"&utm_source="+t.hostname+t.pathname:""}tf(){this.nf()&&(this.if(),this.en=this.sf(),this.en&&(this.Gd=this.ef(),this.Kd=document.createElement("style"),this.Kd.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.Xd=document.createElement("a"),this.Xd.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.rf()}`,this.Xd.title="Charting by TradingView",this.Xd.id="tv-attr-logo",this.Xd.target="_blank",this.Xd.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 35 19" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.Xd.toggleAttribute("data-dark",this.Gd==="dark"),this.Jd.appendChild(this.Kd),this.Jd.appendChild(this.Xd)))}}function Gi(n,t){const e=Y(n.ownerDocument).createElement("canvas");n.appendChild(e);const i=rL(e,{options:{allowResizeObserver:!1},transform:(o,l)=>({width:Math.max(o.width,l.width),height:Math.max(o.height,l.height)})});return i.resizeCanvasElement(t),i}function Fi(n){var t;n.width=1,n.height=1,(t=n.getContext("2d"))===null||t===void 0||t.clearRect(0,0,1,1)}function df(n,t,e,i){n.gl&&n.gl(t,e,i)}function Ta(n,t,e,i){n.X(t,e,i)}function pf(n,t,e,i){const o=n(e,i);for(const l of o){const u=l.gt();u!==null&&t(u)}}function XU(n){so&&window.chrome!==void 0&&n.addEventListener("mousedown",t=>{if(t.button===1)return t.preventDefault(),!1})}class $f{constructor(t,e,i){this.hf=0,this.lf=null,this.af={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this._f=0,this.uf=null,this.cf={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this.df=null,this.ff=!1,this.vf=null,this.pf=null,this.mf=!1,this.bf=!1,this.wf=!1,this.gf=null,this.Mf=null,this.xf=null,this.Sf=null,this.kf=null,this.yf=null,this.Cf=null,this.Tf=0,this.Pf=!1,this.Rf=!1,this.Df=!1,this.Vf=0,this.Of=null,this.Bf=!Rh(),this.Af=o=>{this.If(o)},this.zf=o=>{if(this.Lf(o)){const l=this.Ef(o);if(++this._f,this.uf&&this._f>1){const{Nf:u}=this.Ff(fn(o),this.cf);u<30&&!this.wf&&this.Wf(l,this.Hf.jf),this.$f()}}else{const l=this.Ef(o);if(++this.hf,this.lf&&this.hf>1){const{Nf:u}=this.Ff(fn(o),this.af);u<5&&!this.bf&&this.Uf(l,this.Hf.qf),this.Yf()}}},this.Zf=t,this.Hf=e,this.cn=i,this.Xf()}S(){this.gf!==null&&(this.gf(),this.gf=null),this.Mf!==null&&(this.Mf(),this.Mf=null),this.Sf!==null&&(this.Sf(),this.Sf=null),this.kf!==null&&(this.kf(),this.kf=null),this.yf!==null&&(this.yf(),this.yf=null),this.xf!==null&&(this.xf(),this.xf=null),this.Kf(),this.Yf()}Gf(t){this.Sf&&this.Sf();const e=this.Jf.bind(this);if(this.Sf=()=>{this.Zf.removeEventListener("mousemove",e)},this.Zf.addEventListener("mousemove",e),this.Lf(t))return;const i=this.Ef(t);this.Uf(i,this.Hf.Qf),this.Bf=!0}Yf(){this.lf!==null&&clearTimeout(this.lf),this.hf=0,this.lf=null,this.af={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}$f(){this.uf!==null&&clearTimeout(this.uf),this._f=0,this.uf=null,this.cf={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}Jf(t){if(this.Df||this.pf!==null||this.Lf(t))return;const e=this.Ef(t);this.Uf(e,this.Hf.tv),this.Bf=!0}iv(t){const e=Dh(t.changedTouches,Y(this.Of));if(e===null||(this.Vf=ga(t),this.Cf!==null)||this.Rf)return;this.Pf=!0;const i=this.Ff(fn(e),Y(this.pf)),{nv:o,sv:l,Nf:u}=i;if(this.mf||!(u<5)){if(!this.mf){const d=.5*o,p=l>=d&&!this.cn.ev(),m=d>l&&!this.cn.rv();p||m||(this.Rf=!0),this.mf=!0,this.wf=!0,this.Kf(),this.$f()}if(!this.Rf){const d=this.Ef(t,e);this.Wf(d,this.Hf.hv),Fs(t)}}}lv(t){if(t.button!==0)return;const e=this.Ff(fn(t),Y(this.vf)),{Nf:i}=e;if(i>=5&&(this.bf=!0,this.Yf()),this.bf){const o=this.Ef(t);this.Uf(o,this.Hf.av)}}Ff(t,e){const i=Math.abs(e.nt-t.nt),o=Math.abs(e.st-t.st);return{nv:i,sv:o,Nf:i+o}}ov(t){let e=Dh(t.changedTouches,Y(this.Of));if(e===null&&t.touches.length===0&&(e=t.changedTouches[0]),e===null)return;this.Of=null,this.Vf=ga(t),this.Kf(),this.pf=null,this.yf&&(this.yf(),this.yf=null);const i=this.Ef(t,e);if(this.Wf(i,this.Hf._v),++this._f,this.uf&&this._f>1){const{Nf:o}=this.Ff(fn(e),this.cf);o<30&&!this.wf&&this.Wf(i,this.Hf.jf),this.$f()}else this.wf||(this.Wf(i,this.Hf.uv),this.Hf.uv&&Fs(t));this._f===0&&Fs(t),t.touches.length===0&&this.ff&&(this.ff=!1,Fs(t))}If(t){if(t.button!==0)return;const e=this.Ef(t);if(this.vf=null,this.Df=!1,this.kf&&(this.kf(),this.kf=null),D0()&&this.Zf.ownerDocument.documentElement.removeEventListener("mouseleave",this.Af),!this.Lf(t))if(this.Uf(e,this.Hf.cv),++this.hf,this.lf&&this.hf>1){const{Nf:i}=this.Ff(fn(t),this.af);i<5&&!this.bf&&this.Uf(e,this.Hf.qf),this.Yf()}else this.bf||this.Uf(e,this.Hf.dv)}Kf(){this.df!==null&&(clearTimeout(this.df),this.df=null)}fv(t){if(this.Of!==null)return;const e=t.changedTouches[0];this.Of=e.identifier,this.Vf=ga(t);const i=this.Zf.ownerDocument.documentElement;this.wf=!1,this.mf=!1,this.Rf=!1,this.pf=fn(e),this.yf&&(this.yf(),this.yf=null);{const l=this.iv.bind(this),u=this.ov.bind(this);this.yf=()=>{i.removeEventListener("touchmove",l),i.removeEventListener("touchend",u)},i.addEventListener("touchmove",l,{passive:!1}),i.addEventListener("touchend",u,{passive:!1}),this.Kf(),this.df=setTimeout(this.vv.bind(this,t),240)}const o=this.Ef(t,e);this.Wf(o,this.Hf.pv),this.uf||(this._f=0,this.uf=setTimeout(this.$f.bind(this),500),this.cf=fn(e))}mv(t){if(t.button!==0)return;const e=this.Zf.ownerDocument.documentElement;D0()&&e.addEventListener("mouseleave",this.Af),this.bf=!1,this.vf=fn(t),this.kf&&(this.kf(),this.kf=null);{const o=this.lv.bind(this),l=this.If.bind(this);this.kf=()=>{e.removeEventListener("mousemove",o),e.removeEventListener("mouseup",l)},e.addEventListener("mousemove",o),e.addEventListener("mouseup",l)}if(this.Df=!0,this.Lf(t))return;const i=this.Ef(t);this.Uf(i,this.Hf.bv),this.lf||(this.hf=0,this.lf=setTimeout(this.Yf.bind(this),500),this.af=fn(t))}Xf(){this.Zf.addEventListener("mouseenter",this.Gf.bind(this)),this.Zf.addEventListener("touchcancel",this.Kf.bind(this));{const t=this.Zf.ownerDocument,e=i=>{this.Hf.wv&&(i.composed&&this.Zf.contains(i.composedPath()[0])||i.target&&this.Zf.contains(i.target)||this.Hf.wv())};this.Mf=()=>{t.removeEventListener("touchstart",e)},this.gf=()=>{t.removeEventListener("mousedown",e)},t.addEventListener("mousedown",e),t.addEventListener("touchstart",e,{passive:!0})}Rh()&&(this.xf=()=>{this.Zf.removeEventListener("dblclick",this.zf)},this.Zf.addEventListener("dblclick",this.zf)),this.Zf.addEventListener("mouseleave",this.gv.bind(this)),this.Zf.addEventListener("touchstart",this.fv.bind(this),{passive:!0}),XU(this.Zf),this.Zf.addEventListener("mousedown",this.mv.bind(this)),this.Mv(),this.Zf.addEventListener("touchmove",()=>{},{passive:!1})}Mv(){this.Hf.xv===void 0&&this.Hf.Sv===void 0&&this.Hf.kv===void 0||(this.Zf.addEventListener("touchstart",t=>this.yv(t.touches),{passive:!0}),this.Zf.addEventListener("touchmove",t=>{if(t.touches.length===2&&this.Cf!==null&&this.Hf.Sv!==void 0){const e=I0(t.touches[0],t.touches[1])/this.Tf;this.Hf.Sv(this.Cf,e),Fs(t)}},{passive:!1}),this.Zf.addEventListener("touchend",t=>{this.yv(t.touches)}))}yv(t){t.length===1&&(this.Pf=!1),t.length!==2||this.Pf||this.ff?this.Cv():this.Tv(t)}Tv(t){const e=this.Zf.getBoundingClientRect()||{left:0,top:0};this.Cf={nt:(t[0].clientX-e.left+(t[1].clientX-e.left))/2,st:(t[0].clientY-e.top+(t[1].clientY-e.top))/2},this.Tf=I0(t[0],t[1]),this.Hf.xv!==void 0&&this.Hf.xv(),this.Kf()}Cv(){this.Cf!==null&&(this.Cf=null,this.Hf.kv!==void 0&&this.Hf.kv())}gv(t){if(this.Sf&&this.Sf(),this.Lf(t)||!this.Bf)return;const e=this.Ef(t);this.Uf(e,this.Hf.Pv),this.Bf=!Rh()}vv(t){const e=Dh(t.touches,Y(this.Of));if(e===null)return;const i=this.Ef(t,e);this.Wf(i,this.Hf.Rv),this.wf=!0,this.ff=!0}Lf(t){return t.sourceCapabilities&&t.sourceCapabilities.firesTouchEvents!==void 0?t.sourceCapabilities.firesTouchEvents:ga(t)<this.Vf+500}Wf(t,e){e&&e.call(this.Hf,t)}Uf(t,e){e&&e.call(this.Hf,t)}Ef(t,e){const i=e||t,o=this.Zf.getBoundingClientRect()||{left:0,top:0};return{clientX:i.clientX,clientY:i.clientY,pageX:i.pageX,pageY:i.pageY,screenX:i.screenX,screenY:i.screenY,localX:i.clientX-o.left,localY:i.clientY-o.top,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,metaKey:t.metaKey,Dv:!t.type.startsWith("mouse")&&t.type!=="contextmenu"&&t.type!=="click",Vv:t.type,Ov:i.target,Bv:t.view,Av:()=>{t.type!=="touchstart"&&Fs(t)}}}}function I0(n,t){const e=n.clientX-t.clientX,i=n.clientY-t.clientY;return Math.sqrt(e*e+i*i)}function Fs(n){n.cancelable&&n.preventDefault()}function fn(n){return{nt:n.pageX,st:n.pageY}}function ga(n){return n.timeStamp||performance.now()}function Dh(n,t){for(let e=0;e<n.length;++e)if(n[e].identifier===t)return n[e];return null}function va(n){return{Hc:n.Hc,Iv:{gr:n.zv.externalId},Lv:n.zv.cursorStyle}}function QU(n,t,e){for(const i of n){const o=i.gt();if(o!==null&&o.wr){const l=o.wr(t,e);if(l!==null)return{Bv:i,Iv:l}}}return null}function Ih(n,t){return e=>{var i,o,l,u;return((o=(i=e.Dt())===null||i===void 0?void 0:i.Pa())!==null&&o!==void 0?o:"")!==t?[]:(u=(l=e.da)===null||l===void 0?void 0:l.call(e,n))!==null&&u!==void 0?u:[]}}function L0(n,t,e,i){if(!n.length)return;let o=0;const l=e/2,u=n[0].At(i,!0);let d=t===1?l-(n[0].Vi()-u/2):n[0].Vi()-u/2-l;d=Math.max(0,d);for(let p=1;p<n.length;p++){const m=n[p],g=n[p-1],_=g.At(i,!1),S=m.Vi(),b=g.Vi();if(t===1?S>b-_:S<b+_){const w=b-_*t;m.Oi(w);const E=w-t*_/2;if((t===1?E<0:E>e)&&d>0){const M=t===1?-1-E:E-e,D=Math.min(M,d);for(let U=o;U<n.length;U++)n[U].Oi(n[U].Vi()+t*D);d-=D}}else o=p,d=t===1?b-_-S:S-(b+_)}}class U0{constructor(t,e,i,o){this.Li=null,this.Ev=null,this.Nv=!1,this.Fv=new Ir(200),this.Qr=null,this.Wv=0,this.jv=!1,this.Hv=()=>{this.jv||this.tn.$v().$t().Uh()},this.Uv=()=>{this.jv||this.tn.$v().$t().Uh()},this.tn=t,this.cn=e,this.ko=e.layout,this.Oc=i,this.qv=o==="left",this.Yv=Ih("normal",o),this.Zv=Ih("top",o),this.Xv=Ih("bottom",o),this.Kv=document.createElement("div"),this.Kv.style.height="100%",this.Kv.style.overflow="hidden",this.Kv.style.width="25px",this.Kv.style.left="0",this.Kv.style.position="relative",this.Gv=Gi(this.Kv,Ft({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const l=this.Gv.canvasElement;l.style.position="absolute",l.style.zIndex="1",l.style.left="0",l.style.top="0",this.Jv=Gi(this.Kv,Ft({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const u=this.Jv.canvasElement;u.style.position="absolute",u.style.zIndex="2",u.style.left="0",u.style.top="0";const d={bv:this.Qv.bind(this),pv:this.Qv.bind(this),av:this.tp.bind(this),hv:this.tp.bind(this),wv:this.ip.bind(this),cv:this.np.bind(this),_v:this.np.bind(this),qf:this.sp.bind(this),jf:this.sp.bind(this),Qf:this.ep.bind(this),Pv:this.rp.bind(this)};this.hp=new $f(this.Jv.canvasElement,d,{ev:()=>!this.cn.handleScroll.vertTouchDrag,rv:()=>!0})}S(){this.hp.S(),this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),Fi(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),Fi(this.Gv.canvasElement),this.Gv.dispose(),this.Li!==null&&this.Li.Ko().p(this),this.Li=null}lp(){return this.Kv}P(){return this.ko.fontSize}ap(){const t=this.Oc.W();return this.Qr!==t.R&&(this.Fv.nr(),this.Qr=t.R),t}op(){if(this.Li===null)return 0;let t=0;const e=this.ap(),i=Y(this.Gv.canvasElement.getContext("2d"));i.save();const o=this.Li.Ha();i.font=this._p(),o.length>0&&(t=Math.max(this.Fv.xi(i,o[0].so),this.Fv.xi(i,o[o.length-1].so)));const l=this.up();for(let m=l.length;m--;){const g=this.Fv.xi(i,l[m].Kt());g>t&&(t=g)}const u=this.Li.Ct();if(u!==null&&this.Ev!==null&&(d=this.cn.crosshair).mode!==2&&d.horzLine.visible&&d.horzLine.labelVisible){const m=this.Li.pn(1,u),g=this.Li.pn(this.Ev.height-2,u);t=Math.max(t,this.Fv.xi(i,this.Li.Fi(Math.floor(Math.min(m,g))+.11111111111111,u)),this.Fv.xi(i,this.Li.Fi(Math.ceil(Math.max(m,g))-.11111111111111,u)))}var d;i.restore();const p=t||34;return ff(Math.ceil(e.C+e.T+e.A+e.I+5+p))}cp(t){this.Ev!==null&&Vi(this.Ev,t)||(this.Ev=t,this.jv=!0,this.Gv.resizeCanvasElement(t),this.Jv.resizeCanvasElement(t),this.jv=!1,this.Kv.style.width=`${t.width}px`,this.Kv.style.height=`${t.height}px`)}dp(){return Y(this.Ev).width}Gi(t){this.Li!==t&&(this.Li!==null&&this.Li.Ko().p(this),this.Li=t,t.Ko().l(this.fo.bind(this),this))}Dt(){return this.Li}nr(){const t=this.tn.fp();this.tn.$v().$t().E_(t,Y(this.Dt()))}vp(t){if(this.Ev===null)return;if(t!==1){this.pp(),this.Gv.applySuggestedBitmapSize();const i=$i(this.Gv);i!==null&&(i.useBitmapCoordinateSpace(o=>{this.mp(o),this.Ie(o)}),this.tn.bp(i,this.Xv),this.wp(i),this.tn.bp(i,this.Yv),this.gp(i))}this.Jv.applySuggestedBitmapSize();const e=$i(this.Jv);e!==null&&(e.useBitmapCoordinateSpace(({context:i,bitmapSize:o})=>{i.clearRect(0,0,o.width,o.height)}),this.Mp(e),this.tn.bp(e,this.Zv))}xp(){return this.Gv.bitmapSize}Sp(t,e,i){const o=this.xp();o.width>0&&o.height>0&&t.drawImage(this.Gv.canvasElement,e,i)}bt(){var t;(t=this.Li)===null||t===void 0||t.Ha()}Qv(t){if(this.Li===null||this.Li.Ni()||!this.cn.handleScale.axisPressedMouseMove.price)return;const e=this.tn.$v().$t(),i=this.tn.fp();this.Nv=!0,e.V_(i,this.Li,t.localY)}tp(t){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const e=this.tn.$v().$t(),i=this.tn.fp(),o=this.Li;e.O_(i,o,t.localY)}ip(){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const t=this.tn.$v().$t(),e=this.tn.fp(),i=this.Li;this.Nv&&(this.Nv=!1,t.B_(e,i))}np(t){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const e=this.tn.$v().$t(),i=this.tn.fp();this.Nv=!1,e.B_(i,this.Li)}sp(t){this.cn.handleScale.axisDoubleClickReset.price&&this.nr()}ep(t){this.Li!==null&&(!this.tn.$v().$t().W().handleScale.axisPressedMouseMove.price||this.Li.Mh()||this.Li.Oo()||this.kp(1))}rp(t){this.kp(0)}up(){const t=[],e=this.Li===null?void 0:this.Li;return(i=>{for(let o=0;o<i.length;++o){const l=i[o].Rn(this.tn.fp(),e);for(let u=0;u<l.length;u++)t.push(l[u])}})(this.tn.fp().Uo()),t}mp({context:t,bitmapSize:e}){const{width:i,height:o}=e,l=this.tn.fp().$t(),u=l.q(),d=l.bd();u===d?Oa(t,0,0,i,o,u):aS(t,0,0,i,o,u,d)}Ie({context:t,bitmapSize:e,horizontalPixelRatio:i}){if(this.Ev===null||this.Li===null||!this.Li.W().borderVisible)return;t.fillStyle=this.Li.W().borderColor;const o=Math.max(1,Math.floor(this.ap().C*i));let l;l=this.qv?e.width-o:0,t.fillRect(l,0,o,e.height)}wp(t){if(this.Ev===null||this.Li===null)return;const e=this.Li.Ha(),i=this.Li.W(),o=this.ap(),l=this.qv?this.Ev.width-o.T:0;i.borderVisible&&i.ticksVisible&&t.useBitmapCoordinateSpace(({context:u,horizontalPixelRatio:d,verticalPixelRatio:p})=>{u.fillStyle=i.borderColor;const m=Math.max(1,Math.floor(p)),g=Math.floor(.5*p),_=Math.round(o.T*d);u.beginPath();for(const S of e)u.rect(Math.floor(l*d),Math.round(S.Ea*p)-g,_,m);u.fill()}),t.useMediaCoordinateSpace(({context:u})=>{var d;u.font=this._p(),u.fillStyle=(d=i.textColor)!==null&&d!==void 0?d:this.ko.textColor,u.textAlign=this.qv?"right":"left",u.textBaseline="middle";const p=this.qv?Math.round(l-o.A):Math.round(l+o.T+o.A),m=e.map(g=>this.Fv.Mi(u,g.so));for(let g=e.length;g--;){const _=e[g];u.fillText(_.so,p,_.Ea+m[g])}})}pp(){if(this.Ev===null||this.Li===null)return;const t=[],e=this.Li.Uo().slice(),i=this.tn.fp(),o=this.ap();this.Li===i.pr()&&this.tn.fp().Uo().forEach(u=>{i.vr(u)&&e.push(u)});const l=this.Li;e.forEach(u=>{u.Rn(i,l).forEach(d=>{d.Oi(null),d.Bi()&&t.push(d)})}),t.forEach(u=>u.Oi(u.ki())),this.Li.W().alignLabels&&this.yp(t,o)}yp(t,e){if(this.Ev===null)return;const i=this.Ev.height/2,o=t.filter(u=>u.ki()<=i),l=t.filter(u=>u.ki()>i);o.sort((u,d)=>d.ki()-u.ki()),l.sort((u,d)=>u.ki()-d.ki());for(const u of t){const d=Math.floor(u.At(e)/2),p=u.ki();p>-d&&p<d&&u.Oi(d),p>this.Ev.height-d&&p<this.Ev.height+d&&u.Oi(this.Ev.height-d)}L0(o,1,this.Ev.height,e),L0(l,-1,this.Ev.height,e)}gp(t){if(this.Ev===null)return;const e=this.up(),i=this.ap(),o=this.qv?"right":"left";e.forEach(l=>{l.Ai()&&l.gt(Y(this.Li)).X(t,i,this.Fv,o)})}Mp(t){if(this.Ev===null||this.Li===null)return;const e=this.tn.$v().$t(),i=[],o=this.tn.fp(),l=e.Zc().Rn(o,this.Li);l.length&&i.push(l);const u=this.ap(),d=this.qv?"right":"left";i.forEach(p=>{p.forEach(m=>{m.gt(Y(this.Li)).X(t,u,this.Fv,d)})})}kp(t){this.Kv.style.cursor=t===1?"ns-resize":"default"}fo(){const t=this.op();this.Wv<t&&this.tn.$v().$t().Kl(),this.Wv=t}_p(){return io(this.ko.fontSize,this.ko.fontFamily)}}function ZU(n,t){var e,i;return(i=(e=n.ua)===null||e===void 0?void 0:e.call(n,t))!==null&&i!==void 0?i:[]}function ya(n,t){var e,i;return(i=(e=n.Pn)===null||e===void 0?void 0:e.call(n,t))!==null&&i!==void 0?i:[]}function jU(n,t){var e,i;return(i=(e=n.Ji)===null||e===void 0?void 0:e.call(n,t))!==null&&i!==void 0?i:[]}function tP(n,t){var e,i;return(i=(e=n.aa)===null||e===void 0?void 0:e.call(n,t))!==null&&i!==void 0?i:[]}class Hf{constructor(t,e){this.Ev=Ft({width:0,height:0}),this.Cp=null,this.Tp=null,this.Pp=null,this.Rp=null,this.Dp=!1,this.Vp=new jt,this.Op=new jt,this.Bp=0,this.Ap=!1,this.Ip=null,this.zp=!1,this.Lp=null,this.Ep=null,this.jv=!1,this.Hv=()=>{this.jv||this.Np===null||this.$i().Uh()},this.Uv=()=>{this.jv||this.Np===null||this.$i().Uh()},this.Qd=t,this.Np=e,this.Np.W_().l(this.Fp.bind(this),this,!0),this.Wp=document.createElement("td"),this.Wp.style.padding="0",this.Wp.style.position="relative";const i=document.createElement("div");i.style.width="100%",i.style.height="100%",i.style.position="relative",i.style.overflow="hidden",this.jp=document.createElement("td"),this.jp.style.padding="0",this.Hp=document.createElement("td"),this.Hp.style.padding="0",this.Wp.appendChild(i),this.Gv=Gi(i,Ft({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const o=this.Gv.canvasElement;o.style.position="absolute",o.style.zIndex="1",o.style.left="0",o.style.top="0",this.Jv=Gi(i,Ft({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const l=this.Jv.canvasElement;l.style.position="absolute",l.style.zIndex="2",l.style.left="0",l.style.top="0",this.$p=document.createElement("tr"),this.$p.appendChild(this.jp),this.$p.appendChild(this.Wp),this.$p.appendChild(this.Hp),this.Up(),this.hp=new $f(this.Jv.canvasElement,this,{ev:()=>this.Ip===null&&!this.Qd.W().handleScroll.vertTouchDrag,rv:()=>this.Ip===null&&!this.Qd.W().handleScroll.horzTouchDrag})}S(){this.Cp!==null&&this.Cp.S(),this.Tp!==null&&this.Tp.S(),this.Pp=null,this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),Fi(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),Fi(this.Gv.canvasElement),this.Gv.dispose(),this.Np!==null&&this.Np.W_().p(this),this.hp.S()}fp(){return Y(this.Np)}qp(t){var e,i;this.Np!==null&&this.Np.W_().p(this),this.Np=t,this.Np!==null&&this.Np.W_().l(Hf.prototype.Fp.bind(this),this,!0),this.Up(),this.Qd.Yp().indexOf(this)===this.Qd.Yp().length-1?(this.Pp=(e=this.Pp)!==null&&e!==void 0?e:new WU(this.Wp,this.Qd),this.Pp.bt()):((i=this.Pp)===null||i===void 0||i.if(),this.Pp=null)}$v(){return this.Qd}lp(){return this.$p}Up(){if(this.Np!==null&&(this.Zp(),this.$i().wt().length!==0)){if(this.Cp!==null){const t=this.Np.R_();this.Cp.Gi(Y(t))}if(this.Tp!==null){const t=this.Np.D_();this.Tp.Gi(Y(t))}}}Xp(){this.Cp!==null&&this.Cp.bt(),this.Tp!==null&&this.Tp.bt()}M_(){return this.Np!==null?this.Np.M_():0}x_(t){this.Np&&this.Np.x_(t)}Qf(t){if(!this.Np)return;this.Kp();const e=t.localX,i=t.localY;this.Gp(e,i,t)}bv(t){this.Kp(),this.Jp(),this.Gp(t.localX,t.localY,t)}tv(t){var e;if(!this.Np)return;this.Kp();const i=t.localX,o=t.localY;this.Gp(i,o,t);const l=this.wr(i,o);this.Qd.Qp((e=l==null?void 0:l.Lv)!==null&&e!==void 0?e:null),this.$i().jc(l&&{Hc:l.Hc,Iv:l.Iv})}dv(t){this.Np!==null&&(this.Kp(),this.tm(t))}qf(t){this.Np!==null&&this.im(this.Op,t)}jf(t){this.qf(t)}av(t){this.Kp(),this.nm(t),this.Gp(t.localX,t.localY,t)}cv(t){this.Np!==null&&(this.Kp(),this.Ap=!1,this.sm(t))}uv(t){this.Np!==null&&this.tm(t)}Rv(t){if(this.Ap=!0,this.Ip===null){const e={x:t.localX,y:t.localY};this.rm(e,e,t)}}Pv(t){this.Np!==null&&(this.Kp(),this.Np.$t().jc(null),this.hm())}lm(){return this.Vp}am(){return this.Op}xv(){this.Bp=1,this.$i().Un()}Sv(t,e){if(!this.Qd.W().handleScale.pinch)return;const i=5*(e-this.Bp);this.Bp=e,this.$i().Qc(t.nt,i)}pv(t){this.Ap=!1,this.zp=this.Ip!==null,this.Jp();const e=this.$i().Zc();this.Ip!==null&&e.yt()&&(this.Lp={x:e.Yt(),y:e.Zt()},this.Ip={x:t.localX,y:t.localY})}hv(t){if(this.Np===null)return;const e=t.localX,i=t.localY;if(this.Ip===null)this.nm(t);else{this.zp=!1;const o=Y(this.Lp),l=o.x+(e-this.Ip.x),u=o.y+(i-this.Ip.y);this.Gp(l,u,t)}}_v(t){this.$v().W().trackingMode.exitMode===0&&(this.zp=!0),this.om(),this.sm(t)}wr(t,e){const i=this.Np;return i===null?null:function(o,l,u){const d=o.Uo(),p=function(m,g,_){var S,b;let w,E;for(const U of m){const k=(b=(S=U.va)===null||S===void 0?void 0:S.call(U,g,_))!==null&&b!==void 0?b:[];for(const V of k)M=V.zOrder,(!(D=w==null?void 0:w.zOrder)||M==="top"&&D!=="top"||M==="normal"&&D==="bottom")&&(w=V,E=U)}var M,D;return w&&E?{zv:w,Hc:E}:null}(d,l,u);if((p==null?void 0:p.zv.zOrder)==="top")return va(p);for(const m of d){if(p&&p.Hc===m&&p.zv.zOrder!=="bottom"&&!p.zv.isBackground)return va(p);const g=QU(m.Pn(o),l,u);if(g!==null)return{Hc:m,Bv:g.Bv,Iv:g.Iv};if(p&&p.Hc===m&&p.zv.zOrder!=="bottom"&&p.zv.isBackground)return va(p)}return p!=null&&p.zv?va(p):null}(i,t,e)}_m(t,e){Y(e==="left"?this.Cp:this.Tp).cp(Ft({width:t,height:this.Ev.height}))}um(){return this.Ev}cp(t){Vi(this.Ev,t)||(this.Ev=t,this.jv=!0,this.Gv.resizeCanvasElement(t),this.Jv.resizeCanvasElement(t),this.jv=!1,this.Wp.style.width=t.width+"px",this.Wp.style.height=t.height+"px")}dm(){const t=Y(this.Np);t.P_(t.R_()),t.P_(t.D_());for(const e of t.Ba())if(t.vr(e)){const i=e.Dt();i!==null&&t.P_(i),e.Vn()}}xp(){return this.Gv.bitmapSize}Sp(t,e,i){const o=this.xp();o.width>0&&o.height>0&&t.drawImage(this.Gv.canvasElement,e,i)}vp(t){if(t===0||this.Np===null)return;if(t>1&&this.dm(),this.Cp!==null&&this.Cp.vp(t),this.Tp!==null&&this.Tp.vp(t),t!==1){this.Gv.applySuggestedBitmapSize();const i=$i(this.Gv);i!==null&&(i.useBitmapCoordinateSpace(o=>{this.mp(o)}),this.Np&&(this.fm(i,ZU),this.vm(i),this.pm(i),this.fm(i,ya),this.fm(i,jU)))}this.Jv.applySuggestedBitmapSize();const e=$i(this.Jv);e!==null&&(e.useBitmapCoordinateSpace(({context:i,bitmapSize:o})=>{i.clearRect(0,0,o.width,o.height)}),this.bm(e),this.fm(e,tP))}wm(){return this.Cp}gm(){return this.Tp}bp(t,e){this.fm(t,e)}Fp(){this.Np!==null&&this.Np.W_().p(this),this.Np=null}tm(t){this.im(this.Vp,t)}im(t,e){const i=e.localX,o=e.localY;t.M()&&t.m(this.$i().St().Nu(i),{x:i,y:o},e)}mp({context:t,bitmapSize:e}){const{width:i,height:o}=e,l=this.$i(),u=l.q(),d=l.bd();u===d?Oa(t,0,0,i,o,d):aS(t,0,0,i,o,u,d)}vm(t){const e=Y(this.Np).j_().qh().gt();e!==null&&e.X(t,!1)}pm(t){const e=this.$i().Yc();this.Mm(t,ya,df,e),this.Mm(t,ya,Ta,e)}bm(t){this.Mm(t,ya,Ta,this.$i().Zc())}fm(t,e){const i=Y(this.Np).Uo();for(const o of i)this.Mm(t,e,df,o);for(const o of i)this.Mm(t,e,Ta,o)}Mm(t,e,i,o){const l=Y(this.Np),u=l.$t().Wc(),d=u!==null&&u.Hc===o,p=u!==null&&d&&u.Iv!==void 0?u.Iv.Mr:void 0;pf(e,m=>i(m,t,d,p),o,l)}Zp(){if(this.Np===null)return;const t=this.Qd,e=this.Np.R_().W().visible,i=this.Np.D_().W().visible;e||this.Cp===null||(this.jp.removeChild(this.Cp.lp()),this.Cp.S(),this.Cp=null),i||this.Tp===null||(this.Hp.removeChild(this.Tp.lp()),this.Tp.S(),this.Tp=null);const o=t.$t().ud();e&&this.Cp===null&&(this.Cp=new U0(this,t.W(),o,"left"),this.jp.appendChild(this.Cp.lp())),i&&this.Tp===null&&(this.Tp=new U0(this,t.W(),o,"right"),this.Hp.appendChild(this.Tp.lp()))}xm(t){return t.Dv&&this.Ap||this.Ip!==null}Sm(t){return Math.max(0,Math.min(t,this.Ev.width-1))}km(t){return Math.max(0,Math.min(t,this.Ev.height-1))}Gp(t,e,i){this.$i().ld(this.Sm(t),this.km(e),i,Y(this.Np))}hm(){this.$i().od()}om(){this.zp&&(this.Ip=null,this.hm())}rm(t,e,i){this.Ip=t,this.zp=!1,this.Gp(e.x,e.y,i);const o=this.$i().Zc();this.Lp={x:o.Yt(),y:o.Zt()}}$i(){return this.Qd.$t()}sm(t){if(!this.Dp)return;const e=this.$i(),i=this.fp();if(e.z_(i,i.vn()),this.Rp=null,this.Dp=!1,e.ed(),this.Ep!==null){const o=performance.now(),l=e.St();this.Ep.Vr(l.Hu(),o),this.Ep.Qu(o)||e.Zn(this.Ep)}}Kp(){this.Ip=null}Jp(){if(this.Np){if(this.$i().Un(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)Y(document.activeElement).blur();else{const t=document.getSelection();t!==null&&t.removeAllRanges()}!this.Np.vn().Ni()&&this.$i().St().Ni()}}nm(t){if(this.Np===null)return;const e=this.$i(),i=e.St();if(i.Ni())return;const o=this.Qd.W(),l=o.handleScroll,u=o.kineticScroll;if((!l.pressedMouseMove||t.Dv)&&(!l.horzTouchDrag&&!l.vertTouchDrag||!t.Dv))return;const d=this.Np.vn(),p=performance.now();if(this.Rp!==null||this.xm(t)||(this.Rp={x:t.clientX,y:t.clientY,Od:p,ym:t.localX,Cm:t.localY}),this.Rp!==null&&!this.Dp&&(this.Rp.x!==t.clientX||this.Rp.y!==t.clientY)){if(t.Dv&&u.touch||!t.Dv&&u.mouse){const m=i.le();this.Ep=new YU(.2/m,7/m,.997,15/m),this.Ep.Yd(i.Hu(),this.Rp.Od)}else this.Ep=null;d.Ni()||e.A_(this.Np,d,t.localY),e.nd(t.localX),this.Dp=!0}this.Dp&&(d.Ni()||e.I_(this.Np,d,t.localY),e.sd(t.localX),this.Ep!==null&&this.Ep.Yd(i.Hu(),p))}}class P0{constructor(t,e,i,o,l){this.ft=!0,this.Ev=Ft({width:0,height:0}),this.Hv=()=>this.vp(3),this.qv=t==="left",this.Oc=i.ud,this.cn=e,this.Tm=o,this.Pm=l,this.Kv=document.createElement("div"),this.Kv.style.width="25px",this.Kv.style.height="100%",this.Kv.style.overflow="hidden",this.Gv=Gi(this.Kv,Ft({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv)}S(){this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),Fi(this.Gv.canvasElement),this.Gv.dispose()}lp(){return this.Kv}um(){return this.Ev}cp(t){Vi(this.Ev,t)||(this.Ev=t,this.Gv.resizeCanvasElement(t),this.Kv.style.width=`${t.width}px`,this.Kv.style.height=`${t.height}px`,this.ft=!0)}vp(t){if(t<3&&!this.ft||this.Ev.width===0||this.Ev.height===0)return;this.ft=!1,this.Gv.applySuggestedBitmapSize();const e=$i(this.Gv);e!==null&&e.useBitmapCoordinateSpace(i=>{this.mp(i),this.Ie(i)})}xp(){return this.Gv.bitmapSize}Sp(t,e,i){const o=this.xp();o.width>0&&o.height>0&&t.drawImage(this.Gv.canvasElement,e,i)}Ie({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:o}){if(!this.Tm())return;t.fillStyle=this.cn.timeScale.borderColor;const l=Math.floor(this.Oc.W().C*i),u=Math.floor(this.Oc.W().C*o),d=this.qv?e.width-l:0;t.fillRect(d,0,l,u)}mp({context:t,bitmapSize:e}){Oa(t,0,0,e.width,e.height,this.Pm())}}function Gf(n){return t=>{var e,i;return(i=(e=t.fa)===null||e===void 0?void 0:e.call(t,n))!==null&&i!==void 0?i:[]}}const eP=Gf("normal"),nP=Gf("top"),iP=Gf("bottom");class sP{constructor(t,e){this.Rm=null,this.Dm=null,this.k=null,this.Vm=!1,this.Ev=Ft({width:0,height:0}),this.Om=new jt,this.Fv=new Ir(5),this.jv=!1,this.Hv=()=>{this.jv||this.Qd.$t().Uh()},this.Uv=()=>{this.jv||this.Qd.$t().Uh()},this.Qd=t,this.q_=e,this.cn=t.W().layout,this.Xd=document.createElement("tr"),this.Bm=document.createElement("td"),this.Bm.style.padding="0",this.Am=document.createElement("td"),this.Am.style.padding="0",this.Kv=document.createElement("td"),this.Kv.style.height="25px",this.Kv.style.padding="0",this.Im=document.createElement("div"),this.Im.style.width="100%",this.Im.style.height="100%",this.Im.style.position="relative",this.Im.style.overflow="hidden",this.Kv.appendChild(this.Im),this.Gv=Gi(this.Im,Ft({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const i=this.Gv.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.Jv=Gi(this.Im,Ft({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const o=this.Jv.canvasElement;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0",this.Xd.appendChild(this.Bm),this.Xd.appendChild(this.Kv),this.Xd.appendChild(this.Am),this.zm(),this.Qd.$t().g_().l(this.zm.bind(this),this),this.hp=new $f(this.Jv.canvasElement,this,{ev:()=>!0,rv:()=>!this.Qd.W().handleScroll.horzTouchDrag})}S(){this.hp.S(),this.Rm!==null&&this.Rm.S(),this.Dm!==null&&this.Dm.S(),this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),Fi(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),Fi(this.Gv.canvasElement),this.Gv.dispose()}lp(){return this.Xd}Lm(){return this.Rm}Em(){return this.Dm}bv(t){if(this.Vm)return;this.Vm=!0;const e=this.Qd.$t();!e.St().Ni()&&this.Qd.W().handleScale.axisPressedMouseMove.time&&e.Jc(t.localX)}pv(t){this.bv(t)}wv(){const t=this.Qd.$t();!t.St().Ni()&&this.Vm&&(this.Vm=!1,this.Qd.W().handleScale.axisPressedMouseMove.time&&t.hd())}av(t){const e=this.Qd.$t();!e.St().Ni()&&this.Qd.W().handleScale.axisPressedMouseMove.time&&e.rd(t.localX)}hv(t){this.av(t)}cv(){this.Vm=!1;const t=this.Qd.$t();t.St().Ni()&&!this.Qd.W().handleScale.axisPressedMouseMove.time||t.hd()}_v(){this.cv()}qf(){this.Qd.W().handleScale.axisDoubleClickReset.time&&this.Qd.$t().Kn()}jf(){this.qf()}Qf(){this.Qd.$t().W().handleScale.axisPressedMouseMove.time&&this.kp(1)}Pv(){this.kp(0)}um(){return this.Ev}Nm(){return this.Om}Fm(t,e,i){Vi(this.Ev,t)||(this.Ev=t,this.jv=!0,this.Gv.resizeCanvasElement(t),this.Jv.resizeCanvasElement(t),this.jv=!1,this.Kv.style.width=`${t.width}px`,this.Kv.style.height=`${t.height}px`,this.Om.m(t)),this.Rm!==null&&this.Rm.cp(Ft({width:e,height:t.height})),this.Dm!==null&&this.Dm.cp(Ft({width:i,height:t.height}))}Wm(){const t=this.jm();return Math.ceil(t.C+t.T+t.P+t.L+t.B+t.Hm)}bt(){this.Qd.$t().St().Ha()}xp(){return this.Gv.bitmapSize}Sp(t,e,i){const o=this.xp();o.width>0&&o.height>0&&t.drawImage(this.Gv.canvasElement,e,i)}vp(t){if(t===0)return;if(t!==1){this.Gv.applySuggestedBitmapSize();const i=$i(this.Gv);i!==null&&(i.useBitmapCoordinateSpace(o=>{this.mp(o),this.Ie(o),this.$m(i,iP)}),this.wp(i),this.$m(i,eP)),this.Rm!==null&&this.Rm.vp(t),this.Dm!==null&&this.Dm.vp(t)}this.Jv.applySuggestedBitmapSize();const e=$i(this.Jv);e!==null&&(e.useBitmapCoordinateSpace(({context:i,bitmapSize:o})=>{i.clearRect(0,0,o.width,o.height)}),this.Um([...this.Qd.$t().wt(),this.Qd.$t().Zc()],e),this.$m(e,nP))}$m(t,e){const i=this.Qd.$t().wt();for(const o of i)pf(e,l=>df(l,t,!1,void 0),o,void 0);for(const o of i)pf(e,l=>Ta(l,t,!1,void 0),o,void 0)}mp({context:t,bitmapSize:e}){Oa(t,0,0,e.width,e.height,this.Qd.$t().bd())}Ie({context:t,bitmapSize:e,verticalPixelRatio:i}){if(this.Qd.W().timeScale.borderVisible){t.fillStyle=this.qm();const o=Math.max(1,Math.floor(this.jm().C*i));t.fillRect(0,0,e.width,o)}}wp(t){const e=this.Qd.$t().St(),i=e.Ha();if(!i||i.length===0)return;const o=this.q_.maxTickMarkWeight(i),l=this.jm(),u=e.W();u.borderVisible&&u.ticksVisible&&t.useBitmapCoordinateSpace(({context:d,horizontalPixelRatio:p,verticalPixelRatio:m})=>{d.strokeStyle=this.qm(),d.fillStyle=this.qm();const g=Math.max(1,Math.floor(p)),_=Math.floor(.5*p);d.beginPath();const S=Math.round(l.T*m);for(let b=i.length;b--;){const w=Math.round(i[b].coord*p);d.rect(w-_,0,g,S)}d.fill()}),t.useMediaCoordinateSpace(({context:d})=>{const p=l.C+l.T+l.L+l.P/2;d.textAlign="center",d.textBaseline="middle",d.fillStyle=this.$(),d.font=this._p();for(const m of i)if(m.weight<o){const g=m.needAlignCoordinate?this.Ym(d,m.coord,m.label):m.coord;d.fillText(m.label,g,p)}this.Qd.W().timeScale.allowBoldLabels&&(d.font=this.Zm());for(const m of i)if(m.weight>=o){const g=m.needAlignCoordinate?this.Ym(d,m.coord,m.label):m.coord;d.fillText(m.label,g,p)}})}Ym(t,e,i){const o=this.Fv.xi(t,i),l=o/2,u=Math.floor(e-l)+.5;return u<0?e+=Math.abs(0-u):u+o>this.Ev.width&&(e-=Math.abs(this.Ev.width-(u+o))),e}Um(t,e){const i=this.jm();for(const o of t)for(const l of o.Qi())l.gt().X(e,i)}qm(){return this.Qd.W().timeScale.borderColor}$(){return this.cn.textColor}j(){return this.cn.fontSize}_p(){return io(this.j(),this.cn.fontFamily)}Zm(){return io(this.j(),this.cn.fontFamily,"bold")}jm(){this.k===null&&(this.k={C:1,N:NaN,L:NaN,B:NaN,ji:NaN,T:5,P:NaN,R:"",Wi:new Ir,Hm:0});const t=this.k,e=this._p();if(t.R!==e){const i=this.j();t.P=i,t.R=e,t.L=3*i/12,t.B=3*i/12,t.ji=9*i/12,t.N=0,t.Hm=4*i/12,t.Wi.nr()}return this.k}kp(t){this.Kv.style.cursor=t===1?"ew-resize":"default"}zm(){const t=this.Qd.$t(),e=t.W();e.leftPriceScale.visible||this.Rm===null||(this.Bm.removeChild(this.Rm.lp()),this.Rm.S(),this.Rm=null),e.rightPriceScale.visible||this.Dm===null||(this.Am.removeChild(this.Dm.lp()),this.Dm.S(),this.Dm=null);const i={ud:this.Qd.$t().ud()},o=()=>e.leftPriceScale.borderVisible&&t.St().W().borderVisible,l=()=>t.bd();e.leftPriceScale.visible&&this.Rm===null&&(this.Rm=new P0("left",e,i,o,l),this.Bm.appendChild(this.Rm.lp())),e.rightPriceScale.visible&&this.Dm===null&&(this.Dm=new P0("right",e,i,o,l),this.Am.appendChild(this.Dm.lp()))}}const oP=!!so&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(n=>n.brand.includes("Chromium"))&&!!so&&(!((Lh=navigator==null?void 0:navigator.userAgentData)===null||Lh===void 0)&&Lh.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);var Lh;class rP{constructor(t,e,i){var o;this.Xm=[],this.Km=0,this.ho=0,this.__=0,this.Gm=0,this.Jm=0,this.Qm=null,this.tb=!1,this.Vp=new jt,this.Op=new jt,this.Rc=new jt,this.ib=null,this.nb=null,this.Jd=t,this.cn=e,this.q_=i,this.Xd=document.createElement("div"),this.Xd.classList.add("tv-lightweight-charts"),this.Xd.style.overflow="hidden",this.Xd.style.direction="ltr",this.Xd.style.width="100%",this.Xd.style.height="100%",(o=this.Xd).style.userSelect="none",o.style.webkitUserSelect="none",o.style.msUserSelect="none",o.style.MozUserSelect="none",o.style.webkitTapHighlightColor="transparent",this.sb=document.createElement("table"),this.sb.setAttribute("cellspacing","0"),this.Xd.appendChild(this.sb),this.eb=this.rb.bind(this),Uh(this.cn)&&this.hb(!0),this.$i=new HU(this.Vc.bind(this),this.cn,i),this.$t().Xc().l(this.lb.bind(this),this),this.ab=new sP(this,this.q_),this.sb.appendChild(this.ab.lp());const l=e.autoSize&&this.ob();let u=this.cn.width,d=this.cn.height;if(l||u===0||d===0){const p=t.getBoundingClientRect();u=u||p.width,d=d||p.height}this._b(u,d),this.ub(),t.appendChild(this.Xd),this.cb(),this.$i.St().ec().l(this.$i.Kl.bind(this.$i),this),this.$i.g_().l(this.$i.Kl.bind(this.$i),this)}$t(){return this.$i}W(){return this.cn}Yp(){return this.Xm}fb(){return this.ab}S(){this.hb(!1),this.Km!==0&&window.cancelAnimationFrame(this.Km),this.$i.Xc().p(this),this.$i.St().ec().p(this),this.$i.g_().p(this),this.$i.S();for(const t of this.Xm)this.sb.removeChild(t.lp()),t.lm().p(this),t.am().p(this),t.S();this.Xm=[],Y(this.ab).S(),this.Xd.parentElement!==null&&this.Xd.parentElement.removeChild(this.Xd),this.Rc.S(),this.Vp.S(),this.Op.S(),this.pb()}_b(t,e,i=!1){if(this.ho===e&&this.__===t)return;const o=function(d){const p=Math.floor(d.width),m=Math.floor(d.height);return Ft({width:p-p%2,height:m-m%2})}(Ft({width:t,height:e}));this.ho=o.height,this.__=o.width;const l=this.ho+"px",u=this.__+"px";Y(this.Xd).style.height=l,Y(this.Xd).style.width=u,this.sb.style.height=l,this.sb.style.width=u,i?this.mb(ge.es(),performance.now()):this.$i.Kl()}vp(t){t===void 0&&(t=ge.es());for(let e=0;e<this.Xm.length;e++)this.Xm[e].vp(t.Hn(e).Fn);this.cn.timeScale.visible&&this.ab.vp(t.jn())}$h(t){const e=Uh(this.cn);this.$i.$h(t);const i=Uh(this.cn);i!==e&&this.hb(i),this.cb(),this.bb(t)}lm(){return this.Vp}am(){return this.Op}Xc(){return this.Rc}wb(){this.Qm!==null&&(this.mb(this.Qm,performance.now()),this.Qm=null);const t=this.gb(null),e=document.createElement("canvas");e.width=t.width,e.height=t.height;const i=Y(e.getContext("2d"));return this.gb(i),e}Mb(t){return t==="left"&&!this.xb()||t==="right"&&!this.Sb()||this.Xm.length===0?0:Y(t==="left"?this.Xm[0].wm():this.Xm[0].gm()).dp()}kb(){return this.cn.autoSize&&this.ib!==null}yb(){return this.Xd}Qp(t){this.nb=t,this.nb?this.yb().style.setProperty("cursor",t):this.yb().style.removeProperty("cursor")}Cb(){return this.nb}Tb(){return we(this.Xm[0]).um()}bb(t){(t.autoSize!==void 0||!this.ib||t.width===void 0&&t.height===void 0)&&(t.autoSize&&!this.ib&&this.ob(),t.autoSize===!1&&this.ib!==null&&this.pb(),t.autoSize||t.width===void 0&&t.height===void 0||this._b(t.width||this.__,t.height||this.ho))}gb(t){let e=0,i=0;const o=this.Xm[0],l=(d,p)=>{let m=0;for(let g=0;g<this.Xm.length;g++){const _=this.Xm[g],S=Y(d==="left"?_.wm():_.gm()),b=S.xp();t!==null&&S.Sp(t,p,m),m+=b.height}};this.xb()&&(l("left",0),e+=Y(o.wm()).xp().width);for(let d=0;d<this.Xm.length;d++){const p=this.Xm[d],m=p.xp();t!==null&&p.Sp(t,e,i),i+=m.height}e+=o.xp().width,this.Sb()&&(l("right",e),e+=Y(o.gm()).xp().width);const u=(d,p,m)=>{Y(d==="left"?this.ab.Lm():this.ab.Em()).Sp(Y(t),p,m)};if(this.cn.timeScale.visible){const d=this.ab.xp();if(t!==null){let p=0;this.xb()&&(u("left",p,i),p=Y(o.wm()).xp().width),this.ab.Sp(t,p,i),p+=d.width,this.Sb()&&u("right",p,i)}i+=d.height}return Ft({width:e,height:i})}Pb(){let t=0,e=0,i=0;for(const w of this.Xm)this.xb()&&(e=Math.max(e,Y(w.wm()).op(),this.cn.leftPriceScale.minimumWidth)),this.Sb()&&(i=Math.max(i,Y(w.gm()).op(),this.cn.rightPriceScale.minimumWidth)),t+=w.M_();e=ff(e),i=ff(i);const o=this.__,l=this.ho,u=Math.max(o-e-i,0),d=this.cn.timeScale.visible;let p=d?Math.max(this.ab.Wm(),this.cn.timeScale.minimumHeight):0;var m;p=(m=p)+m%2;const g=0+p,_=l<g?0:l-g,S=_/t;let b=0;for(let w=0;w<this.Xm.length;++w){const E=this.Xm[w];E.qp(this.$i.qc()[w]);let M=0,D=0;D=w===this.Xm.length-1?_-b:Math.round(E.M_()*S),M=Math.max(D,2),b+=M,E.cp(Ft({width:u,height:M})),this.xb()&&E._m(e,"left"),this.Sb()&&E._m(i,"right"),E.fp()&&this.$i.Kc(E.fp(),M)}this.ab.Fm(Ft({width:d?u:0,height:p}),d?e:0,d?i:0),this.$i.S_(u),this.Gm!==e&&(this.Gm=e),this.Jm!==i&&(this.Jm=i)}hb(t){t?this.Xd.addEventListener("wheel",this.eb,{passive:!1}):this.Xd.removeEventListener("wheel",this.eb)}Rb(t){switch(t.deltaMode){case t.DOM_DELTA_PAGE:return 120;case t.DOM_DELTA_LINE:return 32}return oP?1/window.devicePixelRatio:1}rb(t){if(!(t.deltaX!==0&&this.cn.handleScroll.mouseWheel||t.deltaY!==0&&this.cn.handleScale.mouseWheel))return;const e=this.Rb(t),i=e*t.deltaX/100,o=-e*t.deltaY/100;if(t.cancelable&&t.preventDefault(),o!==0&&this.cn.handleScale.mouseWheel){const l=Math.sign(o)*Math.min(1,Math.abs(o)),u=t.clientX-this.Xd.getBoundingClientRect().left;this.$t().Qc(u,l)}i!==0&&this.cn.handleScroll.mouseWheel&&this.$t().td(-80*i)}mb(t,e){var i;const o=t.jn();o===3&&this.Db(),o!==3&&o!==2||(this.Vb(t),this.Ob(t,e),this.ab.bt(),this.Xm.forEach(l=>{l.Xp()}),((i=this.Qm)===null||i===void 0?void 0:i.jn())===3&&(this.Qm.ts(t),this.Db(),this.Vb(this.Qm),this.Ob(this.Qm,e),t=this.Qm,this.Qm=null)),this.vp(t)}Ob(t,e){for(const i of t.Qn())this.ns(i,e)}Vb(t){const e=this.$i.qc();for(let i=0;i<e.length;i++)t.Hn(i).Wn&&e[i].N_()}ns(t,e){const i=this.$i.St();switch(t.qn){case 0:i.hc();break;case 1:i.lc(t.Vt);break;case 2:i.Gn(t.Vt);break;case 3:i.Jn(t.Vt);break;case 4:i.qu();break;case 5:t.Vt.Qu(e)||i.Jn(t.Vt.tc(e))}}Vc(t){this.Qm!==null?this.Qm.ts(t):this.Qm=t,this.tb||(this.tb=!0,this.Km=window.requestAnimationFrame(e=>{if(this.tb=!1,this.Km=0,this.Qm!==null){const i=this.Qm;this.Qm=null,this.mb(i,e);for(const o of i.Qn())if(o.qn===5&&!o.Vt.Qu(e)){this.$t().Zn(o.Vt);break}}}))}Db(){this.ub()}ub(){const t=this.$i.qc(),e=t.length,i=this.Xm.length;for(let o=e;o<i;o++){const l=we(this.Xm.pop());this.sb.removeChild(l.lp()),l.lm().p(this),l.am().p(this),l.S()}for(let o=i;o<e;o++){const l=new Hf(this,t[o]);l.lm().l(this.Bb.bind(this),this),l.am().l(this.Ab.bind(this),this),this.Xm.push(l),this.sb.insertBefore(l.lp(),this.ab.lp())}for(let o=0;o<e;o++){const l=t[o],u=this.Xm[o];u.fp()!==l?u.qp(l):u.Up()}this.cb(),this.Pb()}Ib(t,e,i){var o;const l=new Map;t!==null&&this.$i.wt().forEach(g=>{const _=g.In().ll(t);_!==null&&l.set(g,_)});let u;if(t!==null){const g=(o=this.$i.St().Ui(t))===null||o===void 0?void 0:o.originalTime;g!==void 0&&(u=g)}const d=this.$t().Wc(),p=d!==null&&d.Hc instanceof Of?d.Hc:void 0,m=d!==null&&d.Iv!==void 0?d.Iv.gr:void 0;return{zb:u,ee:t??void 0,Lb:e??void 0,Eb:p,Nb:l,Fb:m,Wb:i??void 0}}Bb(t,e,i){this.Vp.m(()=>this.Ib(t,e,i))}Ab(t,e,i){this.Op.m(()=>this.Ib(t,e,i))}lb(t,e,i){this.Rc.m(()=>this.Ib(t,e,i))}cb(){const t=this.cn.timeScale.visible?"":"none";this.ab.lp().style.display=t}xb(){return this.Xm[0].fp().R_().W().visible}Sb(){return this.Xm[0].fp().D_().W().visible}ob(){return"ResizeObserver"in window&&(this.ib=new ResizeObserver(t=>{const e=t.find(i=>i.target===this.Jd);e&&this._b(e.contentRect.width,e.contentRect.height)}),this.ib.observe(this.Jd,{box:"border-box"}),!0)}pb(){this.ib!==null&&this.ib.disconnect(),this.ib=null}}function Uh(n){return!!(n.handleScroll.mouseWheel||n.handleScale.mouseWheel)}function lP(n){return function(t){return t.open!==void 0}(n)||function(t){return t.value!==void 0}(n)}function MS(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function"){var o=0;for(i=Object.getOwnPropertySymbols(n);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(e[i[o]]=n[i[o]])}return e}function z0(n,t,e,i){const o=e.value,l={ee:t,ot:n,Vt:[o,o,o,o],zb:i};return e.color!==void 0&&(l.V=e.color),l}function aP(n,t,e,i){const o=e.value,l={ee:t,ot:n,Vt:[o,o,o,o],zb:i};return e.lineColor!==void 0&&(l.lt=e.lineColor),e.topColor!==void 0&&(l.Ps=e.topColor),e.bottomColor!==void 0&&(l.Rs=e.bottomColor),l}function uP(n,t,e,i){const o=e.value,l={ee:t,ot:n,Vt:[o,o,o,o],zb:i};return e.topLineColor!==void 0&&(l.Re=e.topLineColor),e.bottomLineColor!==void 0&&(l.De=e.bottomLineColor),e.topFillColor1!==void 0&&(l.ke=e.topFillColor1),e.topFillColor2!==void 0&&(l.ye=e.topFillColor2),e.bottomFillColor1!==void 0&&(l.Ce=e.bottomFillColor1),e.bottomFillColor2!==void 0&&(l.Te=e.bottomFillColor2),l}function cP(n,t,e,i){const o={ee:t,ot:n,Vt:[e.open,e.high,e.low,e.close],zb:i};return e.color!==void 0&&(o.V=e.color),o}function hP(n,t,e,i){const o={ee:t,ot:n,Vt:[e.open,e.high,e.low,e.close],zb:i};return e.color!==void 0&&(o.V=e.color),e.borderColor!==void 0&&(o.Ot=e.borderColor),e.wickColor!==void 0&&(o.Xh=e.wickColor),o}function fP(n,t,e,i,o){const l=we(o)(e),u=Math.max(...l),d=Math.min(...l),p=l[l.length-1],m=[p,u,d,p],g=e,{time:_,color:S}=g;return{ee:t,ot:n,Vt:m,zb:i,$e:MS(g,["time","color"]),V:S}}function _a(n){return n.Vt!==void 0}function V0(n,t){return t.customValues!==void 0&&(n.jb=t.customValues),n}function Ui(n){return(t,e,i,o,l,u)=>function(d,p){return p?p(d):(m=d).open===void 0&&m.value===void 0;var m}(i,u)?V0({ot:t,ee:e,zb:o},i):V0(n(t,e,i,o,l),i)}function B0(n){return{Candlestick:Ui(hP),Bar:Ui(cP),Area:Ui(aP),Baseline:Ui(uP),Histogram:Ui(z0),Line:Ui(z0),Custom:Ui(fP)}[n]}function O0(n){return{ee:0,Hb:new Map,la:n}}function q0(n,t){if(n!==void 0&&n.length!==0)return{$b:t.key(n[0].ot),Ub:t.key(n[n.length-1].ot)}}function $0(n){let t;return n.forEach(e=>{t===void 0&&(t=e.zb)}),we(t)}class dP{constructor(t){this.qb=new Map,this.Yb=new Map,this.Zb=new Map,this.Xb=[],this.q_=t}S(){this.qb.clear(),this.Yb.clear(),this.Zb.clear(),this.Xb=[]}Kb(t,e){let i=this.qb.size!==0,o=!1;const l=this.Yb.get(t);if(l!==void 0)if(this.Yb.size===1)i=!1,o=!0,this.qb.clear();else for(const p of this.Xb)p.pointData.Hb.delete(t)&&(o=!0);let u=[];if(e.length!==0){const p=e.map(b=>b.time),m=this.q_.createConverterToInternalObj(e),g=B0(t.Qh()),_=t.Ca(),S=t.Ta();u=e.map((b,w)=>{const E=m(b.time),M=this.q_.key(E);let D=this.qb.get(M);D===void 0&&(D=O0(E),this.qb.set(M,D),o=!0);const U=g(E,D.ee,b,p[w],_,S);return D.Hb.set(t,U),U})}i&&this.Gb(),this.Jb(t,u);let d=-1;if(o){const p=[];this.qb.forEach(m=>{p.push({timeWeight:0,time:m.la,pointData:m,originalTime:$0(m.Hb)})}),p.sort((m,g)=>this.q_.key(m.time)-this.q_.key(g.time)),d=this.Qb(p)}return this.tw(t,d,function(p,m,g){const _=q0(p,g),S=q0(m,g);if(_!==void 0&&S!==void 0)return{ta:_.Ub>=S.Ub&&_.$b>=S.$b}}(this.Yb.get(t),l,this.q_))}vd(t){return this.Kb(t,[])}iw(t,e){const i=e;(function(E){E.zb===void 0&&(E.zb=E.time)})(i),this.q_.preprocessData(e);const o=this.q_.createConverterToInternalObj([e])(e.time),l=this.Zb.get(t);if(l!==void 0&&this.q_.key(o)<this.q_.key(l))throw new Error(`Cannot update oldest data, last time=${l}, new time=${o}`);let u=this.qb.get(this.q_.key(o));const d=u===void 0;u===void 0&&(u=O0(o),this.qb.set(this.q_.key(o),u));const p=B0(t.Qh()),m=t.Ca(),g=t.Ta(),_=p(o,u.ee,e,i.zb,m,g);u.Hb.set(t,_),this.nw(t,_);const S={ta:_a(_)};if(!d)return this.tw(t,-1,S);const b={timeWeight:0,time:u.la,pointData:u,originalTime:$0(u.Hb)},w=qr(this.Xb,this.q_.key(b.time),(E,M)=>this.q_.key(E.time)<M);this.Xb.splice(w,0,b);for(let E=w;E<this.Xb.length;++E)Ph(this.Xb[E].pointData,E);return this.q_.fillWeightsForPoints(this.Xb,w),this.tw(t,w,S)}nw(t,e){let i=this.Yb.get(t);i===void 0&&(i=[],this.Yb.set(t,i));const o=i.length!==0?i[i.length-1]:null;o===null||this.q_.key(e.ot)>this.q_.key(o.ot)?_a(e)&&i.push(e):_a(e)?i[i.length-1]=e:i.splice(-1,1),this.Zb.set(t,e.ot)}Jb(t,e){e.length!==0?(this.Yb.set(t,e.filter(_a)),this.Zb.set(t,e[e.length-1].ot)):(this.Yb.delete(t),this.Zb.delete(t))}Gb(){for(const t of this.Xb)t.pointData.Hb.size===0&&this.qb.delete(this.q_.key(t.time))}Qb(t){let e=-1;for(let i=0;i<this.Xb.length&&i<t.length;++i){const o=this.Xb[i],l=t[i];if(this.q_.key(o.time)!==this.q_.key(l.time)){e=i;break}l.timeWeight=o.timeWeight,Ph(l.pointData,i)}if(e===-1&&this.Xb.length!==t.length&&(e=Math.min(this.Xb.length,t.length)),e===-1)return-1;for(let i=e;i<t.length;++i)Ph(t[i].pointData,i);return this.q_.fillWeightsForPoints(t,e),this.Xb=t,e}sw(){if(this.Yb.size===0)return null;let t=0;return this.Yb.forEach(e=>{e.length!==0&&(t=Math.max(t,e[e.length-1].ee))}),t}tw(t,e,i){const o={ew:new Map,St:{Eu:this.sw()}};if(e!==-1)this.Yb.forEach((l,u)=>{o.ew.set(u,{$e:l,rw:u===t?i:void 0})}),this.Yb.has(t)||o.ew.set(t,{$e:[],rw:i}),o.St.hw=this.Xb,o.St.lw=e;else{const l=this.Yb.get(t);o.ew.set(t,{$e:l||[],rw:i})}return o}}function Ph(n,t){n.ee=t,n.Hb.forEach(e=>{e.ee=t})}function Ff(n){const t={value:n.Vt[3],time:n.zb};return n.jb!==void 0&&(t.customValues=n.jb),t}function H0(n){const t=Ff(n);return n.V!==void 0&&(t.color=n.V),t}function pP(n){const t=Ff(n);return n.lt!==void 0&&(t.lineColor=n.lt),n.Ps!==void 0&&(t.topColor=n.Ps),n.Rs!==void 0&&(t.bottomColor=n.Rs),t}function mP(n){const t=Ff(n);return n.Re!==void 0&&(t.topLineColor=n.Re),n.De!==void 0&&(t.bottomLineColor=n.De),n.ke!==void 0&&(t.topFillColor1=n.ke),n.ye!==void 0&&(t.topFillColor2=n.ye),n.Ce!==void 0&&(t.bottomFillColor1=n.Ce),n.Te!==void 0&&(t.bottomFillColor2=n.Te),t}function AS(n){const t={open:n.Vt[0],high:n.Vt[1],low:n.Vt[2],close:n.Vt[3],time:n.zb};return n.jb!==void 0&&(t.customValues=n.jb),t}function gP(n){const t=AS(n);return n.V!==void 0&&(t.color=n.V),t}function vP(n){const t=AS(n),{V:e,Ot:i,Xh:o}=n;return e!==void 0&&(t.color=e),i!==void 0&&(t.borderColor=i),o!==void 0&&(t.wickColor=o),t}function mf(n){return{Area:pP,Line:H0,Baseline:mP,Histogram:H0,Bar:gP,Candlestick:vP,Custom:yP}[n]}function yP(n){const t=n.zb;return Object.assign(Object.assign({},n.$e),{time:t})}const _P={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},SP={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},bP={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:Lf,attributionLogo:!0},zh={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0},TP={rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0},wP={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:Lf,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"};function G0(){return{width:0,height:0,autoSize:!1,layout:bP,crosshair:_P,grid:SP,overlayPriceScales:Object.assign({},zh),leftPriceScale:Object.assign(Object.assign({},zh),{visible:!1}),rightPriceScale:Object.assign(Object.assign({},zh),{visible:!0}),timeScale:TP,watermark:wP,localization:{locale:so?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class CP{constructor(t,e){this.aw=t,this.ow=e}applyOptions(t){this.aw.$t().$c(this.ow,t)}options(){return this.Li().W()}width(){return $a(this.ow)?this.aw.Mb(this.ow):0}Li(){return Y(this.aw.$t().Uc(this.ow)).Dt}}function F0(n,t,e){const i=MS(n,["time","originalTime"]),o=Object.assign({time:t},i);return e!==void 0&&(o.originalTime=e),o}const xP={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class EP{constructor(t){this.Nh=t}applyOptions(t){this.Nh.$h(t)}options(){return this.Nh.W()}_w(){return this.Nh}}class MP{constructor(t,e,i,o,l){this.uw=new jt,this.Es=t,this.cw=e,this.dw=i,this.q_=l,this.fw=o}S(){this.uw.S()}priceFormatter(){return this.Es.ba()}priceToCoordinate(t){const e=this.Es.Ct();return e===null?null:this.Es.Dt().Rt(t,e.Vt)}coordinateToPrice(t){const e=this.Es.Ct();return e===null?null:this.Es.Dt().pn(t,e.Vt)}barsInLogicalRange(t){if(t===null)return null;const e=new eo(new Ar(t.from,t.to)).lu(),i=this.Es.In();if(i.Ni())return null;const o=i.ll(e.Os(),1),l=i.ll(e.ui(),-1),u=Y(i.el()),d=Y(i.An());if(o!==null&&l!==null&&o.ee>l.ee)return{barsBefore:t.from-u,barsAfter:d-t.to};const p={barsBefore:o===null||o.ee===u?t.from-u:o.ee-u,barsAfter:l===null||l.ee===d?d-t.to:d-l.ee};return o!==null&&l!==null&&(p.from=o.zb,p.to=l.zb),p}setData(t){this.q_,this.Es.Qh(),this.cw.pw(this.Es,t),this.mw("full")}update(t){this.Es.Qh(),this.cw.bw(this.Es,t),this.mw("update")}dataByIndex(t,e){const i=this.Es.In().ll(t,e);return i===null?null:mf(this.seriesType())(i)}data(){const t=mf(this.seriesType());return this.Es.In().ne().map(e=>t(e))}subscribeDataChanged(t){this.uw.l(t)}unsubscribeDataChanged(t){this.uw.v(t)}setMarkers(t){this.q_;const e=t.map(i=>F0(i,this.q_.convertHorzItemToInternal(i.time),i.time));this.Es.na(e)}markers(){return this.Es.sa().map(t=>F0(t,t.originalTime,void 0))}applyOptions(t){this.Es.$h(t)}options(){return Un(this.Es.W())}priceScale(){return this.dw.priceScale(this.Es.Dt().Pa())}createPriceLine(t){const e=sn(Un(xP),t),i=this.Es.ea(e);return new EP(i)}removePriceLine(t){this.Es.ra(t._w())}seriesType(){return this.Es.Qh()}attachPrimitive(t){this.Es.ka(t),t.attached&&t.attached({chart:this.fw,series:this,requestUpdate:()=>this.Es.$t().Kl()})}detachPrimitive(t){this.Es.ya(t),t.detached&&t.detached()}mw(t){this.uw.M()&&this.uw.m(t)}}class AP{constructor(t,e,i){this.ww=new jt,this.mu=new jt,this.Om=new jt,this.$i=t,this.yl=t.St(),this.ab=e,this.yl.nc().l(this.gw.bind(this)),this.yl.sc().l(this.Mw.bind(this)),this.ab.Nm().l(this.xw.bind(this)),this.q_=i}S(){this.yl.nc().p(this),this.yl.sc().p(this),this.ab.Nm().p(this),this.ww.S(),this.mu.S(),this.Om.S()}scrollPosition(){return this.yl.Hu()}scrollToPosition(t,e){e?this.yl.Ju(t,1e3):this.$i.Jn(t)}scrollToRealTime(){this.yl.Gu()}getVisibleRange(){const t=this.yl.Vu();return t===null?null:{from:t.from.originalTime,to:t.to.originalTime}}setVisibleRange(t){const e={from:this.q_.convertHorzItemToInternal(t.from),to:this.q_.convertHorzItemToInternal(t.to)},i=this.yl.Iu(e);this.$i.pd(i)}getVisibleLogicalRange(){const t=this.yl.Du();return t===null?null:{from:t.Os(),to:t.ui()}}setVisibleLogicalRange(t){di(t.from<=t.to,"The from index cannot be after the to index."),this.$i.pd(t)}resetTimeScale(){this.$i.Kn()}fitContent(){this.$i.hc()}logicalToCoordinate(t){const e=this.$i.St();return e.Ni()?null:e.It(t)}coordinateToLogical(t){return this.yl.Ni()?null:this.yl.Nu(t)}timeToCoordinate(t){const e=this.q_.convertHorzItemToInternal(t),i=this.yl.Va(e,!1);return i===null?null:this.yl.It(i)}coordinateToTime(t){const e=this.$i.St(),i=e.Nu(t),o=e.Ui(i);return o===null?null:o.originalTime}width(){return this.ab.um().width}height(){return this.ab.um().height}subscribeVisibleTimeRangeChange(t){this.ww.l(t)}unsubscribeVisibleTimeRangeChange(t){this.ww.v(t)}subscribeVisibleLogicalRangeChange(t){this.mu.l(t)}unsubscribeVisibleLogicalRangeChange(t){this.mu.v(t)}subscribeSizeChange(t){this.Om.l(t)}unsubscribeSizeChange(t){this.Om.v(t)}applyOptions(t){this.yl.$h(t)}options(){return Object.assign(Object.assign({},Un(this.yl.W())),{barSpacing:this.yl.le()})}gw(){this.ww.M()&&this.ww.m(this.getVisibleRange())}Mw(){this.mu.M()&&this.mu.m(this.getVisibleLogicalRange())}xw(t){this.Om.m(t.width,t.height)}}function RP(n){if(n===void 0||n.type==="custom")return;const t=n;t.minMove!==void 0&&t.precision===void 0&&(t.precision=function(e){if(e>=1)return 0;let i=0;for(;i<8;i++){const o=Math.round(e);if(Math.abs(o-e)<1e-8)return i;e*=10}return i}(t.minMove))}function J0(n){return function(t){if(ca(t.handleScale)){const i=t.handleScale;t.handleScale={axisDoubleClickReset:{time:i,price:i},axisPressedMouseMove:{time:i,price:i},mouseWheel:i,pinch:i}}else if(t.handleScale!==void 0){const{axisPressedMouseMove:i,axisDoubleClickReset:o}=t.handleScale;ca(i)&&(t.handleScale.axisPressedMouseMove={time:i,price:i}),ca(o)&&(t.handleScale.axisDoubleClickReset={time:o,price:o})}const e=t.handleScroll;ca(e)&&(t.handleScroll={horzTouchDrag:e,vertTouchDrag:e,mouseWheel:e,pressedMouseMove:e})}(n),n}class kP{constructor(t,e,i){this.Sw=new Map,this.kw=new Map,this.yw=new jt,this.Cw=new jt,this.Tw=new jt,this.Pw=new dP(e);const o=i===void 0?Un(G0()):sn(Un(G0()),J0(i));this.q_=e,this.aw=new rP(t,o,e),this.aw.lm().l(u=>{this.yw.M()&&this.yw.m(this.Rw(u()))},this),this.aw.am().l(u=>{this.Cw.M()&&this.Cw.m(this.Rw(u()))},this),this.aw.Xc().l(u=>{this.Tw.M()&&this.Tw.m(this.Rw(u()))},this);const l=this.aw.$t();this.Dw=new AP(l,this.aw.fb(),this.q_)}remove(){this.aw.lm().p(this),this.aw.am().p(this),this.aw.Xc().p(this),this.Dw.S(),this.aw.S(),this.Sw.clear(),this.kw.clear(),this.yw.S(),this.Cw.S(),this.Tw.S(),this.Pw.S()}resize(t,e,i){this.autoSizeActive()||this.aw._b(t,e,i)}addCustomSeries(t,e){const i=Xs(t),o=Object.assign(Object.assign({},iS),i.defaultOptions());return this.Vw("Custom",o,e,i)}addAreaSeries(t){return this.Vw("Area",dL,t)}addBaselineSeries(t){return this.Vw("Baseline",pL,t)}addBarSeries(t){return this.Vw("Bar",hL,t)}addCandlestickSeries(t={}){return function(e){e.borderColor!==void 0&&(e.borderUpColor=e.borderColor,e.borderDownColor=e.borderColor),e.wickColor!==void 0&&(e.wickUpColor=e.wickColor,e.wickDownColor=e.wickColor)}(t),this.Vw("Candlestick",cL,t)}addHistogramSeries(t){return this.Vw("Histogram",mL,t)}addLineSeries(t){return this.Vw("Line",fL,t)}removeSeries(t){const e=we(this.Sw.get(t)),i=this.Pw.vd(e);this.aw.$t().vd(e),this.Ow(i),this.Sw.delete(t),this.kw.delete(e)}pw(t,e){this.Ow(this.Pw.Kb(t,e))}bw(t,e){this.Ow(this.Pw.iw(t,e))}subscribeClick(t){this.yw.l(t)}unsubscribeClick(t){this.yw.v(t)}subscribeCrosshairMove(t){this.Tw.l(t)}unsubscribeCrosshairMove(t){this.Tw.v(t)}subscribeDblClick(t){this.Cw.l(t)}unsubscribeDblClick(t){this.Cw.v(t)}priceScale(t){return new CP(this.aw,t)}timeScale(){return this.Dw}applyOptions(t){this.aw.$h(J0(t))}options(){return this.aw.W()}takeScreenshot(){return this.aw.wb()}autoSizeActive(){return this.aw.kb()}chartElement(){return this.aw.yb()}paneSize(){const t=this.aw.Tb();return{height:t.height,width:t.width}}setCrosshairPosition(t,e,i){const o=this.Sw.get(i);if(o===void 0)return;const l=this.aw.$t().dr(o);l!==null&&this.aw.$t().ad(t,e,l)}clearCrosshairPosition(){this.aw.$t().od(!0)}Vw(t,e,i={},o){RP(i.priceFormat);const l=sn(Un(sS),Un(e),i),u=this.aw.$t().dd(t,l,o),d=new MP(u,this,this,this,this.q_);return this.Sw.set(d,u),this.kw.set(u,d),d}Ow(t){const e=this.aw.$t();e._d(t.St.Eu,t.St.hw,t.St.lw),t.ew.forEach((i,o)=>o.J(i.$e,i.rw)),e.Wu()}Bw(t){return we(this.kw.get(t))}Rw(t){const e=new Map;t.Nb.forEach((o,l)=>{const u=l.Qh(),d=mf(u)(o);if(u!=="Custom")di(lP(d));else{const p=l.Ta();di(!p||p(d)===!1)}e.set(this.Bw(l),d)});const i=t.Eb!==void 0&&this.kw.has(t.Eb)?this.Bw(t.Eb):void 0;return{time:t.zb,logical:t.ee,point:t.Lb,hoveredSeries:i,hoveredObjectId:t.Fb,seriesData:e,sourceEvent:t.Wb}}}function NP(n,t,e){let i;if(Or(n)){const l=document.getElementById(n);di(l!==null,`Cannot find element in DOM with id=${n}`),i=l}else i=n;const o=new kP(i,t,e);return t.setOptions(o.options()),o}function DP(n,t){return NP(n,new N0,N0.Id(t))}Object.assign(Object.assign({},sS),iS);const IP="https://api.binance.com",LP="wss://stream.binance.com:9443/ws";async function UP(n){const{symbol:t,interval:e,limit:i=500}=n,o=`${IP}/api/v3/klines?symbol=${encodeURIComponent(t.toUpperCase())}&interval=${e}&limit=${i}`,l=await fetch(o);if(!l.ok)throw new Error(`Failed to fetch klines: ${l.status} ${l.statusText}`);return(await l.json()).map(PP)}function PP(n){const t=Number(n[0]);return{time:Math.floor(t/1e3),open:Number(n[1]),high:Number(n[2]),low:Number(n[3]),close:Number(n[4]),volume:Number(n[5])}}function zP(n){const t=n.data.k;return{time:Math.floor(t.t/1e3),open:Number(t.o),high:Number(t.h),low:Number(t.l),close:Number(t.c),volume:Number(t.v)}}function VP(n){const{symbol:t,interval:e,onKline:i,onOpen:o,onClose:l,onError:u}=n,d=`${t.toLowerCase()}@kline_${e}`,p=`${LP}/${d}`,m=new WebSocket(p);return m.addEventListener("open",()=>o==null?void 0:o()),m.addEventListener("close",g=>l==null?void 0:l(g)),m.addEventListener("error",g=>u==null?void 0:u(g)),m.addEventListener("message",g=>{try{const _=JSON.parse(g.data),S=zP(_),b=_.data.k.x===!0;i(S,b)}catch{}}),{close:()=>{try{m.close()}catch{}}}}function K0(){return document.documentElement.classList.contains("dark")?"dark":"light"}const RS=et.forwardRef(({symbol:n,interval:t,isPaused:e,refreshToken:i=0},o)=>{const l=et.useRef(null),u=et.useRef(null),d=et.useRef(null),p=et.useRef(null),[m,g]=et.useState(K0()),[_,S]=et.useState(!1),[b,w]=et.useState(null);et.useImperativeHandle(o,()=>({capturePng:()=>{const M=l.current;if(!M)return null;const D=M.querySelector("canvas");if(!D)return null;try{const U=D.toDataURL("image/png"),k="data:image/png;base64,";return U.startsWith(k)?U.slice(k.length):null}catch{return null}},autoFit:()=>{var M;(M=u.current)==null||M.timeScale().fitContent()}}),[]),et.useEffect(()=>{const M=new MutationObserver(()=>g(K0()));return M.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>M.disconnect()},[]);const E=et.useMemo(()=>m==="dark"?{background:"#0b0f1a",grid:"#222838",text:"#e5e7eb",up:"#16a34a",down:"#ef4444",wickUp:"#16a34a",wickDown:"#ef4444",volUp:"rgba(22,163,74,0.6)",volDown:"rgba(239,68,68,0.6)",priceLine:"#60a5fa"}:{background:"#ffffff",grid:"#e5e7eb",text:"#111827",up:"#16a34a",down:"#ef4444",wickUp:"#16a34a",wickDown:"#ef4444",volUp:"rgba(22,163,74,0.5)",volDown:"rgba(239,68,68,0.5)",priceLine:"#2563eb"},[m]);return et.useEffect(()=>{if(!l.current)return;const M=DP(l.current,{layout:{background:{type:Ia.Solid,color:E.background},textColor:E.text},grid:{vertLines:{color:E.grid},horzLines:{color:E.grid}},rightPriceScale:{scaleMargins:{top:.1,bottom:.2},borderVisible:!1},leftPriceScale:{visible:!0,borderVisible:!1},timeScale:{borderVisible:!1},crosshair:{vertLine:{width:1,color:"#94a3b8",style:0},horzLine:{width:1,color:"#94a3b8",style:0}},localization:{priceFormatter:V=>V.toFixed(2)}}),D=M.addCandlestickSeries({upColor:E.up,downColor:E.down,borderUpColor:E.up,borderDownColor:E.down,wickUpColor:E.wickUp,wickDownColor:E.wickDown,priceLineVisible:!0,lastValueVisible:!0,priceLineColor:E.priceLine}),U=M.addHistogramSeries({priceScaleId:"left",priceFormat:{type:"volume"},color:E.volUp,base:0,overlay:!0});u.current=M,d.current=D,p.current=U;const k=new ResizeObserver(V=>{var j;const J=(j=V[0].contentBoxSize)==null?void 0:j[0],W=Math.floor((J==null?void 0:J.inlineSize)??l.current.clientWidth),rt=Math.floor((J==null?void 0:J.blockSize)??l.current.clientHeight);M.applyOptions({width:W,height:rt})});return k.observe(l.current),()=>{k.disconnect(),M.remove(),u.current=null,d.current=null,p.current=null}},[E.background,E.down,E.grid,E.text,E.up,E.wickDown,E.wickUp,E.priceLine,E.volUp]),et.useEffect(()=>{const M=u.current,D=d.current,U=p.current;!M||!D||!U||(M.applyOptions({layout:{background:{type:Ia.Solid,color:E.background},textColor:E.text},grid:{vertLines:{color:E.grid},horzLines:{color:E.grid}}}),D.applyOptions({upColor:E.up,downColor:E.down,wickUpColor:E.wickUp,wickDownColor:E.wickDown,borderUpColor:E.up,borderDownColor:E.down,priceLineColor:E.priceLine}),U.applyOptions({color:E.volUp}))},[E]),et.useEffect(()=>{let M=null,D=!1,U=0,k=!1,V=null;async function q(){if(!(!d.current||!u.current||!p.current)){S(!0),w(null);try{const rt=await UP({symbol:n,interval:t,limit:500});if(D)return;d.current.setData(rt),p.current.setData(rt.map(j=>({time:j.time,value:j.volume??0,color:j.close>=j.open?E.volUp:E.volDown}))),u.current.timeScale().fitContent()}catch{D||w("Failed to load historical data")}finally{D||S(!1)}}}function J(){!V||!d.current||!p.current||(d.current.update(V),p.current.update({time:V.time,value:V.volume??0,color:V.close>=V.open?E.volUp:E.volDown}),V=null)}function W(){if(e)return;M=VP({symbol:n,interval:t,onKline:j=>{V=j,!k&&(k=!0,setTimeout(()=>{D||J(),k=!1},250))},onClose:()=>{if(D)return;U+=1;const j=Math.min(5e3,500*U);setTimeout(()=>{!D&&!e&&W()},j)}}).close}return q().then(()=>W()),()=>{D=!0,M&&M()}},[n,t,e,i,E.volDown,E.volUp]),x.jsxs("div",{className:"relative w-full h-full",children:[x.jsx("div",{ref:l,className:"w-full h-full"}),_&&x.jsx("div",{className:"absolute top-2 left-2 px-2 py-1 text-xs rounded bg-sidebar-bg border border-border-color text-text-secondary",children:"Loading"}),b&&x.jsx("div",{className:"absolute top-2 right-2 px-2 py-1 text-xs rounded bg-accent-red text-white",children:b})]})});RS.displayName="LiveChart";const Y0=["1m","5m","15m","1h","4h","1d"],BP=["BTCUSDT","ETHUSDT","SOLUSDT","BNBUSDT","XRPUSDT"],OP=({symbol:n,onSymbolChange:t,interval:e,onIntervalChange:i,isPaused:o,onTogglePaused:l,onCloseLiveChart:u,onApply:d,onAnalyze:p,onAutoFit:m})=>{const[g,_]=et.useState(n);et.useEffect(()=>{_(n)},[n]);const S=()=>{const b=g.trim().toUpperCase()||n;b!==n&&t(b),d==null||d()};return x.jsxs("div",{className:"bg-input-bg border border-border-color rounded-lg p-2 flex items-center gap-3",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("span",{className:"text-sm text-text-secondary",children:"Symbol"}),x.jsx("input",{value:g,onChange:b=>_(b.target.value),onKeyDown:b=>b.key==="Enter"&&S(),className:"bg-transparent border border-border-color rounded px-2 py-1 text-sm text-text-primary w-28","aria-label":"Symbol"}),x.jsx("button",{onClick:S,className:"px-2 py-1 rounded bg-accent-blue text-white text-sm",children:"Apply"}),x.jsx("div",{className:"flex items-center gap-1",children:BP.map(b=>x.jsx("button",{onClick:()=>{_(b),t(b),d==null||d()},className:`px-2 py-1 rounded text-sm border ${n===b?"bg-accent-blue text-white border-transparent":"border-border-color text-text-secondary hover:text-text-primary"}`,children:b},b))})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("span",{className:"text-sm text-text-secondary",children:"Interval"}),x.jsx("select",{value:e,onChange:b=>{i(b.target.value),d==null||d()},className:"bg-transparent border border-border-color rounded px-2 py-1 text-sm text-text-primary","aria-label":"Interval",children:Y0.map(b=>x.jsx("option",{value:b,className:"bg-sidebar-bg text-text-primary",children:b},b))}),x.jsx("div",{className:"flex items-center gap-1 ml-2",children:Y0.map(b=>x.jsx("button",{onClick:()=>{i(b),d==null||d()},className:`px-2 py-1 rounded text-sm border ${e===b?"bg-accent-blue text-white border-transparent":"border-border-color text-text-secondary hover:text-text-primary"}`,children:b},b))})]}),x.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[x.jsx("button",{onClick:m,className:"px-3 py-1 rounded text-sm border border-border-color text-text-secondary hover:text-text-primary",children:"Auto-fit"}),x.jsx("button",{onClick:l,className:`px-3 py-1 rounded text-sm ${o?"bg-gray-500 text-white":"bg-green-600 text-white"}`,children:o?"Resume":"Pause"}),x.jsx("button",{onClick:p,className:"px-3 py-1 rounded text-sm bg-accent-blue text-white",children:"Analyze"}),x.jsx("button",{onClick:u,className:"px-3 py-1 rounded text-sm bg-accent-red text-white",children:"Back to Chat"})]})]})},qP=({defaultUltraMode:n})=>{const{activeSession:t,updateSession:e,updateSessionTitle:i}=Ln(),[o,l]=et.useState(!1),[u,d]=et.useState({key:0,text:""}),[p,m]=et.useState(n),[g,_]=et.useState(!1),[S,b]=et.useState("BTCUSDT"),[w,E]=et.useState("1m"),[M,D]=et.useState(!1),[U,k]=et.useState(0),V=et.useRef(null),q=et.useRef(null),J=et.useRef(null);et.useEffect(()=>{var K;(K=q.current)==null||K.scrollTo(0,q.current.scrollHeight)},[t==null?void 0:t.messages]);const W=et.useCallback(()=>{J.current&&(J.current.abort(),J.current=null),l(!1)},[]),rt=et.useCallback(K=>{d({key:Date.now(),text:K})},[]),j=et.useCallback(async(K,st)=>{var Z,ct;if(!t||!K&&(!st||st.length===0))return;const lt=(st||[]).map(gt=>gt.hash).filter(Boolean),dt="p1",at="gemini-2.5-flash",B=lt.length>0?Xg({imageHashes:lt,promptVersion:dt,modelVersion:at,ultra:p}):"";if(lt.length>0){const gt=Qy(B);if(gt){const Tt={id:`msg_${Date.now()+1}`,role:"assistant",content:JSON.parse(gt.raw),thinkingText:JSON.parse(gt.raw).thinkingProcess,rawResponse:gt.raw},ft=[...t.messages,{id:`msg_${Date.now()}`,role:"user",content:K,...st&&st.length>0&&{images:st.map(yt=>`data:${yt.mimeType};base64,${yt.data}`)},...lt.length>0&&{imageHashes:lt}}];e(t.id,{messages:[...ft,Tt]});return}}J.current=new AbortController,l(!0);const X={id:`msg_${Date.now()}`,role:"user",content:K,...st&&st.length>0&&{images:st.map(gt=>`data:${gt.mimeType};base64,${gt.data}`)},...lt.length>0&&{imageHashes:lt}},nt=`msg_${Date.now()+1}`,bt={id:nt,role:"assistant",content:""},R=[...t.messages,X];e(t.id,{messages:R});const G=[...R,bt];e(t.id,{messages:G});let tt="";try{const gt=Sy(t.messages,K,st,J.current.signal,p);for await(const Ht of gt){if((Z=J.current)!=null&&Z.signal.aborted)break;tt+=Ht}const it=Ln.getState().sessions.find(Ht=>Ht.id===t.id);if(!it)return;const Tt=it.messages.findIndex(Ht=>Ht.id===nt);if(Tt===-1)return;const ft=[...it.messages];if((ct=J.current)!=null&&ct.signal.aborted){ft[Tt].content="Response stopped by user.",e(t.id,{messages:ft});return}let yt,ne="";if(st&&st.length>0)try{const Ht=JSON.parse(tt);Ht.error?yt=`Error: ${Ht.error}`:(yt=Ht,ne=yt.thinkingProcess,lt.length>0&&Zy(B,{signal:yt.signal,confidence:(yt.overallConfidenceScore??50)/100,raw:tt,modelVersion:at,promptVersion:dt,imageHashes:lt,ultra:p,timestamp:Date.now()}))}catch(Ht){console.error("Failed to parse JSON response:",Ht,"Raw response:",tt),yt="Error: The analysis result was not in the correct format. Please try again.",tt&&(yt+=`

Raw output:
${tt}`)}else yt=tt;if(ft[Tt].content=yt,ft[Tt].thinkingText=ne,ft[Tt].rawResponse=tt,t.title==="New Analysis"){const Ht=typeof yt=="object"&&"summary"in yt?yt.summary.substring(0,40)+"...":K.substring(0,40)+"...";i(t.id,Ht)}e(t.id,{messages:ft})}catch(gt){console.error("Error during analysis stream:",gt);const it=Ln.getState().sessions.find(ft=>ft.id===t.id);if(!it)return;const Tt=it.messages.findIndex(ft=>ft.id===nt);if(Tt!==-1){const ft=[...it.messages];ft[Tt].content="An unexpected error occurred. Please try again.",e(t.id,{messages:ft})}}finally{l(!1),J.current=null}},[t,e,i,p]),Q=et.useCallback(async()=>{var ct,gt;if(!t||o)return;const K=t.messages.map(it=>it.role).lastIndexOf("assistant");if(K===-1||K===0)return;const st=t.messages[K-1],lt=t.messages[K];if(st.role!=="user")return;const dt=t.messages.slice(0,K-1),at=typeof st.content=="string"?st.content:"";let B=[];const X=[];Array.isArray(st.images)&&st.images.length>0?X.push(...st.images):st.image&&X.push(st.image);for(const it of X){const Tt=it.split(";base64,");if(Tt.length===2){const ft=Tt[0].split(":")[1],yt=Tt[1];B.push({mimeType:ft,data:yt})}}const nt=st.imageHashes,bt="p1",R="gemini-2.5-flash",G=nt&&nt.length>0?Xg({imageHashes:nt,promptVersion:bt,modelVersion:R,ultra:p}):"";if(G){const it=Qy(G);if(it){const Tt=Ln.getState().sessions.find(Ht=>Ht.id===t.id);if(!Tt)return;const ft=Tt.messages.findIndex(Ht=>Ht.id===lt.id);if(ft===-1)return;const yt=[...Tt.messages],ne=JSON.parse(it.raw);yt[ft].content=ne,yt[ft].thinkingText=ne.thinkingProcess,yt[ft].rawResponse=it.raw,e(t.id,{messages:yt});return}}J.current=new AbortController,l(!0);const tt=t.messages.map(it=>it.id===lt.id?{...it,content:"",thinkingText:"",rawResponse:""}:it);e(t.id,{messages:tt});let Z="";try{const it=Sy(dt,at,B,J.current.signal,p);for await(const be of it){if((ct=J.current)!=null&&ct.signal.aborted)break;Z+=be}const Tt=Ln.getState().sessions.find(be=>be.id===t.id);if(!Tt)return;const ft=Tt.messages.findIndex(be=>be.id===lt.id);if(ft===-1)return;const yt=[...Tt.messages];if((gt=J.current)!=null&&gt.signal.aborted){yt[ft].content="Response stopped by user.",e(t.id,{messages:yt});return}let ne,Ht="";if(B&&B.length>0)try{const be=JSON.parse(Z);be.error?ne=`Error: ${be.error}`:(ne=be,Ht=ne.thinkingProcess,nt&&nt.length>0&&Zy(G,{signal:ne.signal,confidence:(ne.overallConfidenceScore??50)/100,raw:Z,modelVersion:R,promptVersion:bt,imageHashes:nt,ultra:p,timestamp:Date.now()}))}catch(be){console.error("Failed to parse JSON response:",be,"Raw response:",Z),ne="Error: The analysis result was not in the correct format. Please try again.",Z&&(ne+=`

Raw output:
${Z}`)}else ne=Z;yt[ft].content=ne,yt[ft].thinkingText=Ht,yt[ft].rawResponse=Z,e(t.id,{messages:yt})}catch(it){console.error("Error during analysis stream:",it);const Tt=Ln.getState().sessions.find(yt=>yt.id===t.id);if(!Tt)return;const ft=Tt.messages.findIndex(yt=>yt.id===lt.id);if(ft!==-1){const yt=[...Tt.messages];yt[ft].content="An unexpected error occurred. Please try again.",e(t.id,{messages:yt})}}finally{l(!1),J.current=null}},[t,e,o,p]);return t?x.jsx("div",{className:"flex flex-1 flex-col bg-chat-bg overflow-hidden",children:g?x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"flex-1 overflow-hidden p-6",children:x.jsx("div",{className:"w-full h-full rounded-lg border border-border-color",children:x.jsx(RS,{ref:V,symbol:S,interval:w,isPaused:M,refreshToken:U})})}),x.jsx("div",{className:"px-6 pb-4 bg-chat-bg",children:x.jsx(OP,{symbol:S,onSymbolChange:b,interval:w,onIntervalChange:E,isPaused:M,onTogglePaused:()=>D(K=>!K),onCloseLiveChart:()=>_(!1),onApply:()=>k(K=>K+1),onAnalyze:async()=>{var dt;const K=(dt=V.current)==null?void 0:dt.capturePng();if(!K||o||!t)return;const st={mimeType:"image/png",data:K},lt=`Analyze this live ${S} chart on interval ${w}.`;await j(lt,[st])},onAutoFit:()=>{var K;return(K=V.current)==null?void 0:K.autoFit()}})})]}):x.jsxs(x.Fragment,{children:[x.jsx("div",{ref:q,className:"flex-1 overflow-y-auto p-6 space-y-6 scroll-smooth",children:t.messages.length===0?x.jsx(nL,{onExampleClick:rt}):t.messages.map((K,st)=>x.jsx(TC,{message:K,isLastMessage:st===t.messages.length-1,isLoading:o&&st===t.messages.length-1&&K.role==="assistant",onRegenerate:Q},K.id))}),x.jsx("div",{className:"px-6 pb-4 bg-chat-bg",children:x.jsx(Lw,{onSendMessage:j,isLoading:o,onStopGeneration:W,initialPrompt:u.text,isUltraMode:p,onToggleUltraMode:()=>m(K=>!K),isLiveChart:g,onToggleLiveChart:()=>_(K=>!K)},u.key)})]})}):null},$P=n=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})}),HP=n=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),GP=({isOpen:n,onClose:t,onClearAllData:e,user:i,preferences:o,onUpdatePreferences:l,onUpdateProfile:u})=>{var rt,j,Q,K,st;const d=et.useRef(null),[p,m]=et.useState(((rt=i.user_metadata)==null?void 0:rt.name)||((j=i.user_metadata)==null?void 0:j.full_name)||""),[g,_]=et.useState(((Q=i.user_metadata)==null?void 0:Q.avatar_url)||""),[S,b]=et.useState(null),[w,E]=et.useState(null),[M,D]=et.useState(!1),[U,k]=et.useState(null);et.useEffect(()=>{var dt,at,B;const lt=X=>{X.key==="Escape"&&t()};return n&&(m(((dt=i.user_metadata)==null?void 0:dt.name)||((at=i.user_metadata)==null?void 0:at.full_name)||""),_(((B=i.user_metadata)==null?void 0:B.avatar_url)||""),b(null),E(null),k(null),document.addEventListener("keydown",lt)),()=>document.removeEventListener("keydown",lt)},[n,t,i]);const V=lt=>{var B;const dt=(B=lt.target.files)==null?void 0:B[0];if(!dt||!dt.type.startsWith("image/"))return;b(dt);const at=new FileReader;at.onloadend=()=>E(at.result),at.readAsDataURL(dt)},q=(lt,dt=256)=>{const at=document.createElement("canvas");at.width=dt,at.height=dt;const B=at.getContext("2d"),X=Math.min(lt.naturalWidth,lt.naturalHeight),nt=(lt.naturalWidth-X)/2,bt=(lt.naturalHeight-X)/2;return B.drawImage(lt,nt,bt,X,X,0,0,dt,dt),at},J=async lt=>{lt.preventDefault(),D(!0),k(null);try{let dt=g;if(S){const at=new Image,B=await new Promise((bt,R)=>{at.onload=()=>{const G=q(at,256);bt(G.toDataURL("image/jpeg",.9))},at.onerror=R,at.src=w||""}),X=await(await fetch(B)).blob(),nt=await ZI(i.id,X);dt=nt,_(nt)}await u({name:p,avatar_url:dt}),k({type:"success",text:"Profile saved successfully!"})}catch{k({type:"error",text:"Failed to save profile. Please try again."})}finally{D(!1),setTimeout(()=>k(null),3e3)}},W=lt=>{l({default_ultra_mode:lt.target.checked})};return n?x.jsx("div",{role:"dialog","aria-modal":"true","aria-labelledby":"settings-title",className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60 transition-opacity",onClick:t,children:x.jsxs("div",{ref:d,className:"bg-sidebar-bg rounded-lg shadow-2xl w-full max-w-md m-4 border border-border-color",onClick:lt=>lt.stopPropagation(),children:[x.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border-color",children:[x.jsx("h2",{id:"settings-title",className:"text-lg font-semibold text-text-primary",children:"Settings"}),x.jsx("button",{onClick:t,className:"p-1 rounded-full hover:bg-input-bg","aria-label":"Close settings",children:x.jsx(HP,{className:"h-6 w-6 text-text-secondary"})})]}),x.jsxs("div",{className:"p-6 space-y-8 max-h-[70vh] overflow-y-auto",children:[x.jsxs("form",{onSubmit:J,children:[x.jsx("h3",{className:"font-medium text-text-primary mb-3",children:"Profile"}),x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Avatar"}),x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsx("div",{className:"h-16 w-16 rounded-full bg-border-color overflow-hidden flex items-center justify-center",children:w?x.jsx("img",{src:w,alt:"New avatar preview",className:"h-16 w-16 object-cover"}):g?x.jsx("img",{src:g,alt:"Avatar",className:"h-16 w-16 object-cover"}):x.jsx("span",{className:"text-text-primary",children:(st=(((K=i.user_metadata)==null?void 0:K.name)||i.email||"?")[0])==null?void 0:st.toUpperCase()})}),x.jsxs("div",{children:[x.jsx("input",{type:"file",accept:"image/*",onChange:V}),x.jsx("p",{className:"text-xs text-text-secondary",children:"Upload an image, it will be auto-cropped to a square."})]})]})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"display-name",className:"block text-sm font-medium text-text-secondary mb-1",children:"Display Name"}),x.jsx("input",{id:"display-name",type:"text",value:p,onChange:lt=>m(lt.target.value),className:"w-full px-3 py-2 bg-input-bg border border-border-color rounded-md focus:outline-none focus:ring-2 focus:ring-accent-blue text-sm",placeholder:"Your Name"})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"avatar-url",className:"block text-sm font-medium text-text-secondary mb-1",children:"Avatar URL"}),x.jsx("input",{id:"avatar-url",type:"url",value:g,onChange:lt=>_(lt.target.value),className:"w-full px-3 py-2 bg-input-bg border border-border-color rounded-md focus:outline-none focus:ring-2 focus:ring-accent-blue text-sm",placeholder:"https://example.com/avatar.png"})]}),x.jsxs("div",{className:"flex items-center justify-end gap-3",children:[U&&x.jsx("span",{className:`text-sm ${U.type==="success"?"text-accent-green":"text-accent-red"}`,children:U.text}),x.jsx("button",{type:"submit",disabled:M,className:"px-4 py-2 text-sm font-medium text-white bg-accent-blue hover:bg-blue-700 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-accent-blue focus:ring-offset-sidebar-bg disabled:bg-gray-500",children:M?"Saving...":"Save Profile"})]})]})]}),x.jsx("div",{className:"border-t border-border-color"}),x.jsxs("div",{children:[x.jsx("h3",{className:"font-medium text-text-primary mb-3",children:"Preferences"}),x.jsxs("div",{className:"flex items-center justify-between bg-input-bg-50 p-3 rounded-lg",children:[x.jsxs("div",{children:[x.jsx("label",{htmlFor:"ultra-default",className:"font-medium text-text-primary text-sm",children:"Set Ultra Mode as default"}),x.jsx("p",{className:"text-xs text-text-secondary",children:"Start new analyses with Ultra Mode enabled."})]}),x.jsxs("label",{htmlFor:"ultra-default-toggle",className:"relative inline-flex items-center cursor-pointer",children:[x.jsx("input",{type:"checkbox",id:"ultra-default-toggle",className:"sr-only peer",checked:o.default_ultra_mode,onChange:W}),x.jsx("div",{className:"w-11 h-6 bg-border-color peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-offset-2 peer-focus:ring-accent-blue peer-focus:ring-offset-sidebar-bg rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent-blue"})]})]})]}),x.jsx("div",{className:"border-t border-border-color"}),x.jsxs("div",{children:[x.jsx("h3",{className:"font-medium text-text-primary mb-2",children:"Manage Data"}),x.jsx("p",{className:"text-sm text-text-secondary mb-3",children:"This will permanently delete all your chat sessions from your account across all devices. This action cannot be undone."}),x.jsx("button",{onClick:e,className:"w-full px-4 py-2 text-sm font-medium text-white bg-accent-red hover:bg-red-700 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-accent-red focus:ring-offset-sidebar-bg",children:"Clear All My Chat History"})]})]}),x.jsx("div",{className:"px-4 py-3 bg-chat-bg border-t border-border-color rounded-b-lg text-right",children:x.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-text-primary bg-input-bg border border-border-color rounded-md hover:bg-border-color transition-colors",children:"Done"})})]})}):null},Bi=z_((n,t)=>({user:null,loading:!0,_setUser:e=>n({user:e}),_setLoading:e=>n({loading:e}),signInWithGoogle:async()=>{const{error:e}=await re.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin}});e&&console.error("Error logging in with Google:",e)},signOut:async()=>{const{error:e}=await re.auth.signOut();e&&console.error("Error logging out:",e)},signInWithEmail:async e=>{const{data:i,error:o}=await re.auth.signInWithPassword({email:e.email,password:e.password});return{error:o}},signUpWithEmail:async e=>{const{data:i,error:o}=await re.auth.signUp({email:e.email,password:e.password,options:{emailRedirectTo:window.location.origin}});return{error:o}},updateUserMetadata:async e=>{const i=Object.fromEntries(Object.entries(e).filter(([u,d])=>d!=null));if(Object.keys(i).length===0)return{error:null};const{data:o,error:l}=await re.auth.updateUser({data:i});return o.user&&n({user:o.user}),{error:l}}}));re.auth.getSession().then(({data:{session:n}})=>{Bi.getState()._setUser((n==null?void 0:n.user)??null),Bi.getState()._setLoading(!1)}),re.auth.onAuthStateChange((n,t)=>{Bi.getState()._setUser((t==null?void 0:t.user)??null)});const FP=n=>x.jsx("svg",{viewBox:"0 0 48 48",...n,children:x.jsxs("g",{children:[x.jsx("path",{fill:"#EA4335",d:"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"}),x.jsx("path",{fill:"#4285F4",d:"M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"}),x.jsx("path",{fill:"#FBBC05",d:"M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"}),x.jsx("path",{fill:"#34A853",d:"M24 48c6.48 0 11.93-2.13 15.89-5.82l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"}),x.jsx("path",{fill:"none",d:"M0 0h48v48H0z"})]})}),JP=({onGoogleLogin:n,onEmailLogin:t,onEmailSignUp:e})=>{const[i,o]=et.useState("signin"),[l,u]=et.useState(""),[d,p]=et.useState(""),[m,g]=et.useState(!1),[_,S]=et.useState(null),[b,w]=et.useState(null),E=async D=>{D.preventDefault(),g(!0),S(null),w(null);const U={email:l,password:d};let k;i==="signin"?k=await t(U):(k=await e(U),k.error||(w("Check your email for the confirmation link!"),p(""))),k.error&&S(k.error.message),g(!1)},M=()=>{o(i==="signin"?"signup":"signin"),S(null),w(null),u(""),p("")};return x.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen w-full bg-brand-bg text-text-primary p-4",children:x.jsxs("div",{className:"max-w-sm w-full text-center bg-sidebar-bg border border-border-color rounded-lg shadow-xl p-6 md:p-8",children:[x.jsx("div",{className:"flex justify-center mb-6",children:x.jsx("div",{className:"w-20 h-20 bg-accent-blue rounded-full flex items-center justify-center",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-10 h-10 text-white",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456Z"})})})}),x.jsx("h1",{className:"text-3xl font-bold text-text-primary",children:i==="signin"?"Sign In to Wizz":"Create an Account"}),x.jsx("p",{className:"text-md text-text-secondary mt-2",children:"Your AI Crypto Chart Analyzer."}),x.jsxs("form",{onSubmit:E,className:"mt-8 space-y-4 text-left",children:[x.jsx("input",{type:"email",placeholder:"Email address",value:l,onChange:D=>u(D.target.value),required:!0,className:"w-full px-4 py-2 bg-input-bg border border-border-color rounded-md focus:outline-none focus:ring-2 focus:ring-accent-blue","aria-label":"Email address"}),x.jsx("input",{type:"password",placeholder:"Password",value:d,onChange:D=>p(D.target.value),required:!0,minLength:6,className:"w-full px-4 py-2 bg-input-bg border border-border-color rounded-md focus:outline-none focus:ring-2 focus:ring-accent-blue","aria-label":"Password"}),x.jsx("button",{type:"submit",disabled:m,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-accent-blue hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-accent-blue disabled:bg-gray-500 disabled:cursor-not-allowed",children:m?x.jsx("div",{className:"h-5 w-5 border-2 border-t-transparent border-white rounded-full animate-spin"}):i==="signin"?"Sign In":"Sign Up"}),_&&x.jsx("p",{className:"text-sm text-accent-red mt-2 text-center",children:_}),b&&x.jsx("p",{className:"text-sm text-accent-green mt-2 text-center",children:b})]}),x.jsxs("div",{className:"my-6 flex items-center",children:[x.jsx("div",{className:"border-t border-border-color flex-grow"}),x.jsx("span",{className:"mx-4 text-sm text-text-secondary flex-shrink-0",children:"OR"}),x.jsx("div",{className:"border-t border-border-color flex-grow"})]}),x.jsxs("button",{onClick:n,className:"flex items-center justify-center gap-3 w-full px-6 py-2.5 font-semibold text-text-primary bg-input-bg border border-border-color rounded-lg shadow-sm hover:bg-border-color focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-accent-blue focus:ring-offset-brand-bg transition-colors",children:[x.jsx(FP,{className:"h-5 w-5"}),x.jsx("span",{children:"Sign In with Google"})]}),x.jsxs("p",{className:"mt-8 text-sm text-center text-text-secondary",children:[i==="signin"?"Don't have an account?":"Already have an account?",x.jsx("button",{onClick:M,className:"font-medium text-accent-blue hover:underline ml-1 focus:outline-none",children:i==="signin"?"Sign up":"Sign in"})]})]})})},KP=()=>{const{user:n}=Bi(),{activeSession:t,sessions:e,isLoading:i,clearAllUserSessions:o,updateSessionTitle:l,deleteSession:u,selectSession:d,newSession:p}=Ln(),[m,g]=et.useState(!0),[_,S]=et.useState(!1),[b,w]=et.useState({theme:"dark",default_ultra_mode:!1});et.useEffect(()=>{const k=window.document.documentElement;k.classList.remove("light","dark"),k.classList.add(b.theme)},[b.theme]),et.useEffect(()=>{n?JI(n.id).then(w):w({theme:"dark",default_ultra_mode:!1})},[n]);const E=et.useCallback(async k=>{if(!n)return;const V={...b,...k};w(V);try{await KI(n.id,V)}catch(q){console.error("Failed to update preferences:",q),w(b)}},[b,n]),M=et.useCallback(async k=>{const{updateUserMetadata:V}=Bi.getState(),{error:q}=await V(k);if(q)throw console.error("Failed to update profile",q),q},[]),D=et.useCallback(async()=>{window.confirm("Are you sure you want to clear all chat history for your account? This action cannot be undone.")&&(await o(),S(!1))},[o]),U=async()=>{if(window.confirm("Are you sure you want to log out?")){const{signOut:k}=Bi.getState();await k()}};return x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"flex h-screen w-full bg-brand-bg text-text-primary font-sans",children:[x.jsx(Cw,{isOpen:m,sessions:e,activeSessionId:(t==null?void 0:t.id)??null,onNewSession:p,onSelectSession:d,onDeleteSession:u,onRenameSession:l,onToggle:()=>g(!m),user:n,theme:b.theme,onToggleTheme:()=>E({theme:b.theme==="light"?"dark":"light"}),onOpenSettings:()=>S(!0),onLogout:U}),x.jsxs("main",{className:"flex flex-1 flex-col transition-all duration-300 ease-in-out",children:[x.jsxs("div",{className:"flex items-center p-2 border-b border-border-color bg-sidebar-bg h-14",children:[x.jsx("button",{onClick:()=>g(!m),className:"p-2 rounded-md hover:bg-input-bg focus:outline-none focus:ring-2 focus:ring-accent-blue","aria-label":"Toggle sidebar",children:x.jsx($P,{className:"h-6 w-6 text-text-secondary"})}),x.jsx("h1",{className:"text-lg font-semibold ml-4",children:(t==null?void 0:t.title)||"Wizz"})]}),t?x.jsx(qP,{defaultUltraMode:b.default_ultra_mode},t.id):x.jsx("div",{className:"flex-1 flex items-center justify-center",children:i?x.jsx("div",{className:"h-6 w-6 border-2 border-t-transparent border-accent-blue rounded-full animate-spin"}):x.jsx("p",{className:"text-text-secondary",children:"Select an analysis or start a new one."})})]})]}),_&&x.jsx(GP,{isOpen:_,onClose:()=>S(!1),onClearAllData:D,user:n,preferences:b,onUpdatePreferences:E,onUpdateProfile:M})]})},YP=()=>{const{user:n,loading:t,signInWithGoogle:e,signOut:i,signInWithEmail:o,signUpWithEmail:l}=Bi();return t?x.jsx("div",{className:"flex items-center justify-center h-screen bg-brand-bg",children:x.jsx("div",{className:"h-8 w-8 border-4 border-t-transparent border-accent-blue rounded-full animate-spin"})}):n?x.jsx(jI,{user:n,children:x.jsx(KP,{})}):x.jsx(JP,{onGoogleLogin:e,onEmailLogin:o,onEmailSignUp:l})},kS=document.getElementById("root");if(!kS)throw new Error("Could not find root element to mount to");const WP=dw.createRoot(kS);WP.render(x.jsx(Ys.StrictMode,{children:x.jsx(YP,{})}));
