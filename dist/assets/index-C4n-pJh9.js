var QT=Object.defineProperty;var im=t=>{throw TypeError(t)};var XT=(t,e,n)=>e in t?QT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Oe=(t,e,n)=>XT(t,typeof e!="symbol"?e+"":e,n),WT=(t,e,n)=>e.has(t)||im("Cannot "+n);var sm=(t,e,n)=>e.has(t)?im("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n);var Io=(t,e,n)=>(WT(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const d of a.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();function Jc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function ZT(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var r=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(n,s,r.get?r:{enumerable:!0,get:function(){return t[s]}})}),n}var ec={exports:{}},Uo={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var om;function jT(){if(om)return Uo;om=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,r,a){var d=null;if(a!==void 0&&(d=""+a),r.key!==void 0&&(d=""+r.key),"key"in r){a={};for(var h in r)h!=="key"&&(a[h]=r[h])}else a=r;return r=a.ref,{$$typeof:t,type:s,key:d,ref:r!==void 0?r:null,props:a}}return Uo.Fragment=e,Uo.jsx=n,Uo.jsxs=n,Uo}var rm;function e_(){return rm||(rm=1,ec.exports=jT()),ec.exports}var C=e_(),tc={exports:{}},ve={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lm;function t_(){if(lm)return ve;lm=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),T=Symbol.iterator;function _(A){return A===null||typeof A!="object"?null:(A=T&&A[T]||A["@@iterator"],typeof A=="function"?A:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,k={};function U(A,H,K){this.props=A,this.context=H,this.refs=k,this.updater=K||E}U.prototype.isReactComponent={},U.prototype.setState=function(A,H){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,H,"setState")},U.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function q(){}q.prototype=U.prototype;function B(A,H,K){this.props=A,this.context=H,this.refs=k,this.updater=K||E}var M=B.prototype=new q;M.constructor=B,w(M,U.prototype),M.isPureReactComponent=!0;var J=Array.isArray,G={H:null,A:null,T:null,S:null,V:null},X=Object.prototype.hasOwnProperty;function j(A,H,K,W,ce,we){return K=we.ref,{$$typeof:t,type:A,key:H,ref:K!==void 0?K:null,props:we}}function ue(A,H){return j(A.type,H,void 0,void 0,void 0,A.props)}function ne(A){return typeof A=="object"&&A!==null&&A.$$typeof===t}function he(A){var H={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(K){return H[K]})}var ae=/\/+/g;function pe(A,H){return typeof A=="object"&&A!==null&&A.key!=null?he(""+A.key):H.toString(36)}function Q(){}function re(A){switch(A.status){case"fulfilled":return A.value;case"rejected":throw A.reason;default:switch(typeof A.status=="string"?A.then(Q,Q):(A.status="pending",A.then(function(H){A.status==="pending"&&(A.status="fulfilled",A.value=H)},function(H){A.status==="pending"&&(A.status="rejected",A.reason=H)})),A.status){case"fulfilled":return A.value;case"rejected":throw A.reason}}throw A}function ee(A,H,K,W,ce){var we=typeof A;(we==="undefined"||we==="boolean")&&(A=null);var ge=!1;if(A===null)ge=!0;else switch(we){case"bigint":case"string":case"number":ge=!0;break;case"object":switch(A.$$typeof){case t:case e:ge=!0;break;case y:return ge=A._init,ee(ge(A._payload),H,K,W,ce)}}if(ge)return ce=ce(A),ge=W===""?"."+pe(A,0):W,J(ce)?(K="",ge!=null&&(K=ge.replace(ae,"$&/")+"/"),ee(ce,H,K,"",function(Cn){return Cn})):ce!=null&&(ne(ce)&&(ce=ue(ce,K+(ce.key==null||A&&A.key===ce.key?"":(""+ce.key).replace(ae,"$&/")+"/")+ge)),H.push(ce)),1;ge=0;var _t=W===""?".":W+":";if(J(A))for(var He=0;He<A.length;He++)W=A[He],we=_t+pe(W,He),ge+=ee(W,H,K,we,ce);else if(He=_(A),typeof He=="function")for(A=He.call(A),He=0;!(W=A.next()).done;)W=W.value,we=_t+pe(W,He++),ge+=ee(W,H,K,we,ce);else if(we==="object"){if(typeof A.then=="function")return ee(re(A),H,K,W,ce);throw H=String(A),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return ge}function N(A,H,K){if(A==null)return A;var W=[],ce=0;return ee(A,W,"","",function(we){return H.call(K,we,ce++)}),W}function V(A){if(A._status===-1){var H=A._result;H=H(),H.then(function(K){(A._status===0||A._status===-1)&&(A._status=1,A._result=K)},function(K){(A._status===0||A._status===-1)&&(A._status=2,A._result=K)}),A._status===-1&&(A._status=0,A._result=H)}if(A._status===1)return A._result.default;throw A._result}var Y=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)};function Z(){}return ve.Children={map:N,forEach:function(A,H,K){N(A,function(){H.apply(this,arguments)},K)},count:function(A){var H=0;return N(A,function(){H++}),H},toArray:function(A){return N(A,function(H){return H})||[]},only:function(A){if(!ne(A))throw Error("React.Children.only expected to receive a single React element child.");return A}},ve.Component=U,ve.Fragment=n,ve.Profiler=r,ve.PureComponent=B,ve.StrictMode=s,ve.Suspense=g,ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=G,ve.__COMPILER_RUNTIME={__proto__:null,c:function(A){return G.H.useMemoCache(A)}},ve.cache=function(A){return function(){return A.apply(null,arguments)}},ve.cloneElement=function(A,H,K){if(A==null)throw Error("The argument must be a React element, but you passed "+A+".");var W=w({},A.props),ce=A.key,we=void 0;if(H!=null)for(ge in H.ref!==void 0&&(we=void 0),H.key!==void 0&&(ce=""+H.key),H)!X.call(H,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&H.ref===void 0||(W[ge]=H[ge]);var ge=arguments.length-2;if(ge===1)W.children=K;else if(1<ge){for(var _t=Array(ge),He=0;He<ge;He++)_t[He]=arguments[He+2];W.children=_t}return j(A.type,ce,void 0,void 0,we,W)},ve.createContext=function(A){return A={$$typeof:d,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null},A.Provider=A,A.Consumer={$$typeof:a,_context:A},A},ve.createElement=function(A,H,K){var W,ce={},we=null;if(H!=null)for(W in H.key!==void 0&&(we=""+H.key),H)X.call(H,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(ce[W]=H[W]);var ge=arguments.length-2;if(ge===1)ce.children=K;else if(1<ge){for(var _t=Array(ge),He=0;He<ge;He++)_t[He]=arguments[He+2];ce.children=_t}if(A&&A.defaultProps)for(W in ge=A.defaultProps,ge)ce[W]===void 0&&(ce[W]=ge[W]);return j(A,we,void 0,void 0,null,ce)},ve.createRef=function(){return{current:null}},ve.forwardRef=function(A){return{$$typeof:h,render:A}},ve.isValidElement=ne,ve.lazy=function(A){return{$$typeof:y,_payload:{_status:-1,_result:A},_init:V}},ve.memo=function(A,H){return{$$typeof:p,type:A,compare:H===void 0?null:H}},ve.startTransition=function(A){var H=G.T,K={};G.T=K;try{var W=A(),ce=G.S;ce!==null&&ce(K,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(Z,Y)}catch(we){Y(we)}finally{G.T=H}},ve.unstable_useCacheRefresh=function(){return G.H.useCacheRefresh()},ve.use=function(A){return G.H.use(A)},ve.useActionState=function(A,H,K){return G.H.useActionState(A,H,K)},ve.useCallback=function(A,H){return G.H.useCallback(A,H)},ve.useContext=function(A){return G.H.useContext(A)},ve.useDebugValue=function(){},ve.useDeferredValue=function(A,H){return G.H.useDeferredValue(A,H)},ve.useEffect=function(A,H,K){var W=G.H;if(typeof K=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return W.useEffect(A,H)},ve.useId=function(){return G.H.useId()},ve.useImperativeHandle=function(A,H,K){return G.H.useImperativeHandle(A,H,K)},ve.useInsertionEffect=function(A,H){return G.H.useInsertionEffect(A,H)},ve.useLayoutEffect=function(A,H){return G.H.useLayoutEffect(A,H)},ve.useMemo=function(A,H){return G.H.useMemo(A,H)},ve.useOptimistic=function(A,H){return G.H.useOptimistic(A,H)},ve.useReducer=function(A,H,K){return G.H.useReducer(A,H,K)},ve.useRef=function(A){return G.H.useRef(A)},ve.useState=function(A){return G.H.useState(A)},ve.useSyncExternalStore=function(A,H,K){return G.H.useSyncExternalStore(A,H,K)},ve.useTransition=function(){return G.H.useTransition()},ve.version="19.1.1",ve}var am;function Yc(){return am||(am=1,tc.exports=t_()),tc.exports}var ie=Yc();const xs=Jc(ie);var nc={exports:{}},Lo={},ic={exports:{}},sc={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var um;function n_(){return um||(um=1,function(t){function e(N,V){var Y=N.length;N.push(V);e:for(;0<Y;){var Z=Y-1>>>1,A=N[Z];if(0<r(A,V))N[Z]=V,N[Y]=A,Y=Z;else break e}}function n(N){return N.length===0?null:N[0]}function s(N){if(N.length===0)return null;var V=N[0],Y=N.pop();if(Y!==V){N[0]=Y;e:for(var Z=0,A=N.length,H=A>>>1;Z<H;){var K=2*(Z+1)-1,W=N[K],ce=K+1,we=N[ce];if(0>r(W,Y))ce<A&&0>r(we,W)?(N[Z]=we,N[ce]=Y,Z=ce):(N[Z]=W,N[K]=Y,Z=K);else if(ce<A&&0>r(we,Y))N[Z]=we,N[ce]=Y,Z=ce;else break e}}return V}function r(N,V){var Y=N.sortIndex-V.sortIndex;return Y!==0?Y:N.id-V.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var d=Date,h=d.now();t.unstable_now=function(){return d.now()-h}}var g=[],p=[],y=1,T=null,_=3,E=!1,w=!1,k=!1,U=!1,q=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function J(N){for(var V=n(p);V!==null;){if(V.callback===null)s(p);else if(V.startTime<=N)s(p),V.sortIndex=V.expirationTime,e(g,V);else break;V=n(p)}}function G(N){if(k=!1,J(N),!w)if(n(g)!==null)w=!0,X||(X=!0,pe());else{var V=n(p);V!==null&&ee(G,V.startTime-N)}}var X=!1,j=-1,ue=5,ne=-1;function he(){return U?!0:!(t.unstable_now()-ne<ue)}function ae(){if(U=!1,X){var N=t.unstable_now();ne=N;var V=!0;try{e:{w=!1,k&&(k=!1,B(j),j=-1),E=!0;var Y=_;try{t:{for(J(N),T=n(g);T!==null&&!(T.expirationTime>N&&he());){var Z=T.callback;if(typeof Z=="function"){T.callback=null,_=T.priorityLevel;var A=Z(T.expirationTime<=N);if(N=t.unstable_now(),typeof A=="function"){T.callback=A,J(N),V=!0;break t}T===n(g)&&s(g),J(N)}else s(g);T=n(g)}if(T!==null)V=!0;else{var H=n(p);H!==null&&ee(G,H.startTime-N),V=!1}}break e}finally{T=null,_=Y,E=!1}V=void 0}}finally{V?pe():X=!1}}}var pe;if(typeof M=="function")pe=function(){M(ae)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,re=Q.port2;Q.port1.onmessage=ae,pe=function(){re.postMessage(null)}}else pe=function(){q(ae,0)};function ee(N,V){j=q(function(){N(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(N){N.callback=null},t.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ue=0<N?Math.floor(1e3/N):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_next=function(N){switch(_){case 1:case 2:case 3:var V=3;break;default:V=_}var Y=_;_=V;try{return N()}finally{_=Y}},t.unstable_requestPaint=function(){U=!0},t.unstable_runWithPriority=function(N,V){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var Y=_;_=N;try{return V()}finally{_=Y}},t.unstable_scheduleCallback=function(N,V,Y){var Z=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?Z+Y:Z):Y=Z,N){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=Y+A,N={id:y++,callback:V,priorityLevel:N,startTime:Y,expirationTime:A,sortIndex:-1},Y>Z?(N.sortIndex=Y,e(p,N),n(g)===null&&N===n(p)&&(k?(B(j),j=-1):k=!0,ee(G,Y-Z))):(N.sortIndex=A,e(g,N),w||E||(w=!0,X||(X=!0,pe()))),N},t.unstable_shouldYield=he,t.unstable_wrapCallback=function(N){var V=_;return function(){var Y=_;_=V;try{return N.apply(this,arguments)}finally{_=Y}}}}(sc)),sc}var cm;function i_(){return cm||(cm=1,ic.exports=n_()),ic.exports}var oc={exports:{}},ft={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fm;function s_(){if(fm)return ft;fm=1;var t=Yc();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(g,p,y){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:T==null?null:""+T,children:g,containerInfo:p,implementation:y}}var d=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return ft.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,ft.createPortal=function(g,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return a(g,p,null,y)},ft.flushSync=function(g){var p=d.T,y=s.p;try{if(d.T=null,s.p=2,g)return g()}finally{d.T=p,s.p=y,s.d.f()}},ft.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(g,p))},ft.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},ft.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var y=p.as,T=h(y,p.crossOrigin),_=typeof p.integrity=="string"?p.integrity:void 0,E=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?s.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:T,integrity:_,fetchPriority:E}):y==="script"&&s.d.X(g,{crossOrigin:T,integrity:_,fetchPriority:E,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},ft.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=h(p.as,p.crossOrigin);s.d.M(g,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(g)},ft.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,T=h(y,p.crossOrigin);s.d.L(g,y,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},ft.preloadModule=function(g,p){if(typeof g=="string")if(p){var y=h(p.as,p.crossOrigin);s.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(g)},ft.requestFormReset=function(g){s.d.r(g)},ft.unstable_batchedUpdates=function(g,p){return g(p)},ft.useFormState=function(g,p,y){return d.H.useFormState(g,p,y)},ft.useFormStatus=function(){return d.H.useHostTransitionStatus()},ft.version="19.1.1",ft}var dm;function o_(){if(dm)return oc.exports;dm=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),oc.exports=s_(),oc.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hm;function r_(){if(hm)return Lo;hm=1;var t=i_(),e=Yc(),n=o_();function s(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function a(i){var o=i,l=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(l=o.return),i=o.return;while(i)}return o.tag===3?l:null}function d(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function h(i){if(a(i)!==i)throw Error(s(188))}function g(i){var o=i.alternate;if(!o){if(o=a(i),o===null)throw Error(s(188));return o!==i?null:i}for(var l=i,f=o;;){var m=l.return;if(m===null)break;var v=m.alternate;if(v===null){if(f=m.return,f!==null){l=f;continue}break}if(m.child===v.child){for(v=m.child;v;){if(v===l)return h(m),i;if(v===f)return h(m),o;v=v.sibling}throw Error(s(188))}if(l.return!==f.return)l=m,f=v;else{for(var S=!1,x=m.child;x;){if(x===l){S=!0,l=m,f=v;break}if(x===f){S=!0,f=m,l=v;break}x=x.sibling}if(!S){for(x=v.child;x;){if(x===l){S=!0,l=v,f=m;break}if(x===f){S=!0,f=v,l=m;break}x=x.sibling}if(!S)throw Error(s(189))}}if(l.alternate!==f)throw Error(s(190))}if(l.tag!==3)throw Error(s(188));return l.stateNode.current===l?i:o}function p(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=p(i),o!==null)return o;i=i.sibling}return null}var y=Object.assign,T=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),q=Symbol.for("react.provider"),B=Symbol.for("react.consumer"),M=Symbol.for("react.context"),J=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),X=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),ue=Symbol.for("react.lazy"),ne=Symbol.for("react.activity"),he=Symbol.for("react.memo_cache_sentinel"),ae=Symbol.iterator;function pe(i){return i===null||typeof i!="object"?null:(i=ae&&i[ae]||i["@@iterator"],typeof i=="function"?i:null)}var Q=Symbol.for("react.client.reference");function re(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===Q?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case w:return"Fragment";case U:return"Profiler";case k:return"StrictMode";case G:return"Suspense";case X:return"SuspenseList";case ne:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case E:return"Portal";case M:return(i.displayName||"Context")+".Provider";case B:return(i._context.displayName||"Context")+".Consumer";case J:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case j:return o=i.displayName||null,o!==null?o:re(i.type)||"Memo";case ue:o=i._payload,i=i._init;try{return re(i(o))}catch{}}return null}var ee=Array.isArray,N=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},Z=[],A=-1;function H(i){return{current:i}}function K(i){0>A||(i.current=Z[A],Z[A]=null,A--)}function W(i,o){A++,Z[A]=i.current,i.current=o}var ce=H(null),we=H(null),ge=H(null),_t=H(null);function He(i,o){switch(W(ge,o),W(we,i),W(ce,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?Np(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=Np(o),i=Dp(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}K(ce),W(ce,i)}function Cn(){K(ce),K(we),K(ge)}function Bl(i){i.memoizedState!==null&&W(_t,i);var o=ce.current,l=Dp(o,i.type);o!==l&&(W(we,i),W(ce,l))}function tr(i){we.current===i&&(K(ce),K(we)),_t.current===i&&(K(_t),Ro._currentValue=Y)}var Vl=Object.prototype.hasOwnProperty,Hl=t.unstable_scheduleCallback,Gl=t.unstable_cancelCallback,Av=t.unstable_shouldYield,Rv=t.unstable_requestPaint,Yt=t.unstable_now,Mv=t.unstable_getCurrentPriorityLevel,ff=t.unstable_ImmediatePriority,df=t.unstable_UserBlockingPriority,nr=t.unstable_NormalPriority,kv=t.unstable_LowPriority,hf=t.unstable_IdlePriority,Nv=t.log,Dv=t.unstable_setDisableYieldValue,Ls=null,St=null;function xn(i){if(typeof Nv=="function"&&Dv(i),St&&typeof St.setStrictMode=="function")try{St.setStrictMode(Ls,i)}catch{}}var Ct=Math.clz32?Math.clz32:Lv,Iv=Math.log,Uv=Math.LN2;function Lv(i){return i>>>=0,i===0?32:31-(Iv(i)/Uv|0)|0}var ir=256,sr=4194304;function Wn(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function or(i,o,l){var f=i.pendingLanes;if(f===0)return 0;var m=0,v=i.suspendedLanes,S=i.pingedLanes;i=i.warmLanes;var x=f&134217727;return x!==0?(f=x&~v,f!==0?m=Wn(f):(S&=x,S!==0?m=Wn(S):l||(l=x&~i,l!==0&&(m=Wn(l))))):(x=f&~v,x!==0?m=Wn(x):S!==0?m=Wn(S):l||(l=f&~i,l!==0&&(m=Wn(l)))),m===0?0:o!==0&&o!==m&&(o&v)===0&&(v=m&-m,l=o&-o,v>=l||v===32&&(l&4194048)!==0)?o:m}function Ps(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function Pv(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pf(){var i=ir;return ir<<=1,(ir&4194048)===0&&(ir=256),i}function mf(){var i=sr;return sr<<=1,(sr&62914560)===0&&(sr=4194304),i}function zl(i){for(var o=[],l=0;31>l;l++)o.push(i);return o}function qs(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function qv(i,o,l,f,m,v){var S=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var x=i.entanglements,b=i.expirationTimes,L=i.hiddenUpdates;for(l=S&~l;0<l;){var z=31-Ct(l),F=1<<z;x[z]=0,b[z]=-1;var P=L[z];if(P!==null)for(L[z]=null,z=0;z<P.length;z++){var O=P[z];O!==null&&(O.lane&=-536870913)}l&=~F}f!==0&&gf(i,f,0),v!==0&&m===0&&i.tag!==0&&(i.suspendedLanes|=v&~(S&~o))}function gf(i,o,l){i.pendingLanes|=o,i.suspendedLanes&=~o;var f=31-Ct(o);i.entangledLanes|=o,i.entanglements[f]=i.entanglements[f]|1073741824|l&4194090}function yf(i,o){var l=i.entangledLanes|=o;for(i=i.entanglements;l;){var f=31-Ct(l),m=1<<f;m&o|i[f]&o&&(i[f]|=o),l&=~m}}function $l(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Fl(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function vf(){var i=V.p;return i!==0?i:(i=window.event,i===void 0?32:Wp(i.type))}function Ov(i,o){var l=V.p;try{return V.p=i,o()}finally{V.p=l}}var En=Math.random().toString(36).slice(2),ut="__reactFiber$"+En,pt="__reactProps$"+En,bi="__reactContainer$"+En,Jl="__reactEvents$"+En,Bv="__reactListeners$"+En,Vv="__reactHandles$"+En,Tf="__reactResources$"+En,Os="__reactMarker$"+En;function Yl(i){delete i[ut],delete i[pt],delete i[Jl],delete i[Bv],delete i[Vv]}function Ai(i){var o=i[ut];if(o)return o;for(var l=i.parentNode;l;){if(o=l[bi]||l[ut]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(i=Pp(i);i!==null;){if(l=i[ut])return l;i=Pp(i)}return o}i=l,l=i.parentNode}return null}function Ri(i){if(i=i[ut]||i[bi]){var o=i.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return i}return null}function Bs(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(s(33))}function Mi(i){var o=i[Tf];return o||(o=i[Tf]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function et(i){i[Os]=!0}var _f=new Set,Sf={};function Zn(i,o){ki(i,o),ki(i+"Capture",o)}function ki(i,o){for(Sf[i]=o,i=0;i<o.length;i++)_f.add(o[i])}var Hv=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Cf={},xf={};function Gv(i){return Vl.call(xf,i)?!0:Vl.call(Cf,i)?!1:Hv.test(i)?xf[i]=!0:(Cf[i]=!0,!1)}function rr(i,o,l){if(Gv(o))if(l===null)i.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var f=o.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+l)}}function lr(i,o,l){if(l===null)i.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+l)}}function tn(i,o,l,f){if(f===null)i.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(o,l,""+f)}}var Kl,Ef;function Ni(i){if(Kl===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);Kl=o&&o[1]||"",Ef=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Kl+i+Ef}var Ql=!1;function Xl(i,o){if(!i||Ql)return"";Ql=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(o){var F=function(){throw Error()};if(Object.defineProperty(F.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(F,[])}catch(O){var P=O}Reflect.construct(i,[],F)}else{try{F.call()}catch(O){P=O}i.call(F.prototype)}}else{try{throw Error()}catch(O){P=O}(F=i())&&typeof F.catch=="function"&&F.catch(function(){})}}catch(O){if(O&&P&&typeof O.stack=="string")return[O.stack,P.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=f.DetermineComponentFrameRoot(),S=v[0],x=v[1];if(S&&x){var b=S.split(`
`),L=x.split(`
`);for(m=f=0;f<b.length&&!b[f].includes("DetermineComponentFrameRoot");)f++;for(;m<L.length&&!L[m].includes("DetermineComponentFrameRoot");)m++;if(f===b.length||m===L.length)for(f=b.length-1,m=L.length-1;1<=f&&0<=m&&b[f]!==L[m];)m--;for(;1<=f&&0<=m;f--,m--)if(b[f]!==L[m]){if(f!==1||m!==1)do if(f--,m--,0>m||b[f]!==L[m]){var z=`
`+b[f].replace(" at new "," at ");return i.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",i.displayName)),z}while(1<=f&&0<=m);break}}}finally{Ql=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?Ni(l):""}function zv(i){switch(i.tag){case 26:case 27:case 5:return Ni(i.type);case 16:return Ni("Lazy");case 13:return Ni("Suspense");case 19:return Ni("SuspenseList");case 0:case 15:return Xl(i.type,!1);case 11:return Xl(i.type.render,!1);case 1:return Xl(i.type,!0);case 31:return Ni("Activity");default:return""}}function wf(i){try{var o="";do o+=zv(i),i=i.return;while(i);return o}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function Nt(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function bf(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function $v(i){var o=bf(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),f=""+i[o];if(!i.hasOwnProperty(o)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var m=l.get,v=l.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return m.call(this)},set:function(S){f=""+S,v.call(this,S)}}),Object.defineProperty(i,o,{enumerable:l.enumerable}),{getValue:function(){return f},setValue:function(S){f=""+S},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function ar(i){i._valueTracker||(i._valueTracker=$v(i))}function Af(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var l=o.getValue(),f="";return i&&(f=bf(i)?i.checked?"true":"false":i.value),i=f,i!==l?(o.setValue(i),!0):!1}function ur(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Fv=/[\n"\\]/g;function Dt(i){return i.replace(Fv,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Wl(i,o,l,f,m,v,S,x){i.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?i.type=S:i.removeAttribute("type"),o!=null?S==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+Nt(o)):i.value!==""+Nt(o)&&(i.value=""+Nt(o)):S!=="submit"&&S!=="reset"||i.removeAttribute("value"),o!=null?Zl(i,S,Nt(o)):l!=null?Zl(i,S,Nt(l)):f!=null&&i.removeAttribute("value"),m==null&&v!=null&&(i.defaultChecked=!!v),m!=null&&(i.checked=m&&typeof m!="function"&&typeof m!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?i.name=""+Nt(x):i.removeAttribute("name")}function Rf(i,o,l,f,m,v,S,x){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(i.type=v),o!=null||l!=null){if(!(v!=="submit"&&v!=="reset"||o!=null))return;l=l!=null?""+Nt(l):"",o=o!=null?""+Nt(o):l,x||o===i.value||(i.value=o),i.defaultValue=o}f=f??m,f=typeof f!="function"&&typeof f!="symbol"&&!!f,i.checked=x?i.checked:!!f,i.defaultChecked=!!f,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(i.name=S)}function Zl(i,o,l){o==="number"&&ur(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function Di(i,o,l,f){if(i=i.options,o){o={};for(var m=0;m<l.length;m++)o["$"+l[m]]=!0;for(l=0;l<i.length;l++)m=o.hasOwnProperty("$"+i[l].value),i[l].selected!==m&&(i[l].selected=m),m&&f&&(i[l].defaultSelected=!0)}else{for(l=""+Nt(l),o=null,m=0;m<i.length;m++){if(i[m].value===l){i[m].selected=!0,f&&(i[m].defaultSelected=!0);return}o!==null||i[m].disabled||(o=i[m])}o!==null&&(o.selected=!0)}}function Mf(i,o,l){if(o!=null&&(o=""+Nt(o),o!==i.value&&(i.value=o),l==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=l!=null?""+Nt(l):""}function kf(i,o,l,f){if(o==null){if(f!=null){if(l!=null)throw Error(s(92));if(ee(f)){if(1<f.length)throw Error(s(93));f=f[0]}l=f}l==null&&(l=""),o=l}l=Nt(o),i.defaultValue=l,f=i.textContent,f===l&&f!==""&&f!==null&&(i.value=f)}function Ii(i,o){if(o){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=o;return}}i.textContent=o}var Jv=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Nf(i,o,l){var f=o.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?f?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":f?i.setProperty(o,l):typeof l!="number"||l===0||Jv.has(o)?o==="float"?i.cssFloat=l:i[o]=(""+l).trim():i[o]=l+"px"}function Df(i,o,l){if(o!=null&&typeof o!="object")throw Error(s(62));if(i=i.style,l!=null){for(var f in l)!l.hasOwnProperty(f)||o!=null&&o.hasOwnProperty(f)||(f.indexOf("--")===0?i.setProperty(f,""):f==="float"?i.cssFloat="":i[f]="");for(var m in o)f=o[m],o.hasOwnProperty(m)&&l[m]!==f&&Nf(i,m,f)}else for(var v in o)o.hasOwnProperty(v)&&Nf(i,v,o[v])}function jl(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Kv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function cr(i){return Kv.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var ea=null;function ta(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Ui=null,Li=null;function If(i){var o=Ri(i);if(o&&(i=o.stateNode)){var l=i[pt]||null;e:switch(i=o.stateNode,o.type){case"input":if(Wl(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),o=l.name,l.type==="radio"&&o!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Dt(""+o)+'"][type="radio"]'),o=0;o<l.length;o++){var f=l[o];if(f!==i&&f.form===i.form){var m=f[pt]||null;if(!m)throw Error(s(90));Wl(f,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(o=0;o<l.length;o++)f=l[o],f.form===i.form&&Af(f)}break e;case"textarea":Mf(i,l.value,l.defaultValue);break e;case"select":o=l.value,o!=null&&Di(i,!!l.multiple,o,!1)}}}var na=!1;function Uf(i,o,l){if(na)return i(o,l);na=!0;try{var f=i(o);return f}finally{if(na=!1,(Ui!==null||Li!==null)&&(Qr(),Ui&&(o=Ui,i=Li,Li=Ui=null,If(o),i)))for(o=0;o<i.length;o++)If(i[o])}}function Vs(i,o){var l=i.stateNode;if(l===null)return null;var f=l[pt]||null;if(f===null)return null;l=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(s(231,o,typeof l));return l}var nn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ia=!1;if(nn)try{var Hs={};Object.defineProperty(Hs,"passive",{get:function(){ia=!0}}),window.addEventListener("test",Hs,Hs),window.removeEventListener("test",Hs,Hs)}catch{ia=!1}var wn=null,sa=null,fr=null;function Lf(){if(fr)return fr;var i,o=sa,l=o.length,f,m="value"in wn?wn.value:wn.textContent,v=m.length;for(i=0;i<l&&o[i]===m[i];i++);var S=l-i;for(f=1;f<=S&&o[l-f]===m[v-f];f++);return fr=m.slice(i,1<f?1-f:void 0)}function dr(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function hr(){return!0}function Pf(){return!1}function mt(i){function o(l,f,m,v,S){this._reactName=l,this._targetInst=m,this.type=f,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var x in i)i.hasOwnProperty(x)&&(l=i[x],this[x]=l?l(v):v[x]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?hr:Pf,this.isPropagationStopped=Pf,this}return y(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=hr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=hr)},persist:function(){},isPersistent:hr}),o}var jn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pr=mt(jn),Gs=y({},jn,{view:0,detail:0}),Qv=mt(Gs),oa,ra,zs,mr=y({},Gs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:aa,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==zs&&(zs&&i.type==="mousemove"?(oa=i.screenX-zs.screenX,ra=i.screenY-zs.screenY):ra=oa=0,zs=i),oa)},movementY:function(i){return"movementY"in i?i.movementY:ra}}),qf=mt(mr),Xv=y({},mr,{dataTransfer:0}),Wv=mt(Xv),Zv=y({},Gs,{relatedTarget:0}),la=mt(Zv),jv=y({},jn,{animationName:0,elapsedTime:0,pseudoElement:0}),e0=mt(jv),t0=y({},jn,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),n0=mt(t0),i0=y({},jn,{data:0}),Of=mt(i0),s0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},o0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},r0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function l0(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=r0[i])?!!o[i]:!1}function aa(){return l0}var a0=y({},Gs,{key:function(i){if(i.key){var o=s0[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=dr(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?o0[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:aa,charCode:function(i){return i.type==="keypress"?dr(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?dr(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),u0=mt(a0),c0=y({},mr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bf=mt(c0),f0=y({},Gs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:aa}),d0=mt(f0),h0=y({},jn,{propertyName:0,elapsedTime:0,pseudoElement:0}),p0=mt(h0),m0=y({},mr,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),g0=mt(m0),y0=y({},jn,{newState:0,oldState:0}),v0=mt(y0),T0=[9,13,27,32],ua=nn&&"CompositionEvent"in window,$s=null;nn&&"documentMode"in document&&($s=document.documentMode);var _0=nn&&"TextEvent"in window&&!$s,Vf=nn&&(!ua||$s&&8<$s&&11>=$s),Hf=" ",Gf=!1;function zf(i,o){switch(i){case"keyup":return T0.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $f(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Pi=!1;function S0(i,o){switch(i){case"compositionend":return $f(o);case"keypress":return o.which!==32?null:(Gf=!0,Hf);case"textInput":return i=o.data,i===Hf&&Gf?null:i;default:return null}}function C0(i,o){if(Pi)return i==="compositionend"||!ua&&zf(i,o)?(i=Lf(),fr=sa=wn=null,Pi=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Vf&&o.locale!=="ko"?null:o.data;default:return null}}var x0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ff(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!x0[i.type]:o==="textarea"}function Jf(i,o,l,f){Ui?Li?Li.push(f):Li=[f]:Ui=f,o=tl(o,"onChange"),0<o.length&&(l=new pr("onChange","change",null,l,f),i.push({event:l,listeners:o}))}var Fs=null,Js=null;function E0(i){bp(i,0)}function gr(i){var o=Bs(i);if(Af(o))return i}function Yf(i,o){if(i==="change")return o}var Kf=!1;if(nn){var ca;if(nn){var fa="oninput"in document;if(!fa){var Qf=document.createElement("div");Qf.setAttribute("oninput","return;"),fa=typeof Qf.oninput=="function"}ca=fa}else ca=!1;Kf=ca&&(!document.documentMode||9<document.documentMode)}function Xf(){Fs&&(Fs.detachEvent("onpropertychange",Wf),Js=Fs=null)}function Wf(i){if(i.propertyName==="value"&&gr(Js)){var o=[];Jf(o,Js,i,ta(i)),Uf(E0,o)}}function w0(i,o,l){i==="focusin"?(Xf(),Fs=o,Js=l,Fs.attachEvent("onpropertychange",Wf)):i==="focusout"&&Xf()}function b0(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return gr(Js)}function A0(i,o){if(i==="click")return gr(o)}function R0(i,o){if(i==="input"||i==="change")return gr(o)}function M0(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var xt=typeof Object.is=="function"?Object.is:M0;function Ys(i,o){if(xt(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var l=Object.keys(i),f=Object.keys(o);if(l.length!==f.length)return!1;for(f=0;f<l.length;f++){var m=l[f];if(!Vl.call(o,m)||!xt(i[m],o[m]))return!1}return!0}function Zf(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function jf(i,o){var l=Zf(i);i=0;for(var f;l;){if(l.nodeType===3){if(f=i+l.textContent.length,i<=o&&f>=o)return{node:l,offset:o-i};i=f}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Zf(l)}}function ed(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?ed(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function td(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=ur(i.document);o instanceof i.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)i=o.contentWindow;else break;o=ur(i.document)}return o}function da(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var k0=nn&&"documentMode"in document&&11>=document.documentMode,qi=null,ha=null,Ks=null,pa=!1;function nd(i,o,l){var f=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;pa||qi==null||qi!==ur(f)||(f=qi,"selectionStart"in f&&da(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Ks&&Ys(Ks,f)||(Ks=f,f=tl(ha,"onSelect"),0<f.length&&(o=new pr("onSelect","select",null,o,l),i.push({event:o,listeners:f}),o.target=qi)))}function ei(i,o){var l={};return l[i.toLowerCase()]=o.toLowerCase(),l["Webkit"+i]="webkit"+o,l["Moz"+i]="moz"+o,l}var Oi={animationend:ei("Animation","AnimationEnd"),animationiteration:ei("Animation","AnimationIteration"),animationstart:ei("Animation","AnimationStart"),transitionrun:ei("Transition","TransitionRun"),transitionstart:ei("Transition","TransitionStart"),transitioncancel:ei("Transition","TransitionCancel"),transitionend:ei("Transition","TransitionEnd")},ma={},id={};nn&&(id=document.createElement("div").style,"AnimationEvent"in window||(delete Oi.animationend.animation,delete Oi.animationiteration.animation,delete Oi.animationstart.animation),"TransitionEvent"in window||delete Oi.transitionend.transition);function ti(i){if(ma[i])return ma[i];if(!Oi[i])return i;var o=Oi[i],l;for(l in o)if(o.hasOwnProperty(l)&&l in id)return ma[i]=o[l];return i}var sd=ti("animationend"),od=ti("animationiteration"),rd=ti("animationstart"),N0=ti("transitionrun"),D0=ti("transitionstart"),I0=ti("transitioncancel"),ld=ti("transitionend"),ad=new Map,ga="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ga.push("scrollEnd");function Ht(i,o){ad.set(i,o),Zn(o,[i])}var ud=new WeakMap;function It(i,o){if(typeof i=="object"&&i!==null){var l=ud.get(i);return l!==void 0?l:(o={value:i,source:o,stack:wf(o)},ud.set(i,o),o)}return{value:i,source:o,stack:wf(o)}}var Ut=[],Bi=0,ya=0;function yr(){for(var i=Bi,o=ya=Bi=0;o<i;){var l=Ut[o];Ut[o++]=null;var f=Ut[o];Ut[o++]=null;var m=Ut[o];Ut[o++]=null;var v=Ut[o];if(Ut[o++]=null,f!==null&&m!==null){var S=f.pending;S===null?m.next=m:(m.next=S.next,S.next=m),f.pending=m}v!==0&&cd(l,m,v)}}function vr(i,o,l,f){Ut[Bi++]=i,Ut[Bi++]=o,Ut[Bi++]=l,Ut[Bi++]=f,ya|=f,i.lanes|=f,i=i.alternate,i!==null&&(i.lanes|=f)}function va(i,o,l,f){return vr(i,o,l,f),Tr(i)}function Vi(i,o){return vr(i,null,null,o),Tr(i)}function cd(i,o,l){i.lanes|=l;var f=i.alternate;f!==null&&(f.lanes|=l);for(var m=!1,v=i.return;v!==null;)v.childLanes|=l,f=v.alternate,f!==null&&(f.childLanes|=l),v.tag===22&&(i=v.stateNode,i===null||i._visibility&1||(m=!0)),i=v,v=v.return;return i.tag===3?(v=i.stateNode,m&&o!==null&&(m=31-Ct(l),i=v.hiddenUpdates,f=i[m],f===null?i[m]=[o]:f.push(o),o.lane=l|536870912),v):null}function Tr(i){if(50<_o)throw _o=0,Eu=null,Error(s(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var Hi={};function U0(i,o,l,f){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Et(i,o,l,f){return new U0(i,o,l,f)}function Ta(i){return i=i.prototype,!(!i||!i.isReactComponent)}function sn(i,o){var l=i.alternate;return l===null?(l=Et(i.tag,o,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=o,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,o=i.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function fd(i,o){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,o=l.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function _r(i,o,l,f,m,v){var S=0;if(f=i,typeof i=="function")Ta(i)&&(S=1);else if(typeof i=="string")S=PT(i,l,ce.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case ne:return i=Et(31,l,o,m),i.elementType=ne,i.lanes=v,i;case w:return ni(l.children,m,v,o);case k:S=8,m|=24;break;case U:return i=Et(12,l,o,m|2),i.elementType=U,i.lanes=v,i;case G:return i=Et(13,l,o,m),i.elementType=G,i.lanes=v,i;case X:return i=Et(19,l,o,m),i.elementType=X,i.lanes=v,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case q:case M:S=10;break e;case B:S=9;break e;case J:S=11;break e;case j:S=14;break e;case ue:S=16,f=null;break e}S=29,l=Error(s(130,i===null?"null":typeof i,"")),f=null}return o=Et(S,l,o,m),o.elementType=i,o.type=f,o.lanes=v,o}function ni(i,o,l,f){return i=Et(7,i,f,o),i.lanes=l,i}function _a(i,o,l){return i=Et(6,i,null,o),i.lanes=l,i}function Sa(i,o,l){return o=Et(4,i.children!==null?i.children:[],i.key,o),o.lanes=l,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var Gi=[],zi=0,Sr=null,Cr=0,Lt=[],Pt=0,ii=null,on=1,rn="";function si(i,o){Gi[zi++]=Cr,Gi[zi++]=Sr,Sr=i,Cr=o}function dd(i,o,l){Lt[Pt++]=on,Lt[Pt++]=rn,Lt[Pt++]=ii,ii=i;var f=on;i=rn;var m=32-Ct(f)-1;f&=~(1<<m),l+=1;var v=32-Ct(o)+m;if(30<v){var S=m-m%5;v=(f&(1<<S)-1).toString(32),f>>=S,m-=S,on=1<<32-Ct(o)+m|l<<m|f,rn=v+i}else on=1<<v|l<<m|f,rn=i}function Ca(i){i.return!==null&&(si(i,1),dd(i,1,0))}function xa(i){for(;i===Sr;)Sr=Gi[--zi],Gi[zi]=null,Cr=Gi[--zi],Gi[zi]=null;for(;i===ii;)ii=Lt[--Pt],Lt[Pt]=null,rn=Lt[--Pt],Lt[Pt]=null,on=Lt[--Pt],Lt[Pt]=null}var ht=null,$e=null,Ae=!1,oi=null,Kt=!1,Ea=Error(s(519));function ri(i){var o=Error(s(418,""));throw Ws(It(o,i)),Ea}function hd(i){var o=i.stateNode,l=i.type,f=i.memoizedProps;switch(o[ut]=i,o[pt]=f,l){case"dialog":Ce("cancel",o),Ce("close",o);break;case"iframe":case"object":case"embed":Ce("load",o);break;case"video":case"audio":for(l=0;l<Co.length;l++)Ce(Co[l],o);break;case"source":Ce("error",o);break;case"img":case"image":case"link":Ce("error",o),Ce("load",o);break;case"details":Ce("toggle",o);break;case"input":Ce("invalid",o),Rf(o,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0),ar(o);break;case"select":Ce("invalid",o);break;case"textarea":Ce("invalid",o),kf(o,f.value,f.defaultValue,f.children),ar(o)}l=f.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||o.textContent===""+l||f.suppressHydrationWarning===!0||kp(o.textContent,l)?(f.popover!=null&&(Ce("beforetoggle",o),Ce("toggle",o)),f.onScroll!=null&&Ce("scroll",o),f.onScrollEnd!=null&&Ce("scrollend",o),f.onClick!=null&&(o.onclick=nl),o=!0):o=!1,o||ri(i)}function pd(i){for(ht=i.return;ht;)switch(ht.tag){case 5:case 13:Kt=!1;return;case 27:case 3:Kt=!0;return;default:ht=ht.return}}function Qs(i){if(i!==ht)return!1;if(!Ae)return pd(i),Ae=!0,!1;var o=i.tag,l;if((l=o!==3&&o!==27)&&((l=o===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||Vu(i.type,i.memoizedProps)),l=!l),l&&$e&&ri(i),pd(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8)if(l=i.data,l==="/$"){if(o===0){$e=zt(i.nextSibling);break e}o--}else l!=="$"&&l!=="$!"&&l!=="$?"||o++;i=i.nextSibling}$e=null}}else o===27?(o=$e,Hn(i.type)?(i=$u,$u=null,$e=i):$e=o):$e=ht?zt(i.stateNode.nextSibling):null;return!0}function Xs(){$e=ht=null,Ae=!1}function md(){var i=oi;return i!==null&&(vt===null?vt=i:vt.push.apply(vt,i),oi=null),i}function Ws(i){oi===null?oi=[i]:oi.push(i)}var wa=H(null),li=null,ln=null;function bn(i,o,l){W(wa,o._currentValue),o._currentValue=l}function an(i){i._currentValue=wa.current,K(wa)}function ba(i,o,l){for(;i!==null;){var f=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),i===l)break;i=i.return}}function Aa(i,o,l,f){var m=i.child;for(m!==null&&(m.return=i);m!==null;){var v=m.dependencies;if(v!==null){var S=m.child;v=v.firstContext;e:for(;v!==null;){var x=v;v=m;for(var b=0;b<o.length;b++)if(x.context===o[b]){v.lanes|=l,x=v.alternate,x!==null&&(x.lanes|=l),ba(v.return,l,i),f||(S=null);break e}v=x.next}}else if(m.tag===18){if(S=m.return,S===null)throw Error(s(341));S.lanes|=l,v=S.alternate,v!==null&&(v.lanes|=l),ba(S,l,i),S=null}else S=m.child;if(S!==null)S.return=m;else for(S=m;S!==null;){if(S===i){S=null;break}if(m=S.sibling,m!==null){m.return=S.return,S=m;break}S=S.return}m=S}}function Zs(i,o,l,f){i=null;for(var m=o,v=!1;m!==null;){if(!v){if((m.flags&524288)!==0)v=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var S=m.alternate;if(S===null)throw Error(s(387));if(S=S.memoizedProps,S!==null){var x=m.type;xt(m.pendingProps.value,S.value)||(i!==null?i.push(x):i=[x])}}else if(m===_t.current){if(S=m.alternate,S===null)throw Error(s(387));S.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(i!==null?i.push(Ro):i=[Ro])}m=m.return}i!==null&&Aa(o,i,l,f),o.flags|=262144}function xr(i){for(i=i.firstContext;i!==null;){if(!xt(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function ai(i){li=i,ln=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function ct(i){return gd(li,i)}function Er(i,o){return li===null&&ai(i),gd(i,o)}function gd(i,o){var l=o._currentValue;if(o={context:o,memoizedValue:l,next:null},ln===null){if(i===null)throw Error(s(308));ln=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else ln=ln.next=o;return l}var L0=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(l,f){i.push(f)}};this.abort=function(){o.aborted=!0,i.forEach(function(l){return l()})}},P0=t.unstable_scheduleCallback,q0=t.unstable_NormalPriority,Xe={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ra(){return{controller:new L0,data:new Map,refCount:0}}function js(i){i.refCount--,i.refCount===0&&P0(q0,function(){i.controller.abort()})}var eo=null,Ma=0,$i=0,Fi=null;function O0(i,o){if(eo===null){var l=eo=[];Ma=0,$i=Nu(),Fi={status:"pending",value:void 0,then:function(f){l.push(f)}}}return Ma++,o.then(yd,yd),o}function yd(){if(--Ma===0&&eo!==null){Fi!==null&&(Fi.status="fulfilled");var i=eo;eo=null,$i=0,Fi=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function B0(i,o){var l=[],f={status:"pending",value:null,reason:null,then:function(m){l.push(m)}};return i.then(function(){f.status="fulfilled",f.value=o;for(var m=0;m<l.length;m++)(0,l[m])(o)},function(m){for(f.status="rejected",f.reason=m,m=0;m<l.length;m++)(0,l[m])(void 0)}),f}var vd=N.S;N.S=function(i,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&O0(i,o),vd!==null&&vd(i,o)};var ui=H(null);function ka(){var i=ui.current;return i!==null?i:qe.pooledCache}function wr(i,o){o===null?W(ui,ui.current):W(ui,o.pool)}function Td(){var i=ka();return i===null?null:{parent:Xe._currentValue,pool:i}}var to=Error(s(460)),_d=Error(s(474)),br=Error(s(542)),Na={then:function(){}};function Sd(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Ar(){}function Cd(i,o,l){switch(l=i[l],l===void 0?i.push(o):l!==o&&(o.then(Ar,Ar),o=l),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,Ed(i),i;default:if(typeof o.status=="string")o.then(Ar,Ar);else{if(i=qe,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=o,i.status="pending",i.then(function(f){if(o.status==="pending"){var m=o;m.status="fulfilled",m.value=f}},function(f){if(o.status==="pending"){var m=o;m.status="rejected",m.reason=f}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,Ed(i),i}throw no=o,to}}var no=null;function xd(){if(no===null)throw Error(s(459));var i=no;return no=null,i}function Ed(i){if(i===to||i===br)throw Error(s(483))}var An=!1;function Da(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ia(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Rn(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Mn(i,o,l){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(Me&2)!==0){var m=f.pending;return m===null?o.next=o:(o.next=m.next,m.next=o),f.pending=o,o=Tr(i),cd(i,null,l),o}return vr(i,f,o,l),Tr(i)}function io(i,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194048)!==0)){var f=o.lanes;f&=i.pendingLanes,l|=f,o.lanes=l,yf(i,l)}}function Ua(i,o){var l=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,l===f)){var m=null,v=null;if(l=l.firstBaseUpdate,l!==null){do{var S={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};v===null?m=v=S:v=v.next=S,l=l.next}while(l!==null);v===null?m=v=o:v=v.next=o}else m=v=o;l={baseState:f.baseState,firstBaseUpdate:m,lastBaseUpdate:v,shared:f.shared,callbacks:f.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=o:i.next=o,l.lastBaseUpdate=o}var La=!1;function so(){if(La){var i=Fi;if(i!==null)throw i}}function oo(i,o,l,f){La=!1;var m=i.updateQueue;An=!1;var v=m.firstBaseUpdate,S=m.lastBaseUpdate,x=m.shared.pending;if(x!==null){m.shared.pending=null;var b=x,L=b.next;b.next=null,S===null?v=L:S.next=L,S=b;var z=i.alternate;z!==null&&(z=z.updateQueue,x=z.lastBaseUpdate,x!==S&&(x===null?z.firstBaseUpdate=L:x.next=L,z.lastBaseUpdate=b))}if(v!==null){var F=m.baseState;S=0,z=L=b=null,x=v;do{var P=x.lane&-536870913,O=P!==x.lane;if(O?(Ee&P)===P:(f&P)===P){P!==0&&P===$i&&(La=!0),z!==null&&(z=z.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});e:{var me=i,fe=x;P=o;var Ue=l;switch(fe.tag){case 1:if(me=fe.payload,typeof me=="function"){F=me.call(Ue,F,P);break e}F=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=fe.payload,P=typeof me=="function"?me.call(Ue,F,P):me,P==null)break e;F=y({},F,P);break e;case 2:An=!0}}P=x.callback,P!==null&&(i.flags|=64,O&&(i.flags|=8192),O=m.callbacks,O===null?m.callbacks=[P]:O.push(P))}else O={lane:P,tag:x.tag,payload:x.payload,callback:x.callback,next:null},z===null?(L=z=O,b=F):z=z.next=O,S|=P;if(x=x.next,x===null){if(x=m.shared.pending,x===null)break;O=x,x=O.next,O.next=null,m.lastBaseUpdate=O,m.shared.pending=null}}while(!0);z===null&&(b=F),m.baseState=b,m.firstBaseUpdate=L,m.lastBaseUpdate=z,v===null&&(m.shared.lanes=0),qn|=S,i.lanes=S,i.memoizedState=F}}function wd(i,o){if(typeof i!="function")throw Error(s(191,i));i.call(o)}function bd(i,o){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)wd(l[i],o)}var Ji=H(null),Rr=H(0);function Ad(i,o){i=mn,W(Rr,i),W(Ji,o),mn=i|o.baseLanes}function Pa(){W(Rr,mn),W(Ji,Ji.current)}function qa(){mn=Rr.current,K(Ji),K(Rr)}var kn=0,Te=null,De=null,Ke=null,Mr=!1,Yi=!1,ci=!1,kr=0,ro=0,Ki=null,V0=0;function Je(){throw Error(s(321))}function Oa(i,o){if(o===null)return!1;for(var l=0;l<o.length&&l<i.length;l++)if(!xt(i[l],o[l]))return!1;return!0}function Ba(i,o,l,f,m,v){return kn=v,Te=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,N.H=i===null||i.memoizedState===null?ch:fh,ci=!1,v=l(f,m),ci=!1,Yi&&(v=Md(o,l,f,m)),Rd(i),v}function Rd(i){N.H=Pr;var o=De!==null&&De.next!==null;if(kn=0,Ke=De=Te=null,Mr=!1,ro=0,Ki=null,o)throw Error(s(300));i===null||tt||(i=i.dependencies,i!==null&&xr(i)&&(tt=!0))}function Md(i,o,l,f){Te=i;var m=0;do{if(Yi&&(Ki=null),ro=0,Yi=!1,25<=m)throw Error(s(301));if(m+=1,Ke=De=null,i.updateQueue!=null){var v=i.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}N.H=Y0,v=o(l,f)}while(Yi);return v}function H0(){var i=N.H,o=i.useState()[0];return o=typeof o.then=="function"?lo(o):o,i=i.useState()[0],(De!==null?De.memoizedState:null)!==i&&(Te.flags|=1024),o}function Va(){var i=kr!==0;return kr=0,i}function Ha(i,o,l){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~l}function Ga(i){if(Mr){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}Mr=!1}kn=0,Ke=De=Te=null,Yi=!1,ro=kr=0,Ki=null}function gt(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ke===null?Te.memoizedState=Ke=i:Ke=Ke.next=i,Ke}function Qe(){if(De===null){var i=Te.alternate;i=i!==null?i.memoizedState:null}else i=De.next;var o=Ke===null?Te.memoizedState:Ke.next;if(o!==null)Ke=o,De=i;else{if(i===null)throw Te.alternate===null?Error(s(467)):Error(s(310));De=i,i={memoizedState:De.memoizedState,baseState:De.baseState,baseQueue:De.baseQueue,queue:De.queue,next:null},Ke===null?Te.memoizedState=Ke=i:Ke=Ke.next=i}return Ke}function za(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function lo(i){var o=ro;return ro+=1,Ki===null&&(Ki=[]),i=Cd(Ki,i,o),o=Te,(Ke===null?o.memoizedState:Ke.next)===null&&(o=o.alternate,N.H=o===null||o.memoizedState===null?ch:fh),i}function Nr(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return lo(i);if(i.$$typeof===M)return ct(i)}throw Error(s(438,String(i)))}function $a(i){var o=null,l=Te.updateQueue;if(l!==null&&(o=l.memoCache),o==null){var f=Te.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(o={data:f.data.map(function(m){return m.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),l===null&&(l=za(),Te.updateQueue=l),l.memoCache=o,l=o.data[o.index],l===void 0)for(l=o.data[o.index]=Array(i),f=0;f<i;f++)l[f]=he;return o.index++,l}function un(i,o){return typeof o=="function"?o(i):o}function Dr(i){var o=Qe();return Fa(o,De,i)}function Fa(i,o,l){var f=i.queue;if(f===null)throw Error(s(311));f.lastRenderedReducer=l;var m=i.baseQueue,v=f.pending;if(v!==null){if(m!==null){var S=m.next;m.next=v.next,v.next=S}o.baseQueue=m=v,f.pending=null}if(v=i.baseState,m===null)i.memoizedState=v;else{o=m.next;var x=S=null,b=null,L=o,z=!1;do{var F=L.lane&-536870913;if(F!==L.lane?(Ee&F)===F:(kn&F)===F){var P=L.revertLane;if(P===0)b!==null&&(b=b.next={lane:0,revertLane:0,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),F===$i&&(z=!0);else if((kn&P)===P){L=L.next,P===$i&&(z=!0);continue}else F={lane:0,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},b===null?(x=b=F,S=v):b=b.next=F,Te.lanes|=P,qn|=P;F=L.action,ci&&l(v,F),v=L.hasEagerState?L.eagerState:l(v,F)}else P={lane:F,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},b===null?(x=b=P,S=v):b=b.next=P,Te.lanes|=F,qn|=F;L=L.next}while(L!==null&&L!==o);if(b===null?S=v:b.next=x,!xt(v,i.memoizedState)&&(tt=!0,z&&(l=Fi,l!==null)))throw l;i.memoizedState=v,i.baseState=S,i.baseQueue=b,f.lastRenderedState=v}return m===null&&(f.lanes=0),[i.memoizedState,f.dispatch]}function Ja(i){var o=Qe(),l=o.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=i;var f=l.dispatch,m=l.pending,v=o.memoizedState;if(m!==null){l.pending=null;var S=m=m.next;do v=i(v,S.action),S=S.next;while(S!==m);xt(v,o.memoizedState)||(tt=!0),o.memoizedState=v,o.baseQueue===null&&(o.baseState=v),l.lastRenderedState=v}return[v,f]}function kd(i,o,l){var f=Te,m=Qe(),v=Ae;if(v){if(l===void 0)throw Error(s(407));l=l()}else l=o();var S=!xt((De||m).memoizedState,l);S&&(m.memoizedState=l,tt=!0),m=m.queue;var x=Id.bind(null,f,m,i);if(ao(2048,8,x,[i]),m.getSnapshot!==o||S||Ke!==null&&Ke.memoizedState.tag&1){if(f.flags|=2048,Qi(9,Ir(),Dd.bind(null,f,m,l,o),null),qe===null)throw Error(s(349));v||(kn&124)!==0||Nd(f,o,l)}return l}function Nd(i,o,l){i.flags|=16384,i={getSnapshot:o,value:l},o=Te.updateQueue,o===null?(o=za(),Te.updateQueue=o,o.stores=[i]):(l=o.stores,l===null?o.stores=[i]:l.push(i))}function Dd(i,o,l,f){o.value=l,o.getSnapshot=f,Ud(o)&&Ld(i)}function Id(i,o,l){return l(function(){Ud(o)&&Ld(i)})}function Ud(i){var o=i.getSnapshot;i=i.value;try{var l=o();return!xt(i,l)}catch{return!0}}function Ld(i){var o=Vi(i,2);o!==null&&Mt(o,i,2)}function Ya(i){var o=gt();if(typeof i=="function"){var l=i;if(i=l(),ci){xn(!0);try{l()}finally{xn(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:un,lastRenderedState:i},o}function Pd(i,o,l,f){return i.baseState=l,Fa(i,De,typeof f=="function"?f:un)}function G0(i,o,l,f,m){if(Lr(i))throw Error(s(485));if(i=o.action,i!==null){var v={payload:m,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){v.listeners.push(S)}};N.T!==null?l(!0):v.isTransition=!1,f(v),l=o.pending,l===null?(v.next=o.pending=v,qd(o,v)):(v.next=l.next,o.pending=l.next=v)}}function qd(i,o){var l=o.action,f=o.payload,m=i.state;if(o.isTransition){var v=N.T,S={};N.T=S;try{var x=l(m,f),b=N.S;b!==null&&b(S,x),Od(i,o,x)}catch(L){Ka(i,o,L)}finally{N.T=v}}else try{v=l(m,f),Od(i,o,v)}catch(L){Ka(i,o,L)}}function Od(i,o,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(f){Bd(i,o,f)},function(f){return Ka(i,o,f)}):Bd(i,o,l)}function Bd(i,o,l){o.status="fulfilled",o.value=l,Vd(o),i.state=l,o=i.pending,o!==null&&(l=o.next,l===o?i.pending=null:(l=l.next,o.next=l,qd(i,l)))}function Ka(i,o,l){var f=i.pending;if(i.pending=null,f!==null){f=f.next;do o.status="rejected",o.reason=l,Vd(o),o=o.next;while(o!==f)}i.action=null}function Vd(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function Hd(i,o){return o}function Gd(i,o){if(Ae){var l=qe.formState;if(l!==null){e:{var f=Te;if(Ae){if($e){t:{for(var m=$e,v=Kt;m.nodeType!==8;){if(!v){m=null;break t}if(m=zt(m.nextSibling),m===null){m=null;break t}}v=m.data,m=v==="F!"||v==="F"?m:null}if(m){$e=zt(m.nextSibling),f=m.data==="F!";break e}}ri(f)}f=!1}f&&(o=l[0])}}return l=gt(),l.memoizedState=l.baseState=o,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hd,lastRenderedState:o},l.queue=f,l=lh.bind(null,Te,f),f.dispatch=l,f=Ya(!1),v=ja.bind(null,Te,!1,f.queue),f=gt(),m={state:o,dispatch:null,action:i,pending:null},f.queue=m,l=G0.bind(null,Te,m,v,l),m.dispatch=l,f.memoizedState=i,[o,l,!1]}function zd(i){var o=Qe();return $d(o,De,i)}function $d(i,o,l){if(o=Fa(i,o,Hd)[0],i=Dr(un)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var f=lo(o)}catch(S){throw S===to?br:S}else f=o;o=Qe();var m=o.queue,v=m.dispatch;return l!==o.memoizedState&&(Te.flags|=2048,Qi(9,Ir(),z0.bind(null,m,l),null)),[f,v,i]}function z0(i,o){i.action=o}function Fd(i){var o=Qe(),l=De;if(l!==null)return $d(o,l,i);Qe(),o=o.memoizedState,l=Qe();var f=l.queue.dispatch;return l.memoizedState=i,[o,f,!1]}function Qi(i,o,l,f){return i={tag:i,create:l,deps:f,inst:o,next:null},o=Te.updateQueue,o===null&&(o=za(),Te.updateQueue=o),l=o.lastEffect,l===null?o.lastEffect=i.next=i:(f=l.next,l.next=i,i.next=f,o.lastEffect=i),i}function Ir(){return{destroy:void 0,resource:void 0}}function Jd(){return Qe().memoizedState}function Ur(i,o,l,f){var m=gt();f=f===void 0?null:f,Te.flags|=i,m.memoizedState=Qi(1|o,Ir(),l,f)}function ao(i,o,l,f){var m=Qe();f=f===void 0?null:f;var v=m.memoizedState.inst;De!==null&&f!==null&&Oa(f,De.memoizedState.deps)?m.memoizedState=Qi(o,v,l,f):(Te.flags|=i,m.memoizedState=Qi(1|o,v,l,f))}function Yd(i,o){Ur(8390656,8,i,o)}function Kd(i,o){ao(2048,8,i,o)}function Qd(i,o){return ao(4,2,i,o)}function Xd(i,o){return ao(4,4,i,o)}function Wd(i,o){if(typeof o=="function"){i=i();var l=o(i);return function(){typeof l=="function"?l():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function Zd(i,o,l){l=l!=null?l.concat([i]):null,ao(4,4,Wd.bind(null,o,i),l)}function Qa(){}function jd(i,o){var l=Qe();o=o===void 0?null:o;var f=l.memoizedState;return o!==null&&Oa(o,f[1])?f[0]:(l.memoizedState=[i,o],i)}function eh(i,o){var l=Qe();o=o===void 0?null:o;var f=l.memoizedState;if(o!==null&&Oa(o,f[1]))return f[0];if(f=i(),ci){xn(!0);try{i()}finally{xn(!1)}}return l.memoizedState=[f,o],f}function Xa(i,o,l){return l===void 0||(kn&1073741824)!==0?i.memoizedState=o:(i.memoizedState=l,i=ip(),Te.lanes|=i,qn|=i,l)}function th(i,o,l,f){return xt(l,o)?l:Ji.current!==null?(i=Xa(i,l,f),xt(i,o)||(tt=!0),i):(kn&42)===0?(tt=!0,i.memoizedState=l):(i=ip(),Te.lanes|=i,qn|=i,o)}function nh(i,o,l,f,m){var v=V.p;V.p=v!==0&&8>v?v:8;var S=N.T,x={};N.T=x,ja(i,!1,o,l);try{var b=m(),L=N.S;if(L!==null&&L(x,b),b!==null&&typeof b=="object"&&typeof b.then=="function"){var z=B0(b,f);uo(i,o,z,Rt(i))}else uo(i,o,f,Rt(i))}catch(F){uo(i,o,{then:function(){},status:"rejected",reason:F},Rt())}finally{V.p=v,N.T=S}}function $0(){}function Wa(i,o,l,f){if(i.tag!==5)throw Error(s(476));var m=ih(i).queue;nh(i,m,o,Y,l===null?$0:function(){return sh(i),l(f)})}function ih(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:un,lastRenderedState:Y},next:null};var l={};return o.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:un,lastRenderedState:l},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function sh(i){var o=ih(i).next.queue;uo(i,o,{},Rt())}function Za(){return ct(Ro)}function oh(){return Qe().memoizedState}function rh(){return Qe().memoizedState}function F0(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var l=Rt();i=Rn(l);var f=Mn(o,i,l);f!==null&&(Mt(f,o,l),io(f,o,l)),o={cache:Ra()},i.payload=o;return}o=o.return}}function J0(i,o,l){var f=Rt();l={lane:f,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},Lr(i)?ah(o,l):(l=va(i,o,l,f),l!==null&&(Mt(l,i,f),uh(l,o,f)))}function lh(i,o,l){var f=Rt();uo(i,o,l,f)}function uo(i,o,l,f){var m={lane:f,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(Lr(i))ah(o,m);else{var v=i.alternate;if(i.lanes===0&&(v===null||v.lanes===0)&&(v=o.lastRenderedReducer,v!==null))try{var S=o.lastRenderedState,x=v(S,l);if(m.hasEagerState=!0,m.eagerState=x,xt(x,S))return vr(i,o,m,0),qe===null&&yr(),!1}catch{}finally{}if(l=va(i,o,m,f),l!==null)return Mt(l,i,f),uh(l,o,f),!0}return!1}function ja(i,o,l,f){if(f={lane:2,revertLane:Nu(),action:f,hasEagerState:!1,eagerState:null,next:null},Lr(i)){if(o)throw Error(s(479))}else o=va(i,l,f,2),o!==null&&Mt(o,i,2)}function Lr(i){var o=i.alternate;return i===Te||o!==null&&o===Te}function ah(i,o){Yi=Mr=!0;var l=i.pending;l===null?o.next=o:(o.next=l.next,l.next=o),i.pending=o}function uh(i,o,l){if((l&4194048)!==0){var f=o.lanes;f&=i.pendingLanes,l|=f,o.lanes=l,yf(i,l)}}var Pr={readContext:ct,use:Nr,useCallback:Je,useContext:Je,useEffect:Je,useImperativeHandle:Je,useLayoutEffect:Je,useInsertionEffect:Je,useMemo:Je,useReducer:Je,useRef:Je,useState:Je,useDebugValue:Je,useDeferredValue:Je,useTransition:Je,useSyncExternalStore:Je,useId:Je,useHostTransitionStatus:Je,useFormState:Je,useActionState:Je,useOptimistic:Je,useMemoCache:Je,useCacheRefresh:Je},ch={readContext:ct,use:Nr,useCallback:function(i,o){return gt().memoizedState=[i,o===void 0?null:o],i},useContext:ct,useEffect:Yd,useImperativeHandle:function(i,o,l){l=l!=null?l.concat([i]):null,Ur(4194308,4,Wd.bind(null,o,i),l)},useLayoutEffect:function(i,o){return Ur(4194308,4,i,o)},useInsertionEffect:function(i,o){Ur(4,2,i,o)},useMemo:function(i,o){var l=gt();o=o===void 0?null:o;var f=i();if(ci){xn(!0);try{i()}finally{xn(!1)}}return l.memoizedState=[f,o],f},useReducer:function(i,o,l){var f=gt();if(l!==void 0){var m=l(o);if(ci){xn(!0);try{l(o)}finally{xn(!1)}}}else m=o;return f.memoizedState=f.baseState=m,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:m},f.queue=i,i=i.dispatch=J0.bind(null,Te,i),[f.memoizedState,i]},useRef:function(i){var o=gt();return i={current:i},o.memoizedState=i},useState:function(i){i=Ya(i);var o=i.queue,l=lh.bind(null,Te,o);return o.dispatch=l,[i.memoizedState,l]},useDebugValue:Qa,useDeferredValue:function(i,o){var l=gt();return Xa(l,i,o)},useTransition:function(){var i=Ya(!1);return i=nh.bind(null,Te,i.queue,!0,!1),gt().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,l){var f=Te,m=gt();if(Ae){if(l===void 0)throw Error(s(407));l=l()}else{if(l=o(),qe===null)throw Error(s(349));(Ee&124)!==0||Nd(f,o,l)}m.memoizedState=l;var v={value:l,getSnapshot:o};return m.queue=v,Yd(Id.bind(null,f,v,i),[i]),f.flags|=2048,Qi(9,Ir(),Dd.bind(null,f,v,l,o),null),l},useId:function(){var i=gt(),o=qe.identifierPrefix;if(Ae){var l=rn,f=on;l=(f&~(1<<32-Ct(f)-1)).toString(32)+l,o="«"+o+"R"+l,l=kr++,0<l&&(o+="H"+l.toString(32)),o+="»"}else l=V0++,o="«"+o+"r"+l.toString(32)+"»";return i.memoizedState=o},useHostTransitionStatus:Za,useFormState:Gd,useActionState:Gd,useOptimistic:function(i){var o=gt();o.memoizedState=o.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=l,o=ja.bind(null,Te,!0,l),l.dispatch=o,[i,o]},useMemoCache:$a,useCacheRefresh:function(){return gt().memoizedState=F0.bind(null,Te)}},fh={readContext:ct,use:Nr,useCallback:jd,useContext:ct,useEffect:Kd,useImperativeHandle:Zd,useInsertionEffect:Qd,useLayoutEffect:Xd,useMemo:eh,useReducer:Dr,useRef:Jd,useState:function(){return Dr(un)},useDebugValue:Qa,useDeferredValue:function(i,o){var l=Qe();return th(l,De.memoizedState,i,o)},useTransition:function(){var i=Dr(un)[0],o=Qe().memoizedState;return[typeof i=="boolean"?i:lo(i),o]},useSyncExternalStore:kd,useId:oh,useHostTransitionStatus:Za,useFormState:zd,useActionState:zd,useOptimistic:function(i,o){var l=Qe();return Pd(l,De,i,o)},useMemoCache:$a,useCacheRefresh:rh},Y0={readContext:ct,use:Nr,useCallback:jd,useContext:ct,useEffect:Kd,useImperativeHandle:Zd,useInsertionEffect:Qd,useLayoutEffect:Xd,useMemo:eh,useReducer:Ja,useRef:Jd,useState:function(){return Ja(un)},useDebugValue:Qa,useDeferredValue:function(i,o){var l=Qe();return De===null?Xa(l,i,o):th(l,De.memoizedState,i,o)},useTransition:function(){var i=Ja(un)[0],o=Qe().memoizedState;return[typeof i=="boolean"?i:lo(i),o]},useSyncExternalStore:kd,useId:oh,useHostTransitionStatus:Za,useFormState:Fd,useActionState:Fd,useOptimistic:function(i,o){var l=Qe();return De!==null?Pd(l,De,i,o):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:$a,useCacheRefresh:rh},Xi=null,co=0;function qr(i){var o=co;return co+=1,Xi===null&&(Xi=[]),Cd(Xi,i,o)}function fo(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function Or(i,o){throw o.$$typeof===T?Error(s(525)):(i=Object.prototype.toString.call(o),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function dh(i){var o=i._init;return o(i._payload)}function hh(i){function o(D,R){if(i){var I=D.deletions;I===null?(D.deletions=[R],D.flags|=16):I.push(R)}}function l(D,R){if(!i)return null;for(;R!==null;)o(D,R),R=R.sibling;return null}function f(D){for(var R=new Map;D!==null;)D.key!==null?R.set(D.key,D):R.set(D.index,D),D=D.sibling;return R}function m(D,R){return D=sn(D,R),D.index=0,D.sibling=null,D}function v(D,R,I){return D.index=I,i?(I=D.alternate,I!==null?(I=I.index,I<R?(D.flags|=67108866,R):I):(D.flags|=67108866,R)):(D.flags|=1048576,R)}function S(D){return i&&D.alternate===null&&(D.flags|=67108866),D}function x(D,R,I,$){return R===null||R.tag!==6?(R=_a(I,D.mode,$),R.return=D,R):(R=m(R,I),R.return=D,R)}function b(D,R,I,$){var te=I.type;return te===w?z(D,R,I.props.children,$,I.key):R!==null&&(R.elementType===te||typeof te=="object"&&te!==null&&te.$$typeof===ue&&dh(te)===R.type)?(R=m(R,I.props),fo(R,I),R.return=D,R):(R=_r(I.type,I.key,I.props,null,D.mode,$),fo(R,I),R.return=D,R)}function L(D,R,I,$){return R===null||R.tag!==4||R.stateNode.containerInfo!==I.containerInfo||R.stateNode.implementation!==I.implementation?(R=Sa(I,D.mode,$),R.return=D,R):(R=m(R,I.children||[]),R.return=D,R)}function z(D,R,I,$,te){return R===null||R.tag!==7?(R=ni(I,D.mode,$,te),R.return=D,R):(R=m(R,I),R.return=D,R)}function F(D,R,I){if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return R=_a(""+R,D.mode,I),R.return=D,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case _:return I=_r(R.type,R.key,R.props,null,D.mode,I),fo(I,R),I.return=D,I;case E:return R=Sa(R,D.mode,I),R.return=D,R;case ue:var $=R._init;return R=$(R._payload),F(D,R,I)}if(ee(R)||pe(R))return R=ni(R,D.mode,I,null),R.return=D,R;if(typeof R.then=="function")return F(D,qr(R),I);if(R.$$typeof===M)return F(D,Er(D,R),I);Or(D,R)}return null}function P(D,R,I,$){var te=R!==null?R.key:null;if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return te!==null?null:x(D,R,""+I,$);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case _:return I.key===te?b(D,R,I,$):null;case E:return I.key===te?L(D,R,I,$):null;case ue:return te=I._init,I=te(I._payload),P(D,R,I,$)}if(ee(I)||pe(I))return te!==null?null:z(D,R,I,$,null);if(typeof I.then=="function")return P(D,R,qr(I),$);if(I.$$typeof===M)return P(D,R,Er(D,I),$);Or(D,I)}return null}function O(D,R,I,$,te){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return D=D.get(I)||null,x(R,D,""+$,te);if(typeof $=="object"&&$!==null){switch($.$$typeof){case _:return D=D.get($.key===null?I:$.key)||null,b(R,D,$,te);case E:return D=D.get($.key===null?I:$.key)||null,L(R,D,$,te);case ue:var _e=$._init;return $=_e($._payload),O(D,R,I,$,te)}if(ee($)||pe($))return D=D.get(I)||null,z(R,D,$,te,null);if(typeof $.then=="function")return O(D,R,I,qr($),te);if($.$$typeof===M)return O(D,R,I,Er(R,$),te);Or(R,$)}return null}function me(D,R,I,$){for(var te=null,_e=null,oe=R,de=R=0,it=null;oe!==null&&de<I.length;de++){oe.index>de?(it=oe,oe=null):it=oe.sibling;var be=P(D,oe,I[de],$);if(be===null){oe===null&&(oe=it);break}i&&oe&&be.alternate===null&&o(D,oe),R=v(be,R,de),_e===null?te=be:_e.sibling=be,_e=be,oe=it}if(de===I.length)return l(D,oe),Ae&&si(D,de),te;if(oe===null){for(;de<I.length;de++)oe=F(D,I[de],$),oe!==null&&(R=v(oe,R,de),_e===null?te=oe:_e.sibling=oe,_e=oe);return Ae&&si(D,de),te}for(oe=f(oe);de<I.length;de++)it=O(oe,D,de,I[de],$),it!==null&&(i&&it.alternate!==null&&oe.delete(it.key===null?de:it.key),R=v(it,R,de),_e===null?te=it:_e.sibling=it,_e=it);return i&&oe.forEach(function(Jn){return o(D,Jn)}),Ae&&si(D,de),te}function fe(D,R,I,$){if(I==null)throw Error(s(151));for(var te=null,_e=null,oe=R,de=R=0,it=null,be=I.next();oe!==null&&!be.done;de++,be=I.next()){oe.index>de?(it=oe,oe=null):it=oe.sibling;var Jn=P(D,oe,be.value,$);if(Jn===null){oe===null&&(oe=it);break}i&&oe&&Jn.alternate===null&&o(D,oe),R=v(Jn,R,de),_e===null?te=Jn:_e.sibling=Jn,_e=Jn,oe=it}if(be.done)return l(D,oe),Ae&&si(D,de),te;if(oe===null){for(;!be.done;de++,be=I.next())be=F(D,be.value,$),be!==null&&(R=v(be,R,de),_e===null?te=be:_e.sibling=be,_e=be);return Ae&&si(D,de),te}for(oe=f(oe);!be.done;de++,be=I.next())be=O(oe,D,de,be.value,$),be!==null&&(i&&be.alternate!==null&&oe.delete(be.key===null?de:be.key),R=v(be,R,de),_e===null?te=be:_e.sibling=be,_e=be);return i&&oe.forEach(function(KT){return o(D,KT)}),Ae&&si(D,de),te}function Ue(D,R,I,$){if(typeof I=="object"&&I!==null&&I.type===w&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case _:e:{for(var te=I.key;R!==null;){if(R.key===te){if(te=I.type,te===w){if(R.tag===7){l(D,R.sibling),$=m(R,I.props.children),$.return=D,D=$;break e}}else if(R.elementType===te||typeof te=="object"&&te!==null&&te.$$typeof===ue&&dh(te)===R.type){l(D,R.sibling),$=m(R,I.props),fo($,I),$.return=D,D=$;break e}l(D,R);break}else o(D,R);R=R.sibling}I.type===w?($=ni(I.props.children,D.mode,$,I.key),$.return=D,D=$):($=_r(I.type,I.key,I.props,null,D.mode,$),fo($,I),$.return=D,D=$)}return S(D);case E:e:{for(te=I.key;R!==null;){if(R.key===te)if(R.tag===4&&R.stateNode.containerInfo===I.containerInfo&&R.stateNode.implementation===I.implementation){l(D,R.sibling),$=m(R,I.children||[]),$.return=D,D=$;break e}else{l(D,R);break}else o(D,R);R=R.sibling}$=Sa(I,D.mode,$),$.return=D,D=$}return S(D);case ue:return te=I._init,I=te(I._payload),Ue(D,R,I,$)}if(ee(I))return me(D,R,I,$);if(pe(I)){if(te=pe(I),typeof te!="function")throw Error(s(150));return I=te.call(I),fe(D,R,I,$)}if(typeof I.then=="function")return Ue(D,R,qr(I),$);if(I.$$typeof===M)return Ue(D,R,Er(D,I),$);Or(D,I)}return typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint"?(I=""+I,R!==null&&R.tag===6?(l(D,R.sibling),$=m(R,I),$.return=D,D=$):(l(D,R),$=_a(I,D.mode,$),$.return=D,D=$),S(D)):l(D,R)}return function(D,R,I,$){try{co=0;var te=Ue(D,R,I,$);return Xi=null,te}catch(oe){if(oe===to||oe===br)throw oe;var _e=Et(29,oe,null,D.mode);return _e.lanes=$,_e.return=D,_e}finally{}}}var Wi=hh(!0),ph=hh(!1),qt=H(null),Qt=null;function Nn(i){var o=i.alternate;W(We,We.current&1),W(qt,i),Qt===null&&(o===null||Ji.current!==null||o.memoizedState!==null)&&(Qt=i)}function mh(i){if(i.tag===22){if(W(We,We.current),W(qt,i),Qt===null){var o=i.alternate;o!==null&&o.memoizedState!==null&&(Qt=i)}}else Dn()}function Dn(){W(We,We.current),W(qt,qt.current)}function cn(i){K(qt),Qt===i&&(Qt=null),K(We)}var We=H(0);function Br(i){for(var o=i;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||zu(l)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function eu(i,o,l,f){o=i.memoizedState,l=l(f,o),l=l==null?o:y({},o,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var tu={enqueueSetState:function(i,o,l){i=i._reactInternals;var f=Rt(),m=Rn(f);m.payload=o,l!=null&&(m.callback=l),o=Mn(i,m,f),o!==null&&(Mt(o,i,f),io(o,i,f))},enqueueReplaceState:function(i,o,l){i=i._reactInternals;var f=Rt(),m=Rn(f);m.tag=1,m.payload=o,l!=null&&(m.callback=l),o=Mn(i,m,f),o!==null&&(Mt(o,i,f),io(o,i,f))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var l=Rt(),f=Rn(l);f.tag=2,o!=null&&(f.callback=o),o=Mn(i,f,l),o!==null&&(Mt(o,i,l),io(o,i,l))}};function gh(i,o,l,f,m,v,S){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,v,S):o.prototype&&o.prototype.isPureReactComponent?!Ys(l,f)||!Ys(m,v):!0}function yh(i,o,l,f){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,f),o.state!==i&&tu.enqueueReplaceState(o,o.state,null)}function fi(i,o){var l=o;if("ref"in o){l={};for(var f in o)f!=="ref"&&(l[f]=o[f])}if(i=i.defaultProps){l===o&&(l=y({},l));for(var m in i)l[m]===void 0&&(l[m]=i[m])}return l}var Vr=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function vh(i){Vr(i)}function Th(i){console.error(i)}function _h(i){Vr(i)}function Hr(i,o){try{var l=i.onUncaughtError;l(o.value,{componentStack:o.stack})}catch(f){setTimeout(function(){throw f})}}function Sh(i,o,l){try{var f=i.onCaughtError;f(l.value,{componentStack:l.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function nu(i,o,l){return l=Rn(l),l.tag=3,l.payload={element:null},l.callback=function(){Hr(i,o)},l}function Ch(i){return i=Rn(i),i.tag=3,i}function xh(i,o,l,f){var m=l.type.getDerivedStateFromError;if(typeof m=="function"){var v=f.value;i.payload=function(){return m(v)},i.callback=function(){Sh(o,l,f)}}var S=l.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(i.callback=function(){Sh(o,l,f),typeof m!="function"&&(On===null?On=new Set([this]):On.add(this));var x=f.stack;this.componentDidCatch(f.value,{componentStack:x!==null?x:""})})}function K0(i,o,l,f,m){if(l.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(o=l.alternate,o!==null&&Zs(o,l,m,!0),l=qt.current,l!==null){switch(l.tag){case 13:return Qt===null?bu():l.alternate===null&&Fe===0&&(Fe=3),l.flags&=-257,l.flags|=65536,l.lanes=m,f===Na?l.flags|=16384:(o=l.updateQueue,o===null?l.updateQueue=new Set([f]):o.add(f),Ru(i,f,m)),!1;case 22:return l.flags|=65536,f===Na?l.flags|=16384:(o=l.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([f])},l.updateQueue=o):(l=o.retryQueue,l===null?o.retryQueue=new Set([f]):l.add(f)),Ru(i,f,m)),!1}throw Error(s(435,l.tag))}return Ru(i,f,m),bu(),!1}if(Ae)return o=qt.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=m,f!==Ea&&(i=Error(s(422),{cause:f}),Ws(It(i,l)))):(f!==Ea&&(o=Error(s(423),{cause:f}),Ws(It(o,l))),i=i.current.alternate,i.flags|=65536,m&=-m,i.lanes|=m,f=It(f,l),m=nu(i.stateNode,f,m),Ua(i,m),Fe!==4&&(Fe=2)),!1;var v=Error(s(520),{cause:f});if(v=It(v,l),To===null?To=[v]:To.push(v),Fe!==4&&(Fe=2),o===null)return!0;f=It(f,l),l=o;do{switch(l.tag){case 3:return l.flags|=65536,i=m&-m,l.lanes|=i,i=nu(l.stateNode,f,i),Ua(l,i),!1;case 1:if(o=l.type,v=l.stateNode,(l.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(On===null||!On.has(v))))return l.flags|=65536,m&=-m,l.lanes|=m,m=Ch(m),xh(m,i,l,f),Ua(l,m),!1}l=l.return}while(l!==null);return!1}var Eh=Error(s(461)),tt=!1;function rt(i,o,l,f){o.child=i===null?ph(o,null,l,f):Wi(o,i.child,l,f)}function wh(i,o,l,f,m){l=l.render;var v=o.ref;if("ref"in f){var S={};for(var x in f)x!=="ref"&&(S[x]=f[x])}else S=f;return ai(o),f=Ba(i,o,l,S,v,m),x=Va(),i!==null&&!tt?(Ha(i,o,m),fn(i,o,m)):(Ae&&x&&Ca(o),o.flags|=1,rt(i,o,f,m),o.child)}function bh(i,o,l,f,m){if(i===null){var v=l.type;return typeof v=="function"&&!Ta(v)&&v.defaultProps===void 0&&l.compare===null?(o.tag=15,o.type=v,Ah(i,o,v,f,m)):(i=_r(l.type,null,f,o,o.mode,m),i.ref=o.ref,i.return=o,o.child=i)}if(v=i.child,!cu(i,m)){var S=v.memoizedProps;if(l=l.compare,l=l!==null?l:Ys,l(S,f)&&i.ref===o.ref)return fn(i,o,m)}return o.flags|=1,i=sn(v,f),i.ref=o.ref,i.return=o,o.child=i}function Ah(i,o,l,f,m){if(i!==null){var v=i.memoizedProps;if(Ys(v,f)&&i.ref===o.ref)if(tt=!1,o.pendingProps=f=v,cu(i,m))(i.flags&131072)!==0&&(tt=!0);else return o.lanes=i.lanes,fn(i,o,m)}return iu(i,o,l,f,m)}function Rh(i,o,l){var f=o.pendingProps,m=f.children,v=i!==null?i.memoizedState:null;if(f.mode==="hidden"){if((o.flags&128)!==0){if(f=v!==null?v.baseLanes|l:l,i!==null){for(m=o.child=i.child,v=0;m!==null;)v=v|m.lanes|m.childLanes,m=m.sibling;o.childLanes=v&~f}else o.childLanes=0,o.child=null;return Mh(i,o,f,l)}if((l&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&wr(o,v!==null?v.cachePool:null),v!==null?Ad(o,v):Pa(),mh(o);else return o.lanes=o.childLanes=536870912,Mh(i,o,v!==null?v.baseLanes|l:l,l)}else v!==null?(wr(o,v.cachePool),Ad(o,v),Dn(),o.memoizedState=null):(i!==null&&wr(o,null),Pa(),Dn());return rt(i,o,m,l),o.child}function Mh(i,o,l,f){var m=ka();return m=m===null?null:{parent:Xe._currentValue,pool:m},o.memoizedState={baseLanes:l,cachePool:m},i!==null&&wr(o,null),Pa(),mh(o),i!==null&&Zs(i,o,f,!0),null}function Gr(i,o){var l=o.ref;if(l===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(s(284));(i===null||i.ref!==l)&&(o.flags|=4194816)}}function iu(i,o,l,f,m){return ai(o),l=Ba(i,o,l,f,void 0,m),f=Va(),i!==null&&!tt?(Ha(i,o,m),fn(i,o,m)):(Ae&&f&&Ca(o),o.flags|=1,rt(i,o,l,m),o.child)}function kh(i,o,l,f,m,v){return ai(o),o.updateQueue=null,l=Md(o,f,l,m),Rd(i),f=Va(),i!==null&&!tt?(Ha(i,o,v),fn(i,o,v)):(Ae&&f&&Ca(o),o.flags|=1,rt(i,o,l,v),o.child)}function Nh(i,o,l,f,m){if(ai(o),o.stateNode===null){var v=Hi,S=l.contextType;typeof S=="object"&&S!==null&&(v=ct(S)),v=new l(f,v),o.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=tu,o.stateNode=v,v._reactInternals=o,v=o.stateNode,v.props=f,v.state=o.memoizedState,v.refs={},Da(o),S=l.contextType,v.context=typeof S=="object"&&S!==null?ct(S):Hi,v.state=o.memoizedState,S=l.getDerivedStateFromProps,typeof S=="function"&&(eu(o,l,S,f),v.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(S=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),S!==v.state&&tu.enqueueReplaceState(v,v.state,null),oo(o,f,v,m),so(),v.state=o.memoizedState),typeof v.componentDidMount=="function"&&(o.flags|=4194308),f=!0}else if(i===null){v=o.stateNode;var x=o.memoizedProps,b=fi(l,x);v.props=b;var L=v.context,z=l.contextType;S=Hi,typeof z=="object"&&z!==null&&(S=ct(z));var F=l.getDerivedStateFromProps;z=typeof F=="function"||typeof v.getSnapshotBeforeUpdate=="function",x=o.pendingProps!==x,z||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(x||L!==S)&&yh(o,v,f,S),An=!1;var P=o.memoizedState;v.state=P,oo(o,f,v,m),so(),L=o.memoizedState,x||P!==L||An?(typeof F=="function"&&(eu(o,l,F,f),L=o.memoizedState),(b=An||gh(o,l,b,f,P,L,S))?(z||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(o.flags|=4194308)):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=L),v.props=f,v.state=L,v.context=S,f=b):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{v=o.stateNode,Ia(i,o),S=o.memoizedProps,z=fi(l,S),v.props=z,F=o.pendingProps,P=v.context,L=l.contextType,b=Hi,typeof L=="object"&&L!==null&&(b=ct(L)),x=l.getDerivedStateFromProps,(L=typeof x=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==F||P!==b)&&yh(o,v,f,b),An=!1,P=o.memoizedState,v.state=P,oo(o,f,v,m),so();var O=o.memoizedState;S!==F||P!==O||An||i!==null&&i.dependencies!==null&&xr(i.dependencies)?(typeof x=="function"&&(eu(o,l,x,f),O=o.memoizedState),(z=An||gh(o,l,z,f,P,O,b)||i!==null&&i.dependencies!==null&&xr(i.dependencies))?(L||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(f,O,b),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(f,O,b)),typeof v.componentDidUpdate=="function"&&(o.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof v.componentDidUpdate!="function"||S===i.memoizedProps&&P===i.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&P===i.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=O),v.props=f,v.state=O,v.context=b,f=z):(typeof v.componentDidUpdate!="function"||S===i.memoizedProps&&P===i.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&P===i.memoizedState||(o.flags|=1024),f=!1)}return v=f,Gr(i,o),f=(o.flags&128)!==0,v||f?(v=o.stateNode,l=f&&typeof l.getDerivedStateFromError!="function"?null:v.render(),o.flags|=1,i!==null&&f?(o.child=Wi(o,i.child,null,m),o.child=Wi(o,null,l,m)):rt(i,o,l,m),o.memoizedState=v.state,i=o.child):i=fn(i,o,m),i}function Dh(i,o,l,f){return Xs(),o.flags|=256,rt(i,o,l,f),o.child}var su={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ou(i){return{baseLanes:i,cachePool:Td()}}function ru(i,o,l){return i=i!==null?i.childLanes&~l:0,o&&(i|=Ot),i}function Ih(i,o,l){var f=o.pendingProps,m=!1,v=(o.flags&128)!==0,S;if((S=v)||(S=i!==null&&i.memoizedState===null?!1:(We.current&2)!==0),S&&(m=!0,o.flags&=-129),S=(o.flags&32)!==0,o.flags&=-33,i===null){if(Ae){if(m?Nn(o):Dn(),Ae){var x=$e,b;if(b=x){e:{for(b=x,x=Kt;b.nodeType!==8;){if(!x){x=null;break e}if(b=zt(b.nextSibling),b===null){x=null;break e}}x=b}x!==null?(o.memoizedState={dehydrated:x,treeContext:ii!==null?{id:on,overflow:rn}:null,retryLane:536870912,hydrationErrors:null},b=Et(18,null,null,0),b.stateNode=x,b.return=o,o.child=b,ht=o,$e=null,b=!0):b=!1}b||ri(o)}if(x=o.memoizedState,x!==null&&(x=x.dehydrated,x!==null))return zu(x)?o.lanes=32:o.lanes=536870912,null;cn(o)}return x=f.children,f=f.fallback,m?(Dn(),m=o.mode,x=zr({mode:"hidden",children:x},m),f=ni(f,m,l,null),x.return=o,f.return=o,x.sibling=f,o.child=x,m=o.child,m.memoizedState=ou(l),m.childLanes=ru(i,S,l),o.memoizedState=su,f):(Nn(o),lu(o,x))}if(b=i.memoizedState,b!==null&&(x=b.dehydrated,x!==null)){if(v)o.flags&256?(Nn(o),o.flags&=-257,o=au(i,o,l)):o.memoizedState!==null?(Dn(),o.child=i.child,o.flags|=128,o=null):(Dn(),m=f.fallback,x=o.mode,f=zr({mode:"visible",children:f.children},x),m=ni(m,x,l,null),m.flags|=2,f.return=o,m.return=o,f.sibling=m,o.child=f,Wi(o,i.child,null,l),f=o.child,f.memoizedState=ou(l),f.childLanes=ru(i,S,l),o.memoizedState=su,o=m);else if(Nn(o),zu(x)){if(S=x.nextSibling&&x.nextSibling.dataset,S)var L=S.dgst;S=L,f=Error(s(419)),f.stack="",f.digest=S,Ws({value:f,source:null,stack:null}),o=au(i,o,l)}else if(tt||Zs(i,o,l,!1),S=(l&i.childLanes)!==0,tt||S){if(S=qe,S!==null&&(f=l&-l,f=(f&42)!==0?1:$l(f),f=(f&(S.suspendedLanes|l))!==0?0:f,f!==0&&f!==b.retryLane))throw b.retryLane=f,Vi(i,f),Mt(S,i,f),Eh;x.data==="$?"||bu(),o=au(i,o,l)}else x.data==="$?"?(o.flags|=192,o.child=i.child,o=null):(i=b.treeContext,$e=zt(x.nextSibling),ht=o,Ae=!0,oi=null,Kt=!1,i!==null&&(Lt[Pt++]=on,Lt[Pt++]=rn,Lt[Pt++]=ii,on=i.id,rn=i.overflow,ii=o),o=lu(o,f.children),o.flags|=4096);return o}return m?(Dn(),m=f.fallback,x=o.mode,b=i.child,L=b.sibling,f=sn(b,{mode:"hidden",children:f.children}),f.subtreeFlags=b.subtreeFlags&65011712,L!==null?m=sn(L,m):(m=ni(m,x,l,null),m.flags|=2),m.return=o,f.return=o,f.sibling=m,o.child=f,f=m,m=o.child,x=i.child.memoizedState,x===null?x=ou(l):(b=x.cachePool,b!==null?(L=Xe._currentValue,b=b.parent!==L?{parent:L,pool:L}:b):b=Td(),x={baseLanes:x.baseLanes|l,cachePool:b}),m.memoizedState=x,m.childLanes=ru(i,S,l),o.memoizedState=su,f):(Nn(o),l=i.child,i=l.sibling,l=sn(l,{mode:"visible",children:f.children}),l.return=o,l.sibling=null,i!==null&&(S=o.deletions,S===null?(o.deletions=[i],o.flags|=16):S.push(i)),o.child=l,o.memoizedState=null,l)}function lu(i,o){return o=zr({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function zr(i,o){return i=Et(22,i,null,o),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function au(i,o,l){return Wi(o,i.child,null,l),i=lu(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function Uh(i,o,l){i.lanes|=o;var f=i.alternate;f!==null&&(f.lanes|=o),ba(i.return,o,l)}function uu(i,o,l,f,m){var v=i.memoizedState;v===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:l,tailMode:m}:(v.isBackwards=o,v.rendering=null,v.renderingStartTime=0,v.last=f,v.tail=l,v.tailMode=m)}function Lh(i,o,l){var f=o.pendingProps,m=f.revealOrder,v=f.tail;if(rt(i,o,f.children,l),f=We.current,(f&2)!==0)f=f&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Uh(i,l,o);else if(i.tag===19)Uh(i,l,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}f&=1}switch(W(We,f),m){case"forwards":for(l=o.child,m=null;l!==null;)i=l.alternate,i!==null&&Br(i)===null&&(m=l),l=l.sibling;l=m,l===null?(m=o.child,o.child=null):(m=l.sibling,l.sibling=null),uu(o,!1,m,l,v);break;case"backwards":for(l=null,m=o.child,o.child=null;m!==null;){if(i=m.alternate,i!==null&&Br(i)===null){o.child=m;break}i=m.sibling,m.sibling=l,l=m,m=i}uu(o,!0,l,null,v);break;case"together":uu(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function fn(i,o,l){if(i!==null&&(o.dependencies=i.dependencies),qn|=o.lanes,(l&o.childLanes)===0)if(i!==null){if(Zs(i,o,l,!1),(l&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(s(153));if(o.child!==null){for(i=o.child,l=sn(i,i.pendingProps),o.child=l,l.return=o;i.sibling!==null;)i=i.sibling,l=l.sibling=sn(i,i.pendingProps),l.return=o;l.sibling=null}return o.child}function cu(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&xr(i)))}function Q0(i,o,l){switch(o.tag){case 3:He(o,o.stateNode.containerInfo),bn(o,Xe,i.memoizedState.cache),Xs();break;case 27:case 5:Bl(o);break;case 4:He(o,o.stateNode.containerInfo);break;case 10:bn(o,o.type,o.memoizedProps.value);break;case 13:var f=o.memoizedState;if(f!==null)return f.dehydrated!==null?(Nn(o),o.flags|=128,null):(l&o.child.childLanes)!==0?Ih(i,o,l):(Nn(o),i=fn(i,o,l),i!==null?i.sibling:null);Nn(o);break;case 19:var m=(i.flags&128)!==0;if(f=(l&o.childLanes)!==0,f||(Zs(i,o,l,!1),f=(l&o.childLanes)!==0),m){if(f)return Lh(i,o,l);o.flags|=128}if(m=o.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),W(We,We.current),f)break;return null;case 22:case 23:return o.lanes=0,Rh(i,o,l);case 24:bn(o,Xe,i.memoizedState.cache)}return fn(i,o,l)}function Ph(i,o,l){if(i!==null)if(i.memoizedProps!==o.pendingProps)tt=!0;else{if(!cu(i,l)&&(o.flags&128)===0)return tt=!1,Q0(i,o,l);tt=(i.flags&131072)!==0}else tt=!1,Ae&&(o.flags&1048576)!==0&&dd(o,Cr,o.index);switch(o.lanes=0,o.tag){case 16:e:{i=o.pendingProps;var f=o.elementType,m=f._init;if(f=m(f._payload),o.type=f,typeof f=="function")Ta(f)?(i=fi(f,i),o.tag=1,o=Nh(null,o,f,i,l)):(o.tag=0,o=iu(null,o,f,i,l));else{if(f!=null){if(m=f.$$typeof,m===J){o.tag=11,o=wh(null,o,f,i,l);break e}else if(m===j){o.tag=14,o=bh(null,o,f,i,l);break e}}throw o=re(f)||f,Error(s(306,o,""))}}return o;case 0:return iu(i,o,o.type,o.pendingProps,l);case 1:return f=o.type,m=fi(f,o.pendingProps),Nh(i,o,f,m,l);case 3:e:{if(He(o,o.stateNode.containerInfo),i===null)throw Error(s(387));f=o.pendingProps;var v=o.memoizedState;m=v.element,Ia(i,o),oo(o,f,null,l);var S=o.memoizedState;if(f=S.cache,bn(o,Xe,f),f!==v.cache&&Aa(o,[Xe],l,!0),so(),f=S.element,v.isDehydrated)if(v={element:f,isDehydrated:!1,cache:S.cache},o.updateQueue.baseState=v,o.memoizedState=v,o.flags&256){o=Dh(i,o,f,l);break e}else if(f!==m){m=It(Error(s(424)),o),Ws(m),o=Dh(i,o,f,l);break e}else{switch(i=o.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for($e=zt(i.firstChild),ht=o,Ae=!0,oi=null,Kt=!0,l=ph(o,null,f,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Xs(),f===m){o=fn(i,o,l);break e}rt(i,o,f,l)}o=o.child}return o;case 26:return Gr(i,o),i===null?(l=Vp(o.type,null,o.pendingProps,null))?o.memoizedState=l:Ae||(l=o.type,i=o.pendingProps,f=il(ge.current).createElement(l),f[ut]=o,f[pt]=i,at(f,l,i),et(f),o.stateNode=f):o.memoizedState=Vp(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return Bl(o),i===null&&Ae&&(f=o.stateNode=qp(o.type,o.pendingProps,ge.current),ht=o,Kt=!0,m=$e,Hn(o.type)?($u=m,$e=zt(f.firstChild)):$e=m),rt(i,o,o.pendingProps.children,l),Gr(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&Ae&&((m=f=$e)&&(f=xT(f,o.type,o.pendingProps,Kt),f!==null?(o.stateNode=f,ht=o,$e=zt(f.firstChild),Kt=!1,m=!0):m=!1),m||ri(o)),Bl(o),m=o.type,v=o.pendingProps,S=i!==null?i.memoizedProps:null,f=v.children,Vu(m,v)?f=null:S!==null&&Vu(m,S)&&(o.flags|=32),o.memoizedState!==null&&(m=Ba(i,o,H0,null,null,l),Ro._currentValue=m),Gr(i,o),rt(i,o,f,l),o.child;case 6:return i===null&&Ae&&((i=l=$e)&&(l=ET(l,o.pendingProps,Kt),l!==null?(o.stateNode=l,ht=o,$e=null,i=!0):i=!1),i||ri(o)),null;case 13:return Ih(i,o,l);case 4:return He(o,o.stateNode.containerInfo),f=o.pendingProps,i===null?o.child=Wi(o,null,f,l):rt(i,o,f,l),o.child;case 11:return wh(i,o,o.type,o.pendingProps,l);case 7:return rt(i,o,o.pendingProps,l),o.child;case 8:return rt(i,o,o.pendingProps.children,l),o.child;case 12:return rt(i,o,o.pendingProps.children,l),o.child;case 10:return f=o.pendingProps,bn(o,o.type,f.value),rt(i,o,f.children,l),o.child;case 9:return m=o.type._context,f=o.pendingProps.children,ai(o),m=ct(m),f=f(m),o.flags|=1,rt(i,o,f,l),o.child;case 14:return bh(i,o,o.type,o.pendingProps,l);case 15:return Ah(i,o,o.type,o.pendingProps,l);case 19:return Lh(i,o,l);case 31:return f=o.pendingProps,l=o.mode,f={mode:f.mode,children:f.children},i===null?(l=zr(f,l),l.ref=o.ref,o.child=l,l.return=o,o=l):(l=sn(i.child,f),l.ref=o.ref,o.child=l,l.return=o,o=l),o;case 22:return Rh(i,o,l);case 24:return ai(o),f=ct(Xe),i===null?(m=ka(),m===null&&(m=qe,v=Ra(),m.pooledCache=v,v.refCount++,v!==null&&(m.pooledCacheLanes|=l),m=v),o.memoizedState={parent:f,cache:m},Da(o),bn(o,Xe,m)):((i.lanes&l)!==0&&(Ia(i,o),oo(o,null,null,l),so()),m=i.memoizedState,v=o.memoizedState,m.parent!==f?(m={parent:f,cache:f},o.memoizedState=m,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=m),bn(o,Xe,f)):(f=v.cache,bn(o,Xe,f),f!==m.cache&&Aa(o,[Xe],l,!0))),rt(i,o,o.pendingProps.children,l),o.child;case 29:throw o.pendingProps}throw Error(s(156,o.tag))}function dn(i){i.flags|=4}function qh(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Fp(o)){if(o=qt.current,o!==null&&((Ee&4194048)===Ee?Qt!==null:(Ee&62914560)!==Ee&&(Ee&536870912)===0||o!==Qt))throw no=Na,_d;i.flags|=8192}}function $r(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?mf():536870912,i.lanes|=o,ts|=o)}function ho(i,o){if(!Ae)switch(i.tailMode){case"hidden":o=i.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function ze(i){var o=i.alternate!==null&&i.alternate.child===i.child,l=0,f=0;if(o)for(var m=i.child;m!==null;)l|=m.lanes|m.childLanes,f|=m.subtreeFlags&65011712,f|=m.flags&65011712,m.return=i,m=m.sibling;else for(m=i.child;m!==null;)l|=m.lanes|m.childLanes,f|=m.subtreeFlags,f|=m.flags,m.return=i,m=m.sibling;return i.subtreeFlags|=f,i.childLanes=l,o}function X0(i,o,l){var f=o.pendingProps;switch(xa(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ze(o),null;case 1:return ze(o),null;case 3:return l=o.stateNode,f=null,i!==null&&(f=i.memoizedState.cache),o.memoizedState.cache!==f&&(o.flags|=2048),an(Xe),Cn(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(Qs(o)?dn(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,md())),ze(o),null;case 26:return l=o.memoizedState,i===null?(dn(o),l!==null?(ze(o),qh(o,l)):(ze(o),o.flags&=-16777217)):l?l!==i.memoizedState?(dn(o),ze(o),qh(o,l)):(ze(o),o.flags&=-16777217):(i.memoizedProps!==f&&dn(o),ze(o),o.flags&=-16777217),null;case 27:tr(o),l=ge.current;var m=o.type;if(i!==null&&o.stateNode!=null)i.memoizedProps!==f&&dn(o);else{if(!f){if(o.stateNode===null)throw Error(s(166));return ze(o),null}i=ce.current,Qs(o)?hd(o):(i=qp(m,f,l),o.stateNode=i,dn(o))}return ze(o),null;case 5:if(tr(o),l=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==f&&dn(o);else{if(!f){if(o.stateNode===null)throw Error(s(166));return ze(o),null}if(i=ce.current,Qs(o))hd(o);else{switch(m=il(ge.current),i){case 1:i=m.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:i=m.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":i=m.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":i=m.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":i=m.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof f.is=="string"?m.createElement("select",{is:f.is}):m.createElement("select"),f.multiple?i.multiple=!0:f.size&&(i.size=f.size);break;default:i=typeof f.is=="string"?m.createElement(l,{is:f.is}):m.createElement(l)}}i[ut]=o,i[pt]=f;e:for(m=o.child;m!==null;){if(m.tag===5||m.tag===6)i.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===o)break e;for(;m.sibling===null;){if(m.return===null||m.return===o)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}o.stateNode=i;e:switch(at(i,l,f),l){case"button":case"input":case"select":case"textarea":i=!!f.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&dn(o)}}return ze(o),o.flags&=-16777217,null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==f&&dn(o);else{if(typeof f!="string"&&o.stateNode===null)throw Error(s(166));if(i=ge.current,Qs(o)){if(i=o.stateNode,l=o.memoizedProps,f=null,m=ht,m!==null)switch(m.tag){case 27:case 5:f=m.memoizedProps}i[ut]=o,i=!!(i.nodeValue===l||f!==null&&f.suppressHydrationWarning===!0||kp(i.nodeValue,l)),i||ri(o)}else i=il(i).createTextNode(f),i[ut]=o,o.stateNode=i}return ze(o),null;case 13:if(f=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(m=Qs(o),f!==null&&f.dehydrated!==null){if(i===null){if(!m)throw Error(s(318));if(m=o.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));m[ut]=o}else Xs(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;ze(o),m=!1}else m=md(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=m),m=!0;if(!m)return o.flags&256?(cn(o),o):(cn(o),null)}if(cn(o),(o.flags&128)!==0)return o.lanes=l,o;if(l=f!==null,i=i!==null&&i.memoizedState!==null,l){f=o.child,m=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(m=f.alternate.memoizedState.cachePool.pool);var v=null;f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(v=f.memoizedState.cachePool.pool),v!==m&&(f.flags|=2048)}return l!==i&&l&&(o.child.flags|=8192),$r(o,o.updateQueue),ze(o),null;case 4:return Cn(),i===null&&Lu(o.stateNode.containerInfo),ze(o),null;case 10:return an(o.type),ze(o),null;case 19:if(K(We),m=o.memoizedState,m===null)return ze(o),null;if(f=(o.flags&128)!==0,v=m.rendering,v===null)if(f)ho(m,!1);else{if(Fe!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(v=Br(i),v!==null){for(o.flags|=128,ho(m,!1),i=v.updateQueue,o.updateQueue=i,$r(o,i),o.subtreeFlags=0,i=l,l=o.child;l!==null;)fd(l,i),l=l.sibling;return W(We,We.current&1|2),o.child}i=i.sibling}m.tail!==null&&Yt()>Yr&&(o.flags|=128,f=!0,ho(m,!1),o.lanes=4194304)}else{if(!f)if(i=Br(v),i!==null){if(o.flags|=128,f=!0,i=i.updateQueue,o.updateQueue=i,$r(o,i),ho(m,!0),m.tail===null&&m.tailMode==="hidden"&&!v.alternate&&!Ae)return ze(o),null}else 2*Yt()-m.renderingStartTime>Yr&&l!==536870912&&(o.flags|=128,f=!0,ho(m,!1),o.lanes=4194304);m.isBackwards?(v.sibling=o.child,o.child=v):(i=m.last,i!==null?i.sibling=v:o.child=v,m.last=v)}return m.tail!==null?(o=m.tail,m.rendering=o,m.tail=o.sibling,m.renderingStartTime=Yt(),o.sibling=null,i=We.current,W(We,f?i&1|2:i&1),o):(ze(o),null);case 22:case 23:return cn(o),qa(),f=o.memoizedState!==null,i!==null?i.memoizedState!==null!==f&&(o.flags|=8192):f&&(o.flags|=8192),f?(l&536870912)!==0&&(o.flags&128)===0&&(ze(o),o.subtreeFlags&6&&(o.flags|=8192)):ze(o),l=o.updateQueue,l!==null&&$r(o,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),f=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==l&&(o.flags|=2048),i!==null&&K(ui),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),o.memoizedState.cache!==l&&(o.flags|=2048),an(Xe),ze(o),null;case 25:return null;case 30:return null}throw Error(s(156,o.tag))}function W0(i,o){switch(xa(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return an(Xe),Cn(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return tr(o),null;case 13:if(cn(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(s(340));Xs()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return K(We),null;case 4:return Cn(),null;case 10:return an(o.type),null;case 22:case 23:return cn(o),qa(),i!==null&&K(ui),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return an(Xe),null;case 25:return null;default:return null}}function Oh(i,o){switch(xa(o),o.tag){case 3:an(Xe),Cn();break;case 26:case 27:case 5:tr(o);break;case 4:Cn();break;case 13:cn(o);break;case 19:K(We);break;case 10:an(o.type);break;case 22:case 23:cn(o),qa(),i!==null&&K(ui);break;case 24:an(Xe)}}function po(i,o){try{var l=o.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var m=f.next;l=m;do{if((l.tag&i)===i){f=void 0;var v=l.create,S=l.inst;f=v(),S.destroy=f}l=l.next}while(l!==m)}}catch(x){Pe(o,o.return,x)}}function In(i,o,l){try{var f=o.updateQueue,m=f!==null?f.lastEffect:null;if(m!==null){var v=m.next;f=v;do{if((f.tag&i)===i){var S=f.inst,x=S.destroy;if(x!==void 0){S.destroy=void 0,m=o;var b=l,L=x;try{L()}catch(z){Pe(m,b,z)}}}f=f.next}while(f!==v)}}catch(z){Pe(o,o.return,z)}}function Bh(i){var o=i.updateQueue;if(o!==null){var l=i.stateNode;try{bd(o,l)}catch(f){Pe(i,i.return,f)}}}function Vh(i,o,l){l.props=fi(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(f){Pe(i,o,f)}}function mo(i,o){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var f=i.stateNode;break;case 30:f=i.stateNode;break;default:f=i.stateNode}typeof l=="function"?i.refCleanup=l(f):l.current=f}}catch(m){Pe(i,o,m)}}function Xt(i,o){var l=i.ref,f=i.refCleanup;if(l!==null)if(typeof f=="function")try{f()}catch(m){Pe(i,o,m)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(m){Pe(i,o,m)}else l.current=null}function Hh(i){var o=i.type,l=i.memoizedProps,f=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":l.autoFocus&&f.focus();break e;case"img":l.src?f.src=l.src:l.srcSet&&(f.srcset=l.srcSet)}}catch(m){Pe(i,i.return,m)}}function fu(i,o,l){try{var f=i.stateNode;vT(f,i.type,l,o),f[pt]=o}catch(m){Pe(i,i.return,m)}}function Gh(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Hn(i.type)||i.tag===4}function du(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Gh(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Hn(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function hu(i,o,l){var f=i.tag;if(f===5||f===6)i=i.stateNode,o?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,o):(o=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,o.appendChild(i),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=nl));else if(f!==4&&(f===27&&Hn(i.type)&&(l=i.stateNode,o=null),i=i.child,i!==null))for(hu(i,o,l),i=i.sibling;i!==null;)hu(i,o,l),i=i.sibling}function Fr(i,o,l){var f=i.tag;if(f===5||f===6)i=i.stateNode,o?l.insertBefore(i,o):l.appendChild(i);else if(f!==4&&(f===27&&Hn(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(Fr(i,o,l),i=i.sibling;i!==null;)Fr(i,o,l),i=i.sibling}function zh(i){var o=i.stateNode,l=i.memoizedProps;try{for(var f=i.type,m=o.attributes;m.length;)o.removeAttributeNode(m[0]);at(o,f,l),o[ut]=i,o[pt]=l}catch(v){Pe(i,i.return,v)}}var hn=!1,Ye=!1,pu=!1,$h=typeof WeakSet=="function"?WeakSet:Set,nt=null;function Z0(i,o){if(i=i.containerInfo,Ou=ul,i=td(i),da(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var f=l.getSelection&&l.getSelection();if(f&&f.rangeCount!==0){l=f.anchorNode;var m=f.anchorOffset,v=f.focusNode;f=f.focusOffset;try{l.nodeType,v.nodeType}catch{l=null;break e}var S=0,x=-1,b=-1,L=0,z=0,F=i,P=null;t:for(;;){for(var O;F!==l||m!==0&&F.nodeType!==3||(x=S+m),F!==v||f!==0&&F.nodeType!==3||(b=S+f),F.nodeType===3&&(S+=F.nodeValue.length),(O=F.firstChild)!==null;)P=F,F=O;for(;;){if(F===i)break t;if(P===l&&++L===m&&(x=S),P===v&&++z===f&&(b=S),(O=F.nextSibling)!==null)break;F=P,P=F.parentNode}F=O}l=x===-1||b===-1?null:{start:x,end:b}}else l=null}l=l||{start:0,end:0}}else l=null;for(Bu={focusedElem:i,selectionRange:l},ul=!1,nt=o;nt!==null;)if(o=nt,i=o.child,(o.subtreeFlags&1024)!==0&&i!==null)i.return=o,nt=i;else for(;nt!==null;){switch(o=nt,v=o.alternate,i=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&v!==null){i=void 0,l=o,m=v.memoizedProps,v=v.memoizedState,f=l.stateNode;try{var me=fi(l.type,m,l.elementType===l.type);i=f.getSnapshotBeforeUpdate(me,v),f.__reactInternalSnapshotBeforeUpdate=i}catch(fe){Pe(l,l.return,fe)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,l=i.nodeType,l===9)Gu(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Gu(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=o.sibling,i!==null){i.return=o.return,nt=i;break}nt=o.return}}function Fh(i,o,l){var f=l.flags;switch(l.tag){case 0:case 11:case 15:Un(i,l),f&4&&po(5,l);break;case 1:if(Un(i,l),f&4)if(i=l.stateNode,o===null)try{i.componentDidMount()}catch(S){Pe(l,l.return,S)}else{var m=fi(l.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(m,o,i.__reactInternalSnapshotBeforeUpdate)}catch(S){Pe(l,l.return,S)}}f&64&&Bh(l),f&512&&mo(l,l.return);break;case 3:if(Un(i,l),f&64&&(i=l.updateQueue,i!==null)){if(o=null,l.child!==null)switch(l.child.tag){case 27:case 5:o=l.child.stateNode;break;case 1:o=l.child.stateNode}try{bd(i,o)}catch(S){Pe(l,l.return,S)}}break;case 27:o===null&&f&4&&zh(l);case 26:case 5:Un(i,l),o===null&&f&4&&Hh(l),f&512&&mo(l,l.return);break;case 12:Un(i,l);break;case 13:Un(i,l),f&4&&Kh(i,l),f&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=lT.bind(null,l),wT(i,l))));break;case 22:if(f=l.memoizedState!==null||hn,!f){o=o!==null&&o.memoizedState!==null||Ye,m=hn;var v=Ye;hn=f,(Ye=o)&&!v?Ln(i,l,(l.subtreeFlags&8772)!==0):Un(i,l),hn=m,Ye=v}break;case 30:break;default:Un(i,l)}}function Jh(i){var o=i.alternate;o!==null&&(i.alternate=null,Jh(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&Yl(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Ge=null,yt=!1;function pn(i,o,l){for(l=l.child;l!==null;)Yh(i,o,l),l=l.sibling}function Yh(i,o,l){if(St&&typeof St.onCommitFiberUnmount=="function")try{St.onCommitFiberUnmount(Ls,l)}catch{}switch(l.tag){case 26:Ye||Xt(l,o),pn(i,o,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Ye||Xt(l,o);var f=Ge,m=yt;Hn(l.type)&&(Ge=l.stateNode,yt=!1),pn(i,o,l),Eo(l.stateNode),Ge=f,yt=m;break;case 5:Ye||Xt(l,o);case 6:if(f=Ge,m=yt,Ge=null,pn(i,o,l),Ge=f,yt=m,Ge!==null)if(yt)try{(Ge.nodeType===9?Ge.body:Ge.nodeName==="HTML"?Ge.ownerDocument.body:Ge).removeChild(l.stateNode)}catch(v){Pe(l,o,v)}else try{Ge.removeChild(l.stateNode)}catch(v){Pe(l,o,v)}break;case 18:Ge!==null&&(yt?(i=Ge,Lp(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),Do(i)):Lp(Ge,l.stateNode));break;case 4:f=Ge,m=yt,Ge=l.stateNode.containerInfo,yt=!0,pn(i,o,l),Ge=f,yt=m;break;case 0:case 11:case 14:case 15:Ye||In(2,l,o),Ye||In(4,l,o),pn(i,o,l);break;case 1:Ye||(Xt(l,o),f=l.stateNode,typeof f.componentWillUnmount=="function"&&Vh(l,o,f)),pn(i,o,l);break;case 21:pn(i,o,l);break;case 22:Ye=(f=Ye)||l.memoizedState!==null,pn(i,o,l),Ye=f;break;default:pn(i,o,l)}}function Kh(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Do(i)}catch(l){Pe(o,o.return,l)}}function j0(i){switch(i.tag){case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new $h),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new $h),o;default:throw Error(s(435,i.tag))}}function mu(i,o){var l=j0(i);o.forEach(function(f){var m=aT.bind(null,i,f);l.has(f)||(l.add(f),f.then(m,m))})}function wt(i,o){var l=o.deletions;if(l!==null)for(var f=0;f<l.length;f++){var m=l[f],v=i,S=o,x=S;e:for(;x!==null;){switch(x.tag){case 27:if(Hn(x.type)){Ge=x.stateNode,yt=!1;break e}break;case 5:Ge=x.stateNode,yt=!1;break e;case 3:case 4:Ge=x.stateNode.containerInfo,yt=!0;break e}x=x.return}if(Ge===null)throw Error(s(160));Yh(v,S,m),Ge=null,yt=!1,v=m.alternate,v!==null&&(v.return=null),m.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)Qh(o,i),o=o.sibling}var Gt=null;function Qh(i,o){var l=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:wt(o,i),bt(i),f&4&&(In(3,i,i.return),po(3,i),In(5,i,i.return));break;case 1:wt(o,i),bt(i),f&512&&(Ye||l===null||Xt(l,l.return)),f&64&&hn&&(i=i.updateQueue,i!==null&&(f=i.callbacks,f!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?f:l.concat(f))));break;case 26:var m=Gt;if(wt(o,i),bt(i),f&512&&(Ye||l===null||Xt(l,l.return)),f&4){var v=l!==null?l.memoizedState:null;if(f=i.memoizedState,l===null)if(f===null)if(i.stateNode===null){e:{f=i.type,l=i.memoizedProps,m=m.ownerDocument||m;t:switch(f){case"title":v=m.getElementsByTagName("title")[0],(!v||v[Os]||v[ut]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=m.createElement(f),m.head.insertBefore(v,m.querySelector("head > title"))),at(v,f,l),v[ut]=i,et(v),f=v;break e;case"link":var S=zp("link","href",m).get(f+(l.href||""));if(S){for(var x=0;x<S.length;x++)if(v=S[x],v.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&v.getAttribute("rel")===(l.rel==null?null:l.rel)&&v.getAttribute("title")===(l.title==null?null:l.title)&&v.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){S.splice(x,1);break t}}v=m.createElement(f),at(v,f,l),m.head.appendChild(v);break;case"meta":if(S=zp("meta","content",m).get(f+(l.content||""))){for(x=0;x<S.length;x++)if(v=S[x],v.getAttribute("content")===(l.content==null?null:""+l.content)&&v.getAttribute("name")===(l.name==null?null:l.name)&&v.getAttribute("property")===(l.property==null?null:l.property)&&v.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&v.getAttribute("charset")===(l.charSet==null?null:l.charSet)){S.splice(x,1);break t}}v=m.createElement(f),at(v,f,l),m.head.appendChild(v);break;default:throw Error(s(468,f))}v[ut]=i,et(v),f=v}i.stateNode=f}else $p(m,i.type,i.stateNode);else i.stateNode=Gp(m,f,i.memoizedProps);else v!==f?(v===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):v.count--,f===null?$p(m,i.type,i.stateNode):Gp(m,f,i.memoizedProps)):f===null&&i.stateNode!==null&&fu(i,i.memoizedProps,l.memoizedProps)}break;case 27:wt(o,i),bt(i),f&512&&(Ye||l===null||Xt(l,l.return)),l!==null&&f&4&&fu(i,i.memoizedProps,l.memoizedProps);break;case 5:if(wt(o,i),bt(i),f&512&&(Ye||l===null||Xt(l,l.return)),i.flags&32){m=i.stateNode;try{Ii(m,"")}catch(O){Pe(i,i.return,O)}}f&4&&i.stateNode!=null&&(m=i.memoizedProps,fu(i,m,l!==null?l.memoizedProps:m)),f&1024&&(pu=!0);break;case 6:if(wt(o,i),bt(i),f&4){if(i.stateNode===null)throw Error(s(162));f=i.memoizedProps,l=i.stateNode;try{l.nodeValue=f}catch(O){Pe(i,i.return,O)}}break;case 3:if(rl=null,m=Gt,Gt=sl(o.containerInfo),wt(o,i),Gt=m,bt(i),f&4&&l!==null&&l.memoizedState.isDehydrated)try{Do(o.containerInfo)}catch(O){Pe(i,i.return,O)}pu&&(pu=!1,Xh(i));break;case 4:f=Gt,Gt=sl(i.stateNode.containerInfo),wt(o,i),bt(i),Gt=f;break;case 12:wt(o,i),bt(i);break;case 13:wt(o,i),bt(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Su=Yt()),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,mu(i,f)));break;case 22:m=i.memoizedState!==null;var b=l!==null&&l.memoizedState!==null,L=hn,z=Ye;if(hn=L||m,Ye=z||b,wt(o,i),Ye=z,hn=L,bt(i),f&8192)e:for(o=i.stateNode,o._visibility=m?o._visibility&-2:o._visibility|1,m&&(l===null||b||hn||Ye||di(i)),l=null,o=i;;){if(o.tag===5||o.tag===26){if(l===null){b=l=o;try{if(v=b.stateNode,m)S=v.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{x=b.stateNode;var F=b.memoizedProps.style,P=F!=null&&F.hasOwnProperty("display")?F.display:null;x.style.display=P==null||typeof P=="boolean"?"":(""+P).trim()}}catch(O){Pe(b,b.return,O)}}}else if(o.tag===6){if(l===null){b=o;try{b.stateNode.nodeValue=m?"":b.memoizedProps}catch(O){Pe(b,b.return,O)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;l===o&&(l=null),o=o.return}l===o&&(l=null),o.sibling.return=o.return,o=o.sibling}f&4&&(f=i.updateQueue,f!==null&&(l=f.retryQueue,l!==null&&(f.retryQueue=null,mu(i,l))));break;case 19:wt(o,i),bt(i),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,mu(i,f)));break;case 30:break;case 21:break;default:wt(o,i),bt(i)}}function bt(i){var o=i.flags;if(o&2){try{for(var l,f=i.return;f!==null;){if(Gh(f)){l=f;break}f=f.return}if(l==null)throw Error(s(160));switch(l.tag){case 27:var m=l.stateNode,v=du(i);Fr(i,v,m);break;case 5:var S=l.stateNode;l.flags&32&&(Ii(S,""),l.flags&=-33);var x=du(i);Fr(i,x,S);break;case 3:case 4:var b=l.stateNode.containerInfo,L=du(i);hu(i,L,b);break;default:throw Error(s(161))}}catch(z){Pe(i,i.return,z)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function Xh(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;Xh(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function Un(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Fh(i,o.alternate,o),o=o.sibling}function di(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:In(4,o,o.return),di(o);break;case 1:Xt(o,o.return);var l=o.stateNode;typeof l.componentWillUnmount=="function"&&Vh(o,o.return,l),di(o);break;case 27:Eo(o.stateNode);case 26:case 5:Xt(o,o.return),di(o);break;case 22:o.memoizedState===null&&di(o);break;case 30:di(o);break;default:di(o)}i=i.sibling}}function Ln(i,o,l){for(l=l&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var f=o.alternate,m=i,v=o,S=v.flags;switch(v.tag){case 0:case 11:case 15:Ln(m,v,l),po(4,v);break;case 1:if(Ln(m,v,l),f=v,m=f.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(L){Pe(f,f.return,L)}if(f=v,m=f.updateQueue,m!==null){var x=f.stateNode;try{var b=m.shared.hiddenCallbacks;if(b!==null)for(m.shared.hiddenCallbacks=null,m=0;m<b.length;m++)wd(b[m],x)}catch(L){Pe(f,f.return,L)}}l&&S&64&&Bh(v),mo(v,v.return);break;case 27:zh(v);case 26:case 5:Ln(m,v,l),l&&f===null&&S&4&&Hh(v),mo(v,v.return);break;case 12:Ln(m,v,l);break;case 13:Ln(m,v,l),l&&S&4&&Kh(m,v);break;case 22:v.memoizedState===null&&Ln(m,v,l),mo(v,v.return);break;case 30:break;default:Ln(m,v,l)}o=o.sibling}}function gu(i,o){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&js(l))}function yu(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&js(i))}function Wt(i,o,l,f){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Wh(i,o,l,f),o=o.sibling}function Wh(i,o,l,f){var m=o.flags;switch(o.tag){case 0:case 11:case 15:Wt(i,o,l,f),m&2048&&po(9,o);break;case 1:Wt(i,o,l,f);break;case 3:Wt(i,o,l,f),m&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&js(i)));break;case 12:if(m&2048){Wt(i,o,l,f),i=o.stateNode;try{var v=o.memoizedProps,S=v.id,x=v.onPostCommit;typeof x=="function"&&x(S,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(b){Pe(o,o.return,b)}}else Wt(i,o,l,f);break;case 13:Wt(i,o,l,f);break;case 23:break;case 22:v=o.stateNode,S=o.alternate,o.memoizedState!==null?v._visibility&2?Wt(i,o,l,f):go(i,o):v._visibility&2?Wt(i,o,l,f):(v._visibility|=2,Zi(i,o,l,f,(o.subtreeFlags&10256)!==0)),m&2048&&gu(S,o);break;case 24:Wt(i,o,l,f),m&2048&&yu(o.alternate,o);break;default:Wt(i,o,l,f)}}function Zi(i,o,l,f,m){for(m=m&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var v=i,S=o,x=l,b=f,L=S.flags;switch(S.tag){case 0:case 11:case 15:Zi(v,S,x,b,m),po(8,S);break;case 23:break;case 22:var z=S.stateNode;S.memoizedState!==null?z._visibility&2?Zi(v,S,x,b,m):go(v,S):(z._visibility|=2,Zi(v,S,x,b,m)),m&&L&2048&&gu(S.alternate,S);break;case 24:Zi(v,S,x,b,m),m&&L&2048&&yu(S.alternate,S);break;default:Zi(v,S,x,b,m)}o=o.sibling}}function go(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var l=i,f=o,m=f.flags;switch(f.tag){case 22:go(l,f),m&2048&&gu(f.alternate,f);break;case 24:go(l,f),m&2048&&yu(f.alternate,f);break;default:go(l,f)}o=o.sibling}}var yo=8192;function ji(i){if(i.subtreeFlags&yo)for(i=i.child;i!==null;)Zh(i),i=i.sibling}function Zh(i){switch(i.tag){case 26:ji(i),i.flags&yo&&i.memoizedState!==null&&OT(Gt,i.memoizedState,i.memoizedProps);break;case 5:ji(i);break;case 3:case 4:var o=Gt;Gt=sl(i.stateNode.containerInfo),ji(i),Gt=o;break;case 22:i.memoizedState===null&&(o=i.alternate,o!==null&&o.memoizedState!==null?(o=yo,yo=16777216,ji(i),yo=o):ji(i));break;default:ji(i)}}function jh(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function vo(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var f=o[l];nt=f,tp(f,i)}jh(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)ep(i),i=i.sibling}function ep(i){switch(i.tag){case 0:case 11:case 15:vo(i),i.flags&2048&&In(9,i,i.return);break;case 3:vo(i);break;case 12:vo(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,Jr(i)):vo(i);break;default:vo(i)}}function Jr(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var f=o[l];nt=f,tp(f,i)}jh(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:In(8,o,o.return),Jr(o);break;case 22:l=o.stateNode,l._visibility&2&&(l._visibility&=-3,Jr(o));break;default:Jr(o)}i=i.sibling}}function tp(i,o){for(;nt!==null;){var l=nt;switch(l.tag){case 0:case 11:case 15:In(8,l,o);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var f=l.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:js(l.memoizedState.cache)}if(f=l.child,f!==null)f.return=l,nt=f;else e:for(l=i;nt!==null;){f=nt;var m=f.sibling,v=f.return;if(Jh(f),f===l){nt=null;break e}if(m!==null){m.return=v,nt=m;break e}nt=v}}}var eT={getCacheForType:function(i){var o=ct(Xe),l=o.data.get(i);return l===void 0&&(l=i(),o.data.set(i,l)),l}},tT=typeof WeakMap=="function"?WeakMap:Map,Me=0,qe=null,Se=null,Ee=0,ke=0,At=null,Pn=!1,es=!1,vu=!1,mn=0,Fe=0,qn=0,hi=0,Tu=0,Ot=0,ts=0,To=null,vt=null,_u=!1,Su=0,Yr=1/0,Kr=null,On=null,lt=0,Bn=null,ns=null,is=0,Cu=0,xu=null,np=null,_o=0,Eu=null;function Rt(){if((Me&2)!==0&&Ee!==0)return Ee&-Ee;if(N.T!==null){var i=$i;return i!==0?i:Nu()}return vf()}function ip(){Ot===0&&(Ot=(Ee&536870912)===0||Ae?pf():536870912);var i=qt.current;return i!==null&&(i.flags|=32),Ot}function Mt(i,o,l){(i===qe&&(ke===2||ke===9)||i.cancelPendingCommit!==null)&&(ss(i,0),Vn(i,Ee,Ot,!1)),qs(i,l),((Me&2)===0||i!==qe)&&(i===qe&&((Me&2)===0&&(hi|=l),Fe===4&&Vn(i,Ee,Ot,!1)),Zt(i))}function sp(i,o,l){if((Me&6)!==0)throw Error(s(327));var f=!l&&(o&124)===0&&(o&i.expiredLanes)===0||Ps(i,o),m=f?sT(i,o):Au(i,o,!0),v=f;do{if(m===0){es&&!f&&Vn(i,o,0,!1);break}else{if(l=i.current.alternate,v&&!nT(l)){m=Au(i,o,!1),v=!1;continue}if(m===2){if(v=o,i.errorRecoveryDisabledLanes&v)var S=0;else S=i.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){o=S;e:{var x=i;m=To;var b=x.current.memoizedState.isDehydrated;if(b&&(ss(x,S).flags|=256),S=Au(x,S,!1),S!==2){if(vu&&!b){x.errorRecoveryDisabledLanes|=v,hi|=v,m=4;break e}v=vt,vt=m,v!==null&&(vt===null?vt=v:vt.push.apply(vt,v))}m=S}if(v=!1,m!==2)continue}}if(m===1){ss(i,0),Vn(i,o,0,!0);break}e:{switch(f=i,v=m,v){case 0:case 1:throw Error(s(345));case 4:if((o&4194048)!==o)break;case 6:Vn(f,o,Ot,!Pn);break e;case 2:vt=null;break;case 3:case 5:break;default:throw Error(s(329))}if((o&62914560)===o&&(m=Su+300-Yt(),10<m)){if(Vn(f,o,Ot,!Pn),or(f,0,!0)!==0)break e;f.timeoutHandle=Ip(op.bind(null,f,l,vt,Kr,_u,o,Ot,hi,ts,Pn,v,2,-0,0),m);break e}op(f,l,vt,Kr,_u,o,Ot,hi,ts,Pn,v,0,-0,0)}}break}while(!0);Zt(i)}function op(i,o,l,f,m,v,S,x,b,L,z,F,P,O){if(i.timeoutHandle=-1,F=o.subtreeFlags,(F&8192||(F&16785408)===16785408)&&(Ao={stylesheets:null,count:0,unsuspend:qT},Zh(o),F=BT(),F!==null)){i.cancelPendingCommit=F(dp.bind(null,i,o,v,l,f,m,S,x,b,z,1,P,O)),Vn(i,v,S,!L);return}dp(i,o,v,l,f,m,S,x,b)}function nT(i){for(var o=i;;){var l=o.tag;if((l===0||l===11||l===15)&&o.flags&16384&&(l=o.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var f=0;f<l.length;f++){var m=l[f],v=m.getSnapshot;m=m.value;try{if(!xt(v(),m))return!1}catch{return!1}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Vn(i,o,l,f){o&=~Tu,o&=~hi,i.suspendedLanes|=o,i.pingedLanes&=~o,f&&(i.warmLanes|=o),f=i.expirationTimes;for(var m=o;0<m;){var v=31-Ct(m),S=1<<v;f[v]=-1,m&=~S}l!==0&&gf(i,l,o)}function Qr(){return(Me&6)===0?(So(0),!1):!0}function wu(){if(Se!==null){if(ke===0)var i=Se.return;else i=Se,ln=li=null,Ga(i),Xi=null,co=0,i=Se;for(;i!==null;)Oh(i.alternate,i),i=i.return;Se=null}}function ss(i,o){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,_T(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),wu(),qe=i,Se=l=sn(i.current,null),Ee=o,ke=0,At=null,Pn=!1,es=Ps(i,o),vu=!1,ts=Ot=Tu=hi=qn=Fe=0,vt=To=null,_u=!1,(o&8)!==0&&(o|=o&32);var f=i.entangledLanes;if(f!==0)for(i=i.entanglements,f&=o;0<f;){var m=31-Ct(f),v=1<<m;o|=i[m],f&=~v}return mn=o,yr(),l}function rp(i,o){Te=null,N.H=Pr,o===to||o===br?(o=xd(),ke=3):o===_d?(o=xd(),ke=4):ke=o===Eh?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,At=o,Se===null&&(Fe=1,Hr(i,It(o,i.current)))}function lp(){var i=N.H;return N.H=Pr,i===null?Pr:i}function ap(){var i=N.A;return N.A=eT,i}function bu(){Fe=4,Pn||(Ee&4194048)!==Ee&&qt.current!==null||(es=!0),(qn&134217727)===0&&(hi&134217727)===0||qe===null||Vn(qe,Ee,Ot,!1)}function Au(i,o,l){var f=Me;Me|=2;var m=lp(),v=ap();(qe!==i||Ee!==o)&&(Kr=null,ss(i,o)),o=!1;var S=Fe;e:do try{if(ke!==0&&Se!==null){var x=Se,b=At;switch(ke){case 8:wu(),S=6;break e;case 3:case 2:case 9:case 6:qt.current===null&&(o=!0);var L=ke;if(ke=0,At=null,os(i,x,b,L),l&&es){S=0;break e}break;default:L=ke,ke=0,At=null,os(i,x,b,L)}}iT(),S=Fe;break}catch(z){rp(i,z)}while(!0);return o&&i.shellSuspendCounter++,ln=li=null,Me=f,N.H=m,N.A=v,Se===null&&(qe=null,Ee=0,yr()),S}function iT(){for(;Se!==null;)up(Se)}function sT(i,o){var l=Me;Me|=2;var f=lp(),m=ap();qe!==i||Ee!==o?(Kr=null,Yr=Yt()+500,ss(i,o)):es=Ps(i,o);e:do try{if(ke!==0&&Se!==null){o=Se;var v=At;t:switch(ke){case 1:ke=0,At=null,os(i,o,v,1);break;case 2:case 9:if(Sd(v)){ke=0,At=null,cp(o);break}o=function(){ke!==2&&ke!==9||qe!==i||(ke=7),Zt(i)},v.then(o,o);break e;case 3:ke=7;break e;case 4:ke=5;break e;case 7:Sd(v)?(ke=0,At=null,cp(o)):(ke=0,At=null,os(i,o,v,7));break;case 5:var S=null;switch(Se.tag){case 26:S=Se.memoizedState;case 5:case 27:var x=Se;if(!S||Fp(S)){ke=0,At=null;var b=x.sibling;if(b!==null)Se=b;else{var L=x.return;L!==null?(Se=L,Xr(L)):Se=null}break t}}ke=0,At=null,os(i,o,v,5);break;case 6:ke=0,At=null,os(i,o,v,6);break;case 8:wu(),Fe=6;break e;default:throw Error(s(462))}}oT();break}catch(z){rp(i,z)}while(!0);return ln=li=null,N.H=f,N.A=m,Me=l,Se!==null?0:(qe=null,Ee=0,yr(),Fe)}function oT(){for(;Se!==null&&!Av();)up(Se)}function up(i){var o=Ph(i.alternate,i,mn);i.memoizedProps=i.pendingProps,o===null?Xr(i):Se=o}function cp(i){var o=i,l=o.alternate;switch(o.tag){case 15:case 0:o=kh(l,o,o.pendingProps,o.type,void 0,Ee);break;case 11:o=kh(l,o,o.pendingProps,o.type.render,o.ref,Ee);break;case 5:Ga(o);default:Oh(l,o),o=Se=fd(o,mn),o=Ph(l,o,mn)}i.memoizedProps=i.pendingProps,o===null?Xr(i):Se=o}function os(i,o,l,f){ln=li=null,Ga(o),Xi=null,co=0;var m=o.return;try{if(K0(i,m,o,l,Ee)){Fe=1,Hr(i,It(l,i.current)),Se=null;return}}catch(v){if(m!==null)throw Se=m,v;Fe=1,Hr(i,It(l,i.current)),Se=null;return}o.flags&32768?(Ae||f===1?i=!0:es||(Ee&536870912)!==0?i=!1:(Pn=i=!0,(f===2||f===9||f===3||f===6)&&(f=qt.current,f!==null&&f.tag===13&&(f.flags|=16384))),fp(o,i)):Xr(o)}function Xr(i){var o=i;do{if((o.flags&32768)!==0){fp(o,Pn);return}i=o.return;var l=X0(o.alternate,o,mn);if(l!==null){Se=l;return}if(o=o.sibling,o!==null){Se=o;return}Se=o=i}while(o!==null);Fe===0&&(Fe=5)}function fp(i,o){do{var l=W0(i.alternate,i);if(l!==null){l.flags&=32767,Se=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!o&&(i=i.sibling,i!==null)){Se=i;return}Se=i=l}while(i!==null);Fe=6,Se=null}function dp(i,o,l,f,m,v,S,x,b){i.cancelPendingCommit=null;do Wr();while(lt!==0);if((Me&6)!==0)throw Error(s(327));if(o!==null){if(o===i.current)throw Error(s(177));if(v=o.lanes|o.childLanes,v|=ya,qv(i,l,v,S,x,b),i===qe&&(Se=qe=null,Ee=0),ns=o,Bn=i,is=l,Cu=v,xu=m,np=f,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,uT(nr,function(){return yp(),null})):(i.callbackNode=null,i.callbackPriority=0),f=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||f){f=N.T,N.T=null,m=V.p,V.p=2,S=Me,Me|=4;try{Z0(i,o,l)}finally{Me=S,V.p=m,N.T=f}}lt=1,hp(),pp(),mp()}}function hp(){if(lt===1){lt=0;var i=Bn,o=ns,l=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||l){l=N.T,N.T=null;var f=V.p;V.p=2;var m=Me;Me|=4;try{Qh(o,i);var v=Bu,S=td(i.containerInfo),x=v.focusedElem,b=v.selectionRange;if(S!==x&&x&&x.ownerDocument&&ed(x.ownerDocument.documentElement,x)){if(b!==null&&da(x)){var L=b.start,z=b.end;if(z===void 0&&(z=L),"selectionStart"in x)x.selectionStart=L,x.selectionEnd=Math.min(z,x.value.length);else{var F=x.ownerDocument||document,P=F&&F.defaultView||window;if(P.getSelection){var O=P.getSelection(),me=x.textContent.length,fe=Math.min(b.start,me),Ue=b.end===void 0?fe:Math.min(b.end,me);!O.extend&&fe>Ue&&(S=Ue,Ue=fe,fe=S);var D=jf(x,fe),R=jf(x,Ue);if(D&&R&&(O.rangeCount!==1||O.anchorNode!==D.node||O.anchorOffset!==D.offset||O.focusNode!==R.node||O.focusOffset!==R.offset)){var I=F.createRange();I.setStart(D.node,D.offset),O.removeAllRanges(),fe>Ue?(O.addRange(I),O.extend(R.node,R.offset)):(I.setEnd(R.node,R.offset),O.addRange(I))}}}}for(F=[],O=x;O=O.parentNode;)O.nodeType===1&&F.push({element:O,left:O.scrollLeft,top:O.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<F.length;x++){var $=F[x];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}ul=!!Ou,Bu=Ou=null}finally{Me=m,V.p=f,N.T=l}}i.current=o,lt=2}}function pp(){if(lt===2){lt=0;var i=Bn,o=ns,l=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||l){l=N.T,N.T=null;var f=V.p;V.p=2;var m=Me;Me|=4;try{Fh(i,o.alternate,o)}finally{Me=m,V.p=f,N.T=l}}lt=3}}function mp(){if(lt===4||lt===3){lt=0,Rv();var i=Bn,o=ns,l=is,f=np;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?lt=5:(lt=0,ns=Bn=null,gp(i,i.pendingLanes));var m=i.pendingLanes;if(m===0&&(On=null),Fl(l),o=o.stateNode,St&&typeof St.onCommitFiberRoot=="function")try{St.onCommitFiberRoot(Ls,o,void 0,(o.current.flags&128)===128)}catch{}if(f!==null){o=N.T,m=V.p,V.p=2,N.T=null;try{for(var v=i.onRecoverableError,S=0;S<f.length;S++){var x=f[S];v(x.value,{componentStack:x.stack})}}finally{N.T=o,V.p=m}}(is&3)!==0&&Wr(),Zt(i),m=i.pendingLanes,(l&4194090)!==0&&(m&42)!==0?i===Eu?_o++:(_o=0,Eu=i):_o=0,So(0)}}function gp(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,js(o)))}function Wr(i){return hp(),pp(),mp(),yp()}function yp(){if(lt!==5)return!1;var i=Bn,o=Cu;Cu=0;var l=Fl(is),f=N.T,m=V.p;try{V.p=32>l?32:l,N.T=null,l=xu,xu=null;var v=Bn,S=is;if(lt=0,ns=Bn=null,is=0,(Me&6)!==0)throw Error(s(331));var x=Me;if(Me|=4,ep(v.current),Wh(v,v.current,S,l),Me=x,So(0,!1),St&&typeof St.onPostCommitFiberRoot=="function")try{St.onPostCommitFiberRoot(Ls,v)}catch{}return!0}finally{V.p=m,N.T=f,gp(i,o)}}function vp(i,o,l){o=It(l,o),o=nu(i.stateNode,o,2),i=Mn(i,o,2),i!==null&&(qs(i,2),Zt(i))}function Pe(i,o,l){if(i.tag===3)vp(i,i,l);else for(;o!==null;){if(o.tag===3){vp(o,i,l);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(On===null||!On.has(f))){i=It(l,i),l=Ch(2),f=Mn(o,l,2),f!==null&&(xh(l,f,o,i),qs(f,2),Zt(f));break}}o=o.return}}function Ru(i,o,l){var f=i.pingCache;if(f===null){f=i.pingCache=new tT;var m=new Set;f.set(o,m)}else m=f.get(o),m===void 0&&(m=new Set,f.set(o,m));m.has(l)||(vu=!0,m.add(l),i=rT.bind(null,i,o,l),o.then(i,i))}function rT(i,o,l){var f=i.pingCache;f!==null&&f.delete(o),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,qe===i&&(Ee&l)===l&&(Fe===4||Fe===3&&(Ee&62914560)===Ee&&300>Yt()-Su?(Me&2)===0&&ss(i,0):Tu|=l,ts===Ee&&(ts=0)),Zt(i)}function Tp(i,o){o===0&&(o=mf()),i=Vi(i,o),i!==null&&(qs(i,o),Zt(i))}function lT(i){var o=i.memoizedState,l=0;o!==null&&(l=o.retryLane),Tp(i,l)}function aT(i,o){var l=0;switch(i.tag){case 13:var f=i.stateNode,m=i.memoizedState;m!==null&&(l=m.retryLane);break;case 19:f=i.stateNode;break;case 22:f=i.stateNode._retryCache;break;default:throw Error(s(314))}f!==null&&f.delete(o),Tp(i,l)}function uT(i,o){return Hl(i,o)}var Zr=null,rs=null,Mu=!1,jr=!1,ku=!1,pi=0;function Zt(i){i!==rs&&i.next===null&&(rs===null?Zr=rs=i:rs=rs.next=i),jr=!0,Mu||(Mu=!0,fT())}function So(i,o){if(!ku&&jr){ku=!0;do for(var l=!1,f=Zr;f!==null;){if(i!==0){var m=f.pendingLanes;if(m===0)var v=0;else{var S=f.suspendedLanes,x=f.pingedLanes;v=(1<<31-Ct(42|i)+1)-1,v&=m&~(S&~x),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(l=!0,xp(f,v))}else v=Ee,v=or(f,f===qe?v:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(v&3)===0||Ps(f,v)||(l=!0,xp(f,v));f=f.next}while(l);ku=!1}}function cT(){_p()}function _p(){jr=Mu=!1;var i=0;pi!==0&&(TT()&&(i=pi),pi=0);for(var o=Yt(),l=null,f=Zr;f!==null;){var m=f.next,v=Sp(f,o);v===0?(f.next=null,l===null?Zr=m:l.next=m,m===null&&(rs=l)):(l=f,(i!==0||(v&3)!==0)&&(jr=!0)),f=m}So(i)}function Sp(i,o){for(var l=i.suspendedLanes,f=i.pingedLanes,m=i.expirationTimes,v=i.pendingLanes&-62914561;0<v;){var S=31-Ct(v),x=1<<S,b=m[S];b===-1?((x&l)===0||(x&f)!==0)&&(m[S]=Pv(x,o)):b<=o&&(i.expiredLanes|=x),v&=~x}if(o=qe,l=Ee,l=or(i,i===o?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f=i.callbackNode,l===0||i===o&&(ke===2||ke===9)||i.cancelPendingCommit!==null)return f!==null&&f!==null&&Gl(f),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||Ps(i,l)){if(o=l&-l,o===i.callbackPriority)return o;switch(f!==null&&Gl(f),Fl(l)){case 2:case 8:l=df;break;case 32:l=nr;break;case 268435456:l=hf;break;default:l=nr}return f=Cp.bind(null,i),l=Hl(l,f),i.callbackPriority=o,i.callbackNode=l,o}return f!==null&&f!==null&&Gl(f),i.callbackPriority=2,i.callbackNode=null,2}function Cp(i,o){if(lt!==0&&lt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(Wr()&&i.callbackNode!==l)return null;var f=Ee;return f=or(i,i===qe?f:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f===0?null:(sp(i,f,o),Sp(i,Yt()),i.callbackNode!=null&&i.callbackNode===l?Cp.bind(null,i):null)}function xp(i,o){if(Wr())return null;sp(i,o,!0)}function fT(){ST(function(){(Me&6)!==0?Hl(ff,cT):_p()})}function Nu(){return pi===0&&(pi=pf()),pi}function Ep(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:cr(""+i)}function wp(i,o){var l=o.ownerDocument.createElement("input");return l.name=o.name,l.value=o.value,i.id&&l.setAttribute("form",i.id),o.parentNode.insertBefore(l,o),i=new FormData(i),l.parentNode.removeChild(l),i}function dT(i,o,l,f,m){if(o==="submit"&&l&&l.stateNode===m){var v=Ep((m[pt]||null).action),S=f.submitter;S&&(o=(o=S[pt]||null)?Ep(o.formAction):S.getAttribute("formAction"),o!==null&&(v=o,S=null));var x=new pr("action","action",null,f,m);i.push({event:x,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(pi!==0){var b=S?wp(m,S):new FormData(m);Wa(l,{pending:!0,data:b,method:m.method,action:v},null,b)}}else typeof v=="function"&&(x.preventDefault(),b=S?wp(m,S):new FormData(m),Wa(l,{pending:!0,data:b,method:m.method,action:v},v,b))},currentTarget:m}]})}}for(var Du=0;Du<ga.length;Du++){var Iu=ga[Du],hT=Iu.toLowerCase(),pT=Iu[0].toUpperCase()+Iu.slice(1);Ht(hT,"on"+pT)}Ht(sd,"onAnimationEnd"),Ht(od,"onAnimationIteration"),Ht(rd,"onAnimationStart"),Ht("dblclick","onDoubleClick"),Ht("focusin","onFocus"),Ht("focusout","onBlur"),Ht(N0,"onTransitionRun"),Ht(D0,"onTransitionStart"),Ht(I0,"onTransitionCancel"),Ht(ld,"onTransitionEnd"),ki("onMouseEnter",["mouseout","mouseover"]),ki("onMouseLeave",["mouseout","mouseover"]),ki("onPointerEnter",["pointerout","pointerover"]),ki("onPointerLeave",["pointerout","pointerover"]),Zn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Zn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Zn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Zn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Zn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Zn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Co="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Co));function bp(i,o){o=(o&4)!==0;for(var l=0;l<i.length;l++){var f=i[l],m=f.event;f=f.listeners;e:{var v=void 0;if(o)for(var S=f.length-1;0<=S;S--){var x=f[S],b=x.instance,L=x.currentTarget;if(x=x.listener,b!==v&&m.isPropagationStopped())break e;v=x,m.currentTarget=L;try{v(m)}catch(z){Vr(z)}m.currentTarget=null,v=b}else for(S=0;S<f.length;S++){if(x=f[S],b=x.instance,L=x.currentTarget,x=x.listener,b!==v&&m.isPropagationStopped())break e;v=x,m.currentTarget=L;try{v(m)}catch(z){Vr(z)}m.currentTarget=null,v=b}}}}function Ce(i,o){var l=o[Jl];l===void 0&&(l=o[Jl]=new Set);var f=i+"__bubble";l.has(f)||(Ap(o,i,2,!1),l.add(f))}function Uu(i,o,l){var f=0;o&&(f|=4),Ap(l,i,f,o)}var el="_reactListening"+Math.random().toString(36).slice(2);function Lu(i){if(!i[el]){i[el]=!0,_f.forEach(function(l){l!=="selectionchange"&&(mT.has(l)||Uu(l,!1,i),Uu(l,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[el]||(o[el]=!0,Uu("selectionchange",!1,o))}}function Ap(i,o,l,f){switch(Wp(o)){case 2:var m=GT;break;case 8:m=zT;break;default:m=Qu}l=m.bind(null,o,l,i),m=void 0,!ia||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(m=!0),f?m!==void 0?i.addEventListener(o,l,{capture:!0,passive:m}):i.addEventListener(o,l,!0):m!==void 0?i.addEventListener(o,l,{passive:m}):i.addEventListener(o,l,!1)}function Pu(i,o,l,f,m){var v=f;if((o&1)===0&&(o&2)===0&&f!==null)e:for(;;){if(f===null)return;var S=f.tag;if(S===3||S===4){var x=f.stateNode.containerInfo;if(x===m)break;if(S===4)for(S=f.return;S!==null;){var b=S.tag;if((b===3||b===4)&&S.stateNode.containerInfo===m)return;S=S.return}for(;x!==null;){if(S=Ai(x),S===null)return;if(b=S.tag,b===5||b===6||b===26||b===27){f=v=S;continue e}x=x.parentNode}}f=f.return}Uf(function(){var L=v,z=ta(l),F=[];e:{var P=ad.get(i);if(P!==void 0){var O=pr,me=i;switch(i){case"keypress":if(dr(l)===0)break e;case"keydown":case"keyup":O=u0;break;case"focusin":me="focus",O=la;break;case"focusout":me="blur",O=la;break;case"beforeblur":case"afterblur":O=la;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":O=qf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":O=Wv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":O=d0;break;case sd:case od:case rd:O=e0;break;case ld:O=p0;break;case"scroll":case"scrollend":O=Qv;break;case"wheel":O=g0;break;case"copy":case"cut":case"paste":O=n0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":O=Bf;break;case"toggle":case"beforetoggle":O=v0}var fe=(o&4)!==0,Ue=!fe&&(i==="scroll"||i==="scrollend"),D=fe?P!==null?P+"Capture":null:P;fe=[];for(var R=L,I;R!==null;){var $=R;if(I=$.stateNode,$=$.tag,$!==5&&$!==26&&$!==27||I===null||D===null||($=Vs(R,D),$!=null&&fe.push(xo(R,$,I))),Ue)break;R=R.return}0<fe.length&&(P=new O(P,me,null,l,z),F.push({event:P,listeners:fe}))}}if((o&7)===0){e:{if(P=i==="mouseover"||i==="pointerover",O=i==="mouseout"||i==="pointerout",P&&l!==ea&&(me=l.relatedTarget||l.fromElement)&&(Ai(me)||me[bi]))break e;if((O||P)&&(P=z.window===z?z:(P=z.ownerDocument)?P.defaultView||P.parentWindow:window,O?(me=l.relatedTarget||l.toElement,O=L,me=me?Ai(me):null,me!==null&&(Ue=a(me),fe=me.tag,me!==Ue||fe!==5&&fe!==27&&fe!==6)&&(me=null)):(O=null,me=L),O!==me)){if(fe=qf,$="onMouseLeave",D="onMouseEnter",R="mouse",(i==="pointerout"||i==="pointerover")&&(fe=Bf,$="onPointerLeave",D="onPointerEnter",R="pointer"),Ue=O==null?P:Bs(O),I=me==null?P:Bs(me),P=new fe($,R+"leave",O,l,z),P.target=Ue,P.relatedTarget=I,$=null,Ai(z)===L&&(fe=new fe(D,R+"enter",me,l,z),fe.target=I,fe.relatedTarget=Ue,$=fe),Ue=$,O&&me)t:{for(fe=O,D=me,R=0,I=fe;I;I=ls(I))R++;for(I=0,$=D;$;$=ls($))I++;for(;0<R-I;)fe=ls(fe),R--;for(;0<I-R;)D=ls(D),I--;for(;R--;){if(fe===D||D!==null&&fe===D.alternate)break t;fe=ls(fe),D=ls(D)}fe=null}else fe=null;O!==null&&Rp(F,P,O,fe,!1),me!==null&&Ue!==null&&Rp(F,Ue,me,fe,!0)}}e:{if(P=L?Bs(L):window,O=P.nodeName&&P.nodeName.toLowerCase(),O==="select"||O==="input"&&P.type==="file")var te=Yf;else if(Ff(P))if(Kf)te=R0;else{te=b0;var _e=w0}else O=P.nodeName,!O||O.toLowerCase()!=="input"||P.type!=="checkbox"&&P.type!=="radio"?L&&jl(L.elementType)&&(te=Yf):te=A0;if(te&&(te=te(i,L))){Jf(F,te,l,z);break e}_e&&_e(i,P,L),i==="focusout"&&L&&P.type==="number"&&L.memoizedProps.value!=null&&Zl(P,"number",P.value)}switch(_e=L?Bs(L):window,i){case"focusin":(Ff(_e)||_e.contentEditable==="true")&&(qi=_e,ha=L,Ks=null);break;case"focusout":Ks=ha=qi=null;break;case"mousedown":pa=!0;break;case"contextmenu":case"mouseup":case"dragend":pa=!1,nd(F,l,z);break;case"selectionchange":if(k0)break;case"keydown":case"keyup":nd(F,l,z)}var oe;if(ua)e:{switch(i){case"compositionstart":var de="onCompositionStart";break e;case"compositionend":de="onCompositionEnd";break e;case"compositionupdate":de="onCompositionUpdate";break e}de=void 0}else Pi?zf(i,l)&&(de="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(de="onCompositionStart");de&&(Vf&&l.locale!=="ko"&&(Pi||de!=="onCompositionStart"?de==="onCompositionEnd"&&Pi&&(oe=Lf()):(wn=z,sa="value"in wn?wn.value:wn.textContent,Pi=!0)),_e=tl(L,de),0<_e.length&&(de=new Of(de,i,null,l,z),F.push({event:de,listeners:_e}),oe?de.data=oe:(oe=$f(l),oe!==null&&(de.data=oe)))),(oe=_0?S0(i,l):C0(i,l))&&(de=tl(L,"onBeforeInput"),0<de.length&&(_e=new Of("onBeforeInput","beforeinput",null,l,z),F.push({event:_e,listeners:de}),_e.data=oe)),dT(F,i,L,l,z)}bp(F,o)})}function xo(i,o,l){return{instance:i,listener:o,currentTarget:l}}function tl(i,o){for(var l=o+"Capture",f=[];i!==null;){var m=i,v=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||v===null||(m=Vs(i,l),m!=null&&f.unshift(xo(i,m,v)),m=Vs(i,o),m!=null&&f.push(xo(i,m,v))),i.tag===3)return f;i=i.return}return[]}function ls(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Rp(i,o,l,f,m){for(var v=o._reactName,S=[];l!==null&&l!==f;){var x=l,b=x.alternate,L=x.stateNode;if(x=x.tag,b!==null&&b===f)break;x!==5&&x!==26&&x!==27||L===null||(b=L,m?(L=Vs(l,v),L!=null&&S.unshift(xo(l,L,b))):m||(L=Vs(l,v),L!=null&&S.push(xo(l,L,b)))),l=l.return}S.length!==0&&i.push({event:o,listeners:S})}var gT=/\r\n?/g,yT=/\u0000|\uFFFD/g;function Mp(i){return(typeof i=="string"?i:""+i).replace(gT,`
`).replace(yT,"")}function kp(i,o){return o=Mp(o),Mp(i)===o}function nl(){}function Ie(i,o,l,f,m,v){switch(l){case"children":typeof f=="string"?o==="body"||o==="textarea"&&f===""||Ii(i,f):(typeof f=="number"||typeof f=="bigint")&&o!=="body"&&Ii(i,""+f);break;case"className":lr(i,"class",f);break;case"tabIndex":lr(i,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":lr(i,l,f);break;case"style":Df(i,f,v);break;case"data":if(o!=="object"){lr(i,"data",f);break}case"src":case"href":if(f===""&&(o!=="a"||l!=="href")){i.removeAttribute(l);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(l);break}f=cr(""+f),i.setAttribute(l,f);break;case"action":case"formAction":if(typeof f=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(l==="formAction"?(o!=="input"&&Ie(i,o,"name",m.name,m,null),Ie(i,o,"formEncType",m.formEncType,m,null),Ie(i,o,"formMethod",m.formMethod,m,null),Ie(i,o,"formTarget",m.formTarget,m,null)):(Ie(i,o,"encType",m.encType,m,null),Ie(i,o,"method",m.method,m,null),Ie(i,o,"target",m.target,m,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(l);break}f=cr(""+f),i.setAttribute(l,f);break;case"onClick":f!=null&&(i.onclick=nl);break;case"onScroll":f!=null&&Ce("scroll",i);break;case"onScrollEnd":f!=null&&Ce("scrollend",i);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(s(61));if(l=f.__html,l!=null){if(m.children!=null)throw Error(s(60));i.innerHTML=l}}break;case"multiple":i.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":i.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){i.removeAttribute("xlink:href");break}l=cr(""+f),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(l,""+f):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":f===!0?i.setAttribute(l,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(l,f):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?i.setAttribute(l,f):i.removeAttribute(l);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?i.removeAttribute(l):i.setAttribute(l,f);break;case"popover":Ce("beforetoggle",i),Ce("toggle",i),rr(i,"popover",f);break;case"xlinkActuate":tn(i,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":tn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":tn(i,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":tn(i,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":tn(i,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":tn(i,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":tn(i,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":tn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":tn(i,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":rr(i,"is",f);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Yv.get(l)||l,rr(i,l,f))}}function qu(i,o,l,f,m,v){switch(l){case"style":Df(i,f,v);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(s(61));if(l=f.__html,l!=null){if(m.children!=null)throw Error(s(60));i.innerHTML=l}}break;case"children":typeof f=="string"?Ii(i,f):(typeof f=="number"||typeof f=="bigint")&&Ii(i,""+f);break;case"onScroll":f!=null&&Ce("scroll",i);break;case"onScrollEnd":f!=null&&Ce("scrollend",i);break;case"onClick":f!=null&&(i.onclick=nl);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Sf.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(m=l.endsWith("Capture"),o=l.slice(2,m?l.length-7:void 0),v=i[pt]||null,v=v!=null?v[l]:null,typeof v=="function"&&i.removeEventListener(o,v,m),typeof f=="function")){typeof v!="function"&&v!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(o,f,m);break e}l in i?i[l]=f:f===!0?i.setAttribute(l,""):rr(i,l,f)}}}function at(i,o,l){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ce("error",i),Ce("load",i);var f=!1,m=!1,v;for(v in l)if(l.hasOwnProperty(v)){var S=l[v];if(S!=null)switch(v){case"src":f=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:Ie(i,o,v,S,l,null)}}m&&Ie(i,o,"srcSet",l.srcSet,l,null),f&&Ie(i,o,"src",l.src,l,null);return;case"input":Ce("invalid",i);var x=v=S=m=null,b=null,L=null;for(f in l)if(l.hasOwnProperty(f)){var z=l[f];if(z!=null)switch(f){case"name":m=z;break;case"type":S=z;break;case"checked":b=z;break;case"defaultChecked":L=z;break;case"value":v=z;break;case"defaultValue":x=z;break;case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(s(137,o));break;default:Ie(i,o,f,z,l,null)}}Rf(i,v,x,b,L,S,m,!1),ar(i);return;case"select":Ce("invalid",i),f=S=v=null;for(m in l)if(l.hasOwnProperty(m)&&(x=l[m],x!=null))switch(m){case"value":v=x;break;case"defaultValue":S=x;break;case"multiple":f=x;default:Ie(i,o,m,x,l,null)}o=v,l=S,i.multiple=!!f,o!=null?Di(i,!!f,o,!1):l!=null&&Di(i,!!f,l,!0);return;case"textarea":Ce("invalid",i),v=m=f=null;for(S in l)if(l.hasOwnProperty(S)&&(x=l[S],x!=null))switch(S){case"value":f=x;break;case"defaultValue":m=x;break;case"children":v=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(s(91));break;default:Ie(i,o,S,x,l,null)}kf(i,f,m,v),ar(i);return;case"option":for(b in l)if(l.hasOwnProperty(b)&&(f=l[b],f!=null))switch(b){case"selected":i.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:Ie(i,o,b,f,l,null)}return;case"dialog":Ce("beforetoggle",i),Ce("toggle",i),Ce("cancel",i),Ce("close",i);break;case"iframe":case"object":Ce("load",i);break;case"video":case"audio":for(f=0;f<Co.length;f++)Ce(Co[f],i);break;case"image":Ce("error",i),Ce("load",i);break;case"details":Ce("toggle",i);break;case"embed":case"source":case"link":Ce("error",i),Ce("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(L in l)if(l.hasOwnProperty(L)&&(f=l[L],f!=null))switch(L){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:Ie(i,o,L,f,l,null)}return;default:if(jl(o)){for(z in l)l.hasOwnProperty(z)&&(f=l[z],f!==void 0&&qu(i,o,z,f,l,void 0));return}}for(x in l)l.hasOwnProperty(x)&&(f=l[x],f!=null&&Ie(i,o,x,f,l,null))}function vT(i,o,l,f){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,v=null,S=null,x=null,b=null,L=null,z=null;for(O in l){var F=l[O];if(l.hasOwnProperty(O)&&F!=null)switch(O){case"checked":break;case"value":break;case"defaultValue":b=F;default:f.hasOwnProperty(O)||Ie(i,o,O,null,f,F)}}for(var P in f){var O=f[P];if(F=l[P],f.hasOwnProperty(P)&&(O!=null||F!=null))switch(P){case"type":v=O;break;case"name":m=O;break;case"checked":L=O;break;case"defaultChecked":z=O;break;case"value":S=O;break;case"defaultValue":x=O;break;case"children":case"dangerouslySetInnerHTML":if(O!=null)throw Error(s(137,o));break;default:O!==F&&Ie(i,o,P,O,f,F)}}Wl(i,S,x,b,L,z,v,m);return;case"select":O=S=x=P=null;for(v in l)if(b=l[v],l.hasOwnProperty(v)&&b!=null)switch(v){case"value":break;case"multiple":O=b;default:f.hasOwnProperty(v)||Ie(i,o,v,null,f,b)}for(m in f)if(v=f[m],b=l[m],f.hasOwnProperty(m)&&(v!=null||b!=null))switch(m){case"value":P=v;break;case"defaultValue":x=v;break;case"multiple":S=v;default:v!==b&&Ie(i,o,m,v,f,b)}o=x,l=S,f=O,P!=null?Di(i,!!l,P,!1):!!f!=!!l&&(o!=null?Di(i,!!l,o,!0):Di(i,!!l,l?[]:"",!1));return;case"textarea":O=P=null;for(x in l)if(m=l[x],l.hasOwnProperty(x)&&m!=null&&!f.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:Ie(i,o,x,null,f,m)}for(S in f)if(m=f[S],v=l[S],f.hasOwnProperty(S)&&(m!=null||v!=null))switch(S){case"value":P=m;break;case"defaultValue":O=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(s(91));break;default:m!==v&&Ie(i,o,S,m,f,v)}Mf(i,P,O);return;case"option":for(var me in l)if(P=l[me],l.hasOwnProperty(me)&&P!=null&&!f.hasOwnProperty(me))switch(me){case"selected":i.selected=!1;break;default:Ie(i,o,me,null,f,P)}for(b in f)if(P=f[b],O=l[b],f.hasOwnProperty(b)&&P!==O&&(P!=null||O!=null))switch(b){case"selected":i.selected=P&&typeof P!="function"&&typeof P!="symbol";break;default:Ie(i,o,b,P,f,O)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var fe in l)P=l[fe],l.hasOwnProperty(fe)&&P!=null&&!f.hasOwnProperty(fe)&&Ie(i,o,fe,null,f,P);for(L in f)if(P=f[L],O=l[L],f.hasOwnProperty(L)&&P!==O&&(P!=null||O!=null))switch(L){case"children":case"dangerouslySetInnerHTML":if(P!=null)throw Error(s(137,o));break;default:Ie(i,o,L,P,f,O)}return;default:if(jl(o)){for(var Ue in l)P=l[Ue],l.hasOwnProperty(Ue)&&P!==void 0&&!f.hasOwnProperty(Ue)&&qu(i,o,Ue,void 0,f,P);for(z in f)P=f[z],O=l[z],!f.hasOwnProperty(z)||P===O||P===void 0&&O===void 0||qu(i,o,z,P,f,O);return}}for(var D in l)P=l[D],l.hasOwnProperty(D)&&P!=null&&!f.hasOwnProperty(D)&&Ie(i,o,D,null,f,P);for(F in f)P=f[F],O=l[F],!f.hasOwnProperty(F)||P===O||P==null&&O==null||Ie(i,o,F,P,f,O)}var Ou=null,Bu=null;function il(i){return i.nodeType===9?i:i.ownerDocument}function Np(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Dp(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function Vu(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Hu=null;function TT(){var i=window.event;return i&&i.type==="popstate"?i===Hu?!1:(Hu=i,!0):(Hu=null,!1)}var Ip=typeof setTimeout=="function"?setTimeout:void 0,_T=typeof clearTimeout=="function"?clearTimeout:void 0,Up=typeof Promise=="function"?Promise:void 0,ST=typeof queueMicrotask=="function"?queueMicrotask:typeof Up<"u"?function(i){return Up.resolve(null).then(i).catch(CT)}:Ip;function CT(i){setTimeout(function(){throw i})}function Hn(i){return i==="head"}function Lp(i,o){var l=o,f=0,m=0;do{var v=l.nextSibling;if(i.removeChild(l),v&&v.nodeType===8)if(l=v.data,l==="/$"){if(0<f&&8>f){l=f;var S=i.ownerDocument;if(l&1&&Eo(S.documentElement),l&2&&Eo(S.body),l&4)for(l=S.head,Eo(l),S=l.firstChild;S;){var x=S.nextSibling,b=S.nodeName;S[Os]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&S.rel.toLowerCase()==="stylesheet"||l.removeChild(S),S=x}}if(m===0){i.removeChild(v),Do(o);return}m--}else l==="$"||l==="$?"||l==="$!"?m++:f=l.charCodeAt(0)-48;else f=0;l=v}while(l);Do(o)}function Gu(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var l=o;switch(o=o.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Gu(l),Yl(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function xT(i,o,l,f){for(;i.nodeType===1;){var m=l;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!f&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(f){if(!i[Os])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(v=i.getAttribute("rel"),v==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(v!==m.rel||i.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||i.getAttribute("title")!==(m.title==null?null:m.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(v=i.getAttribute("src"),(v!==(m.src==null?null:m.src)||i.getAttribute("type")!==(m.type==null?null:m.type)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&v&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var v=m.name==null?null:""+m.name;if(m.type==="hidden"&&i.getAttribute("name")===v)return i}else return i;if(i=zt(i.nextSibling),i===null)break}return null}function ET(i,o,l){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=zt(i.nextSibling),i===null))return null;return i}function zu(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function wT(i,o){var l=i.ownerDocument;if(i.data!=="$?"||l.readyState==="complete")o();else{var f=function(){o(),l.removeEventListener("DOMContentLoaded",f)};l.addEventListener("DOMContentLoaded",f),i._reactRetry=f}}function zt(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return i}var $u=null;function Pp(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(o===0)return i;o--}else l==="/$"&&o++}i=i.previousSibling}return null}function qp(i,o,l){switch(o=il(l),i){case"html":if(i=o.documentElement,!i)throw Error(s(452));return i;case"head":if(i=o.head,!i)throw Error(s(453));return i;case"body":if(i=o.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function Eo(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);Yl(i)}var Bt=new Map,Op=new Set;function sl(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var gn=V.d;V.d={f:bT,r:AT,D:RT,C:MT,L:kT,m:NT,X:IT,S:DT,M:UT};function bT(){var i=gn.f(),o=Qr();return i||o}function AT(i){var o=Ri(i);o!==null&&o.tag===5&&o.type==="form"?sh(o):gn.r(i)}var as=typeof document>"u"?null:document;function Bp(i,o,l){var f=as;if(f&&typeof o=="string"&&o){var m=Dt(o);m='link[rel="'+i+'"][href="'+m+'"]',typeof l=="string"&&(m+='[crossorigin="'+l+'"]'),Op.has(m)||(Op.add(m),i={rel:i,crossOrigin:l,href:o},f.querySelector(m)===null&&(o=f.createElement("link"),at(o,"link",i),et(o),f.head.appendChild(o)))}}function RT(i){gn.D(i),Bp("dns-prefetch",i,null)}function MT(i,o){gn.C(i,o),Bp("preconnect",i,o)}function kT(i,o,l){gn.L(i,o,l);var f=as;if(f&&i&&o){var m='link[rel="preload"][as="'+Dt(o)+'"]';o==="image"&&l&&l.imageSrcSet?(m+='[imagesrcset="'+Dt(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(m+='[imagesizes="'+Dt(l.imageSizes)+'"]')):m+='[href="'+Dt(i)+'"]';var v=m;switch(o){case"style":v=us(i);break;case"script":v=cs(i)}Bt.has(v)||(i=y({rel:"preload",href:o==="image"&&l&&l.imageSrcSet?void 0:i,as:o},l),Bt.set(v,i),f.querySelector(m)!==null||o==="style"&&f.querySelector(wo(v))||o==="script"&&f.querySelector(bo(v))||(o=f.createElement("link"),at(o,"link",i),et(o),f.head.appendChild(o)))}}function NT(i,o){gn.m(i,o);var l=as;if(l&&i){var f=o&&typeof o.as=="string"?o.as:"script",m='link[rel="modulepreload"][as="'+Dt(f)+'"][href="'+Dt(i)+'"]',v=m;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=cs(i)}if(!Bt.has(v)&&(i=y({rel:"modulepreload",href:i},o),Bt.set(v,i),l.querySelector(m)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(bo(v)))return}f=l.createElement("link"),at(f,"link",i),et(f),l.head.appendChild(f)}}}function DT(i,o,l){gn.S(i,o,l);var f=as;if(f&&i){var m=Mi(f).hoistableStyles,v=us(i);o=o||"default";var S=m.get(v);if(!S){var x={loading:0,preload:null};if(S=f.querySelector(wo(v)))x.loading=5;else{i=y({rel:"stylesheet",href:i,"data-precedence":o},l),(l=Bt.get(v))&&Fu(i,l);var b=S=f.createElement("link");et(b),at(b,"link",i),b._p=new Promise(function(L,z){b.onload=L,b.onerror=z}),b.addEventListener("load",function(){x.loading|=1}),b.addEventListener("error",function(){x.loading|=2}),x.loading|=4,ol(S,o,f)}S={type:"stylesheet",instance:S,count:1,state:x},m.set(v,S)}}}function IT(i,o){gn.X(i,o);var l=as;if(l&&i){var f=Mi(l).hoistableScripts,m=cs(i),v=f.get(m);v||(v=l.querySelector(bo(m)),v||(i=y({src:i,async:!0},o),(o=Bt.get(m))&&Ju(i,o),v=l.createElement("script"),et(v),at(v,"link",i),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},f.set(m,v))}}function UT(i,o){gn.M(i,o);var l=as;if(l&&i){var f=Mi(l).hoistableScripts,m=cs(i),v=f.get(m);v||(v=l.querySelector(bo(m)),v||(i=y({src:i,async:!0,type:"module"},o),(o=Bt.get(m))&&Ju(i,o),v=l.createElement("script"),et(v),at(v,"link",i),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},f.set(m,v))}}function Vp(i,o,l,f){var m=(m=ge.current)?sl(m):null;if(!m)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(o=us(l.href),l=Mi(m).hoistableStyles,f=l.get(o),f||(f={type:"style",instance:null,count:0,state:null},l.set(o,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=us(l.href);var v=Mi(m).hoistableStyles,S=v.get(i);if(S||(m=m.ownerDocument||m,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(i,S),(v=m.querySelector(wo(i)))&&!v._p&&(S.instance=v,S.state.loading=5),Bt.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Bt.set(i,l),v||LT(m,i,l,S.state))),o&&f===null)throw Error(s(528,""));return S}if(o&&f!==null)throw Error(s(529,""));return null;case"script":return o=l.async,l=l.src,typeof l=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=cs(l),l=Mi(m).hoistableScripts,f=l.get(o),f||(f={type:"script",instance:null,count:0,state:null},l.set(o,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function us(i){return'href="'+Dt(i)+'"'}function wo(i){return'link[rel="stylesheet"]['+i+"]"}function Hp(i){return y({},i,{"data-precedence":i.precedence,precedence:null})}function LT(i,o,l,f){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?f.loading=1:(o=i.createElement("link"),f.preload=o,o.addEventListener("load",function(){return f.loading|=1}),o.addEventListener("error",function(){return f.loading|=2}),at(o,"link",l),et(o),i.head.appendChild(o))}function cs(i){return'[src="'+Dt(i)+'"]'}function bo(i){return"script[async]"+i}function Gp(i,o,l){if(o.count++,o.instance===null)switch(o.type){case"style":var f=i.querySelector('style[data-href~="'+Dt(l.href)+'"]');if(f)return o.instance=f,et(f),f;var m=y({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return f=(i.ownerDocument||i).createElement("style"),et(f),at(f,"style",m),ol(f,l.precedence,i),o.instance=f;case"stylesheet":m=us(l.href);var v=i.querySelector(wo(m));if(v)return o.state.loading|=4,o.instance=v,et(v),v;f=Hp(l),(m=Bt.get(m))&&Fu(f,m),v=(i.ownerDocument||i).createElement("link"),et(v);var S=v;return S._p=new Promise(function(x,b){S.onload=x,S.onerror=b}),at(v,"link",f),o.state.loading|=4,ol(v,l.precedence,i),o.instance=v;case"script":return v=cs(l.src),(m=i.querySelector(bo(v)))?(o.instance=m,et(m),m):(f=l,(m=Bt.get(v))&&(f=y({},l),Ju(f,m)),i=i.ownerDocument||i,m=i.createElement("script"),et(m),at(m,"link",f),i.head.appendChild(m),o.instance=m);case"void":return null;default:throw Error(s(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(f=o.instance,o.state.loading|=4,ol(f,l.precedence,i));return o.instance}function ol(i,o,l){for(var f=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=f.length?f[f.length-1]:null,v=m,S=0;S<f.length;S++){var x=f[S];if(x.dataset.precedence===o)v=x;else if(v!==m)break}v?v.parentNode.insertBefore(i,v.nextSibling):(o=l.nodeType===9?l.head:l,o.insertBefore(i,o.firstChild))}function Fu(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function Ju(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var rl=null;function zp(i,o,l){if(rl===null){var f=new Map,m=rl=new Map;m.set(l,f)}else m=rl,f=m.get(l),f||(f=new Map,m.set(l,f));if(f.has(i))return f;for(f.set(i,null),l=l.getElementsByTagName(i),m=0;m<l.length;m++){var v=l[m];if(!(v[Os]||v[ut]||i==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var S=v.getAttribute(o)||"";S=i+S;var x=f.get(S);x?x.push(v):f.set(S,[v])}}return f}function $p(i,o,l){i=i.ownerDocument||i,i.head.insertBefore(l,o==="title"?i.querySelector("head > title"):null)}function PT(i,o,l){if(l===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return i=o.disabled,typeof o.precedence=="string"&&i==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function Fp(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var Ao=null;function qT(){}function OT(i,o,l){if(Ao===null)throw Error(s(475));var f=Ao;if(o.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var m=us(l.href),v=i.querySelector(wo(m));if(v){i=v._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(f.count++,f=ll.bind(f),i.then(f,f)),o.state.loading|=4,o.instance=v,et(v);return}v=i.ownerDocument||i,l=Hp(l),(m=Bt.get(m))&&Fu(l,m),v=v.createElement("link"),et(v);var S=v;S._p=new Promise(function(x,b){S.onload=x,S.onerror=b}),at(v,"link",l),o.instance=v}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(f.count++,o=ll.bind(f),i.addEventListener("load",o),i.addEventListener("error",o))}}function BT(){if(Ao===null)throw Error(s(475));var i=Ao;return i.stylesheets&&i.count===0&&Yu(i,i.stylesheets),0<i.count?function(o){var l=setTimeout(function(){if(i.stylesheets&&Yu(i,i.stylesheets),i.unsuspend){var f=i.unsuspend;i.unsuspend=null,f()}},6e4);return i.unsuspend=o,function(){i.unsuspend=null,clearTimeout(l)}}:null}function ll(){if(this.count--,this.count===0){if(this.stylesheets)Yu(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var al=null;function Yu(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,al=new Map,o.forEach(VT,i),al=null,ll.call(i))}function VT(i,o){if(!(o.state.loading&4)){var l=al.get(i);if(l)var f=l.get(null);else{l=new Map,al.set(i,l);for(var m=i.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<m.length;v++){var S=m[v];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(l.set(S.dataset.precedence,S),f=S)}f&&l.set(null,f)}m=o.instance,S=m.getAttribute("data-precedence"),v=l.get(S)||f,v===f&&l.set(null,m),l.set(S,m),this.count++,f=ll.bind(this),m.addEventListener("load",f),m.addEventListener("error",f),v?v.parentNode.insertBefore(m,v.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(m,i.firstChild)),o.state.loading|=4}}var Ro={$$typeof:M,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function HT(i,o,l,f,m,v,S,x){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=zl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zl(0),this.hiddenUpdates=zl(null),this.identifierPrefix=f,this.onUncaughtError=m,this.onCaughtError=v,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=x,this.incompleteTransitions=new Map}function Jp(i,o,l,f,m,v,S,x,b,L,z,F){return i=new HT(i,o,l,S,x,b,L,F),o=1,v===!0&&(o|=24),v=Et(3,null,null,o),i.current=v,v.stateNode=i,o=Ra(),o.refCount++,i.pooledCache=o,o.refCount++,v.memoizedState={element:f,isDehydrated:l,cache:o},Da(v),i}function Yp(i){return i?(i=Hi,i):Hi}function Kp(i,o,l,f,m,v){m=Yp(m),f.context===null?f.context=m:f.pendingContext=m,f=Rn(o),f.payload={element:l},v=v===void 0?null:v,v!==null&&(f.callback=v),l=Mn(i,f,o),l!==null&&(Mt(l,i,o),io(l,i,o))}function Qp(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<o?l:o}}function Ku(i,o){Qp(i,o),(i=i.alternate)&&Qp(i,o)}function Xp(i){if(i.tag===13){var o=Vi(i,67108864);o!==null&&Mt(o,i,67108864),Ku(i,67108864)}}var ul=!0;function GT(i,o,l,f){var m=N.T;N.T=null;var v=V.p;try{V.p=2,Qu(i,o,l,f)}finally{V.p=v,N.T=m}}function zT(i,o,l,f){var m=N.T;N.T=null;var v=V.p;try{V.p=8,Qu(i,o,l,f)}finally{V.p=v,N.T=m}}function Qu(i,o,l,f){if(ul){var m=Xu(f);if(m===null)Pu(i,o,f,cl,l),Zp(i,f);else if(FT(m,i,o,l,f))f.stopPropagation();else if(Zp(i,f),o&4&&-1<$T.indexOf(i)){for(;m!==null;){var v=Ri(m);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var S=Wn(v.pendingLanes);if(S!==0){var x=v;for(x.pendingLanes|=2,x.entangledLanes|=2;S;){var b=1<<31-Ct(S);x.entanglements[1]|=b,S&=~b}Zt(v),(Me&6)===0&&(Yr=Yt()+500,So(0))}}break;case 13:x=Vi(v,2),x!==null&&Mt(x,v,2),Qr(),Ku(v,2)}if(v=Xu(f),v===null&&Pu(i,o,f,cl,l),v===m)break;m=v}m!==null&&f.stopPropagation()}else Pu(i,o,f,null,l)}}function Xu(i){return i=ta(i),Wu(i)}var cl=null;function Wu(i){if(cl=null,i=Ai(i),i!==null){var o=a(i);if(o===null)i=null;else{var l=o.tag;if(l===13){if(i=d(o),i!==null)return i;i=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return cl=i,null}function Wp(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Mv()){case ff:return 2;case df:return 8;case nr:case kv:return 32;case hf:return 268435456;default:return 32}default:return 32}}var Zu=!1,Gn=null,zn=null,$n=null,Mo=new Map,ko=new Map,Fn=[],$T="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Zp(i,o){switch(i){case"focusin":case"focusout":Gn=null;break;case"dragenter":case"dragleave":zn=null;break;case"mouseover":case"mouseout":$n=null;break;case"pointerover":case"pointerout":Mo.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":ko.delete(o.pointerId)}}function No(i,o,l,f,m,v){return i===null||i.nativeEvent!==v?(i={blockedOn:o,domEventName:l,eventSystemFlags:f,nativeEvent:v,targetContainers:[m]},o!==null&&(o=Ri(o),o!==null&&Xp(o)),i):(i.eventSystemFlags|=f,o=i.targetContainers,m!==null&&o.indexOf(m)===-1&&o.push(m),i)}function FT(i,o,l,f,m){switch(o){case"focusin":return Gn=No(Gn,i,o,l,f,m),!0;case"dragenter":return zn=No(zn,i,o,l,f,m),!0;case"mouseover":return $n=No($n,i,o,l,f,m),!0;case"pointerover":var v=m.pointerId;return Mo.set(v,No(Mo.get(v)||null,i,o,l,f,m)),!0;case"gotpointercapture":return v=m.pointerId,ko.set(v,No(ko.get(v)||null,i,o,l,f,m)),!0}return!1}function jp(i){var o=Ai(i.target);if(o!==null){var l=a(o);if(l!==null){if(o=l.tag,o===13){if(o=d(l),o!==null){i.blockedOn=o,Ov(i.priority,function(){if(l.tag===13){var f=Rt();f=$l(f);var m=Vi(l,f);m!==null&&Mt(m,l,f),Ku(l,f)}});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function fl(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var l=Xu(i.nativeEvent);if(l===null){l=i.nativeEvent;var f=new l.constructor(l.type,l);ea=f,l.target.dispatchEvent(f),ea=null}else return o=Ri(l),o!==null&&Xp(o),i.blockedOn=l,!1;o.shift()}return!0}function em(i,o,l){fl(i)&&l.delete(o)}function JT(){Zu=!1,Gn!==null&&fl(Gn)&&(Gn=null),zn!==null&&fl(zn)&&(zn=null),$n!==null&&fl($n)&&($n=null),Mo.forEach(em),ko.forEach(em)}function dl(i,o){i.blockedOn===o&&(i.blockedOn=null,Zu||(Zu=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,JT)))}var hl=null;function tm(i){hl!==i&&(hl=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){hl===i&&(hl=null);for(var o=0;o<i.length;o+=3){var l=i[o],f=i[o+1],m=i[o+2];if(typeof f!="function"){if(Wu(f||l)===null)continue;break}var v=Ri(l);v!==null&&(i.splice(o,3),o-=3,Wa(v,{pending:!0,data:m,method:l.method,action:f},f,m))}}))}function Do(i){function o(b){return dl(b,i)}Gn!==null&&dl(Gn,i),zn!==null&&dl(zn,i),$n!==null&&dl($n,i),Mo.forEach(o),ko.forEach(o);for(var l=0;l<Fn.length;l++){var f=Fn[l];f.blockedOn===i&&(f.blockedOn=null)}for(;0<Fn.length&&(l=Fn[0],l.blockedOn===null);)jp(l),l.blockedOn===null&&Fn.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(f=0;f<l.length;f+=3){var m=l[f],v=l[f+1],S=m[pt]||null;if(typeof v=="function")S||tm(l);else if(S){var x=null;if(v&&v.hasAttribute("formAction")){if(m=v,S=v[pt]||null)x=S.formAction;else if(Wu(m)!==null)continue}else x=S.action;typeof x=="function"?l[f+1]=x:(l.splice(f,3),f-=3),tm(l)}}}function ju(i){this._internalRoot=i}pl.prototype.render=ju.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(s(409));var l=o.current,f=Rt();Kp(l,f,i,o,null,null)},pl.prototype.unmount=ju.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;Kp(i.current,2,null,i,null,null),Qr(),o[bi]=null}};function pl(i){this._internalRoot=i}pl.prototype.unstable_scheduleHydration=function(i){if(i){var o=vf();i={blockedOn:null,target:i,priority:o};for(var l=0;l<Fn.length&&o!==0&&o<Fn[l].priority;l++);Fn.splice(l,0,i),l===0&&jp(i)}};var nm=e.version;if(nm!=="19.1.1")throw Error(s(527,nm,"19.1.1"));V.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=g(o),i=i!==null?p(i):null,i=i===null?null:i.stateNode,i};var YT={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:N,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ml=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ml.isDisabled&&ml.supportsFiber)try{Ls=ml.inject(YT),St=ml}catch{}}return Lo.createRoot=function(i,o){if(!r(i))throw Error(s(299));var l=!1,f="",m=vh,v=Th,S=_h,x=null;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(S=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(x=o.unstable_transitionCallbacks)),o=Jp(i,1,!1,null,null,l,f,m,v,S,x,null),i[bi]=o.current,Lu(i),new ju(o)},Lo.hydrateRoot=function(i,o,l){if(!r(i))throw Error(s(299));var f=!1,m="",v=vh,S=Th,x=_h,b=null,L=null;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(v=l.onUncaughtError),l.onCaughtError!==void 0&&(S=l.onCaughtError),l.onRecoverableError!==void 0&&(x=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(b=l.unstable_transitionCallbacks),l.formState!==void 0&&(L=l.formState)),o=Jp(i,1,!0,o,l??null,f,m,v,S,x,b,L),o.context=Yp(null),l=o.current,f=Rt(),f=$l(f),m=Rn(f),m.callback=null,Mn(l,m,f),l=f,o.current.lanes=l,qs(o,l),Zt(o),i[bi]=o.current,Lu(i),new pl(o)},Lo.version="19.1.1",Lo}var pm;function l_(){if(pm)return nc.exports;pm=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),nc.exports=r_(),nc.exports}var a_=l_();const u_=Jc(a_),c_=t=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),f_=t=>C.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.24-.438.613-.438.995s.145.755.438.995l1.003.827c.48.398.668 1.03.26 1.431l-1.296 2.247a1.125 1.125 0 0 1-1.37.49l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.063-.374-.313-.686-.645-.87a6.52 6.52 0 0 1-.22-.127c-.324-.196-.72-.257-1.075-.124l-1.217.456a1.125 1.125 0 0 1-1.37-.49l-1.296-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.437-.995s-.145-.755-.437-.995l-1.004-.827a1.125 1.125 0 0 1-.26-1.431l1.296-2.247a1.125 1.125 0 0 1 1.37-.49l1.217.456c.355.133.75.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"})]}),d_=t=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"})}),h_=t=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"})}),p_=t=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.72 9.72 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z"})}),m_=({user:t,theme:e,onToggleTheme:n,onOpenSettings:s,onLogout:r})=>{var y,T,_;const[a,d]=ie.useState(!1),h=ie.useRef(null),g=((y=t.user_metadata)==null?void 0:y.name)||((T=t.user_metadata)==null?void 0:T.full_name)||t.email,p=(_=t.user_metadata)==null?void 0:_.avatar_url;return ie.useEffect(()=>{const E=w=>{h.current&&!h.current.contains(w.target)&&d(!1)};return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[]),C.jsxs("div",{className:"relative",ref:h,children:[C.jsxs("button",{onClick:()=>d(E=>!E),className:"flex items-center w-full gap-3 text-left p-2 rounded-md text-text-secondary hover:bg-input-bg hover:text-text-primary transition-colors","aria-haspopup":"true","aria-expanded":a,children:[p?C.jsx("img",{src:p,alt:g,className:"h-8 w-8 rounded-full bg-border-color"}):C.jsx("span",{className:"h-8 w-8 rounded-full bg-border-color flex items-center justify-center text-text-primary font-bold text-sm",children:(g==null?void 0:g.charAt(0).toUpperCase())||"?"}),C.jsxs("div",{className:"flex-1 overflow-hidden",children:[C.jsx("span",{className:"text-sm font-medium text-text-primary truncate block",children:g}),C.jsx("span",{className:"text-xs text-text-secondary truncate block",children:t.email})]})]}),a&&C.jsx("div",{className:"absolute bottom-full left-0 w-full mb-2 bg-sidebar-bg border border-border-color rounded-lg shadow-xl z-10",children:C.jsxs("div",{className:"p-1",children:[C.jsxs("button",{onClick:()=>{n(),d(!1)},className:"flex items-center gap-3 w-full text-left p-2 text-sm rounded-md text-text-secondary hover:bg-input-bg hover:text-text-primary transition-colors",children:[e==="dark"?C.jsx(h_,{className:"w-4 h-4"}):C.jsx(p_,{className:"w-4 h-4"}),C.jsxs("span",{children:["Switch to ",e==="dark"?"Light":"Dark"," Mode"]})]}),C.jsxs("button",{onClick:()=>{s(),d(!1)},className:"flex items-center gap-3 w-full text-left p-2 text-sm rounded-md text-text-secondary hover:bg-input-bg hover:text-text-primary transition-colors",children:[C.jsx(f_,{className:"w-4 h-4"}),C.jsx("span",{children:"Settings"})]}),C.jsx("div",{className:"my-1 h-px bg-border-color"}),C.jsxs("button",{onClick:()=>{r(),d(!1)},className:"flex items-center gap-3 w-full text-left p-2 text-sm rounded-md text-accent-red hover:bg-red-500/10 transition-colors",children:[C.jsx(d_,{className:"w-4 h-4"}),C.jsx("span",{children:"Logout"})]})]})})]})},g_=t=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})}),y_=t=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})}),v_=t=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.134-2.036-2.134H8.718c-1.126 0-2.037.955-2.037 2.134v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})}),T_=({session:t,isActive:e,onSelect:n,onDelete:s,onRename:r})=>{const[a,d]=ie.useState(!1),[h,g]=ie.useState(t.title),p=ie.useRef(null);ie.useEffect(()=>{var _,E;a&&((_=p.current)==null||_.focus(),(E=p.current)==null||E.select())},[a]);const y=()=>{d(!1),h.trim()&&h.trim()!==t.title?r(t.id,h.trim()):g(t.title)},T=_=>{_.stopPropagation(),window.confirm(`Are you sure you want to delete "${t.title}"?`)&&s(t.id)};return C.jsxs("div",{onClick:()=>n(t.id),className:`group relative flex items-center w-full text-left rounded-md cursor-pointer transition-colors ${e?"bg-accent-blue text-white":"text-text-secondary hover:bg-input-bg hover:text-text-primary"}`,children:[a?C.jsx("input",{ref:p,type:"text",value:h,onClick:_=>_.stopPropagation(),onChange:_=>g(_.target.value),onBlur:y,onKeyDown:_=>{_.key==="Enter"&&y(),_.key==="Escape"&&(d(!1),g(t.title))},className:"flex-1 bg-transparent px-4 py-2 text-sm focus:outline-none"}):C.jsx("span",{className:"flex-1 px-4 py-2 text-sm truncate",children:t.title}),!a&&C.jsxs("div",{className:"absolute right-1 top-1/2 -translate-y-1/2 flex items-center opacity-0 group-hover:opacity-100 transition-opacity duration-200 bg-inherit rounded-md",children:[C.jsx("button",{onClick:_=>{_.stopPropagation(),d(!0)},className:`p-1 ${e?"hover:bg-blue-400":"hover:bg-border-color"} rounded`,"aria-label":"Rename session",children:C.jsx(y_,{className:"h-4 w-4"})}),C.jsx("button",{onClick:T,className:`p-1 ${e?"hover:bg-blue-400":"hover:bg-border-color"} rounded`,"aria-label":"Delete session",children:C.jsx(v_,{className:"h-4 w-4"})})]})]})},__=({isOpen:t,sessions:e,activeSessionId:n,user:s,theme:r,onNewSession:a,onSelectSession:d,onDeleteSession:h,onRenameSession:g,onToggleTheme:p,onOpenSettings:y,onLogout:T})=>{const[_,E]=ie.useState(""),[w,k]=ie.useState("");ie.useEffect(()=>{const q=setTimeout(()=>k(_.trim().toLowerCase()),200);return()=>clearTimeout(q)},[_]);const U=ie.useMemo(()=>w?e.filter(q=>{if(q.title.toLowerCase().includes(w))return!0;for(const B of q.messages)if(typeof B.content=="string"){if(B.content.toLowerCase().includes(w))return!0}else if(B.content&&typeof B.content=="object"){const M=B.content;if([M.summary,M.thinkingProcess,M.verificationSummary,M.signal,M.confidence,M.riskRewardRatio,M.timeframe].some(G=>typeof G=="string"&&G.toLowerCase().includes(w)))return!0}return!1}):e,[w,e]);return C.jsxs("aside",{className:`bg-sidebar-bg flex flex-col transition-all duration-300 ease-in-out border-r border-border-color ${t?"w-64":"w-0"} overflow-hidden`,children:[C.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border-color h-14",children:[C.jsx("h2",{className:"text-xl font-bold whitespace-nowrap text-text-primary",children:"History"}),C.jsx("button",{onClick:a,className:"p-2 rounded-md hover:bg-input-bg focus:outline-none focus:ring-2 focus:ring-accent-blue","aria-label":"Create new analysis",children:C.jsx(c_,{className:"h-6 w-6 text-text-secondary"})})]}),C.jsx("div",{className:"p-2 border-b border-border-color",children:C.jsxs("div",{className:"relative",children:[C.jsx("input",{type:"text",placeholder:"Search...",value:_,onChange:q=>E(q.target.value),className:"w-full bg-input-bg border border-transparent rounded-md pl-9 pr-3 py-1.5 text-sm text-text-primary placeholder-text-secondary focus:outline-none focus:ring-2 focus:ring-accent-blue focus:border-transparent"}),C.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:C.jsx(g_,{className:"h-4 w-4 text-text-secondary"})})]})}),C.jsx("nav",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:U.map(q=>C.jsx(T_,{session:q,isActive:q.id===n,onSelect:d,onDelete:h,onRename:g},q.id))}),C.jsx("div",{className:"p-2 border-t border-border-color",children:C.jsx(m_,{user:s,theme:r,onToggleTheme:p,onOpenSettings:y,onLogout:T})})]})},_c=t=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.375 12.739l-7.693 7.693a4.5 4.5 0 01-6.364-6.364l10.94-10.94A3.375 3.375 0 1112.81 7.341L5.17 15.011a1.125 1.125 0 001.591 1.59L15.182 8.25"})}),S_=t=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"})}),C_=t=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...t,children:C.jsx("path",{d:"M6 6h12v12H6z"})}),x_=t=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75"})});async function my(t,e=1024,n=768){const s=await w_(t),r=document.createElement("canvas");r.width=e,r.height=n;const a=r.getContext("2d");if(!a)throw new Error("Canvas not supported");a.fillStyle="#ffffff",a.fillRect(0,0,e,n);const d=Math.min(e/s.naturalWidth,n/s.naturalHeight),h=Math.round(s.naturalWidth*d),g=Math.round(s.naturalHeight*d),p=Math.floor((e-h)/2),y=Math.floor((n-g)/2);a.imageSmoothingEnabled=!0,a.imageSmoothingQuality="high",a.drawImage(s,p,y,h,g);const _=await(await new Promise(E=>r.toBlob(w=>E(w),"image/png"))).arrayBuffer();return new Uint8Array(_)}async function gy(t){const e=await crypto.subtle.digest("SHA-256",t);return E_(new Uint8Array(e))}function E_(t){return Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join("")}async function w_(t){return new Promise((e,n)=>{const s=new Image;s.onload=()=>e(s),s.onerror=r=>n(r),typeof t=="string"?s.src=t.startsWith("data:")?t:URL.createObjectURL(new Blob([t])):s.src=URL.createObjectURL(t)})}function rc(t){return["v1",t.modelVersion,t.promptVersion,t.ultra?"ultra":"normal",...t.imageHashes.sort()].join("|")}const b_=({className:t="h-6 w-6"})=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})}),A_=[{value:"1M",label:"1 Minute"},{value:"5M",label:"5 Minutes"},{value:"15M",label:"15 Minutes"},{value:"30M",label:"30 Minutes"},{value:"1H",label:"1 Hour"},{value:"4H",label:"4 Hours"},{value:"12H",label:"12 Hours"},{value:"1D",label:"1 Day"},{value:"3D",label:"3 Days"},{value:"1W",label:"1 Week"},{value:"1M_MONTHLY",label:"1 Month"}],R_=async t=>{const e=await my(t),n=await gy(e),s=new Blob([e],{type:"image/png"});return{mimeType:"image/png",data:await new Promise((a,d)=>{const h=new FileReader;h.onloadend=()=>{const g=h.result,p=g.indexOf(",");a(p>=0?g.slice(p+1):g)},h.onerror=g=>d(g),h.readAsDataURL(s)}),hash:n}},M_=({onTimeframeImagesChange:t,disabled:e=!1})=>{const[n,s]=ie.useState([]),[r,a]=ie.useState(!1),d=ie.useRef(null),h=async _=>{if(!(!_||_.length===0)){a(!0);try{const E=[];for(let k=0;k<_.length;k++){const U=_[k];if(U.type.startsWith("image/")){const q=await R_(U),B=k===0?"1H":k===1?"4H":"1D";E.push({imageData:q,timeframe:B,label:U.name.replace(/\.[^/.]+$/,"")})}}const w=[...n,...E];s(w),t(w)}catch(E){console.error("Error processing images:",E)}finally{a(!1)}}},g=(_,E)=>{const w=[...n];w[_]={...w[_],timeframe:E},s(w),t(w)},p=(_,E)=>{const w=[...n];w[_]={...w[_],label:E},s(w),t(w)},y=_=>{const E=n.filter((w,k)=>k!==_);s(E),t(E)},T=_=>`data:${_.mimeType};base64,${_.data}`;return C.jsxs("div",{className:"space-y-4",children:[C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsx("h3",{className:"font-medium text-text-primary",children:"Multi-Timeframe Analysis"}),C.jsxs("button",{type:"button",onClick:()=>{var _;return(_=d.current)==null?void 0:_.click()},disabled:e||r,className:"inline-flex items-center px-3 py-1.5 text-sm font-medium text-accent-blue hover:text-blue-700 disabled:opacity-50",children:[C.jsx(_c,{className:"h-4 w-4 mr-1"}),"Add Charts"]})]}),C.jsx("input",{ref:d,type:"file",multiple:!0,accept:"image/png, image/jpeg, image/webp",onChange:_=>h(_.target.files),className:"hidden"}),r&&C.jsxs("div",{className:"flex items-center justify-center py-4",children:[C.jsx("div",{className:"h-5 w-5 border-2 border-t-transparent border-accent-blue rounded-full animate-spin"}),C.jsx("span",{className:"ml-2 text-sm text-text-secondary",children:"Processing images..."})]}),n.length>0&&C.jsx("div",{className:"space-y-3",children:n.map((_,E)=>C.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-input-bg-50 rounded-lg border border-border-color",children:[C.jsx("div",{className:"flex-shrink-0",children:C.jsx("img",{src:T(_.imageData),alt:`Chart ${E+1}`,className:"h-16 w-16 object-cover rounded border border-border-color"})}),C.jsxs("div",{className:"flex-1 space-y-2",children:[C.jsxs("div",{children:[C.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:"Chart Label"}),C.jsx("input",{type:"text",value:_.label||"",onChange:w=>p(E,w.target.value),placeholder:"e.g., Bitcoin 4H Chart",className:"w-full px-2 py-1 text-sm bg-input-bg border border-border-color rounded focus:outline-none focus:ring-1 focus:ring-accent-blue",disabled:e})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:"Timeframe"}),C.jsx("select",{value:_.timeframe,onChange:w=>g(E,w.target.value),className:"w-full px-2 py-1 text-sm bg-input-bg border border-border-color rounded focus:outline-none focus:ring-1 focus:ring-accent-blue",disabled:e,children:A_.map(w=>C.jsx("option",{value:w.value,children:w.label},w.value))})]})]}),C.jsx("button",{type:"button",onClick:()=>y(E),disabled:e,className:"flex-shrink-0 p-1 text-text-secondary hover:text-accent-red transition-colors disabled:opacity-50","aria-label":"Remove chart",children:C.jsx(b_,{className:"h-4 w-4"})})]},E))}),n.length===0&&!r&&C.jsxs("div",{className:"text-center py-8 bg-input-bg-50 rounded-lg border-2 border-dashed border-border-color",children:[C.jsx(_c,{className:"h-8 w-8 mx-auto text-text-secondary mb-2"}),C.jsx("p",{className:"text-sm text-text-secondary",children:"Upload multiple chart images for multi-timeframe analysis"}),C.jsx("p",{className:"text-xs text-text-secondary mt-1",children:"Add charts from different timeframes (1H, 4H, 1D, etc.) for better confluence"})]}),n.length>0&&C.jsx("div",{className:"text-xs text-text-secondary",children:C.jsxs("p",{children:[C.jsx("strong",{children:"Tip:"})," Include different timeframes (e.g., 1H, 4H, 1D) for better analysis confluence. Higher timeframes provide trend context while lower timeframes refine entry timing."]})})]})},k_=async t=>{const e=await my(t),n=await gy(e),s=new Blob([e],{type:"image/png"});return{mimeType:"image/png",data:await new Promise((a,d)=>{const h=new FileReader;h.onloadend=()=>{const g=h.result,p=g.indexOf(",");a(p>=0?g.slice(p+1):g)},h.onerror=g=>d(g),h.readAsDataURL(s)}),hash:n}},N_=({onSendMessage:t,onSendMultiTimeframeMessage:e,isLoading:n,onStopGeneration:s,initialPrompt:r,isUltraMode:a,onToggleUltraMode:d})=>{const[h,g]=ie.useState(""),[p,y]=ie.useState([]),[T,_]=ie.useState([]),[E,w]=ie.useState(!1),[k,U]=ie.useState(!1),[q,B]=ie.useState([]),M=ie.useRef(null),J=ie.useRef(null),G=ie.useRef(null);ie.useEffect(()=>{var Q;r&&(g(r),(Q=J.current)==null||Q.focus())},[r]),ie.useEffect(()=>{const Q=re=>{G.current&&!G.current.contains(re.target)&&w(!1)};return document.addEventListener("mousedown",Q),()=>document.removeEventListener("mousedown",Q)},[]);const X=Q=>{const re=[],ee=new Set(p.map(V=>V.name+V.size)),N=Array.from(Q);for(const V of N){if(!V.type.startsWith("image/"))continue;const Y=V.name+V.size;ee.has(Y)||re.push(V)}re.length!==0&&(re.forEach(V=>{const Y=new FileReader;Y.onloadend=()=>{_(Z=>[...Z,Y.result])},Y.readAsDataURL(V)}),y(V=>[...V,...re]))},j=Q=>{Q.target.files&&X(Q.target.files)},ue=Q=>{Q.preventDefault(),Q.dataTransfer.files&&Q.dataTransfer.files.length>0&&(X(Q.dataTransfer.files),Q.dataTransfer.clearData())},ne=Q=>{const re=Q.clipboardData.items,ee=[];for(let N=0;N<re.length;N++){const V=re[N];if(V.kind==="file"){const Y=V.getAsFile();Y&&Y.type.startsWith("image/")&&ee.push(Y)}}ee.length>0&&X(ee)},he=async()=>{if(k){if(!h.trim()&&q.length===0||n)return;e&&(e(h.trim(),q),g(""),B([]))}else{if(!h.trim()&&p.length===0||n)return;let Q=[];p.length>0&&(Q=await Promise.all(p.map(k_))),t(h,Q),g(""),y([]),_([]),M.current&&(M.current.value="")}},ae=Q=>{Q.key==="Enter"&&!Q.shiftKey&&(Q.preventDefault(),he())},pe=Q=>{y(re=>re.filter((ee,N)=>N!==Q)),_(re=>re.filter((ee,N)=>N!==Q)),M.current&&p.length===1&&(M.current.value="")};return C.jsxs("div",{className:"bg-input-bg border border-border-color rounded-lg p-2 flex flex-col",onDrop:ue,onDragOver:Q=>Q.preventDefault(),onPaste:ne,children:[!k&&T.length>0&&C.jsx("div",{className:"p-2 grid grid-cols-3 gap-2",children:T.map((Q,re)=>C.jsxs("div",{className:"relative",children:[C.jsx("img",{src:Q,alt:`Image preview ${re+1}`,className:"max-h-24 w-full object-cover rounded-md"}),C.jsx("button",{onClick:()=>pe(re),className:"absolute top-0 right-0 m-1 bg-red-500 text-white rounded-full h-5 w-5 flex items-center justify-center text-xs",children:"×"})]},re))}),k&&C.jsx("div",{className:"p-3 border-b border-border-color",children:C.jsx(M_,{onTimeframeImagesChange:B,disabled:n})}),C.jsxs("div",{className:"flex items-start",children:[!k&&C.jsx("button",{onClick:()=>{var Q;return(Q=M.current)==null?void 0:Q.click()},className:"p-2 text-text-secondary hover:text-text-primary self-center",disabled:n,"aria-label":"Attach images",children:C.jsx(_c,{className:"h-5 w-5"})}),C.jsx("input",{type:"file",ref:M,onChange:j,className:"hidden",multiple:!0,accept:"image/png, image/jpeg, image/webp"}),C.jsxs("div",{className:"relative self-center",ref:G,children:[C.jsx("button",{onClick:()=>w(Q=>!Q),className:`p-2 text-text-secondary hover:text-text-primary transition-colors ${a?"text-accent-blue":""}`,disabled:n,"aria-label":"Wizz Ultra Settings",children:C.jsx(x_,{className:"h-5 w-5"})}),E&&C.jsxs("div",{className:"absolute bottom-full left-0 mb-2 w-72 bg-sidebar-bg border border-border-color rounded-lg shadow-xl z-10 p-3",children:[C.jsxs("div",{className:"space-y-3",children:[C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsxs("div",{children:[C.jsx("h4",{className:"font-semibold text-text-primary",children:"Wizz Ultra"}),C.jsx("p",{className:"text-xs text-text-secondary",children:"Advanced analysis mode"})]}),C.jsxs("label",{htmlFor:"ultra-toggle",className:"relative inline-flex items-center cursor-pointer",children:[C.jsx("input",{type:"checkbox",id:"ultra-toggle",className:"sr-only peer",checked:a,onChange:d}),C.jsx("div",{className:"w-11 h-6 bg-border-color peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-offset-2 peer-focus:ring-accent-blue peer-focus:ring-offset-sidebar-bg rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent-blue"})]})]}),C.jsxs("div",{className:"flex items-center justify-between border-t border-border-color pt-3",children:[C.jsxs("div",{children:[C.jsx("h4",{className:"font-semibold text-text-primary",children:"Multi-Timeframe"}),C.jsx("p",{className:"text-xs text-text-secondary",children:"Analyze multiple timeframes"})]}),C.jsxs("label",{htmlFor:"multi-timeframe-toggle",className:"relative inline-flex items-center cursor-pointer",children:[C.jsx("input",{type:"checkbox",id:"multi-timeframe-toggle",className:"sr-only peer",checked:k,onChange:Q=>U(Q.target.checked)}),C.jsx("div",{className:"w-11 h-6 bg-border-color peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-offset-2 peer-focus:ring-accent-blue peer-focus:ring-offset-sidebar-bg rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent-blue"})]})]})]}),C.jsx("p",{className:"text-xs text-text-secondary mt-2 border-t border-border-color pt-2",children:k?"Upload charts from different timeframes (1H, 4H, 1D) for better confluence analysis.":"Provides a more detailed, multi-pass analysis for higher accuracy."})]})]}),C.jsx("textarea",{ref:J,value:h,onChange:Q=>g(Q.target.value),onKeyDown:ae,placeholder:"Describe the chart or ask a question... (you can also paste or drag-and-drop images)",className:"flex-1 bg-transparent resize-none focus:outline-none text-text-primary placeholder-text-secondary px-2 pt-1.5 max-h-28",rows:1,disabled:n}),C.jsx("div",{className:"self-center",children:n?C.jsx("button",{onClick:s,className:"p-2 rounded-md bg-accent-red text-white","aria-label":"Stop generation",children:C.jsx(C_,{className:"h-5 w-5"})}):C.jsx("button",{onClick:he,disabled:!h.trim()&&p.length===0,className:"p-2 rounded-md bg-accent-blue text-white disabled:bg-gray-500 disabled:cursor-not-allowed","aria-label":"Send message",children:C.jsx(S_,{className:"h-5 w-5"})})})]})]})};function Kc(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let Ci=Kc();function yy(t){Ci=t}const vy=/[&<>"']/,D_=new RegExp(vy.source,"g"),Ty=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,I_=new RegExp(Ty.source,"g"),U_={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},mm=t=>U_[t];function kt(t,e){if(e){if(vy.test(t))return t.replace(D_,mm)}else if(Ty.test(t))return t.replace(I_,mm);return t}const L_=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function P_(t){return t.replace(L_,(e,n)=>(n=n.toLowerCase(),n==="colon"?":":n.charAt(0)==="#"?n.charAt(1)==="x"?String.fromCharCode(parseInt(n.substring(2),16)):String.fromCharCode(+n.substring(1)):""))}const q_=/(^|[^\[])\^/g;function Le(t,e){let n=typeof t=="string"?t:t.source;e=e||"";const s={replace:(r,a)=>{let d=typeof a=="string"?a:a.source;return d=d.replace(q_,"$1"),n=n.replace(r,d),s},getRegex:()=>new RegExp(n,e)};return s}function gm(t){try{t=encodeURI(t).replace(/%25/g,"%")}catch{return null}return t}const zo={exec:()=>null};function ym(t,e){const n=t.replace(/\|/g,(a,d,h)=>{let g=!1,p=d;for(;--p>=0&&h[p]==="\\";)g=!g;return g?"|":" |"}),s=n.split(/ \|/);let r=0;if(s[0].trim()||s.shift(),s.length>0&&!s[s.length-1].trim()&&s.pop(),e)if(s.length>e)s.splice(e);else for(;s.length<e;)s.push("");for(;r<s.length;r++)s[r]=s[r].trim().replace(/\\\|/g,"|");return s}function Po(t,e,n){const s=t.length;if(s===0)return"";let r=0;for(;r<s&&t.charAt(s-r-1)===e;)r++;return t.slice(0,s-r)}function O_(t,e){if(t.indexOf(e[1])===-1)return-1;let n=0;for(let s=0;s<t.length;s++)if(t[s]==="\\")s++;else if(t[s]===e[0])n++;else if(t[s]===e[1]&&(n--,n<0))return s;return-1}function vm(t,e,n,s){const r=e.href,a=e.title?kt(e.title):null,d=t[1].replace(/\\([\[\]])/g,"$1");if(t[0].charAt(0)!=="!"){s.state.inLink=!0;const h={type:"link",raw:n,href:r,title:a,text:d,tokens:s.inlineTokens(d)};return s.state.inLink=!1,h}return{type:"image",raw:n,href:r,title:a,text:kt(d)}}function B_(t,e){const n=t.match(/^(\s+)(?:```)/);if(n===null)return e;const s=n[1];return e.split(`
`).map(r=>{const a=r.match(/^\s+/);if(a===null)return r;const[d]=a;return d.length>=s.length?r.slice(s.length):r}).join(`
`)}class bl{constructor(e){Oe(this,"options");Oe(this,"rules");Oe(this,"lexer");this.options=e||Ci}space(e){const n=this.rules.block.newline.exec(e);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(e){const n=this.rules.block.code.exec(e);if(n){const s=n[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?s:Po(s,`
`)}}}fences(e){const n=this.rules.block.fences.exec(e);if(n){const s=n[0],r=B_(s,n[3]||"");return{type:"code",raw:s,lang:n[2]?n[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):n[2],text:r}}}heading(e){const n=this.rules.block.heading.exec(e);if(n){let s=n[2].trim();if(/#$/.test(s)){const r=Po(s,"#");(this.options.pedantic||!r||/ $/.test(r))&&(s=r.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:s,tokens:this.lexer.inline(s)}}}hr(e){const n=this.rules.block.hr.exec(e);if(n)return{type:"hr",raw:Po(n[0],`
`)}}blockquote(e){const n=this.rules.block.blockquote.exec(e);if(n){let s=Po(n[0],`
`).split(`
`),r="",a="";const d=[];for(;s.length>0;){let h=!1;const g=[];let p;for(p=0;p<s.length;p++)if(/^ {0,3}>/.test(s[p]))g.push(s[p]),h=!0;else if(!h)g.push(s[p]);else break;s=s.slice(p);const y=g.join(`
`),T=y.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");r=r?`${r}
${y}`:y,a=a?`${a}
${T}`:T;const _=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(T,d,!0),this.lexer.state.top=_,s.length===0)break;const E=d[d.length-1];if((E==null?void 0:E.type)==="code")break;if((E==null?void 0:E.type)==="blockquote"){const w=E,k=w.raw+`
`+s.join(`
`),U=this.blockquote(k);d[d.length-1]=U,r=r.substring(0,r.length-w.raw.length)+U.raw,a=a.substring(0,a.length-w.text.length)+U.text;break}else if((E==null?void 0:E.type)==="list"){const w=E,k=w.raw+`
`+s.join(`
`),U=this.list(k);d[d.length-1]=U,r=r.substring(0,r.length-E.raw.length)+U.raw,a=a.substring(0,a.length-w.raw.length)+U.raw,s=k.substring(d[d.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:d,text:a}}}list(e){let n=this.rules.block.list.exec(e);if(n){let s=n[1].trim();const r=s.length>1,a={type:"list",raw:"",ordered:r,start:r?+s.slice(0,-1):"",loose:!1,items:[]};s=r?`\\d{1,9}\\${s.slice(-1)}`:`\\${s}`,this.options.pedantic&&(s=r?s:"[*+-]");const d=new RegExp(`^( {0,3}${s})((?:[	 ][^\\n]*)?(?:\\n|$))`);let h=!1;for(;e;){let g=!1,p="",y="";if(!(n=d.exec(e))||this.rules.block.hr.test(e))break;p=n[0],e=e.substring(p.length);let T=n[2].split(`
`,1)[0].replace(/^\t+/,q=>" ".repeat(3*q.length)),_=e.split(`
`,1)[0],E=!T.trim(),w=0;if(this.options.pedantic?(w=2,y=T.trimStart()):E?w=n[1].length+1:(w=n[2].search(/[^ ]/),w=w>4?1:w,y=T.slice(w),w+=n[1].length),E&&/^ *$/.test(_)&&(p+=_+`
`,e=e.substring(_.length+1),g=!0),!g){const q=new RegExp(`^ {0,${Math.min(3,w-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),B=new RegExp(`^ {0,${Math.min(3,w-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),M=new RegExp(`^ {0,${Math.min(3,w-1)}}(?:\`\`\`|~~~)`),J=new RegExp(`^ {0,${Math.min(3,w-1)}}#`);for(;e;){const G=e.split(`
`,1)[0];if(_=G,this.options.pedantic&&(_=_.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),M.test(_)||J.test(_)||q.test(_)||B.test(e))break;if(_.search(/[^ ]/)>=w||!_.trim())y+=`
`+_.slice(w);else{if(E||T.search(/[^ ]/)>=4||M.test(T)||J.test(T)||B.test(T))break;y+=`
`+_}!E&&!_.trim()&&(E=!0),p+=G+`
`,e=e.substring(G.length+1),T=_.slice(w)}}a.loose||(h?a.loose=!0:/\n *\n *$/.test(p)&&(h=!0));let k=null,U;this.options.gfm&&(k=/^\[[ xX]\] /.exec(y),k&&(U=k[0]!=="[ ] ",y=y.replace(/^\[[ xX]\] +/,""))),a.items.push({type:"list_item",raw:p,task:!!k,checked:U,loose:!1,text:y,tokens:[]}),a.raw+=p}a.items[a.items.length-1].raw=a.items[a.items.length-1].raw.trimEnd(),a.items[a.items.length-1].text=a.items[a.items.length-1].text.trimEnd(),a.raw=a.raw.trimEnd();for(let g=0;g<a.items.length;g++)if(this.lexer.state.top=!1,a.items[g].tokens=this.lexer.blockTokens(a.items[g].text,[]),!a.loose){const p=a.items[g].tokens.filter(T=>T.type==="space"),y=p.length>0&&p.some(T=>/\n.*\n/.test(T.raw));a.loose=y}if(a.loose)for(let g=0;g<a.items.length;g++)a.items[g].loose=!0;return a}}html(e){const n=this.rules.block.html.exec(e);if(n)return{type:"html",block:!0,raw:n[0],pre:n[1]==="pre"||n[1]==="script"||n[1]==="style",text:n[0]}}def(e){const n=this.rules.block.def.exec(e);if(n){const s=n[1].toLowerCase().replace(/\s+/g," "),r=n[2]?n[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",a=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):n[3];return{type:"def",tag:s,raw:n[0],href:r,title:a}}}table(e){const n=this.rules.block.table.exec(e);if(!n||!/[:|]/.test(n[2]))return;const s=ym(n[1]),r=n[2].replace(/^\||\| *$/g,"").split("|"),a=n[3]&&n[3].trim()?n[3].replace(/\n[ \t]*$/,"").split(`
`):[],d={type:"table",raw:n[0],header:[],align:[],rows:[]};if(s.length===r.length){for(const h of r)/^ *-+: *$/.test(h)?d.align.push("right"):/^ *:-+: *$/.test(h)?d.align.push("center"):/^ *:-+ *$/.test(h)?d.align.push("left"):d.align.push(null);for(let h=0;h<s.length;h++)d.header.push({text:s[h],tokens:this.lexer.inline(s[h]),header:!0,align:d.align[h]});for(const h of a)d.rows.push(ym(h,d.header.length).map((g,p)=>({text:g,tokens:this.lexer.inline(g),header:!1,align:d.align[p]})));return d}}lheading(e){const n=this.rules.block.lheading.exec(e);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(e){const n=this.rules.block.paragraph.exec(e);if(n){const s=n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:s,tokens:this.lexer.inline(s)}}}text(e){const n=this.rules.block.text.exec(e);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(e){const n=this.rules.inline.escape.exec(e);if(n)return{type:"escape",raw:n[0],text:kt(n[1])}}tag(e){const n=this.rules.inline.tag.exec(e);if(n)return!this.lexer.state.inLink&&/^<a /i.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:n[0]}}link(e){const n=this.rules.inline.link.exec(e);if(n){const s=n[2].trim();if(!this.options.pedantic&&/^</.test(s)){if(!/>$/.test(s))return;const d=Po(s.slice(0,-1),"\\");if((s.length-d.length)%2===0)return}else{const d=O_(n[2],"()");if(d>-1){const g=(n[0].indexOf("!")===0?5:4)+n[1].length+d;n[2]=n[2].substring(0,d),n[0]=n[0].substring(0,g).trim(),n[3]=""}}let r=n[2],a="";if(this.options.pedantic){const d=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);d&&(r=d[1],a=d[3])}else a=n[3]?n[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(this.options.pedantic&&!/>$/.test(s)?r=r.slice(1):r=r.slice(1,-1)),vm(n,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:a&&a.replace(this.rules.inline.anyPunctuation,"$1")},n[0],this.lexer)}}reflink(e,n){let s;if((s=this.rules.inline.reflink.exec(e))||(s=this.rules.inline.nolink.exec(e))){const r=(s[2]||s[1]).replace(/\s+/g," "),a=n[r.toLowerCase()];if(!a){const d=s[0].charAt(0);return{type:"text",raw:d,text:d}}return vm(s,a,s[0],this.lexer)}}emStrong(e,n,s=""){let r=this.rules.inline.emStrongLDelim.exec(e);if(!r||r[3]&&s.match(/[\p{L}\p{N}]/u))return;if(!(r[1]||r[2]||"")||!s||this.rules.inline.punctuation.exec(s)){const d=[...r[0]].length-1;let h,g,p=d,y=0;const T=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(T.lastIndex=0,n=n.slice(-1*e.length+d);(r=T.exec(n))!=null;){if(h=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!h)continue;if(g=[...h].length,r[3]||r[4]){p+=g;continue}else if((r[5]||r[6])&&d%3&&!((d+g)%3)){y+=g;continue}if(p-=g,p>0)continue;g=Math.min(g,g+p+y);const _=[...r[0]][0].length,E=e.slice(0,d+r.index+_+g);if(Math.min(d,g)%2){const k=E.slice(1,-1);return{type:"em",raw:E,text:k,tokens:this.lexer.inlineTokens(k)}}const w=E.slice(2,-2);return{type:"strong",raw:E,text:w,tokens:this.lexer.inlineTokens(w)}}}}codespan(e){const n=this.rules.inline.code.exec(e);if(n){let s=n[2].replace(/\n/g," ");const r=/[^ ]/.test(s),a=/^ /.test(s)&&/ $/.test(s);return r&&a&&(s=s.substring(1,s.length-1)),s=kt(s,!0),{type:"codespan",raw:n[0],text:s}}}br(e){const n=this.rules.inline.br.exec(e);if(n)return{type:"br",raw:n[0]}}del(e){const n=this.rules.inline.del.exec(e);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(e){const n=this.rules.inline.autolink.exec(e);if(n){let s,r;return n[2]==="@"?(s=kt(n[1]),r="mailto:"+s):(s=kt(n[1]),r=s),{type:"link",raw:n[0],text:s,href:r,tokens:[{type:"text",raw:s,text:s}]}}}url(e){var s;let n;if(n=this.rules.inline.url.exec(e)){let r,a;if(n[2]==="@")r=kt(n[0]),a="mailto:"+r;else{let d;do d=n[0],n[0]=((s=this.rules.inline._backpedal.exec(n[0]))==null?void 0:s[0])??"";while(d!==n[0]);r=kt(n[0]),n[1]==="www."?a="http://"+n[0]:a=n[0]}return{type:"link",raw:n[0],text:r,href:a,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e){const n=this.rules.inline.text.exec(e);if(n){let s;return this.lexer.state.inRawBlock?s=n[0]:s=kt(n[0]),{type:"text",raw:n[0],text:s}}}}const V_=/^(?: *(?:\n|$))+/,H_=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,G_=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Xo=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,z_=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,_y=/(?:[*+-]|\d{1,9}[.)])/,Sy=Le(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,_y).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),Qc=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,$_=/^[^\n]+/,Xc=/(?!\s*\])(?:\\.|[^\[\]\\])+/,F_=Le(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",Xc).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),J_=Le(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,_y).getRegex(),Ul="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Wc=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Y_=Le("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",Wc).replace("tag",Ul).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Cy=Le(Qc).replace("hr",Xo).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ul).getRegex(),K_=Le(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Cy).getRegex(),Zc={blockquote:K_,code:H_,def:F_,fences:G_,heading:z_,hr:Xo,html:Y_,lheading:Sy,list:J_,newline:V_,paragraph:Cy,table:zo,text:$_},Tm=Le("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Xo).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ul).getRegex(),Q_={...Zc,table:Tm,paragraph:Le(Qc).replace("hr",Xo).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Tm).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ul).getRegex()},X_={...Zc,html:Le(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Wc).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:zo,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Le(Qc).replace("hr",Xo).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Sy).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},xy=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,W_=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Ey=/^( {2,}|\\)\n(?!\s*$)/,Z_=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Wo="\\p{P}\\p{S}",j_=Le(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Wo).getRegex(),eS=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,tS=Le(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Wo).getRegex(),nS=Le("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Wo).getRegex(),iS=Le("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Wo).getRegex(),sS=Le(/\\([punct])/,"gu").replace(/punct/g,Wo).getRegex(),oS=Le(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),rS=Le(Wc).replace("(?:-->|$)","-->").getRegex(),lS=Le("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",rS).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Al=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,aS=Le(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Al).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),wy=Le(/^!?\[(label)\]\[(ref)\]/).replace("label",Al).replace("ref",Xc).getRegex(),by=Le(/^!?\[(ref)\](?:\[\])?/).replace("ref",Xc).getRegex(),uS=Le("reflink|nolink(?!\\()","g").replace("reflink",wy).replace("nolink",by).getRegex(),jc={_backpedal:zo,anyPunctuation:sS,autolink:oS,blockSkip:eS,br:Ey,code:W_,del:zo,emStrongLDelim:tS,emStrongRDelimAst:nS,emStrongRDelimUnd:iS,escape:xy,link:aS,nolink:by,punctuation:j_,reflink:wy,reflinkSearch:uS,tag:lS,text:Z_,url:zo},cS={...jc,link:Le(/^!?\[(label)\]\((.*?)\)/).replace("label",Al).getRegex(),reflink:Le(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Al).getRegex()},Sc={...jc,escape:Le(xy).replace("])","~|])").getRegex(),url:Le(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},fS={...Sc,br:Le(Ey).replace("{2,}","*").getRegex(),text:Le(Sc.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},gl={normal:Zc,gfm:Q_,pedantic:X_},qo={normal:jc,gfm:Sc,breaks:fS,pedantic:cS};class jt{constructor(e){Oe(this,"tokens");Oe(this,"options");Oe(this,"state");Oe(this,"tokenizer");Oe(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Ci,this.options.tokenizer=this.options.tokenizer||new bl,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={block:gl.normal,inline:qo.normal};this.options.pedantic?(n.block=gl.pedantic,n.inline=qo.pedantic):this.options.gfm&&(n.block=gl.gfm,this.options.breaks?n.inline=qo.breaks:n.inline=qo.gfm),this.tokenizer.rules=n}static get rules(){return{block:gl,inline:qo}}static lex(e,n){return new jt(n).lex(e)}static lexInline(e,n){return new jt(n).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){const s=this.inlineQueue[n];this.inlineTokens(s.src,s.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,n=[],s=!1){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(h,g,p)=>g+"    ".repeat(p.length));let r,a,d;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(h=>(r=h.call({lexer:this},e,n))?(e=e.substring(r.raw.length),n.push(r),!0):!1))){if(r=this.tokenizer.space(e)){e=e.substring(r.raw.length),r.raw.length===1&&n.length>0?n[n.length-1].raw+=`
`:n.push(r);continue}if(r=this.tokenizer.code(e)){e=e.substring(r.raw.length),a=n[n.length-1],a&&(a.type==="paragraph"||a.type==="text")?(a.raw+=`
`+r.raw,a.text+=`
`+r.text,this.inlineQueue[this.inlineQueue.length-1].src=a.text):n.push(r);continue}if(r=this.tokenizer.fences(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.heading(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.hr(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.blockquote(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.list(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.html(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.def(e)){e=e.substring(r.raw.length),a=n[n.length-1],a&&(a.type==="paragraph"||a.type==="text")?(a.raw+=`
`+r.raw,a.text+=`
`+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=a.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});continue}if(r=this.tokenizer.table(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.lheading(e)){e=e.substring(r.raw.length),n.push(r);continue}if(d=e,this.options.extensions&&this.options.extensions.startBlock){let h=1/0;const g=e.slice(1);let p;this.options.extensions.startBlock.forEach(y=>{p=y.call({lexer:this},g),typeof p=="number"&&p>=0&&(h=Math.min(h,p))}),h<1/0&&h>=0&&(d=e.substring(0,h+1))}if(this.state.top&&(r=this.tokenizer.paragraph(d))){a=n[n.length-1],s&&(a==null?void 0:a.type)==="paragraph"?(a.raw+=`
`+r.raw,a.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=a.text):n.push(r),s=d.length!==e.length,e=e.substring(r.raw.length);continue}if(r=this.tokenizer.text(e)){e=e.substring(r.raw.length),a=n[n.length-1],a&&a.type==="text"?(a.raw+=`
`+r.raw,a.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=a.text):n.push(r);continue}if(e){const h="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(h);break}else throw new Error(h)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){let s,r,a,d=e,h,g,p;if(this.tokens.links){const y=Object.keys(this.tokens.links);if(y.length>0)for(;(h=this.tokenizer.rules.inline.reflinkSearch.exec(d))!=null;)y.includes(h[0].slice(h[0].lastIndexOf("[")+1,-1))&&(d=d.slice(0,h.index)+"["+"a".repeat(h[0].length-2)+"]"+d.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(h=this.tokenizer.rules.inline.blockSkip.exec(d))!=null;)d=d.slice(0,h.index)+"["+"a".repeat(h[0].length-2)+"]"+d.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(h=this.tokenizer.rules.inline.anyPunctuation.exec(d))!=null;)d=d.slice(0,h.index)+"++"+d.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(g||(p=""),g=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(y=>(s=y.call({lexer:this},e,n))?(e=e.substring(s.raw.length),n.push(s),!0):!1))){if(s=this.tokenizer.escape(e)){e=e.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.tag(e)){e=e.substring(s.raw.length),r=n[n.length-1],r&&s.type==="text"&&r.type==="text"?(r.raw+=s.raw,r.text+=s.text):n.push(s);continue}if(s=this.tokenizer.link(e)){e=e.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(s.raw.length),r=n[n.length-1],r&&s.type==="text"&&r.type==="text"?(r.raw+=s.raw,r.text+=s.text):n.push(s);continue}if(s=this.tokenizer.emStrong(e,d,p)){e=e.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.codespan(e)){e=e.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.br(e)){e=e.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.del(e)){e=e.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.autolink(e)){e=e.substring(s.raw.length),n.push(s);continue}if(!this.state.inLink&&(s=this.tokenizer.url(e))){e=e.substring(s.raw.length),n.push(s);continue}if(a=e,this.options.extensions&&this.options.extensions.startInline){let y=1/0;const T=e.slice(1);let _;this.options.extensions.startInline.forEach(E=>{_=E.call({lexer:this},T),typeof _=="number"&&_>=0&&(y=Math.min(y,_))}),y<1/0&&y>=0&&(a=e.substring(0,y+1))}if(s=this.tokenizer.inlineText(a)){e=e.substring(s.raw.length),s.raw.slice(-1)!=="_"&&(p=s.raw.slice(-1)),g=!0,r=n[n.length-1],r&&r.type==="text"?(r.raw+=s.raw,r.text+=s.text):n.push(s);continue}if(e){const y="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(y);break}else throw new Error(y)}}return n}}class Rl{constructor(e){Oe(this,"options");Oe(this,"parser");this.options=e||Ci}space(e){return""}code({text:e,lang:n,escaped:s}){var d;const r=(d=(n||"").match(/^\S*/))==null?void 0:d[0],a=e.replace(/\n$/,"")+`
`;return r?'<pre><code class="language-'+kt(r)+'">'+(s?a:kt(a,!0))+`</code></pre>
`:"<pre><code>"+(s?a:kt(a,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:n}){return`<h${n}>${this.parser.parseInline(e)}</h${n}>
`}hr(e){return`<hr>
`}list(e){const n=e.ordered,s=e.start;let r="";for(let h=0;h<e.items.length;h++){const g=e.items[h];r+=this.listitem(g)}const a=n?"ol":"ul",d=n&&s!==1?' start="'+s+'"':"";return"<"+a+d+`>
`+r+"</"+a+`>
`}listitem(e){let n="";if(e.task){const s=this.checkbox({checked:!!e.checked});e.loose?e.tokens.length>0&&e.tokens[0].type==="paragraph"?(e.tokens[0].text=s+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=s+" "+e.tokens[0].tokens[0].text)):e.tokens.unshift({type:"text",raw:s+" ",text:s+" "}):n+=s+" "}return n+=this.parser.parse(e.tokens,!!e.loose),`<li>${n}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let n="",s="";for(let a=0;a<e.header.length;a++)s+=this.tablecell(e.header[a]);n+=this.tablerow({text:s});let r="";for(let a=0;a<e.rows.length;a++){const d=e.rows[a];s="";for(let h=0;h<d.length;h++)s+=this.tablecell(d[h]);r+=this.tablerow({text:s})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+n+`</thead>
`+r+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){const n=this.parser.parseInline(e.tokens),s=e.header?"th":"td";return(e.align?`<${s} align="${e.align}">`:`<${s}>`)+n+`</${s}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${e}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:n,tokens:s}){const r=this.parser.parseInline(s),a=gm(e);if(a===null)return r;e=a;let d='<a href="'+e+'"';return n&&(d+=' title="'+n+'"'),d+=">"+r+"</a>",d}image({href:e,title:n,text:s}){const r=gm(e);if(r===null)return s;e=r;let a=`<img src="${e}" alt="${s}"`;return n&&(a+=` title="${n}"`),a+=">",a}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):e.text}}class ef{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}}class en{constructor(e){Oe(this,"options");Oe(this,"renderer");Oe(this,"textRenderer");this.options=e||Ci,this.options.renderer=this.options.renderer||new Rl,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new ef}static parse(e,n){return new en(n).parse(e)}static parseInline(e,n){return new en(n).parseInline(e)}parse(e,n=!0){let s="";for(let r=0;r<e.length;r++){const a=e[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[a.type]){const h=a,g=this.options.extensions.renderers[h.type].call({parser:this},h);if(g!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(h.type)){s+=g||"";continue}}const d=a;switch(d.type){case"space":{s+=this.renderer.space(d);continue}case"hr":{s+=this.renderer.hr(d);continue}case"heading":{s+=this.renderer.heading(d);continue}case"code":{s+=this.renderer.code(d);continue}case"table":{s+=this.renderer.table(d);continue}case"blockquote":{s+=this.renderer.blockquote(d);continue}case"list":{s+=this.renderer.list(d);continue}case"html":{s+=this.renderer.html(d);continue}case"paragraph":{s+=this.renderer.paragraph(d);continue}case"text":{let h=d,g=this.renderer.text(h);for(;r+1<e.length&&e[r+1].type==="text";)h=e[++r],g+=`
`+this.renderer.text(h);n?s+=this.renderer.paragraph({type:"paragraph",raw:g,text:g,tokens:[{type:"text",raw:g,text:g}]}):s+=g;continue}default:{const h='Token with "'+d.type+'" type was not found.';if(this.options.silent)return console.error(h),"";throw new Error(h)}}}return s}parseInline(e,n){n=n||this.renderer;let s="";for(let r=0;r<e.length;r++){const a=e[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[a.type]){const h=this.options.extensions.renderers[a.type].call({parser:this},a);if(h!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){s+=h||"";continue}}const d=a;switch(d.type){case"escape":{s+=n.text(d);break}case"html":{s+=n.html(d);break}case"link":{s+=n.link(d);break}case"image":{s+=n.image(d);break}case"strong":{s+=n.strong(d);break}case"em":{s+=n.em(d);break}case"codespan":{s+=n.codespan(d);break}case"br":{s+=n.br(d);break}case"del":{s+=n.del(d);break}case"text":{s+=n.text(d);break}default:{const h='Token with "'+d.type+'" type was not found.';if(this.options.silent)return console.error(h),"";throw new Error(h)}}}return s}}class $o{constructor(e){Oe(this,"options");this.options=e||Ci}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}}Oe($o,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));var _n,Ay,Cc,Ry;class dS{constructor(...e){sm(this,_n);Oe(this,"defaults",Kc());Oe(this,"options",this.setOptions);Oe(this,"parse",Io(this,_n,Cc).call(this,jt.lex,en.parse));Oe(this,"parseInline",Io(this,_n,Cc).call(this,jt.lexInline,en.parseInline));Oe(this,"Parser",en);Oe(this,"Renderer",Rl);Oe(this,"TextRenderer",ef);Oe(this,"Lexer",jt);Oe(this,"Tokenizer",bl);Oe(this,"Hooks",$o);this.use(...e)}walkTokens(e,n){var r,a;let s=[];for(const d of e)switch(s=s.concat(n.call(this,d)),d.type){case"table":{const h=d;for(const g of h.header)s=s.concat(this.walkTokens(g.tokens,n));for(const g of h.rows)for(const p of g)s=s.concat(this.walkTokens(p.tokens,n));break}case"list":{const h=d;s=s.concat(this.walkTokens(h.items,n));break}default:{const h=d;(a=(r=this.defaults.extensions)==null?void 0:r.childTokens)!=null&&a[h.type]?this.defaults.extensions.childTokens[h.type].forEach(g=>{const p=h[g].flat(1/0);s=s.concat(this.walkTokens(p,n))}):h.tokens&&(s=s.concat(this.walkTokens(h.tokens,n)))}}return s}use(...e){const n=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(s=>{const r={...s};if(r.async=this.defaults.async||r.async||!1,s.extensions&&(s.extensions.forEach(a=>{if(!a.name)throw new Error("extension name required");if("renderer"in a){const d=n.renderers[a.name];d?n.renderers[a.name]=function(...h){let g=a.renderer.apply(this,h);return g===!1&&(g=d.apply(this,h)),g}:n.renderers[a.name]=a.renderer}if("tokenizer"in a){if(!a.level||a.level!=="block"&&a.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const d=n[a.level];d?d.unshift(a.tokenizer):n[a.level]=[a.tokenizer],a.start&&(a.level==="block"?n.startBlock?n.startBlock.push(a.start):n.startBlock=[a.start]:a.level==="inline"&&(n.startInline?n.startInline.push(a.start):n.startInline=[a.start]))}"childTokens"in a&&a.childTokens&&(n.childTokens[a.name]=a.childTokens)}),r.extensions=n),s.renderer){const a=this.defaults.renderer||new Rl(this.defaults);for(const d in s.renderer){if(!(d in a))throw new Error(`renderer '${d}' does not exist`);if(["options","parser"].includes(d))continue;const h=d;let g=s.renderer[h];s.useNewRenderer||(g=Io(this,_n,Ay).call(this,g,h,a));const p=a[h];a[h]=(...y)=>{let T=g.apply(a,y);return T===!1&&(T=p.apply(a,y)),T||""}}r.renderer=a}if(s.tokenizer){const a=this.defaults.tokenizer||new bl(this.defaults);for(const d in s.tokenizer){if(!(d in a))throw new Error(`tokenizer '${d}' does not exist`);if(["options","rules","lexer"].includes(d))continue;const h=d,g=s.tokenizer[h],p=a[h];a[h]=(...y)=>{let T=g.apply(a,y);return T===!1&&(T=p.apply(a,y)),T}}r.tokenizer=a}if(s.hooks){const a=this.defaults.hooks||new $o;for(const d in s.hooks){if(!(d in a))throw new Error(`hook '${d}' does not exist`);if(d==="options")continue;const h=d,g=s.hooks[h],p=a[h];$o.passThroughHooks.has(d)?a[h]=y=>{if(this.defaults.async)return Promise.resolve(g.call(a,y)).then(_=>p.call(a,_));const T=g.call(a,y);return p.call(a,T)}:a[h]=(...y)=>{let T=g.apply(a,y);return T===!1&&(T=p.apply(a,y)),T}}r.hooks=a}if(s.walkTokens){const a=this.defaults.walkTokens,d=s.walkTokens;r.walkTokens=function(h){let g=[];return g.push(d.call(this,h)),a&&(g=g.concat(a.call(this,h))),g}}this.defaults={...this.defaults,...r}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,n){return jt.lex(e,n??this.defaults)}parser(e,n){return en.parse(e,n??this.defaults)}}_n=new WeakSet,Ay=function(e,n,s){switch(n){case"heading":return function(r){return!r.type||r.type!==n?e.apply(this,arguments):e.call(this,s.parser.parseInline(r.tokens),r.depth,P_(s.parser.parseInline(r.tokens,s.parser.textRenderer)))};case"code":return function(r){return!r.type||r.type!==n?e.apply(this,arguments):e.call(this,r.text,r.lang,!!r.escaped)};case"table":return function(r){if(!r.type||r.type!==n)return e.apply(this,arguments);let a="",d="";for(let g=0;g<r.header.length;g++)d+=this.tablecell({text:r.header[g].text,tokens:r.header[g].tokens,header:!0,align:r.align[g]});a+=this.tablerow({text:d});let h="";for(let g=0;g<r.rows.length;g++){const p=r.rows[g];d="";for(let y=0;y<p.length;y++)d+=this.tablecell({text:p[y].text,tokens:p[y].tokens,header:!1,align:r.align[y]});h+=this.tablerow({text:d})}return e.call(this,a,h)};case"blockquote":return function(r){if(!r.type||r.type!==n)return e.apply(this,arguments);const a=this.parser.parse(r.tokens);return e.call(this,a)};case"list":return function(r){if(!r.type||r.type!==n)return e.apply(this,arguments);const a=r.ordered,d=r.start,h=r.loose;let g="";for(let p=0;p<r.items.length;p++){const y=r.items[p],T=y.checked,_=y.task;let E="";if(y.task){const w=this.checkbox({checked:!!T});h?y.tokens.length>0&&y.tokens[0].type==="paragraph"?(y.tokens[0].text=w+" "+y.tokens[0].text,y.tokens[0].tokens&&y.tokens[0].tokens.length>0&&y.tokens[0].tokens[0].type==="text"&&(y.tokens[0].tokens[0].text=w+" "+y.tokens[0].tokens[0].text)):y.tokens.unshift({type:"text",text:w+" "}):E+=w+" "}E+=this.parser.parse(y.tokens,h),g+=this.listitem({type:"list_item",raw:E,text:E,task:_,checked:!!T,loose:h,tokens:y.tokens})}return e.call(this,g,a,d)};case"html":return function(r){return!r.type||r.type!==n?e.apply(this,arguments):e.call(this,r.text,r.block)};case"paragraph":return function(r){return!r.type||r.type!==n?e.apply(this,arguments):e.call(this,this.parser.parseInline(r.tokens))};case"escape":return function(r){return!r.type||r.type!==n?e.apply(this,arguments):e.call(this,r.text)};case"link":return function(r){return!r.type||r.type!==n?e.apply(this,arguments):e.call(this,r.href,r.title,this.parser.parseInline(r.tokens))};case"image":return function(r){return!r.type||r.type!==n?e.apply(this,arguments):e.call(this,r.href,r.title,r.text)};case"strong":return function(r){return!r.type||r.type!==n?e.apply(this,arguments):e.call(this,this.parser.parseInline(r.tokens))};case"em":return function(r){return!r.type||r.type!==n?e.apply(this,arguments):e.call(this,this.parser.parseInline(r.tokens))};case"codespan":return function(r){return!r.type||r.type!==n?e.apply(this,arguments):e.call(this,r.text)};case"del":return function(r){return!r.type||r.type!==n?e.apply(this,arguments):e.call(this,this.parser.parseInline(r.tokens))};case"text":return function(r){return!r.type||r.type!==n?e.apply(this,arguments):e.call(this,r.text)}}return e},Cc=function(e,n){return(s,r)=>{const a={...r},d={...this.defaults,...a};this.defaults.async===!0&&a.async===!1&&(d.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),d.async=!0);const h=Io(this,_n,Ry).call(this,!!d.silent,!!d.async);if(typeof s>"u"||s===null)return h(new Error("marked(): input parameter is undefined or null"));if(typeof s!="string")return h(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(s)+", string expected"));if(d.hooks&&(d.hooks.options=d),d.async)return Promise.resolve(d.hooks?d.hooks.preprocess(s):s).then(g=>e(g,d)).then(g=>d.hooks?d.hooks.processAllTokens(g):g).then(g=>d.walkTokens?Promise.all(this.walkTokens(g,d.walkTokens)).then(()=>g):g).then(g=>n(g,d)).then(g=>d.hooks?d.hooks.postprocess(g):g).catch(h);try{d.hooks&&(s=d.hooks.preprocess(s));let g=e(s,d);d.hooks&&(g=d.hooks.processAllTokens(g)),d.walkTokens&&this.walkTokens(g,d.walkTokens);let p=n(g,d);return d.hooks&&(p=d.hooks.postprocess(p)),p}catch(g){return h(g)}}},Ry=function(e,n){return s=>{if(s.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const r="<p>An error occurred:</p><pre>"+kt(s.message+"",!0)+"</pre>";return n?Promise.resolve(r):r}if(n)return Promise.reject(s);throw s}};const _i=new dS;function Ne(t,e){return _i.parse(t,e)}Ne.options=Ne.setOptions=function(t){return _i.setOptions(t),Ne.defaults=_i.defaults,yy(Ne.defaults),Ne};Ne.getDefaults=Kc;Ne.defaults=Ci;Ne.use=function(...t){return _i.use(...t),Ne.defaults=_i.defaults,yy(Ne.defaults),Ne};Ne.walkTokens=function(t,e){return _i.walkTokens(t,e)};Ne.parseInline=_i.parseInline;Ne.Parser=en;Ne.parser=en.parse;Ne.Renderer=Rl;Ne.TextRenderer=ef;Ne.Lexer=jt;Ne.lexer=jt.lex;Ne.Tokenizer=bl;Ne.Hooks=$o;Ne.parse=Ne;Ne.options;Ne.setOptions;Ne.use;Ne.walkTokens;Ne.parseInline;en.parse;jt.lex;const hS=t=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 11.667 0l3.181-3.183m-4.991-2.691v4.992m0 0h-4.992m4.992 0-3.181-3.183a8.25 8.25 0 0 0-11.667 0L2.985 16.652"})}),pS=t=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"})}),mS=t=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"})}),gS=()=>C.jsx("div",{className:"w-8 h-8 rounded-full bg-accent-blue flex items-center justify-center font-bold text-white flex-shrink-0",children:"U"}),yS=()=>C.jsx("div",{className:"w-8 h-8 rounded-full bg-sidebar-bg border border-border-color flex items-center justify-center flex-shrink-0",children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 text-accent-blue",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456Z"})})}),_m=({content:t})=>{const e=Ne.parse(t,{gfm:!0,breaks:!0});return C.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:e}})},vS=({result:t})=>{const[e,n]=ie.useState(!1),s=t.signal==="BUY"?"text-accent-green":t.signal==="SELL"?"text-accent-red":"text-accent-yellow",r=t.signal==="BUY"?"bg-accent-green-10":t.signal==="SELL"?"bg-accent-red-10":"bg-accent-yellow-10",a=()=>{let d=`Wizz AI Analysis
---
`;d+=`Summary: ${t.summary}
`,d+=`Signal: ${t.signal} (${t.confidence} Confidence)
`,t.trade&&t.confidence==="HIGH"&&(d+=`Entry Price: ${t.trade.entryPrice}
`,d+=`Take Profit: ${t.trade.takeProfit}
`,d+=`Stop Loss: ${t.trade.stopLoss}
`),t.riskRewardRatio&&(d+=`Risk/Reward Ratio: ${t.riskRewardRatio}
`),d+=`AI Confidence Score: ${t.overallConfidenceScore}/100`,navigator.clipboard.writeText(d).then(()=>{n(!0),setTimeout(()=>n(!1),2e3)})};return C.jsxs("div",{className:"border border-border-color rounded-lg space-y-4 bg-sidebar-bg relative",children:[C.jsx("div",{className:"absolute top-2 right-2",children:C.jsx("button",{onClick:a,className:"p-1.5 rounded-md text-text-secondary hover:bg-input-bg hover:text-text-primary transition-colors","aria-label":"Copy analysis to clipboard",children:e?C.jsx(mS,{className:"h-4 w-4 text-accent-green"}):C.jsx(pS,{className:"h-4 w-4"})})}),C.jsxs("div",{className:"p-4 space-y-4",children:[C.jsxs("div",{children:[C.jsx("h3",{className:"font-semibold text-text-primary mb-1",children:"Summary"}),C.jsx("p",{className:"text-sm text-text-secondary",children:t.summary})]}),C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[C.jsxs("div",{className:`p-3 rounded-lg ${r}`,children:[C.jsx("h4",{className:"text-xs font-semibold text-text-secondary mb-1",children:"Signal"}),C.jsx("p",{className:`text-lg font-bold ${s}`,children:t.signal})]}),C.jsxs("div",{className:"p-3 rounded-lg bg-input-bg-50",children:[C.jsx("h4",{className:"text-xs font-semibold text-text-secondary mb-1",children:"Confidence"}),C.jsx("p",{className:`text-lg font-bold ${t.confidence==="HIGH"?"text-text-primary":"text-text-secondary"}`,children:t.confidence})]})]}),t.timeframe&&C.jsxs("div",{children:[C.jsx("h3",{className:"font-semibold text-text-primary mb-2",children:"Analysis Context"}),C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:[C.jsxs("div",{className:"bg-input-bg-50 p-2 rounded-md",children:[C.jsx("span",{className:"text-text-secondary block text-xs",children:"Chart Timeframe"}),C.jsx("span",{className:"font-mono text-text-primary",children:t.timeframe})]}),t.riskRewardRatio&&C.jsxs("div",{className:"bg-input-bg-50 p-2 rounded-md",children:[C.jsx("span",{className:"text-text-secondary block text-xs",children:"Risk/Reward Ratio"}),C.jsx("span",{className:"font-mono text-text-primary",children:t.riskRewardRatio})]})]})]}),t.trade&&t.confidence==="HIGH"&&C.jsxs("div",{children:[C.jsx("h3",{className:"font-semibold text-text-primary mb-2",children:"Trade Details"}),C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 text-sm",children:[C.jsxs("div",{className:"bg-input-bg-50 p-2 rounded-md",children:[C.jsx("span",{className:"text-text-secondary block text-xs",children:"Entry Price"}),C.jsx("span",{className:"font-mono text-text-primary",children:t.trade.entryPrice})]}),C.jsxs("div",{className:"bg-input-bg-50 p-2 rounded-md",children:[C.jsx("span",{className:"text-text-secondary block text-xs",children:"Take Profit"}),C.jsx("span",{className:"font-mono text-accent-green",children:t.trade.takeProfit})]}),C.jsxs("div",{className:"bg-input-bg-50 p-2 rounded-md",children:[C.jsx("span",{className:"text-text-secondary block text-xs",children:"Stop Loss"}),C.jsx("span",{className:"font-mono text-accent-red",children:t.trade.stopLoss})]})]})]}),t.confidence==="LOW"&&C.jsx("p",{className:"text-xs text-center text-text-secondary italic",children:"No trade signal provided due to low confidence."}),t.isMultiTimeframeAnalysis&&t.multiTimeframeContext&&C.jsxs("div",{children:[C.jsx("h3",{className:"font-semibold text-text-primary mb-2",children:"Multi-Timeframe Confluence"}),C.jsxs("div",{className:"bg-input-bg-50 p-3 rounded-lg space-y-3",children:[C.jsxs("div",{className:"flex justify-between items-center",children:[C.jsx("span",{className:"text-sm font-medium text-text-secondary",children:"Confluence Score"}),C.jsxs("span",{className:"text-lg font-bold text-text-primary",children:[t.multiTimeframeContext.confluenceScore,"/100"]})]}),C.jsx("div",{className:"w-full bg-border-color rounded-full h-2.5",children:C.jsx("div",{className:"bg-accent-green h-2.5 rounded-full",style:{width:`${t.multiTimeframeContext.confluenceScore}%`}})}),C.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[C.jsxs("div",{children:[C.jsx("span",{className:"text-text-secondary",children:"Overall Trend:"}),C.jsx("span",{className:`ml-1 font-medium ${t.multiTimeframeContext.overallTrend==="BULLISH"?"text-accent-green":t.multiTimeframeContext.overallTrend==="BEARISH"?"text-accent-red":t.multiTimeframeContext.overallTrend==="MIXED"?"text-accent-yellow":"text-text-secondary"}`,children:t.multiTimeframeContext.overallTrend})]}),C.jsxs("div",{children:[C.jsx("span",{className:"text-text-secondary",children:"Primary TF:"}),C.jsx("span",{className:"ml-1 font-medium text-text-primary",children:t.multiTimeframeContext.primaryTimeframe})]})]}),C.jsxs("div",{className:"border-t border-border-color pt-2",children:[C.jsx("div",{className:"text-xs font-medium text-text-secondary mb-2",children:"Timeframe Analysis:"}),C.jsx("div",{className:"space-y-1",children:t.multiTimeframeContext.timeframeAnalyses.map((d,h)=>C.jsxs("div",{className:"flex justify-between items-center text-xs",children:[C.jsx("span",{className:"font-medium",children:d.timeframe}),C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx("span",{className:`px-1.5 py-0.5 rounded text-xs ${d.trend==="BULLISH"?"bg-accent-green-10 text-accent-green":d.trend==="BEARISH"?"bg-accent-red-10 text-accent-red":d.trend==="CONSOLIDATING"?"bg-accent-yellow-10 text-accent-yellow":"bg-input-bg text-text-secondary"}`,children:d.trend}),C.jsxs("span",{className:"text-text-secondary",children:[d.confidence,"%"]})]})]},h))})]}),t.multiTimeframeContext.conflictingSignals&&t.multiTimeframeContext.conflictingSignals.length>0&&C.jsxs("div",{className:"border-t border-border-color pt-2",children:[C.jsx("div",{className:"text-xs font-medium text-accent-red mb-1",children:"Conflicting Signals:"}),C.jsx("ul",{className:"text-xs text-text-secondary space-y-0.5",children:t.multiTimeframeContext.conflictingSignals.map((d,h)=>C.jsxs("li",{className:"flex items-start",children:[C.jsx("span",{className:"text-accent-red mr-1",children:"•"}),d]},h))})]})]})]}),C.jsxs("div",{children:[C.jsx("h3",{className:"font-semibold text-text-primary mb-2",children:t.isMultiTimeframeAnalysis?"Final Verification":"Verification"}),C.jsxs("div",{className:"bg-input-bg-50 p-3 rounded-lg space-y-2",children:[C.jsxs("div",{className:"flex justify-between items-center",children:[C.jsx("span",{className:"text-sm font-medium text-text-secondary",children:"AI Confidence Score"}),C.jsxs("span",{className:"text-lg font-bold text-text-primary",children:[t.overallConfidenceScore,"/100"]})]}),C.jsx("div",{className:"w-full bg-border-color rounded-full h-2.5",children:C.jsx("div",{className:"bg-accent-blue h-2.5 rounded-full",style:{width:`${t.overallConfidenceScore}%`}})}),C.jsx("p",{className:"text-xs text-text-secondary pt-1",children:t.verificationSummary})]})]})]})]})},TS=xs.memo(({message:t,isLastMessage:e,isLoading:n,onRegenerate:s})=>{const r=t.role==="user",{content:a,thinkingText:d}=t;if(r){const g=[];Array.isArray(t.images)&&t.images.length>0?g.push(...t.images):t.image&&g.push(t.image);const p=t.timeframeImages,y=p&&p.length>0;return C.jsxs("div",{className:"flex items-start gap-4 justify-end",children:[C.jsxs("div",{className:"flex-1 max-w-2xl bg-accent-blue rounded-lg p-3 text-white",children:[typeof a=="string"&&a&&C.jsx("p",{className:"whitespace-pre-wrap",children:a}),g.length>0&&!y&&C.jsx("div",{className:"mt-2 grid grid-cols-2 md:grid-cols-3 gap-2",children:g.map((T,_)=>C.jsx("img",{src:T,alt:`User upload ${_+1}`,className:"max-w-xs max-h-64 rounded-md border border-blue-400"},_))}),y&&C.jsxs("div",{className:"mt-2 space-y-2",children:[C.jsx("div",{className:"text-xs font-medium opacity-90",children:"Multi-Timeframe Analysis:"}),C.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:p.map((T,_)=>C.jsxs("div",{className:"bg-white bg-opacity-10 rounded-lg p-2",children:[C.jsxs("div",{className:"text-xs font-medium mb-1",children:[T.timeframe," ",T.label&&`- ${T.label}`]}),C.jsx("img",{src:`data:${T.imageData.mimeType};base64,${T.imageData.data}`,alt:`${T.timeframe} chart`,className:"w-full max-h-48 object-cover rounded border border-blue-400"})]},_))})]})]}),C.jsx(gS,{})]})}const h=typeof a=="string"&&(a.startsWith("Error:")||a.startsWith("Sorry, I encountered an error")||a==="Response stopped by user."||a==="An unexpected error occurred. Please try again.");return C.jsxs("div",{className:"flex items-start gap-4",children:[C.jsx(yS,{}),C.jsxs("div",{className:"flex-1 max-w-2xl space-y-4",children:[n&&C.jsxs("div",{className:"flex items-center gap-2 text-text-secondary",children:[C.jsx("div",{className:"h-5 w-5 border-2 border-t-transparent border-accent-blue rounded-full animate-spin"}),C.jsx("span",{children:"Wizz is analyzing..."})]}),d&&C.jsx(_m,{content:d}),typeof a=="object"&&C.jsx(vS,{result:a}),typeof a=="string"&&a&&(h?C.jsx("p",{className:"text-text-secondary italic",children:a}):C.jsx(_m,{content:a})),e&&t.role==="assistant"&&!n&&t.content&&C.jsx("div",{className:"!mt-2 flex justify-start",children:C.jsxs("button",{onClick:s,className:"flex items-center gap-1.5 text-xs text-text-secondary hover:text-text-primary px-2 py-1 rounded-md hover:bg-input-bg transition-colors","aria-label":"Regenerate response",children:[C.jsx(hS,{className:"h-4 w-4"}),C.jsx("span",{children:"Regenerate"})]})})]})]})});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let _S,SS;function CS(){return{geminiUrl:_S,vertexUrl:SS}}function xS(t,e,n,s){var r,a;if(!(t!=null&&t.baseUrl)){const d=CS();return e?(r=d.vertexUrl)!==null&&r!==void 0?r:n:(a=d.geminiUrl)!==null&&a!==void 0?a:s}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xi{}function se(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(s,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const a=e[r];return a!=null?String(a):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function c(t,e,n){for(let a=0;a<e.length-1;a++){const d=e[a];if(d.endsWith("[]")){const h=d.slice(0,-2);if(!(h in t))if(Array.isArray(n))t[h]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${d}`);if(Array.isArray(t[h])){const g=t[h];if(Array.isArray(n))for(let p=0;p<g.length;p++){const y=g[p];c(y,e.slice(a+1),n[p])}else for(const p of g)c(p,e.slice(a+1),n)}return}else if(d.endsWith("[0]")){const h=d.slice(0,-3);h in t||(t[h]=[{}]);const g=t[h];c(g[0],e.slice(a+1),n);return}(!t[d]||typeof t[d]!="object")&&(t[d]={}),t=t[d]}const s=e[e.length-1],r=t[s];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else t[s]=n}function u(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const s=e[n];if(s.endsWith("[]")){const r=s.slice(0,-2);if(r in t){const a=t[r];return Array.isArray(a)?a.map(d=>u(d,e.slice(n+1))):void 0}else return}else t=t[s]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xc(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Sm;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Sm||(Sm={}));var Cm;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Cm||(Cm={}));var le;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(le||(le={}));var xm;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(xm||(xm={}));var Em;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Em||(Em={}));var wm;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(wm||(wm={}));var bm;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(bm||(bm={}));var Am;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Am||(Am={}));var Rm;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Rm||(Rm={}));var Mm;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Mm||(Mm={}));var km;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(km||(km={}));var Nm;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(Nm||(Nm={}));var Dm;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Dm||(Dm={}));var Im;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Im||(Im={}));var Um;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(Um||(Um={}));var Lm;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Lm||(Lm={}));var Ml;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Ml||(Ml={}));var Pm;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Pm||(Pm={}));var Ec;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Ec||(Ec={}));var qm;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(qm||(qm={}));var Om;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Om||(Om={}));var Bm;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Bm||(Bm={}));var Vm;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Vm||(Vm={}));var Hm;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(Hm||(Hm={}));var Gm;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Gm||(Gm={}));var zm;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(zm||(zm={}));var $m;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})($m||($m={}));var Fm;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Fm||(Fm={}));var Jm;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Jm||(Jm={}));var Ym;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Ym||(Ym={}));var Km;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Km||(Km={}));var Qm;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Qm||(Qm={}));var Xm;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Xm||(Xm={}));var Wm;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(Wm||(Wm={}));var Zm;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Zm||(Zm={}));var jm;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(jm||(jm={}));var eg;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(eg||(eg={}));var tg;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(tg||(tg={}));var ng;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(ng||(ng={}));var ig;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(ig||(ig={}));var sg;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(sg||(sg={}));var og;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(og||(og={}));var Es;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Es||(Es={}));class wc{constructor(e){const n={};for(const s of e.headers.entries())n[s[0]]=s[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Oo{get text(){var e,n,s,r,a,d,h,g;if(((r=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",y=!1;const T=[];for(const _ of(g=(h=(d=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||d===void 0?void 0:d.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[E,w]of Object.entries(_))E!=="text"&&E!=="thought"&&(w!==null||w!==void 0)&&T.push(E);if(typeof _.text=="string"){if(typeof _.thought=="boolean"&&_.thought)continue;y=!0,p+=_.text}}return T.length>0&&console.warn(`there are non-text parts ${T} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),y?p:void 0}get data(){var e,n,s,r,a,d,h,g;if(((r=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const y=[];for(const T of(g=(h=(d=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||d===void 0?void 0:d.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[_,E]of Object.entries(T))_!=="inlineData"&&(E!==null||E!==void 0)&&y.push(_);T.inlineData&&typeof T.inlineData.data=="string"&&(p+=atob(T.inlineData.data))}return y.length>0&&console.warn(`there are non-data parts ${y} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,n,s,r,a,d,h,g;if(((r=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(g=(h=(d=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||d===void 0?void 0:d.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(y=>y.functionCall).map(y=>y.functionCall).filter(y=>y!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,n,s,r,a,d,h,g,p;if(((r=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const y=(g=(h=(d=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||d===void 0?void 0:d.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(T=>T.executableCode).map(T=>T.executableCode).filter(T=>T!==void 0);if((y==null?void 0:y.length)!==0)return(p=y==null?void 0:y[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,n,s,r,a,d,h,g,p;if(((r=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const y=(g=(h=(d=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||d===void 0?void 0:d.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(T=>T.codeExecutionResult).map(T=>T.codeExecutionResult).filter(T=>T!==void 0);if((y==null?void 0:y.length)!==0)return(p=y==null?void 0:y[0])===null||p===void 0?void 0:p.output}}class rg{}class lg{}class ES{}class wS{}class bS{}class ag{}class ug{}class cg{}class AS{}class fg{}class dg{}class hg{}class pg{}class RS{}class MS{}class kS{}class mg{}class NS{get text(){var e,n,s;let r="",a=!1;const d=[];for(const h of(s=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&s!==void 0?s:[]){for(const[g,p]of Object.entries(h))g!=="text"&&g!=="thought"&&p!==null&&d.push(g);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;a=!0,r+=h.text}}return d.length>0&&console.warn(`there are non-text parts ${d} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?r:void 0}get data(){var e,n,s;let r="";const a=[];for(const d of(s=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&s!==void 0?s:[]){for(const[h,g]of Object.entries(d))h!=="inlineData"&&g!==null&&a.push(h);d.inlineData&&typeof d.inlineData.data=="string"&&(r+=atob(d.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class kl{_fromAPIResponse({apiResponse:e,isVertexAI:n}){const s=new kl;if(s.name=e.name,s.metadata=e.metadata,s.done=e.done,s.error=e.error,n){const r=e.response;if(r){const a=new fg,d=r.videos;a.generatedVideos=d==null?void 0:d.map(h=>({video:{uri:h.gcsUri,videoBytes:h.bytesBase64Encoded?xc(h.bytesBase64Encoded):void 0,mimeType:h.mimeType}})),a.raiMediaFilteredCount=r.raiMediaFilteredCount,a.raiMediaFilteredReasons=r.raiMediaFilteredReasons,s.response=a}}else{const r=e.response;if(r){const a=new fg,d=r.generateVideoResponse,h=d==null?void 0:d.generatedSamples;a.generatedVideos=h==null?void 0:h.map(g=>{const p=g.video;return{video:{uri:p==null?void 0:p.uri,videoBytes:p!=null&&p.encodedVideo?xc(p==null?void 0:p.encodedVideo):void 0,mimeType:g.encoding}}}),a.raiMediaFilteredCount=d==null?void 0:d.raiMediaFilteredCount,a.raiMediaFilteredReasons=d==null?void 0:d.raiMediaFilteredReasons,s.response=a}}return s}}class DS{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Re(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function My(t,e){const n=Re(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function ky(t){return Array.isArray(t)?t.map(e=>Nl(e)):[Nl(t)]}function Nl(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Ny(t){const e=Nl(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Dy(t){const e=Nl(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function gg(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Iy(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>gg(e)):[gg(t)]}function bc(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function yg(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function vg(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function dt(t){if(t==null)throw new Error("ContentUnion is required");return bc(t)?t:{role:"user",parts:Iy(t)}}function Uy(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const s=dt(n);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(t.isVertexAI()){const n=dt(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>dt(n)):[dt(e)]}function Vt(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(yg(t)||vg(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[dt(t)]}const e=[],n=[],s=bc(t[0]);for(const r of t){const a=bc(r);if(a!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(r);else{if(yg(r)||vg(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return s||e.push({role:"user",parts:Iy(n)}),e}function IS(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(s=>s!=="null");if(n.length===1)e.type=Object.values(le).includes(n[0].toUpperCase())?n[0].toUpperCase():le.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of n)e.anyOf.push({type:Object.values(le).includes(s.toUpperCase())?s.toUpperCase():le.TYPE_UNSPECIFIED})}}function ws(t){const e={},n=["items"],s=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&IS(t.type,e);for(const[d,h]of Object.entries(t))if(h!=null)if(d=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.values(le).includes(h.toUpperCase())?h.toUpperCase():le.TYPE_UNSPECIFIED}else if(n.includes(d))e[d]=ws(h);else if(s.includes(d)){const g=[];for(const p of h){if(p.type=="null"){e.nullable=!0;continue}g.push(ws(p))}e[d]=g}else if(r.includes(d)){const g={};for(const[p,y]of Object.entries(h))g[p]=ws(y);e[d]=g}else{if(d==="additionalProperties")continue;e[d]=h}return e}function tf(t){return ws(t)}function nf(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function sf(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Ms(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=ws(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=ws(e.response));return t}function ks(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function US(t,e,n,s=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===s;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function Sn(t,e){if(typeof e!="string")throw new Error("name must be a string");return US(t,e,"cachedContents")}function Ly(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Ei(t){return xc(t)}function LS(t){return t!=null&&typeof t=="object"&&"name"in t}function PS(t){return t!=null&&typeof t=="object"&&"video"in t}function qS(t){return t!=null&&typeof t=="object"&&"uri"in t}function Py(t){var e;let n;if(LS(t)&&(n=t.name),!(qS(t)&&(n=t.uri,n===void 0))&&!(PS(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function qy(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function Oy(t){for(const e of["models","tunedModels","publisherModels"])if(OS(t,e))return t[e];return[]}function OS(t,e){return t!==null&&typeof t=="object"&&e in t}function BS(t,e={}){const n=t,s={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function VS(t,e={}){const n=[],s=new Set;for(const r of t){const a=r.name;if(s.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);s.add(a);const d=BS(r,e);d.functionDeclarations&&n.push(...d.functionDeclarations)}return{functionDeclarations:n}}function By(t,e){if(typeof e!="string"&&!Array.isArray(e)){if(t&&t.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function HS(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Ns(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Vy(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function GS(t){const e={},n=u(t,["fps"]);n!=null&&c(e,["fps"],n);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const r=u(t,["startOffset"]);return r!=null&&c(e,["startOffset"],r),e}function zS(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["data"]);n!=null&&c(e,["data"],n);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function $S(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function FS(t){const e={},n=u(t,["videoMetadata"]);n!=null&&c(e,["videoMetadata"],GS(n));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const r=u(t,["inlineData"]);r!=null&&c(e,["inlineData"],zS(r));const a=u(t,["fileData"]);a!=null&&c(e,["fileData"],$S(a));const d=u(t,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(t,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(t,["executableCode"]);g!=null&&c(e,["executableCode"],g);const p=u(t,["functionCall"]);p!=null&&c(e,["functionCall"],p);const y=u(t,["functionResponse"]);y!=null&&c(e,["functionResponse"],y);const T=u(t,["text"]);return T!=null&&c(e,["text"],T),e}function Hy(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>FS(a))),c(e,["parts"],r)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function JS(t){const e={},n=u(t,["anyOf"]);n!=null&&c(e,["anyOf"],n);const s=u(t,["default"]);s!=null&&c(e,["default"],s);const r=u(t,["description"]);r!=null&&c(e,["description"],r);const a=u(t,["enum"]);a!=null&&c(e,["enum"],a);const d=u(t,["example"]);d!=null&&c(e,["example"],d);const h=u(t,["format"]);h!=null&&c(e,["format"],h);const g=u(t,["items"]);g!=null&&c(e,["items"],g);const p=u(t,["maxItems"]);p!=null&&c(e,["maxItems"],p);const y=u(t,["maxLength"]);y!=null&&c(e,["maxLength"],y);const T=u(t,["maxProperties"]);T!=null&&c(e,["maxProperties"],T);const _=u(t,["maximum"]);_!=null&&c(e,["maximum"],_);const E=u(t,["minItems"]);E!=null&&c(e,["minItems"],E);const w=u(t,["minLength"]);w!=null&&c(e,["minLength"],w);const k=u(t,["minProperties"]);k!=null&&c(e,["minProperties"],k);const U=u(t,["minimum"]);U!=null&&c(e,["minimum"],U);const q=u(t,["nullable"]);q!=null&&c(e,["nullable"],q);const B=u(t,["pattern"]);B!=null&&c(e,["pattern"],B);const M=u(t,["properties"]);M!=null&&c(e,["properties"],M);const J=u(t,["propertyOrdering"]);J!=null&&c(e,["propertyOrdering"],J);const G=u(t,["required"]);G!=null&&c(e,["required"],G);const X=u(t,["title"]);X!=null&&c(e,["title"],X);const j=u(t,["type"]);return j!=null&&c(e,["type"],j),e}function YS(t){const e={};if(u(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=u(t,["category"]);n!=null&&c(e,["category"],n);const s=u(t,["threshold"]);return s!=null&&c(e,["threshold"],s),e}function KS(t){const e={},n=u(t,["behavior"]);n!=null&&c(e,["behavior"],n);const s=u(t,["description"]);s!=null&&c(e,["description"],s);const r=u(t,["name"]);r!=null&&c(e,["name"],r);const a=u(t,["parameters"]);a!=null&&c(e,["parameters"],a);const d=u(t,["parametersJsonSchema"]);d!=null&&c(e,["parametersJsonSchema"],d);const h=u(t,["response"]);h!=null&&c(e,["response"],h);const g=u(t,["responseJsonSchema"]);return g!=null&&c(e,["responseJsonSchema"],g),e}function QS(t){const e={},n=u(t,["startTime"]);n!=null&&c(e,["startTime"],n);const s=u(t,["endTime"]);return s!=null&&c(e,["endTime"],s),e}function XS(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],QS(n)),e}function WS(t){const e={},n=u(t,["mode"]);n!=null&&c(e,["mode"],n);const s=u(t,["dynamicThreshold"]);return s!=null&&c(e,["dynamicThreshold"],s),e}function ZS(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&c(e,["dynamicRetrievalConfig"],WS(n)),e}function jS(){return{}}function eC(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(p=>KS(p))),c(e,["functionDeclarations"],g)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=u(t,["googleSearch"]);s!=null&&c(e,["googleSearch"],XS(s));const r=u(t,["googleSearchRetrieval"]);if(r!=null&&c(e,["googleSearchRetrieval"],ZS(r)),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(t,["urlContext"])!=null&&c(e,["urlContext"],jS());const d=u(t,["codeExecution"]);d!=null&&c(e,["codeExecution"],d);const h=u(t,["computerUse"]);return h!=null&&c(e,["computerUse"],h),e}function tC(t){const e={},n=u(t,["mode"]);n!=null&&c(e,["mode"],n);const s=u(t,["allowedFunctionNames"]);return s!=null&&c(e,["allowedFunctionNames"],s),e}function nC(t){const e={},n=u(t,["latitude"]);n!=null&&c(e,["latitude"],n);const s=u(t,["longitude"]);return s!=null&&c(e,["longitude"],s),e}function iC(t){const e={},n=u(t,["latLng"]);n!=null&&c(e,["latLng"],nC(n));const s=u(t,["languageCode"]);return s!=null&&c(e,["languageCode"],s),e}function sC(t){const e={},n=u(t,["functionCallingConfig"]);n!=null&&c(e,["functionCallingConfig"],tC(n));const s=u(t,["retrievalConfig"]);return s!=null&&c(e,["retrievalConfig"],iC(s)),e}function oC(t){const e={},n=u(t,["voiceName"]);return n!=null&&c(e,["voiceName"],n),e}function Gy(t){const e={},n=u(t,["prebuiltVoiceConfig"]);return n!=null&&c(e,["prebuiltVoiceConfig"],oC(n)),e}function rC(t){const e={},n=u(t,["speaker"]);n!=null&&c(e,["speaker"],n);const s=u(t,["voiceConfig"]);return s!=null&&c(e,["voiceConfig"],Gy(s)),e}function lC(t){const e={},n=u(t,["speakerVoiceConfigs"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>rC(r))),c(e,["speakerVoiceConfigs"],s)}return e}function aC(t){const e={},n=u(t,["voiceConfig"]);n!=null&&c(e,["voiceConfig"],Gy(n));const s=u(t,["multiSpeakerVoiceConfig"]);s!=null&&c(e,["multiSpeakerVoiceConfig"],lC(s));const r=u(t,["languageCode"]);return r!=null&&c(e,["languageCode"],r),e}function uC(t){const e={},n=u(t,["includeThoughts"]);n!=null&&c(e,["includeThoughts"],n);const s=u(t,["thinkingBudget"]);return s!=null&&c(e,["thinkingBudget"],s),e}function cC(t,e,n){const s={},r=u(e,["systemInstruction"]);n!==void 0&&r!=null&&c(n,["systemInstruction"],Hy(dt(r)));const a=u(e,["temperature"]);a!=null&&c(s,["temperature"],a);const d=u(e,["topP"]);d!=null&&c(s,["topP"],d);const h=u(e,["topK"]);h!=null&&c(s,["topK"],h);const g=u(e,["candidateCount"]);g!=null&&c(s,["candidateCount"],g);const p=u(e,["maxOutputTokens"]);p!=null&&c(s,["maxOutputTokens"],p);const y=u(e,["stopSequences"]);y!=null&&c(s,["stopSequences"],y);const T=u(e,["responseLogprobs"]);T!=null&&c(s,["responseLogprobs"],T);const _=u(e,["logprobs"]);_!=null&&c(s,["logprobs"],_);const E=u(e,["presencePenalty"]);E!=null&&c(s,["presencePenalty"],E);const w=u(e,["frequencyPenalty"]);w!=null&&c(s,["frequencyPenalty"],w);const k=u(e,["seed"]);k!=null&&c(s,["seed"],k);const U=u(e,["responseMimeType"]);U!=null&&c(s,["responseMimeType"],U);const q=u(e,["responseSchema"]);q!=null&&c(s,["responseSchema"],JS(tf(q)));const B=u(e,["responseJsonSchema"]);if(B!=null&&c(s,["responseJsonSchema"],B),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const M=u(e,["safetySettings"]);if(n!==void 0&&M!=null){let ae=M;Array.isArray(ae)&&(ae=ae.map(pe=>YS(pe))),c(n,["safetySettings"],ae)}const J=u(e,["tools"]);if(n!==void 0&&J!=null){let ae=ks(J);Array.isArray(ae)&&(ae=ae.map(pe=>eC(Ms(pe)))),c(n,["tools"],ae)}const G=u(e,["toolConfig"]);if(n!==void 0&&G!=null&&c(n,["toolConfig"],sC(G)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const X=u(e,["cachedContent"]);n!==void 0&&X!=null&&c(n,["cachedContent"],Sn(t,X));const j=u(e,["responseModalities"]);j!=null&&c(s,["responseModalities"],j);const ue=u(e,["mediaResolution"]);ue!=null&&c(s,["mediaResolution"],ue);const ne=u(e,["speechConfig"]);if(ne!=null&&c(s,["speechConfig"],aC(nf(ne))),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const he=u(e,["thinkingConfig"]);return he!=null&&c(s,["thinkingConfig"],uC(he)),s}function fC(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["request","model"],Re(t,s));const r=u(e,["contents"]);if(r!=null){let d=Vt(r);Array.isArray(d)&&(d=d.map(h=>Hy(h))),c(n,["request","contents"],d)}const a=u(e,["config"]);return a!=null&&c(n,["request","generationConfig"],cC(t,a,n)),n}function dC(t,e){const n={};if(u(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(u(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=u(e,["fileName"]);s!=null&&c(n,["fileName"],s);const r=u(e,["inlinedRequests"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(d=>fC(t,d))),c(n,["requests","requests"],a)}return n}function hC(t,e){const n={},s=u(t,["displayName"]);if(e!==void 0&&s!=null&&c(e,["batch","displayName"],s),u(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function pC(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","model"],Re(t,s));const r=u(e,["src"]);r!=null&&c(n,["batch","inputConfig"],dC(t,By(t,r)));const a=u(e,["config"]);return a!=null&&c(n,["config"],hC(a,n)),n}function mC(t,e){const n={},s=u(e,["name"]);s!=null&&c(n,["_url","name"],Ns(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],r),n}function gC(t,e){const n={},s=u(e,["name"]);s!=null&&c(n,["_url","name"],Ns(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],r),n}function yC(t,e){const n={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&c(e,["_query","pageSize"],s);const r=u(t,["pageToken"]);if(e!==void 0&&r!=null&&c(e,["_query","pageToken"],r),u(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function vC(t){const e={},n=u(t,["config"]);return n!=null&&c(e,["config"],yC(n,e)),e}function TC(t,e){const n={},s=u(e,["name"]);s!=null&&c(n,["_url","name"],Ns(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],r),n}function _C(t){const e={},n=u(t,["format"]);n!=null&&c(e,["instancesFormat"],n);const s=u(t,["gcsUri"]);s!=null&&c(e,["gcsSource","uris"],s);const r=u(t,["bigqueryUri"]);if(r!=null&&c(e,["bigquerySource","inputUri"],r),u(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function SC(t){const e={},n=u(t,["format"]);n!=null&&c(e,["predictionsFormat"],n);const s=u(t,["gcsUri"]);s!=null&&c(e,["gcsDestination","outputUriPrefix"],s);const r=u(t,["bigqueryUri"]);if(r!=null&&c(e,["bigqueryDestination","outputUri"],r),u(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function CC(t,e){const n={},s=u(t,["displayName"]);e!==void 0&&s!=null&&c(e,["displayName"],s);const r=u(t,["dest"]);return e!==void 0&&r!=null&&c(e,["outputConfig"],SC(HS(r))),n}function xC(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["model"],Re(t,s));const r=u(e,["src"]);r!=null&&c(n,["inputConfig"],_C(By(t,r)));const a=u(e,["config"]);return a!=null&&c(n,["config"],CC(a,n)),n}function EC(t,e){const n={},s=u(e,["name"]);s!=null&&c(n,["_url","name"],Ns(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],r),n}function wC(t,e){const n={},s=u(e,["name"]);s!=null&&c(n,["_url","name"],Ns(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],r),n}function bC(t,e){const n={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&c(e,["_query","pageSize"],s);const r=u(t,["pageToken"]);e!==void 0&&r!=null&&c(e,["_query","pageToken"],r);const a=u(t,["filter"]);return e!==void 0&&a!=null&&c(e,["_query","filter"],a),n}function AC(t){const e={},n=u(t,["config"]);return n!=null&&c(e,["config"],bC(n,e)),e}function RC(t,e){const n={},s=u(e,["name"]);s!=null&&c(n,["_url","name"],Ns(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],r),n}function MC(t){const e={},n=u(t,["fps"]);n!=null&&c(e,["fps"],n);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const r=u(t,["startOffset"]);return r!=null&&c(e,["startOffset"],r),e}function kC(t){const e={},n=u(t,["data"]);n!=null&&c(e,["data"],n);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function NC(t){const e={},n=u(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function DC(t){const e={},n=u(t,["videoMetadata"]);n!=null&&c(e,["videoMetadata"],MC(n));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const r=u(t,["inlineData"]);r!=null&&c(e,["inlineData"],kC(r));const a=u(t,["fileData"]);a!=null&&c(e,["fileData"],NC(a));const d=u(t,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(t,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(t,["executableCode"]);g!=null&&c(e,["executableCode"],g);const p=u(t,["functionCall"]);p!=null&&c(e,["functionCall"],p);const y=u(t,["functionResponse"]);y!=null&&c(e,["functionResponse"],y);const T=u(t,["text"]);return T!=null&&c(e,["text"],T),e}function IC(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>DC(a))),c(e,["parts"],r)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function UC(t){const e={},n=u(t,["citationSources"]);return n!=null&&c(e,["citations"],n),e}function LC(t){const e={},n=u(t,["retrievedUrl"]);n!=null&&c(e,["retrievedUrl"],n);const s=u(t,["urlRetrievalStatus"]);return s!=null&&c(e,["urlRetrievalStatus"],s),e}function PC(t){const e={},n=u(t,["urlMetadata"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>LC(r))),c(e,["urlMetadata"],s)}return e}function qC(t){const e={},n=u(t,["content"]);n!=null&&c(e,["content"],IC(n));const s=u(t,["citationMetadata"]);s!=null&&c(e,["citationMetadata"],UC(s));const r=u(t,["tokenCount"]);r!=null&&c(e,["tokenCount"],r);const a=u(t,["finishReason"]);a!=null&&c(e,["finishReason"],a);const d=u(t,["urlContextMetadata"]);d!=null&&c(e,["urlContextMetadata"],PC(d));const h=u(t,["avgLogprobs"]);h!=null&&c(e,["avgLogprobs"],h);const g=u(t,["groundingMetadata"]);g!=null&&c(e,["groundingMetadata"],g);const p=u(t,["index"]);p!=null&&c(e,["index"],p);const y=u(t,["logprobsResult"]);y!=null&&c(e,["logprobsResult"],y);const T=u(t,["safetyRatings"]);return T!=null&&c(e,["safetyRatings"],T),e}function OC(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const s=u(t,["candidates"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(p=>qC(p))),c(e,["candidates"],g)}const r=u(t,["modelVersion"]);r!=null&&c(e,["modelVersion"],r);const a=u(t,["promptFeedback"]);a!=null&&c(e,["promptFeedback"],a);const d=u(t,["responseId"]);d!=null&&c(e,["responseId"],d);const h=u(t,["usageMetadata"]);return h!=null&&c(e,["usageMetadata"],h),e}function zy(t){const e={},n=u(t,["details"]);n!=null&&c(e,["details"],n);const s=u(t,["code"]);s!=null&&c(e,["code"],s);const r=u(t,["message"]);return r!=null&&c(e,["message"],r),e}function BC(t){const e={},n=u(t,["response"]);n!=null&&c(e,["response"],OC(n));const s=u(t,["error"]);return s!=null&&c(e,["error"],zy(s)),e}function VC(t){const e={},n=u(t,["responsesFile"]);n!=null&&c(e,["fileName"],n);const s=u(t,["inlinedResponses","inlinedResponses"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>BC(a))),c(e,["inlinedResponses"],r)}return e}function Ac(t){const e={},n=u(t,["name"]);n!=null&&c(e,["name"],n);const s=u(t,["metadata","displayName"]);s!=null&&c(e,["displayName"],s);const r=u(t,["metadata","state"]);r!=null&&c(e,["state"],Vy(r));const a=u(t,["metadata","createTime"]);a!=null&&c(e,["createTime"],a);const d=u(t,["metadata","endTime"]);d!=null&&c(e,["endTime"],d);const h=u(t,["metadata","updateTime"]);h!=null&&c(e,["updateTime"],h);const g=u(t,["metadata","model"]);g!=null&&c(e,["model"],g);const p=u(t,["metadata","output"]);return p!=null&&c(e,["dest"],VC(p)),e}function HC(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const s=u(t,["nextPageToken"]);s!=null&&c(e,["nextPageToken"],s);const r=u(t,["operations"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(d=>Ac(d))),c(e,["batchJobs"],a)}return e}function GC(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const s=u(t,["name"]);s!=null&&c(e,["name"],s);const r=u(t,["done"]);r!=null&&c(e,["done"],r);const a=u(t,["error"]);return a!=null&&c(e,["error"],zy(a)),e}function $y(t){const e={},n=u(t,["details"]);n!=null&&c(e,["details"],n);const s=u(t,["code"]);s!=null&&c(e,["code"],s);const r=u(t,["message"]);return r!=null&&c(e,["message"],r),e}function zC(t){const e={},n=u(t,["instancesFormat"]);n!=null&&c(e,["format"],n);const s=u(t,["gcsSource","uris"]);s!=null&&c(e,["gcsUri"],s);const r=u(t,["bigquerySource","inputUri"]);return r!=null&&c(e,["bigqueryUri"],r),e}function $C(t){const e={},n=u(t,["predictionsFormat"]);n!=null&&c(e,["format"],n);const s=u(t,["gcsDestination","outputUriPrefix"]);s!=null&&c(e,["gcsUri"],s);const r=u(t,["bigqueryDestination","outputUri"]);return r!=null&&c(e,["bigqueryUri"],r),e}function Rc(t){const e={},n=u(t,["name"]);n!=null&&c(e,["name"],n);const s=u(t,["displayName"]);s!=null&&c(e,["displayName"],s);const r=u(t,["state"]);r!=null&&c(e,["state"],Vy(r));const a=u(t,["error"]);a!=null&&c(e,["error"],$y(a));const d=u(t,["createTime"]);d!=null&&c(e,["createTime"],d);const h=u(t,["startTime"]);h!=null&&c(e,["startTime"],h);const g=u(t,["endTime"]);g!=null&&c(e,["endTime"],g);const p=u(t,["updateTime"]);p!=null&&c(e,["updateTime"],p);const y=u(t,["model"]);y!=null&&c(e,["model"],y);const T=u(t,["inputConfig"]);T!=null&&c(e,["src"],zC(T));const _=u(t,["outputConfig"]);return _!=null&&c(e,["dest"],$C(_)),e}function FC(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const s=u(t,["nextPageToken"]);s!=null&&c(e,["nextPageToken"],s);const r=u(t,["batchPredictionJobs"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(d=>Rc(d))),c(e,["batchJobs"],a)}return e}function JC(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const s=u(t,["name"]);s!=null&&c(e,["name"],s);const r=u(t,["done"]);r!=null&&c(e,["done"],r);const a=u(t,["error"]);return a!=null&&c(e,["error"],$y(a)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Si;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Si||(Si={}));class Zo{constructor(e,n,s,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,s,r)}init(e,n,s){var r,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let d={config:{}};!s||Object.keys(s).length===0?d={config:{}}:typeof s=="object"?d=Object.assign({},s):d=s,d.config&&(d.config.pageToken=n.nextPageToken),this.paramsInternal=d,this.pageInternalSize=(a=(r=d.config)===null||r===void 0?void 0:r.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class YC extends xi{constructor(e){super(),this.apiClient=e,this.create=async n=>{if(this.apiClient.isVertexAI()){const r=Date.now().toString();if(Array.isArray(n.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(n.config=n.config||{},n.config.displayName===void 0&&(n.config.displayName="genaiBatchJob_${timestampStr}"),n.config.dest===void 0&&typeof n.src=="string")if(n.src.startsWith("gs://")&&n.src.endsWith(".jsonl"))n.config.dest=`${n.src.slice(0,-6)}/dest`;else if(n.src.startsWith("bq://"))n.config.dest=`${n.src}_dest_${r}`;else throw new Error("Unsupported source:"+n.src)}return await this.createInternal(n)},this.list=async(n={})=>new Zo(Si.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(n),n)}async createInternal(e){var n,s,r,a;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=xC(this.apiClient,e);return h=se("batchPredictionJobs",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),d.then(y=>Rc(y))}else{const p=pC(this.apiClient,e);return h=se("{model}:batchGenerateContent",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),d.then(y=>Ac(y))}}async get(e){var n,s,r,a;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=EC(this.apiClient,e);return h=se("batchPredictionJobs/{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),d.then(y=>Rc(y))}else{const p=mC(this.apiClient,e);return h=se("batches/{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),d.then(y=>Ac(y))}}async cancel(e){var n,s,r,a;let d="",h={};if(this.apiClient.isVertexAI()){const g=wC(this.apiClient,e);d=se("batchPredictionJobs/{name}:cancel",g._url),h=g._query,delete g.config,delete g._url,delete g._query,await this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const g=gC(this.apiClient,e);d=se("batches/{name}:cancel",g._url),h=g._query,delete g.config,delete g._url,delete g._query,await this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,s,r,a;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=AC(e);return h=se("batchPredictionJobs",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(T=>{const _=T;return _.sdkHttpResponse={headers:y.headers},_})),d.then(y=>{const T=FC(y),_=new mg;return Object.assign(_,T),_})}else{const p=vC(e);return h=se("batches",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const _=T;return _.sdkHttpResponse={headers:y.headers},_})),d.then(y=>{const T=HC(y),_=new mg;return Object.assign(_,T),_})}}async delete(e){var n,s,r,a;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=RC(this.apiClient,e);return h=se("batchPredictionJobs/{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(T=>{const _=T;return _.sdkHttpResponse={headers:y.headers},_})),d.then(y=>JC(y))}else{const p=TC(this.apiClient,e);return h=se("batches/{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const _=T;return _.sdkHttpResponse={headers:y.headers},_})),d.then(y=>GC(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KC(t){const e={},n=u(t,["fps"]);n!=null&&c(e,["fps"],n);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const r=u(t,["startOffset"]);return r!=null&&c(e,["startOffset"],r),e}function QC(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["data"]);n!=null&&c(e,["data"],n);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function XC(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function WC(t){const e={},n=u(t,["videoMetadata"]);n!=null&&c(e,["videoMetadata"],KC(n));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const r=u(t,["inlineData"]);r!=null&&c(e,["inlineData"],QC(r));const a=u(t,["fileData"]);a!=null&&c(e,["fileData"],XC(a));const d=u(t,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(t,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(t,["executableCode"]);g!=null&&c(e,["executableCode"],g);const p=u(t,["functionCall"]);p!=null&&c(e,["functionCall"],p);const y=u(t,["functionResponse"]);y!=null&&c(e,["functionResponse"],y);const T=u(t,["text"]);return T!=null&&c(e,["text"],T),e}function Tg(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>WC(a))),c(e,["parts"],r)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function ZC(t){const e={},n=u(t,["behavior"]);n!=null&&c(e,["behavior"],n);const s=u(t,["description"]);s!=null&&c(e,["description"],s);const r=u(t,["name"]);r!=null&&c(e,["name"],r);const a=u(t,["parameters"]);a!=null&&c(e,["parameters"],a);const d=u(t,["parametersJsonSchema"]);d!=null&&c(e,["parametersJsonSchema"],d);const h=u(t,["response"]);h!=null&&c(e,["response"],h);const g=u(t,["responseJsonSchema"]);return g!=null&&c(e,["responseJsonSchema"],g),e}function jC(t){const e={},n=u(t,["startTime"]);n!=null&&c(e,["startTime"],n);const s=u(t,["endTime"]);return s!=null&&c(e,["endTime"],s),e}function ex(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],jC(n)),e}function tx(t){const e={},n=u(t,["mode"]);n!=null&&c(e,["mode"],n);const s=u(t,["dynamicThreshold"]);return s!=null&&c(e,["dynamicThreshold"],s),e}function nx(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&c(e,["dynamicRetrievalConfig"],tx(n)),e}function ix(){return{}}function sx(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(p=>ZC(p))),c(e,["functionDeclarations"],g)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=u(t,["googleSearch"]);s!=null&&c(e,["googleSearch"],ex(s));const r=u(t,["googleSearchRetrieval"]);if(r!=null&&c(e,["googleSearchRetrieval"],nx(r)),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(t,["urlContext"])!=null&&c(e,["urlContext"],ix());const d=u(t,["codeExecution"]);d!=null&&c(e,["codeExecution"],d);const h=u(t,["computerUse"]);return h!=null&&c(e,["computerUse"],h),e}function ox(t){const e={},n=u(t,["mode"]);n!=null&&c(e,["mode"],n);const s=u(t,["allowedFunctionNames"]);return s!=null&&c(e,["allowedFunctionNames"],s),e}function rx(t){const e={},n=u(t,["latitude"]);n!=null&&c(e,["latitude"],n);const s=u(t,["longitude"]);return s!=null&&c(e,["longitude"],s),e}function lx(t){const e={},n=u(t,["latLng"]);n!=null&&c(e,["latLng"],rx(n));const s=u(t,["languageCode"]);return s!=null&&c(e,["languageCode"],s),e}function ax(t){const e={},n=u(t,["functionCallingConfig"]);n!=null&&c(e,["functionCallingConfig"],ox(n));const s=u(t,["retrievalConfig"]);return s!=null&&c(e,["retrievalConfig"],lx(s)),e}function ux(t,e){const n={},s=u(t,["ttl"]);e!==void 0&&s!=null&&c(e,["ttl"],s);const r=u(t,["expireTime"]);e!==void 0&&r!=null&&c(e,["expireTime"],r);const a=u(t,["displayName"]);e!==void 0&&a!=null&&c(e,["displayName"],a);const d=u(t,["contents"]);if(e!==void 0&&d!=null){let y=Vt(d);Array.isArray(y)&&(y=y.map(T=>Tg(T))),c(e,["contents"],y)}const h=u(t,["systemInstruction"]);e!==void 0&&h!=null&&c(e,["systemInstruction"],Tg(dt(h)));const g=u(t,["tools"]);if(e!==void 0&&g!=null){let y=g;Array.isArray(y)&&(y=y.map(T=>sx(T))),c(e,["tools"],y)}const p=u(t,["toolConfig"]);if(e!==void 0&&p!=null&&c(e,["toolConfig"],ax(p)),u(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function cx(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["model"],My(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],ux(r,n)),n}function fx(t,e){const n={},s=u(e,["name"]);s!=null&&c(n,["_url","name"],Sn(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],r),n}function dx(t,e){const n={},s=u(e,["name"]);s!=null&&c(n,["_url","name"],Sn(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],r),n}function hx(t,e){const n={},s=u(t,["ttl"]);e!==void 0&&s!=null&&c(e,["ttl"],s);const r=u(t,["expireTime"]);return e!==void 0&&r!=null&&c(e,["expireTime"],r),n}function px(t,e){const n={},s=u(e,["name"]);s!=null&&c(n,["_url","name"],Sn(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],hx(r,n)),n}function mx(t,e){const n={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&c(e,["_query","pageSize"],s);const r=u(t,["pageToken"]);return e!==void 0&&r!=null&&c(e,["_query","pageToken"],r),n}function gx(t){const e={},n=u(t,["config"]);return n!=null&&c(e,["config"],mx(n,e)),e}function yx(t){const e={},n=u(t,["fps"]);n!=null&&c(e,["fps"],n);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const r=u(t,["startOffset"]);return r!=null&&c(e,["startOffset"],r),e}function vx(t){const e={},n=u(t,["displayName"]);n!=null&&c(e,["displayName"],n);const s=u(t,["data"]);s!=null&&c(e,["data"],s);const r=u(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function Tx(t){const e={},n=u(t,["displayName"]);n!=null&&c(e,["displayName"],n);const s=u(t,["fileUri"]);s!=null&&c(e,["fileUri"],s);const r=u(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function _x(t){const e={},n=u(t,["videoMetadata"]);n!=null&&c(e,["videoMetadata"],yx(n));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const r=u(t,["inlineData"]);r!=null&&c(e,["inlineData"],vx(r));const a=u(t,["fileData"]);a!=null&&c(e,["fileData"],Tx(a));const d=u(t,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(t,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(t,["executableCode"]);g!=null&&c(e,["executableCode"],g);const p=u(t,["functionCall"]);p!=null&&c(e,["functionCall"],p);const y=u(t,["functionResponse"]);y!=null&&c(e,["functionResponse"],y);const T=u(t,["text"]);return T!=null&&c(e,["text"],T),e}function _g(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>_x(a))),c(e,["parts"],r)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function Sx(t){const e={};if(u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=u(t,["description"]);n!=null&&c(e,["description"],n);const s=u(t,["name"]);s!=null&&c(e,["name"],s);const r=u(t,["parameters"]);r!=null&&c(e,["parameters"],r);const a=u(t,["parametersJsonSchema"]);a!=null&&c(e,["parametersJsonSchema"],a);const d=u(t,["response"]);d!=null&&c(e,["response"],d);const h=u(t,["responseJsonSchema"]);return h!=null&&c(e,["responseJsonSchema"],h),e}function Cx(t){const e={},n=u(t,["startTime"]);n!=null&&c(e,["startTime"],n);const s=u(t,["endTime"]);return s!=null&&c(e,["endTime"],s),e}function xx(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],Cx(n)),e}function Ex(t){const e={},n=u(t,["mode"]);n!=null&&c(e,["mode"],n);const s=u(t,["dynamicThreshold"]);return s!=null&&c(e,["dynamicThreshold"],s),e}function wx(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&c(e,["dynamicRetrievalConfig"],Ex(n)),e}function bx(){return{}}function Ax(t){const e={},n=u(t,["apiKeyString"]);return n!=null&&c(e,["apiKeyString"],n),e}function Rx(t){const e={},n=u(t,["apiKeyConfig"]);n!=null&&c(e,["apiKeyConfig"],Ax(n));const s=u(t,["authType"]);s!=null&&c(e,["authType"],s);const r=u(t,["googleServiceAccountConfig"]);r!=null&&c(e,["googleServiceAccountConfig"],r);const a=u(t,["httpBasicAuthConfig"]);a!=null&&c(e,["httpBasicAuthConfig"],a);const d=u(t,["oauthConfig"]);d!=null&&c(e,["oauthConfig"],d);const h=u(t,["oidcConfig"]);return h!=null&&c(e,["oidcConfig"],h),e}function Mx(t){const e={},n=u(t,["authConfig"]);return n!=null&&c(e,["authConfig"],Rx(n)),e}function kx(){return{}}function Nx(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let T=n;Array.isArray(T)&&(T=T.map(_=>Sx(_))),c(e,["functionDeclarations"],T)}const s=u(t,["retrieval"]);s!=null&&c(e,["retrieval"],s);const r=u(t,["googleSearch"]);r!=null&&c(e,["googleSearch"],xx(r));const a=u(t,["googleSearchRetrieval"]);a!=null&&c(e,["googleSearchRetrieval"],wx(a)),u(t,["enterpriseWebSearch"])!=null&&c(e,["enterpriseWebSearch"],bx());const h=u(t,["googleMaps"]);h!=null&&c(e,["googleMaps"],Mx(h)),u(t,["urlContext"])!=null&&c(e,["urlContext"],kx());const p=u(t,["codeExecution"]);p!=null&&c(e,["codeExecution"],p);const y=u(t,["computerUse"]);return y!=null&&c(e,["computerUse"],y),e}function Dx(t){const e={},n=u(t,["mode"]);n!=null&&c(e,["mode"],n);const s=u(t,["allowedFunctionNames"]);return s!=null&&c(e,["allowedFunctionNames"],s),e}function Ix(t){const e={},n=u(t,["latitude"]);n!=null&&c(e,["latitude"],n);const s=u(t,["longitude"]);return s!=null&&c(e,["longitude"],s),e}function Ux(t){const e={},n=u(t,["latLng"]);n!=null&&c(e,["latLng"],Ix(n));const s=u(t,["languageCode"]);return s!=null&&c(e,["languageCode"],s),e}function Lx(t){const e={},n=u(t,["functionCallingConfig"]);n!=null&&c(e,["functionCallingConfig"],Dx(n));const s=u(t,["retrievalConfig"]);return s!=null&&c(e,["retrievalConfig"],Ux(s)),e}function Px(t,e){const n={},s=u(t,["ttl"]);e!==void 0&&s!=null&&c(e,["ttl"],s);const r=u(t,["expireTime"]);e!==void 0&&r!=null&&c(e,["expireTime"],r);const a=u(t,["displayName"]);e!==void 0&&a!=null&&c(e,["displayName"],a);const d=u(t,["contents"]);if(e!==void 0&&d!=null){let T=Vt(d);Array.isArray(T)&&(T=T.map(_=>_g(_))),c(e,["contents"],T)}const h=u(t,["systemInstruction"]);e!==void 0&&h!=null&&c(e,["systemInstruction"],_g(dt(h)));const g=u(t,["tools"]);if(e!==void 0&&g!=null){let T=g;Array.isArray(T)&&(T=T.map(_=>Nx(_))),c(e,["tools"],T)}const p=u(t,["toolConfig"]);e!==void 0&&p!=null&&c(e,["toolConfig"],Lx(p));const y=u(t,["kmsKeyName"]);return e!==void 0&&y!=null&&c(e,["encryption_spec","kmsKeyName"],y),n}function qx(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["model"],My(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],Px(r,n)),n}function Ox(t,e){const n={},s=u(e,["name"]);s!=null&&c(n,["_url","name"],Sn(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],r),n}function Bx(t,e){const n={},s=u(e,["name"]);s!=null&&c(n,["_url","name"],Sn(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],r),n}function Vx(t,e){const n={},s=u(t,["ttl"]);e!==void 0&&s!=null&&c(e,["ttl"],s);const r=u(t,["expireTime"]);return e!==void 0&&r!=null&&c(e,["expireTime"],r),n}function Hx(t,e){const n={},s=u(e,["name"]);s!=null&&c(n,["_url","name"],Sn(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],Vx(r,n)),n}function Gx(t,e){const n={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&c(e,["_query","pageSize"],s);const r=u(t,["pageToken"]);return e!==void 0&&r!=null&&c(e,["_query","pageToken"],r),n}function zx(t){const e={},n=u(t,["config"]);return n!=null&&c(e,["config"],Gx(n,e)),e}function El(t){const e={},n=u(t,["name"]);n!=null&&c(e,["name"],n);const s=u(t,["displayName"]);s!=null&&c(e,["displayName"],s);const r=u(t,["model"]);r!=null&&c(e,["model"],r);const a=u(t,["createTime"]);a!=null&&c(e,["createTime"],a);const d=u(t,["updateTime"]);d!=null&&c(e,["updateTime"],d);const h=u(t,["expireTime"]);h!=null&&c(e,["expireTime"],h);const g=u(t,["usageMetadata"]);return g!=null&&c(e,["usageMetadata"],g),e}function $x(){return{}}function Fx(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const s=u(t,["nextPageToken"]);s!=null&&c(e,["nextPageToken"],s);const r=u(t,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(d=>El(d))),c(e,["cachedContents"],a)}return e}function wl(t){const e={},n=u(t,["name"]);n!=null&&c(e,["name"],n);const s=u(t,["displayName"]);s!=null&&c(e,["displayName"],s);const r=u(t,["model"]);r!=null&&c(e,["model"],r);const a=u(t,["createTime"]);a!=null&&c(e,["createTime"],a);const d=u(t,["updateTime"]);d!=null&&c(e,["updateTime"],d);const h=u(t,["expireTime"]);h!=null&&c(e,["expireTime"],h);const g=u(t,["usageMetadata"]);return g!=null&&c(e,["usageMetadata"],g),e}function Jx(){return{}}function Yx(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const s=u(t,["nextPageToken"]);s!=null&&c(e,["nextPageToken"],s);const r=u(t,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(d=>wl(d))),c(e,["cachedContents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Kx extends xi{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Zo(Si.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(n),n)}async create(e){var n,s,r,a;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=qx(this.apiClient,e);return h=se("cachedContents",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),d.then(y=>wl(y))}else{const p=cx(this.apiClient,e);return h=se("cachedContents",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),d.then(y=>El(y))}}async get(e){var n,s,r,a;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=Ox(this.apiClient,e);return h=se("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),d.then(y=>wl(y))}else{const p=fx(this.apiClient,e);return h=se("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),d.then(y=>El(y))}}async delete(e){var n,s,r,a;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=Bx(this.apiClient,e);return h=se("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),d.then(()=>{const y=Jx(),T=new hg;return Object.assign(T,y),T})}else{const p=dx(this.apiClient,e);return h=se("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),d.then(()=>{const y=$x(),T=new hg;return Object.assign(T,y),T})}}async update(e){var n,s,r,a;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=Hx(this.apiClient,e);return h=se("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),d.then(y=>wl(y))}else{const p=px(this.apiClient,e);return h=se("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),d.then(y=>El(y))}}async listInternal(e){var n,s,r,a;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=zx(e);return h=se("cachedContents",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(T=>{const _=T;return _.sdkHttpResponse={headers:y.headers},_})),d.then(y=>{const T=Yx(y),_=new pg;return Object.assign(_,T),_})}else{const p=gx(e);return h=se("cachedContents",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const _=T;return _.sdkHttpResponse={headers:y.headers},_})),d.then(y=>{const T=Fx(y),_=new pg;return Object.assign(_,T),_})}}}function Sg(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],s=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ve(t){return this instanceof Ve?(this.v=t,this):new Ve(t)}function bs(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=n.apply(t,e||[]),r,a=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",d),r[Symbol.asyncIterator]=function(){return this},r;function d(E){return function(w){return Promise.resolve(w).then(E,T)}}function h(E,w){s[E]&&(r[E]=function(k){return new Promise(function(U,q){a.push([E,k,U,q])>1||g(E,k)})},w&&(r[E]=w(r[E])))}function g(E,w){try{p(s[E](w))}catch(k){_(a[0][3],k)}}function p(E){E.value instanceof Ve?Promise.resolve(E.value.v).then(y,T):_(a[0][2],E)}function y(E){g("next",E)}function T(E){g("throw",E)}function _(E,w){E(w),a.shift(),a.length&&g(a[0][0],a[0][1])}}function Fo(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Sg=="function"?Sg(t):t[Symbol.iterator](),n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n);function s(a){n[a]=t[a]&&function(d){return new Promise(function(h,g){d=t[a](d),r(h,g,d.done,d.value)})}}function r(a,d,h,g){Promise.resolve(g).then(function(p){a({value:p,done:h})},d)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qx(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:Fy(n)}function Fy(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function Xx(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Cg(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let s=0;for(;s<n;)if(t[s].role==="user")e.push(t[s]),s++;else{const r=[];let a=!0;for(;s<n&&t[s].role==="model";)r.push(t[s]),a&&!Fy(t[s])&&(a=!1),s++;a?e.push(...r):e.pop()}return e}class Wx{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new Zx(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Zx{constructor(e,n,s,r={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=s,this.config=r,this.history=a,this.sendPromise=Promise.resolve(),Xx(a)}async sendMessage(e){var n;await this.sendPromise;const s=dt(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,d,h;const g=await r,p=(d=(a=g.candidates)===null||a===void 0?void 0:a[0])===null||d===void 0?void 0:d.content,y=g.automaticFunctionCallingHistory,T=this.getHistory(!0).length;let _=[];y!=null&&(_=(h=y.slice(T))!==null&&h!==void 0?h:[]);const E=p?[p]:[];this.recordHistory(s,E,_)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const s=dt(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const a=await r;return this.processStreamResponse(a,s)}getHistory(e=!1){const n=e?Cg(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var s,r;return bs(this,arguments,function*(){var d,h,g,p;const y=[];try{for(var T=!0,_=Fo(e),E;E=yield Ve(_.next()),d=E.done,!d;T=!0){p=E.value,T=!1;const w=p;if(Qx(w)){const k=(r=(s=w.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content;k!==void 0&&y.push(k)}yield yield Ve(w)}}catch(w){h={error:w}}finally{try{!T&&!d&&(g=_.return)&&(yield Ve(g.call(_)))}finally{if(h)throw h.error}}this.recordHistory(n,y)})}recordHistory(e,n,s){let r=[];n.length>0&&n.every(a=>a.role!==void 0)?r=n:r.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...Cg(s)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ll extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Ll.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jx(t,e){const n={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&c(e,["_query","pageSize"],s);const r=u(t,["pageToken"]);return e!==void 0&&r!=null&&c(e,["_query","pageToken"],r),n}function eE(t){const e={},n=u(t,["config"]);return n!=null&&c(e,["config"],jx(n,e)),e}function tE(t){const e={},n=u(t,["details"]);n!=null&&c(e,["details"],n);const s=u(t,["message"]);s!=null&&c(e,["message"],s);const r=u(t,["code"]);return r!=null&&c(e,["code"],r),e}function nE(t){const e={},n=u(t,["name"]);n!=null&&c(e,["name"],n);const s=u(t,["displayName"]);s!=null&&c(e,["displayName"],s);const r=u(t,["mimeType"]);r!=null&&c(e,["mimeType"],r);const a=u(t,["sizeBytes"]);a!=null&&c(e,["sizeBytes"],a);const d=u(t,["createTime"]);d!=null&&c(e,["createTime"],d);const h=u(t,["expirationTime"]);h!=null&&c(e,["expirationTime"],h);const g=u(t,["updateTime"]);g!=null&&c(e,["updateTime"],g);const p=u(t,["sha256Hash"]);p!=null&&c(e,["sha256Hash"],p);const y=u(t,["uri"]);y!=null&&c(e,["uri"],y);const T=u(t,["downloadUri"]);T!=null&&c(e,["downloadUri"],T);const _=u(t,["state"]);_!=null&&c(e,["state"],_);const E=u(t,["source"]);E!=null&&c(e,["source"],E);const w=u(t,["videoMetadata"]);w!=null&&c(e,["videoMetadata"],w);const k=u(t,["error"]);return k!=null&&c(e,["error"],tE(k)),e}function iE(t){const e={},n=u(t,["file"]);n!=null&&c(e,["file"],nE(n));const s=u(t,["config"]);return s!=null&&c(e,["config"],s),e}function sE(t){const e={},n=u(t,["name"]);n!=null&&c(e,["_url","file"],Py(n));const s=u(t,["config"]);return s!=null&&c(e,["config"],s),e}function oE(t){const e={},n=u(t,["name"]);n!=null&&c(e,["_url","file"],Py(n));const s=u(t,["config"]);return s!=null&&c(e,["config"],s),e}function rE(t){const e={},n=u(t,["details"]);n!=null&&c(e,["details"],n);const s=u(t,["message"]);s!=null&&c(e,["message"],s);const r=u(t,["code"]);return r!=null&&c(e,["code"],r),e}function Mc(t){const e={},n=u(t,["name"]);n!=null&&c(e,["name"],n);const s=u(t,["displayName"]);s!=null&&c(e,["displayName"],s);const r=u(t,["mimeType"]);r!=null&&c(e,["mimeType"],r);const a=u(t,["sizeBytes"]);a!=null&&c(e,["sizeBytes"],a);const d=u(t,["createTime"]);d!=null&&c(e,["createTime"],d);const h=u(t,["expirationTime"]);h!=null&&c(e,["expirationTime"],h);const g=u(t,["updateTime"]);g!=null&&c(e,["updateTime"],g);const p=u(t,["sha256Hash"]);p!=null&&c(e,["sha256Hash"],p);const y=u(t,["uri"]);y!=null&&c(e,["uri"],y);const T=u(t,["downloadUri"]);T!=null&&c(e,["downloadUri"],T);const _=u(t,["state"]);_!=null&&c(e,["state"],_);const E=u(t,["source"]);E!=null&&c(e,["source"],E);const w=u(t,["videoMetadata"]);w!=null&&c(e,["videoMetadata"],w);const k=u(t,["error"]);return k!=null&&c(e,["error"],rE(k)),e}function lE(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const s=u(t,["nextPageToken"]);s!=null&&c(e,["nextPageToken"],s);const r=u(t,["files"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(d=>Mc(d))),c(e,["files"],a)}return e}function aE(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}function uE(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cE extends xi{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Zo(Si.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>Mc(n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,s;let r,a="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=eE(e);return a=se("files",h._url),d=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:g.headers},y})),r.then(g=>{const p=lE(g),y=new RS;return Object.assign(y,p),y})}}async createInternal(e){var n,s;let r,a="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=iE(e);return a=se("upload/v1beta/files",h._url),d=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const p=aE(g),y=new MS;return Object.assign(y,p),y})}}async get(e){var n,s;let r,a="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=sE(e);return a=se("files/{file}",h._url),d=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>Mc(g))}}async delete(e){var n,s;let r,a="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=oE(e);return a=se("files/{file}",h._url),d=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(()=>{const g=uE(),p=new kS;return Object.assign(p,g),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fE(t){const e={},n=u(t,["voiceName"]);return n!=null&&c(e,["voiceName"],n),e}function Jy(t){const e={},n=u(t,["prebuiltVoiceConfig"]);return n!=null&&c(e,["prebuiltVoiceConfig"],fE(n)),e}function dE(t){const e={},n=u(t,["speaker"]);n!=null&&c(e,["speaker"],n);const s=u(t,["voiceConfig"]);return s!=null&&c(e,["voiceConfig"],Jy(s)),e}function hE(t){const e={},n=u(t,["speakerVoiceConfigs"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>dE(r))),c(e,["speakerVoiceConfigs"],s)}return e}function pE(t){const e={},n=u(t,["voiceConfig"]);n!=null&&c(e,["voiceConfig"],Jy(n));const s=u(t,["multiSpeakerVoiceConfig"]);s!=null&&c(e,["multiSpeakerVoiceConfig"],hE(s));const r=u(t,["languageCode"]);return r!=null&&c(e,["languageCode"],r),e}function mE(t){const e={},n=u(t,["fps"]);n!=null&&c(e,["fps"],n);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const r=u(t,["startOffset"]);return r!=null&&c(e,["startOffset"],r),e}function gE(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["data"]);n!=null&&c(e,["data"],n);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function yE(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function vE(t){const e={},n=u(t,["videoMetadata"]);n!=null&&c(e,["videoMetadata"],mE(n));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const r=u(t,["inlineData"]);r!=null&&c(e,["inlineData"],gE(r));const a=u(t,["fileData"]);a!=null&&c(e,["fileData"],yE(a));const d=u(t,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(t,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(t,["executableCode"]);g!=null&&c(e,["executableCode"],g);const p=u(t,["functionCall"]);p!=null&&c(e,["functionCall"],p);const y=u(t,["functionResponse"]);y!=null&&c(e,["functionResponse"],y);const T=u(t,["text"]);return T!=null&&c(e,["text"],T),e}function TE(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>vE(a))),c(e,["parts"],r)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function _E(t){const e={},n=u(t,["behavior"]);n!=null&&c(e,["behavior"],n);const s=u(t,["description"]);s!=null&&c(e,["description"],s);const r=u(t,["name"]);r!=null&&c(e,["name"],r);const a=u(t,["parameters"]);a!=null&&c(e,["parameters"],a);const d=u(t,["parametersJsonSchema"]);d!=null&&c(e,["parametersJsonSchema"],d);const h=u(t,["response"]);h!=null&&c(e,["response"],h);const g=u(t,["responseJsonSchema"]);return g!=null&&c(e,["responseJsonSchema"],g),e}function SE(t){const e={},n=u(t,["startTime"]);n!=null&&c(e,["startTime"],n);const s=u(t,["endTime"]);return s!=null&&c(e,["endTime"],s),e}function CE(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],SE(n)),e}function xE(t){const e={},n=u(t,["mode"]);n!=null&&c(e,["mode"],n);const s=u(t,["dynamicThreshold"]);return s!=null&&c(e,["dynamicThreshold"],s),e}function EE(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&c(e,["dynamicRetrievalConfig"],xE(n)),e}function wE(){return{}}function bE(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(p=>_E(p))),c(e,["functionDeclarations"],g)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=u(t,["googleSearch"]);s!=null&&c(e,["googleSearch"],CE(s));const r=u(t,["googleSearchRetrieval"]);if(r!=null&&c(e,["googleSearchRetrieval"],EE(r)),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(t,["urlContext"])!=null&&c(e,["urlContext"],wE());const d=u(t,["codeExecution"]);d!=null&&c(e,["codeExecution"],d);const h=u(t,["computerUse"]);return h!=null&&c(e,["computerUse"],h),e}function AE(t){const e={},n=u(t,["handle"]);if(n!=null&&c(e,["handle"],n),u(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function xg(){return{}}function RE(t){const e={},n=u(t,["disabled"]);n!=null&&c(e,["disabled"],n);const s=u(t,["startOfSpeechSensitivity"]);s!=null&&c(e,["startOfSpeechSensitivity"],s);const r=u(t,["endOfSpeechSensitivity"]);r!=null&&c(e,["endOfSpeechSensitivity"],r);const a=u(t,["prefixPaddingMs"]);a!=null&&c(e,["prefixPaddingMs"],a);const d=u(t,["silenceDurationMs"]);return d!=null&&c(e,["silenceDurationMs"],d),e}function ME(t){const e={},n=u(t,["automaticActivityDetection"]);n!=null&&c(e,["automaticActivityDetection"],RE(n));const s=u(t,["activityHandling"]);s!=null&&c(e,["activityHandling"],s);const r=u(t,["turnCoverage"]);return r!=null&&c(e,["turnCoverage"],r),e}function kE(t){const e={},n=u(t,["targetTokens"]);return n!=null&&c(e,["targetTokens"],n),e}function NE(t){const e={},n=u(t,["triggerTokens"]);n!=null&&c(e,["triggerTokens"],n);const s=u(t,["slidingWindow"]);return s!=null&&c(e,["slidingWindow"],kE(s)),e}function DE(t){const e={},n=u(t,["proactiveAudio"]);return n!=null&&c(e,["proactiveAudio"],n),e}function IE(t,e){const n={},s=u(t,["generationConfig"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig"],s);const r=u(t,["responseModalities"]);e!==void 0&&r!=null&&c(e,["setup","generationConfig","responseModalities"],r);const a=u(t,["temperature"]);e!==void 0&&a!=null&&c(e,["setup","generationConfig","temperature"],a);const d=u(t,["topP"]);e!==void 0&&d!=null&&c(e,["setup","generationConfig","topP"],d);const h=u(t,["topK"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","topK"],h);const g=u(t,["maxOutputTokens"]);e!==void 0&&g!=null&&c(e,["setup","generationConfig","maxOutputTokens"],g);const p=u(t,["mediaResolution"]);e!==void 0&&p!=null&&c(e,["setup","generationConfig","mediaResolution"],p);const y=u(t,["seed"]);e!==void 0&&y!=null&&c(e,["setup","generationConfig","seed"],y);const T=u(t,["speechConfig"]);e!==void 0&&T!=null&&c(e,["setup","generationConfig","speechConfig"],pE(sf(T)));const _=u(t,["enableAffectiveDialog"]);e!==void 0&&_!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],_);const E=u(t,["systemInstruction"]);e!==void 0&&E!=null&&c(e,["setup","systemInstruction"],TE(dt(E)));const w=u(t,["tools"]);if(e!==void 0&&w!=null){let G=ks(w);Array.isArray(G)&&(G=G.map(X=>bE(Ms(X)))),c(e,["setup","tools"],G)}const k=u(t,["sessionResumption"]);e!==void 0&&k!=null&&c(e,["setup","sessionResumption"],AE(k));const U=u(t,["inputAudioTranscription"]);e!==void 0&&U!=null&&c(e,["setup","inputAudioTranscription"],xg());const q=u(t,["outputAudioTranscription"]);e!==void 0&&q!=null&&c(e,["setup","outputAudioTranscription"],xg());const B=u(t,["realtimeInputConfig"]);e!==void 0&&B!=null&&c(e,["setup","realtimeInputConfig"],ME(B));const M=u(t,["contextWindowCompression"]);e!==void 0&&M!=null&&c(e,["setup","contextWindowCompression"],NE(M));const J=u(t,["proactivity"]);return e!==void 0&&J!=null&&c(e,["setup","proactivity"],DE(J)),n}function UE(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["setup","model"],Re(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],IE(r,n)),n}function LE(){return{}}function PE(){return{}}function qE(t){const e={},n=u(t,["media"]);n!=null&&c(e,["mediaChunks"],ky(n));const s=u(t,["audio"]);s!=null&&c(e,["audio"],Dy(s));const r=u(t,["audioStreamEnd"]);r!=null&&c(e,["audioStreamEnd"],r);const a=u(t,["video"]);a!=null&&c(e,["video"],Ny(a));const d=u(t,["text"]);return d!=null&&c(e,["text"],d),u(t,["activityStart"])!=null&&c(e,["activityStart"],LE()),u(t,["activityEnd"])!=null&&c(e,["activityEnd"],PE()),e}function Yy(t){const e={},n=u(t,["text"]);n!=null&&c(e,["text"],n);const s=u(t,["weight"]);return s!=null&&c(e,["weight"],s),e}function OE(t){const e={},n=u(t,["weightedPrompts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>Yy(r))),c(e,["weightedPrompts"],s)}return e}function Ky(t){const e={},n=u(t,["temperature"]);n!=null&&c(e,["temperature"],n);const s=u(t,["topK"]);s!=null&&c(e,["topK"],s);const r=u(t,["seed"]);r!=null&&c(e,["seed"],r);const a=u(t,["guidance"]);a!=null&&c(e,["guidance"],a);const d=u(t,["bpm"]);d!=null&&c(e,["bpm"],d);const h=u(t,["density"]);h!=null&&c(e,["density"],h);const g=u(t,["brightness"]);g!=null&&c(e,["brightness"],g);const p=u(t,["scale"]);p!=null&&c(e,["scale"],p);const y=u(t,["muteBass"]);y!=null&&c(e,["muteBass"],y);const T=u(t,["muteDrums"]);T!=null&&c(e,["muteDrums"],T);const _=u(t,["onlyBassAndDrums"]);_!=null&&c(e,["onlyBassAndDrums"],_);const E=u(t,["musicGenerationMode"]);return E!=null&&c(e,["musicGenerationMode"],E),e}function BE(t){const e={},n=u(t,["musicGenerationConfig"]);return n!=null&&c(e,["musicGenerationConfig"],Ky(n)),e}function Qy(t){const e={},n=u(t,["model"]);return n!=null&&c(e,["model"],n),e}function Xy(t){const e={},n=u(t,["weightedPrompts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>Yy(r))),c(e,["weightedPrompts"],s)}return e}function kc(t){const e={},n=u(t,["setup"]);n!=null&&c(e,["setup"],Qy(n));const s=u(t,["clientContent"]);s!=null&&c(e,["clientContent"],Xy(s));const r=u(t,["musicGenerationConfig"]);r!=null&&c(e,["musicGenerationConfig"],Ky(r));const a=u(t,["playbackControl"]);return a!=null&&c(e,["playbackControl"],a),e}function VE(t){const e={},n=u(t,["voiceName"]);return n!=null&&c(e,["voiceName"],n),e}function HE(t){const e={},n=u(t,["prebuiltVoiceConfig"]);return n!=null&&c(e,["prebuiltVoiceConfig"],VE(n)),e}function GE(t){const e={},n=u(t,["voiceConfig"]);if(n!=null&&c(e,["voiceConfig"],HE(n)),u(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const s=u(t,["languageCode"]);return s!=null&&c(e,["languageCode"],s),e}function zE(t){const e={},n=u(t,["fps"]);n!=null&&c(e,["fps"],n);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const r=u(t,["startOffset"]);return r!=null&&c(e,["startOffset"],r),e}function $E(t){const e={},n=u(t,["displayName"]);n!=null&&c(e,["displayName"],n);const s=u(t,["data"]);s!=null&&c(e,["data"],s);const r=u(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function FE(t){const e={},n=u(t,["displayName"]);n!=null&&c(e,["displayName"],n);const s=u(t,["fileUri"]);s!=null&&c(e,["fileUri"],s);const r=u(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function JE(t){const e={},n=u(t,["videoMetadata"]);n!=null&&c(e,["videoMetadata"],zE(n));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const r=u(t,["inlineData"]);r!=null&&c(e,["inlineData"],$E(r));const a=u(t,["fileData"]);a!=null&&c(e,["fileData"],FE(a));const d=u(t,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(t,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(t,["executableCode"]);g!=null&&c(e,["executableCode"],g);const p=u(t,["functionCall"]);p!=null&&c(e,["functionCall"],p);const y=u(t,["functionResponse"]);y!=null&&c(e,["functionResponse"],y);const T=u(t,["text"]);return T!=null&&c(e,["text"],T),e}function YE(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>JE(a))),c(e,["parts"],r)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function KE(t){const e={};if(u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=u(t,["description"]);n!=null&&c(e,["description"],n);const s=u(t,["name"]);s!=null&&c(e,["name"],s);const r=u(t,["parameters"]);r!=null&&c(e,["parameters"],r);const a=u(t,["parametersJsonSchema"]);a!=null&&c(e,["parametersJsonSchema"],a);const d=u(t,["response"]);d!=null&&c(e,["response"],d);const h=u(t,["responseJsonSchema"]);return h!=null&&c(e,["responseJsonSchema"],h),e}function QE(t){const e={},n=u(t,["startTime"]);n!=null&&c(e,["startTime"],n);const s=u(t,["endTime"]);return s!=null&&c(e,["endTime"],s),e}function XE(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],QE(n)),e}function WE(t){const e={},n=u(t,["mode"]);n!=null&&c(e,["mode"],n);const s=u(t,["dynamicThreshold"]);return s!=null&&c(e,["dynamicThreshold"],s),e}function ZE(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&c(e,["dynamicRetrievalConfig"],WE(n)),e}function jE(){return{}}function ew(t){const e={},n=u(t,["apiKeyString"]);return n!=null&&c(e,["apiKeyString"],n),e}function tw(t){const e={},n=u(t,["apiKeyConfig"]);n!=null&&c(e,["apiKeyConfig"],ew(n));const s=u(t,["authType"]);s!=null&&c(e,["authType"],s);const r=u(t,["googleServiceAccountConfig"]);r!=null&&c(e,["googleServiceAccountConfig"],r);const a=u(t,["httpBasicAuthConfig"]);a!=null&&c(e,["httpBasicAuthConfig"],a);const d=u(t,["oauthConfig"]);d!=null&&c(e,["oauthConfig"],d);const h=u(t,["oidcConfig"]);return h!=null&&c(e,["oidcConfig"],h),e}function nw(t){const e={},n=u(t,["authConfig"]);return n!=null&&c(e,["authConfig"],tw(n)),e}function iw(){return{}}function sw(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let T=n;Array.isArray(T)&&(T=T.map(_=>KE(_))),c(e,["functionDeclarations"],T)}const s=u(t,["retrieval"]);s!=null&&c(e,["retrieval"],s);const r=u(t,["googleSearch"]);r!=null&&c(e,["googleSearch"],XE(r));const a=u(t,["googleSearchRetrieval"]);a!=null&&c(e,["googleSearchRetrieval"],ZE(a)),u(t,["enterpriseWebSearch"])!=null&&c(e,["enterpriseWebSearch"],jE());const h=u(t,["googleMaps"]);h!=null&&c(e,["googleMaps"],nw(h)),u(t,["urlContext"])!=null&&c(e,["urlContext"],iw());const p=u(t,["codeExecution"]);p!=null&&c(e,["codeExecution"],p);const y=u(t,["computerUse"]);return y!=null&&c(e,["computerUse"],y),e}function ow(t){const e={},n=u(t,["handle"]);n!=null&&c(e,["handle"],n);const s=u(t,["transparent"]);return s!=null&&c(e,["transparent"],s),e}function Eg(){return{}}function rw(t){const e={},n=u(t,["disabled"]);n!=null&&c(e,["disabled"],n);const s=u(t,["startOfSpeechSensitivity"]);s!=null&&c(e,["startOfSpeechSensitivity"],s);const r=u(t,["endOfSpeechSensitivity"]);r!=null&&c(e,["endOfSpeechSensitivity"],r);const a=u(t,["prefixPaddingMs"]);a!=null&&c(e,["prefixPaddingMs"],a);const d=u(t,["silenceDurationMs"]);return d!=null&&c(e,["silenceDurationMs"],d),e}function lw(t){const e={},n=u(t,["automaticActivityDetection"]);n!=null&&c(e,["automaticActivityDetection"],rw(n));const s=u(t,["activityHandling"]);s!=null&&c(e,["activityHandling"],s);const r=u(t,["turnCoverage"]);return r!=null&&c(e,["turnCoverage"],r),e}function aw(t){const e={},n=u(t,["targetTokens"]);return n!=null&&c(e,["targetTokens"],n),e}function uw(t){const e={},n=u(t,["triggerTokens"]);n!=null&&c(e,["triggerTokens"],n);const s=u(t,["slidingWindow"]);return s!=null&&c(e,["slidingWindow"],aw(s)),e}function cw(t){const e={},n=u(t,["proactiveAudio"]);return n!=null&&c(e,["proactiveAudio"],n),e}function fw(t,e){const n={},s=u(t,["generationConfig"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig"],s);const r=u(t,["responseModalities"]);e!==void 0&&r!=null&&c(e,["setup","generationConfig","responseModalities"],r);const a=u(t,["temperature"]);e!==void 0&&a!=null&&c(e,["setup","generationConfig","temperature"],a);const d=u(t,["topP"]);e!==void 0&&d!=null&&c(e,["setup","generationConfig","topP"],d);const h=u(t,["topK"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","topK"],h);const g=u(t,["maxOutputTokens"]);e!==void 0&&g!=null&&c(e,["setup","generationConfig","maxOutputTokens"],g);const p=u(t,["mediaResolution"]);e!==void 0&&p!=null&&c(e,["setup","generationConfig","mediaResolution"],p);const y=u(t,["seed"]);e!==void 0&&y!=null&&c(e,["setup","generationConfig","seed"],y);const T=u(t,["speechConfig"]);e!==void 0&&T!=null&&c(e,["setup","generationConfig","speechConfig"],GE(sf(T)));const _=u(t,["enableAffectiveDialog"]);e!==void 0&&_!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],_);const E=u(t,["systemInstruction"]);e!==void 0&&E!=null&&c(e,["setup","systemInstruction"],YE(dt(E)));const w=u(t,["tools"]);if(e!==void 0&&w!=null){let G=ks(w);Array.isArray(G)&&(G=G.map(X=>sw(Ms(X)))),c(e,["setup","tools"],G)}const k=u(t,["sessionResumption"]);e!==void 0&&k!=null&&c(e,["setup","sessionResumption"],ow(k));const U=u(t,["inputAudioTranscription"]);e!==void 0&&U!=null&&c(e,["setup","inputAudioTranscription"],Eg());const q=u(t,["outputAudioTranscription"]);e!==void 0&&q!=null&&c(e,["setup","outputAudioTranscription"],Eg());const B=u(t,["realtimeInputConfig"]);e!==void 0&&B!=null&&c(e,["setup","realtimeInputConfig"],lw(B));const M=u(t,["contextWindowCompression"]);e!==void 0&&M!=null&&c(e,["setup","contextWindowCompression"],uw(M));const J=u(t,["proactivity"]);return e!==void 0&&J!=null&&c(e,["setup","proactivity"],cw(J)),n}function dw(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["setup","model"],Re(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],fw(r,n)),n}function hw(){return{}}function pw(){return{}}function mw(t){const e={},n=u(t,["media"]);n!=null&&c(e,["mediaChunks"],ky(n));const s=u(t,["audio"]);s!=null&&c(e,["audio"],Dy(s));const r=u(t,["audioStreamEnd"]);r!=null&&c(e,["audioStreamEnd"],r);const a=u(t,["video"]);a!=null&&c(e,["video"],Ny(a));const d=u(t,["text"]);return d!=null&&c(e,["text"],d),u(t,["activityStart"])!=null&&c(e,["activityStart"],hw()),u(t,["activityEnd"])!=null&&c(e,["activityEnd"],pw()),e}function gw(){return{}}function yw(t){const e={},n=u(t,["fps"]);n!=null&&c(e,["fps"],n);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const r=u(t,["startOffset"]);return r!=null&&c(e,["startOffset"],r),e}function vw(t){const e={},n=u(t,["data"]);n!=null&&c(e,["data"],n);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function Tw(t){const e={},n=u(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function _w(t){const e={},n=u(t,["videoMetadata"]);n!=null&&c(e,["videoMetadata"],yw(n));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const r=u(t,["inlineData"]);r!=null&&c(e,["inlineData"],vw(r));const a=u(t,["fileData"]);a!=null&&c(e,["fileData"],Tw(a));const d=u(t,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(t,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(t,["executableCode"]);g!=null&&c(e,["executableCode"],g);const p=u(t,["functionCall"]);p!=null&&c(e,["functionCall"],p);const y=u(t,["functionResponse"]);y!=null&&c(e,["functionResponse"],y);const T=u(t,["text"]);return T!=null&&c(e,["text"],T),e}function Sw(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>_w(a))),c(e,["parts"],r)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function wg(t){const e={},n=u(t,["text"]);n!=null&&c(e,["text"],n);const s=u(t,["finished"]);return s!=null&&c(e,["finished"],s),e}function Cw(t){const e={},n=u(t,["retrievedUrl"]);n!=null&&c(e,["retrievedUrl"],n);const s=u(t,["urlRetrievalStatus"]);return s!=null&&c(e,["urlRetrievalStatus"],s),e}function xw(t){const e={},n=u(t,["urlMetadata"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>Cw(r))),c(e,["urlMetadata"],s)}return e}function Ew(t){const e={},n=u(t,["modelTurn"]);n!=null&&c(e,["modelTurn"],Sw(n));const s=u(t,["turnComplete"]);s!=null&&c(e,["turnComplete"],s);const r=u(t,["interrupted"]);r!=null&&c(e,["interrupted"],r);const a=u(t,["groundingMetadata"]);a!=null&&c(e,["groundingMetadata"],a);const d=u(t,["generationComplete"]);d!=null&&c(e,["generationComplete"],d);const h=u(t,["inputTranscription"]);h!=null&&c(e,["inputTranscription"],wg(h));const g=u(t,["outputTranscription"]);g!=null&&c(e,["outputTranscription"],wg(g));const p=u(t,["urlContextMetadata"]);return p!=null&&c(e,["urlContextMetadata"],xw(p)),e}function ww(t){const e={},n=u(t,["id"]);n!=null&&c(e,["id"],n);const s=u(t,["args"]);s!=null&&c(e,["args"],s);const r=u(t,["name"]);return r!=null&&c(e,["name"],r),e}function bw(t){const e={},n=u(t,["functionCalls"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>ww(r))),c(e,["functionCalls"],s)}return e}function Aw(t){const e={},n=u(t,["ids"]);return n!=null&&c(e,["ids"],n),e}function yl(t){const e={},n=u(t,["modality"]);n!=null&&c(e,["modality"],n);const s=u(t,["tokenCount"]);return s!=null&&c(e,["tokenCount"],s),e}function Rw(t){const e={},n=u(t,["promptTokenCount"]);n!=null&&c(e,["promptTokenCount"],n);const s=u(t,["cachedContentTokenCount"]);s!=null&&c(e,["cachedContentTokenCount"],s);const r=u(t,["responseTokenCount"]);r!=null&&c(e,["responseTokenCount"],r);const a=u(t,["toolUsePromptTokenCount"]);a!=null&&c(e,["toolUsePromptTokenCount"],a);const d=u(t,["thoughtsTokenCount"]);d!=null&&c(e,["thoughtsTokenCount"],d);const h=u(t,["totalTokenCount"]);h!=null&&c(e,["totalTokenCount"],h);const g=u(t,["promptTokensDetails"]);if(g!=null){let _=g;Array.isArray(_)&&(_=_.map(E=>yl(E))),c(e,["promptTokensDetails"],_)}const p=u(t,["cacheTokensDetails"]);if(p!=null){let _=p;Array.isArray(_)&&(_=_.map(E=>yl(E))),c(e,["cacheTokensDetails"],_)}const y=u(t,["responseTokensDetails"]);if(y!=null){let _=y;Array.isArray(_)&&(_=_.map(E=>yl(E))),c(e,["responseTokensDetails"],_)}const T=u(t,["toolUsePromptTokensDetails"]);if(T!=null){let _=T;Array.isArray(_)&&(_=_.map(E=>yl(E))),c(e,["toolUsePromptTokensDetails"],_)}return e}function Mw(t){const e={},n=u(t,["timeLeft"]);return n!=null&&c(e,["timeLeft"],n),e}function kw(t){const e={},n=u(t,["newHandle"]);n!=null&&c(e,["newHandle"],n);const s=u(t,["resumable"]);s!=null&&c(e,["resumable"],s);const r=u(t,["lastConsumedClientMessageIndex"]);return r!=null&&c(e,["lastConsumedClientMessageIndex"],r),e}function Nw(t){const e={};u(t,["setupComplete"])!=null&&c(e,["setupComplete"],gw());const s=u(t,["serverContent"]);s!=null&&c(e,["serverContent"],Ew(s));const r=u(t,["toolCall"]);r!=null&&c(e,["toolCall"],bw(r));const a=u(t,["toolCallCancellation"]);a!=null&&c(e,["toolCallCancellation"],Aw(a));const d=u(t,["usageMetadata"]);d!=null&&c(e,["usageMetadata"],Rw(d));const h=u(t,["goAway"]);h!=null&&c(e,["goAway"],Mw(h));const g=u(t,["sessionResumptionUpdate"]);return g!=null&&c(e,["sessionResumptionUpdate"],kw(g)),e}function Dw(){return{}}function Iw(t){const e={},n=u(t,["text"]);n!=null&&c(e,["text"],n);const s=u(t,["weight"]);return s!=null&&c(e,["weight"],s),e}function Uw(t){const e={},n=u(t,["weightedPrompts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>Iw(r))),c(e,["weightedPrompts"],s)}return e}function Lw(t){const e={},n=u(t,["temperature"]);n!=null&&c(e,["temperature"],n);const s=u(t,["topK"]);s!=null&&c(e,["topK"],s);const r=u(t,["seed"]);r!=null&&c(e,["seed"],r);const a=u(t,["guidance"]);a!=null&&c(e,["guidance"],a);const d=u(t,["bpm"]);d!=null&&c(e,["bpm"],d);const h=u(t,["density"]);h!=null&&c(e,["density"],h);const g=u(t,["brightness"]);g!=null&&c(e,["brightness"],g);const p=u(t,["scale"]);p!=null&&c(e,["scale"],p);const y=u(t,["muteBass"]);y!=null&&c(e,["muteBass"],y);const T=u(t,["muteDrums"]);T!=null&&c(e,["muteDrums"],T);const _=u(t,["onlyBassAndDrums"]);_!=null&&c(e,["onlyBassAndDrums"],_);const E=u(t,["musicGenerationMode"]);return E!=null&&c(e,["musicGenerationMode"],E),e}function Pw(t){const e={},n=u(t,["clientContent"]);n!=null&&c(e,["clientContent"],Uw(n));const s=u(t,["musicGenerationConfig"]);return s!=null&&c(e,["musicGenerationConfig"],Lw(s)),e}function qw(t){const e={},n=u(t,["data"]);n!=null&&c(e,["data"],n);const s=u(t,["mimeType"]);s!=null&&c(e,["mimeType"],s);const r=u(t,["sourceMetadata"]);return r!=null&&c(e,["sourceMetadata"],Pw(r)),e}function Ow(t){const e={},n=u(t,["audioChunks"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>qw(r))),c(e,["audioChunks"],s)}return e}function Bw(t){const e={},n=u(t,["text"]);n!=null&&c(e,["text"],n);const s=u(t,["filteredReason"]);return s!=null&&c(e,["filteredReason"],s),e}function Vw(t){const e={};u(t,["setupComplete"])!=null&&c(e,["setupComplete"],Dw());const s=u(t,["serverContent"]);s!=null&&c(e,["serverContent"],Ow(s));const r=u(t,["filteredPrompt"]);return r!=null&&c(e,["filteredPrompt"],Bw(r)),e}function Hw(t){const e={},n=u(t,["sessionId"]);return n!=null&&c(e,["sessionId"],n),e}function Gw(t){const e={},n=u(t,["fps"]);n!=null&&c(e,["fps"],n);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const r=u(t,["startOffset"]);return r!=null&&c(e,["startOffset"],r),e}function zw(t){const e={},n=u(t,["displayName"]);n!=null&&c(e,["displayName"],n);const s=u(t,["data"]);s!=null&&c(e,["data"],s);const r=u(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function $w(t){const e={},n=u(t,["displayName"]);n!=null&&c(e,["displayName"],n);const s=u(t,["fileUri"]);s!=null&&c(e,["fileUri"],s);const r=u(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function Fw(t){const e={},n=u(t,["videoMetadata"]);n!=null&&c(e,["videoMetadata"],Gw(n));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const r=u(t,["inlineData"]);r!=null&&c(e,["inlineData"],zw(r));const a=u(t,["fileData"]);a!=null&&c(e,["fileData"],$w(a));const d=u(t,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(t,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(t,["executableCode"]);g!=null&&c(e,["executableCode"],g);const p=u(t,["functionCall"]);p!=null&&c(e,["functionCall"],p);const y=u(t,["functionResponse"]);y!=null&&c(e,["functionResponse"],y);const T=u(t,["text"]);return T!=null&&c(e,["text"],T),e}function Jw(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>Fw(a))),c(e,["parts"],r)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function bg(t){const e={},n=u(t,["text"]);n!=null&&c(e,["text"],n);const s=u(t,["finished"]);return s!=null&&c(e,["finished"],s),e}function Yw(t){const e={},n=u(t,["modelTurn"]);n!=null&&c(e,["modelTurn"],Jw(n));const s=u(t,["turnComplete"]);s!=null&&c(e,["turnComplete"],s);const r=u(t,["interrupted"]);r!=null&&c(e,["interrupted"],r);const a=u(t,["groundingMetadata"]);a!=null&&c(e,["groundingMetadata"],a);const d=u(t,["generationComplete"]);d!=null&&c(e,["generationComplete"],d);const h=u(t,["inputTranscription"]);h!=null&&c(e,["inputTranscription"],bg(h));const g=u(t,["outputTranscription"]);return g!=null&&c(e,["outputTranscription"],bg(g)),e}function Kw(t){const e={},n=u(t,["args"]);n!=null&&c(e,["args"],n);const s=u(t,["name"]);return s!=null&&c(e,["name"],s),e}function Qw(t){const e={},n=u(t,["functionCalls"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>Kw(r))),c(e,["functionCalls"],s)}return e}function Xw(t){const e={},n=u(t,["ids"]);return n!=null&&c(e,["ids"],n),e}function vl(t){const e={},n=u(t,["modality"]);n!=null&&c(e,["modality"],n);const s=u(t,["tokenCount"]);return s!=null&&c(e,["tokenCount"],s),e}function Ww(t){const e={},n=u(t,["promptTokenCount"]);n!=null&&c(e,["promptTokenCount"],n);const s=u(t,["cachedContentTokenCount"]);s!=null&&c(e,["cachedContentTokenCount"],s);const r=u(t,["candidatesTokenCount"]);r!=null&&c(e,["responseTokenCount"],r);const a=u(t,["toolUsePromptTokenCount"]);a!=null&&c(e,["toolUsePromptTokenCount"],a);const d=u(t,["thoughtsTokenCount"]);d!=null&&c(e,["thoughtsTokenCount"],d);const h=u(t,["totalTokenCount"]);h!=null&&c(e,["totalTokenCount"],h);const g=u(t,["promptTokensDetails"]);if(g!=null){let E=g;Array.isArray(E)&&(E=E.map(w=>vl(w))),c(e,["promptTokensDetails"],E)}const p=u(t,["cacheTokensDetails"]);if(p!=null){let E=p;Array.isArray(E)&&(E=E.map(w=>vl(w))),c(e,["cacheTokensDetails"],E)}const y=u(t,["candidatesTokensDetails"]);if(y!=null){let E=y;Array.isArray(E)&&(E=E.map(w=>vl(w))),c(e,["responseTokensDetails"],E)}const T=u(t,["toolUsePromptTokensDetails"]);if(T!=null){let E=T;Array.isArray(E)&&(E=E.map(w=>vl(w))),c(e,["toolUsePromptTokensDetails"],E)}const _=u(t,["trafficType"]);return _!=null&&c(e,["trafficType"],_),e}function Zw(t){const e={},n=u(t,["timeLeft"]);return n!=null&&c(e,["timeLeft"],n),e}function jw(t){const e={},n=u(t,["newHandle"]);n!=null&&c(e,["newHandle"],n);const s=u(t,["resumable"]);s!=null&&c(e,["resumable"],s);const r=u(t,["lastConsumedClientMessageIndex"]);return r!=null&&c(e,["lastConsumedClientMessageIndex"],r),e}function eb(t){const e={},n=u(t,["setupComplete"]);n!=null&&c(e,["setupComplete"],Hw(n));const s=u(t,["serverContent"]);s!=null&&c(e,["serverContent"],Yw(s));const r=u(t,["toolCall"]);r!=null&&c(e,["toolCall"],Qw(r));const a=u(t,["toolCallCancellation"]);a!=null&&c(e,["toolCallCancellation"],Xw(a));const d=u(t,["usageMetadata"]);d!=null&&c(e,["usageMetadata"],Ww(d));const h=u(t,["goAway"]);h!=null&&c(e,["goAway"],Zw(h));const g=u(t,["sessionResumptionUpdate"]);return g!=null&&c(e,["sessionResumptionUpdate"],jw(g)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tb(t){const e={},n=u(t,["fps"]);n!=null&&c(e,["fps"],n);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const r=u(t,["startOffset"]);return r!=null&&c(e,["startOffset"],r),e}function nb(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["data"]);n!=null&&c(e,["data"],n);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function ib(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function sb(t){const e={},n=u(t,["videoMetadata"]);n!=null&&c(e,["videoMetadata"],tb(n));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const r=u(t,["inlineData"]);r!=null&&c(e,["inlineData"],nb(r));const a=u(t,["fileData"]);a!=null&&c(e,["fileData"],ib(a));const d=u(t,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(t,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(t,["executableCode"]);g!=null&&c(e,["executableCode"],g);const p=u(t,["functionCall"]);p!=null&&c(e,["functionCall"],p);const y=u(t,["functionResponse"]);y!=null&&c(e,["functionResponse"],y);const T=u(t,["text"]);return T!=null&&c(e,["text"],T),e}function Pl(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>sb(a))),c(e,["parts"],r)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function ob(t){const e={},n=u(t,["anyOf"]);n!=null&&c(e,["anyOf"],n);const s=u(t,["default"]);s!=null&&c(e,["default"],s);const r=u(t,["description"]);r!=null&&c(e,["description"],r);const a=u(t,["enum"]);a!=null&&c(e,["enum"],a);const d=u(t,["example"]);d!=null&&c(e,["example"],d);const h=u(t,["format"]);h!=null&&c(e,["format"],h);const g=u(t,["items"]);g!=null&&c(e,["items"],g);const p=u(t,["maxItems"]);p!=null&&c(e,["maxItems"],p);const y=u(t,["maxLength"]);y!=null&&c(e,["maxLength"],y);const T=u(t,["maxProperties"]);T!=null&&c(e,["maxProperties"],T);const _=u(t,["maximum"]);_!=null&&c(e,["maximum"],_);const E=u(t,["minItems"]);E!=null&&c(e,["minItems"],E);const w=u(t,["minLength"]);w!=null&&c(e,["minLength"],w);const k=u(t,["minProperties"]);k!=null&&c(e,["minProperties"],k);const U=u(t,["minimum"]);U!=null&&c(e,["minimum"],U);const q=u(t,["nullable"]);q!=null&&c(e,["nullable"],q);const B=u(t,["pattern"]);B!=null&&c(e,["pattern"],B);const M=u(t,["properties"]);M!=null&&c(e,["properties"],M);const J=u(t,["propertyOrdering"]);J!=null&&c(e,["propertyOrdering"],J);const G=u(t,["required"]);G!=null&&c(e,["required"],G);const X=u(t,["title"]);X!=null&&c(e,["title"],X);const j=u(t,["type"]);return j!=null&&c(e,["type"],j),e}function rb(t){const e={};if(u(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=u(t,["category"]);n!=null&&c(e,["category"],n);const s=u(t,["threshold"]);return s!=null&&c(e,["threshold"],s),e}function lb(t){const e={},n=u(t,["behavior"]);n!=null&&c(e,["behavior"],n);const s=u(t,["description"]);s!=null&&c(e,["description"],s);const r=u(t,["name"]);r!=null&&c(e,["name"],r);const a=u(t,["parameters"]);a!=null&&c(e,["parameters"],a);const d=u(t,["parametersJsonSchema"]);d!=null&&c(e,["parametersJsonSchema"],d);const h=u(t,["response"]);h!=null&&c(e,["response"],h);const g=u(t,["responseJsonSchema"]);return g!=null&&c(e,["responseJsonSchema"],g),e}function ab(t){const e={},n=u(t,["startTime"]);n!=null&&c(e,["startTime"],n);const s=u(t,["endTime"]);return s!=null&&c(e,["endTime"],s),e}function ub(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],ab(n)),e}function cb(t){const e={},n=u(t,["mode"]);n!=null&&c(e,["mode"],n);const s=u(t,["dynamicThreshold"]);return s!=null&&c(e,["dynamicThreshold"],s),e}function fb(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&c(e,["dynamicRetrievalConfig"],cb(n)),e}function db(){return{}}function hb(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(p=>lb(p))),c(e,["functionDeclarations"],g)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=u(t,["googleSearch"]);s!=null&&c(e,["googleSearch"],ub(s));const r=u(t,["googleSearchRetrieval"]);if(r!=null&&c(e,["googleSearchRetrieval"],fb(r)),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(t,["urlContext"])!=null&&c(e,["urlContext"],db());const d=u(t,["codeExecution"]);d!=null&&c(e,["codeExecution"],d);const h=u(t,["computerUse"]);return h!=null&&c(e,["computerUse"],h),e}function pb(t){const e={},n=u(t,["mode"]);n!=null&&c(e,["mode"],n);const s=u(t,["allowedFunctionNames"]);return s!=null&&c(e,["allowedFunctionNames"],s),e}function mb(t){const e={},n=u(t,["latitude"]);n!=null&&c(e,["latitude"],n);const s=u(t,["longitude"]);return s!=null&&c(e,["longitude"],s),e}function gb(t){const e={},n=u(t,["latLng"]);n!=null&&c(e,["latLng"],mb(n));const s=u(t,["languageCode"]);return s!=null&&c(e,["languageCode"],s),e}function yb(t){const e={},n=u(t,["functionCallingConfig"]);n!=null&&c(e,["functionCallingConfig"],pb(n));const s=u(t,["retrievalConfig"]);return s!=null&&c(e,["retrievalConfig"],gb(s)),e}function vb(t){const e={},n=u(t,["voiceName"]);return n!=null&&c(e,["voiceName"],n),e}function Wy(t){const e={},n=u(t,["prebuiltVoiceConfig"]);return n!=null&&c(e,["prebuiltVoiceConfig"],vb(n)),e}function Tb(t){const e={},n=u(t,["speaker"]);n!=null&&c(e,["speaker"],n);const s=u(t,["voiceConfig"]);return s!=null&&c(e,["voiceConfig"],Wy(s)),e}function _b(t){const e={},n=u(t,["speakerVoiceConfigs"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>Tb(r))),c(e,["speakerVoiceConfigs"],s)}return e}function Sb(t){const e={},n=u(t,["voiceConfig"]);n!=null&&c(e,["voiceConfig"],Wy(n));const s=u(t,["multiSpeakerVoiceConfig"]);s!=null&&c(e,["multiSpeakerVoiceConfig"],_b(s));const r=u(t,["languageCode"]);return r!=null&&c(e,["languageCode"],r),e}function Cb(t){const e={},n=u(t,["includeThoughts"]);n!=null&&c(e,["includeThoughts"],n);const s=u(t,["thinkingBudget"]);return s!=null&&c(e,["thinkingBudget"],s),e}function xb(t,e,n){const s={},r=u(e,["systemInstruction"]);n!==void 0&&r!=null&&c(n,["systemInstruction"],Pl(dt(r)));const a=u(e,["temperature"]);a!=null&&c(s,["temperature"],a);const d=u(e,["topP"]);d!=null&&c(s,["topP"],d);const h=u(e,["topK"]);h!=null&&c(s,["topK"],h);const g=u(e,["candidateCount"]);g!=null&&c(s,["candidateCount"],g);const p=u(e,["maxOutputTokens"]);p!=null&&c(s,["maxOutputTokens"],p);const y=u(e,["stopSequences"]);y!=null&&c(s,["stopSequences"],y);const T=u(e,["responseLogprobs"]);T!=null&&c(s,["responseLogprobs"],T);const _=u(e,["logprobs"]);_!=null&&c(s,["logprobs"],_);const E=u(e,["presencePenalty"]);E!=null&&c(s,["presencePenalty"],E);const w=u(e,["frequencyPenalty"]);w!=null&&c(s,["frequencyPenalty"],w);const k=u(e,["seed"]);k!=null&&c(s,["seed"],k);const U=u(e,["responseMimeType"]);U!=null&&c(s,["responseMimeType"],U);const q=u(e,["responseSchema"]);q!=null&&c(s,["responseSchema"],ob(tf(q)));const B=u(e,["responseJsonSchema"]);if(B!=null&&c(s,["responseJsonSchema"],B),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const M=u(e,["safetySettings"]);if(n!==void 0&&M!=null){let ae=M;Array.isArray(ae)&&(ae=ae.map(pe=>rb(pe))),c(n,["safetySettings"],ae)}const J=u(e,["tools"]);if(n!==void 0&&J!=null){let ae=ks(J);Array.isArray(ae)&&(ae=ae.map(pe=>hb(Ms(pe)))),c(n,["tools"],ae)}const G=u(e,["toolConfig"]);if(n!==void 0&&G!=null&&c(n,["toolConfig"],yb(G)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const X=u(e,["cachedContent"]);n!==void 0&&X!=null&&c(n,["cachedContent"],Sn(t,X));const j=u(e,["responseModalities"]);j!=null&&c(s,["responseModalities"],j);const ue=u(e,["mediaResolution"]);ue!=null&&c(s,["mediaResolution"],ue);const ne=u(e,["speechConfig"]);if(ne!=null&&c(s,["speechConfig"],Sb(nf(ne))),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const he=u(e,["thinkingConfig"]);return he!=null&&c(s,["thinkingConfig"],Cb(he)),s}function Ag(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","model"],Re(t,s));const r=u(e,["contents"]);if(r!=null){let d=Vt(r);Array.isArray(d)&&(d=d.map(h=>Pl(h))),c(n,["contents"],d)}const a=u(e,["config"]);return a!=null&&c(n,["generationConfig"],xb(t,a,n)),n}function Eb(t,e){const n={},s=u(t,["taskType"]);e!==void 0&&s!=null&&c(e,["requests[]","taskType"],s);const r=u(t,["title"]);e!==void 0&&r!=null&&c(e,["requests[]","title"],r);const a=u(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&c(e,["requests[]","outputDimensionality"],a),u(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function wb(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","model"],Re(t,s));const r=u(e,["contents"]);r!=null&&c(n,["requests[]","content"],Uy(t,r));const a=u(e,["config"]);a!=null&&c(n,["config"],Eb(a,n));const d=u(e,["model"]);return d!==void 0&&c(n,["requests[]","model"],Re(t,d)),n}function bb(t,e){const n={};if(u(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=u(t,["numberOfImages"]);e!==void 0&&s!=null&&c(e,["parameters","sampleCount"],s);const r=u(t,["aspectRatio"]);e!==void 0&&r!=null&&c(e,["parameters","aspectRatio"],r);const a=u(t,["guidanceScale"]);if(e!==void 0&&a!=null&&c(e,["parameters","guidanceScale"],a),u(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=u(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&c(e,["parameters","safetySetting"],d);const h=u(t,["personGeneration"]);e!==void 0&&h!=null&&c(e,["parameters","personGeneration"],h);const g=u(t,["includeSafetyAttributes"]);e!==void 0&&g!=null&&c(e,["parameters","includeSafetyAttributes"],g);const p=u(t,["includeRaiReason"]);e!==void 0&&p!=null&&c(e,["parameters","includeRaiReason"],p);const y=u(t,["language"]);e!==void 0&&y!=null&&c(e,["parameters","language"],y);const T=u(t,["outputMimeType"]);e!==void 0&&T!=null&&c(e,["parameters","outputOptions","mimeType"],T);const _=u(t,["outputCompressionQuality"]);if(e!==void 0&&_!=null&&c(e,["parameters","outputOptions","compressionQuality"],_),u(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");const E=u(t,["imageSize"]);if(e!==void 0&&E!=null&&c(e,["parameters","sampleImageSize"],E),u(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function Ab(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","model"],Re(t,s));const r=u(e,["prompt"]);r!=null&&c(n,["instances[0]","prompt"],r);const a=u(e,["config"]);return a!=null&&c(n,["config"],bb(a,n)),n}function Rb(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","name"],Re(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],r),n}function Mb(t,e,n){const s={},r=u(e,["pageSize"]);n!==void 0&&r!=null&&c(n,["_query","pageSize"],r);const a=u(e,["pageToken"]);n!==void 0&&a!=null&&c(n,["_query","pageToken"],a);const d=u(e,["filter"]);n!==void 0&&d!=null&&c(n,["_query","filter"],d);const h=u(e,["queryBase"]);return n!==void 0&&h!=null&&c(n,["_url","models_url"],qy(t,h)),s}function kb(t,e){const n={},s=u(e,["config"]);return s!=null&&c(n,["config"],Mb(t,s,n)),n}function Nb(t,e){const n={},s=u(t,["displayName"]);e!==void 0&&s!=null&&c(e,["displayName"],s);const r=u(t,["description"]);e!==void 0&&r!=null&&c(e,["description"],r);const a=u(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&c(e,["defaultCheckpointId"],a),n}function Db(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","name"],Re(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],Nb(r,n)),n}function Ib(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","name"],Re(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],r),n}function Ub(t){const e={};if(u(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(u(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(u(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Lb(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","model"],Re(t,s));const r=u(e,["contents"]);if(r!=null){let d=Vt(r);Array.isArray(d)&&(d=d.map(h=>Pl(h))),c(n,["contents"],d)}const a=u(e,["config"]);return a!=null&&c(n,["config"],Ub(a)),n}function Pb(t){const e={};if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=u(t,["imageBytes"]);n!=null&&c(e,["bytesBase64Encoded"],Ei(n));const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function qb(t,e){const n={},s=u(t,["numberOfVideos"]);if(e!==void 0&&s!=null&&c(e,["parameters","sampleCount"],s),u(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=u(t,["durationSeconds"]);if(e!==void 0&&r!=null&&c(e,["parameters","durationSeconds"],r),u(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=u(t,["aspectRatio"]);if(e!==void 0&&a!=null&&c(e,["parameters","aspectRatio"],a),u(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const d=u(t,["personGeneration"]);if(e!==void 0&&d!=null&&c(e,["parameters","personGeneration"],d),u(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const h=u(t,["negativePrompt"]);e!==void 0&&h!=null&&c(e,["parameters","negativePrompt"],h);const g=u(t,["enhancePrompt"]);if(e!==void 0&&g!=null&&c(e,["parameters","enhancePrompt"],g),u(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(u(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(u(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function Ob(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","model"],Re(t,s));const r=u(e,["prompt"]);r!=null&&c(n,["instances[0]","prompt"],r);const a=u(e,["image"]);if(a!=null&&c(n,["instances[0]","image"],Pb(a)),u(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const d=u(e,["config"]);return d!=null&&c(n,["config"],qb(d,n)),n}function Bb(t){const e={},n=u(t,["fps"]);n!=null&&c(e,["fps"],n);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const r=u(t,["startOffset"]);return r!=null&&c(e,["startOffset"],r),e}function Vb(t){const e={},n=u(t,["displayName"]);n!=null&&c(e,["displayName"],n);const s=u(t,["data"]);s!=null&&c(e,["data"],s);const r=u(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function Hb(t){const e={},n=u(t,["displayName"]);n!=null&&c(e,["displayName"],n);const s=u(t,["fileUri"]);s!=null&&c(e,["fileUri"],s);const r=u(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function Gb(t){const e={},n=u(t,["videoMetadata"]);n!=null&&c(e,["videoMetadata"],Bb(n));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const r=u(t,["inlineData"]);r!=null&&c(e,["inlineData"],Vb(r));const a=u(t,["fileData"]);a!=null&&c(e,["fileData"],Hb(a));const d=u(t,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(t,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(t,["executableCode"]);g!=null&&c(e,["executableCode"],g);const p=u(t,["functionCall"]);p!=null&&c(e,["functionCall"],p);const y=u(t,["functionResponse"]);y!=null&&c(e,["functionResponse"],y);const T=u(t,["text"]);return T!=null&&c(e,["text"],T),e}function Ds(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>Gb(a))),c(e,["parts"],r)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function zb(t){const e={},n=u(t,["anyOf"]);n!=null&&c(e,["anyOf"],n);const s=u(t,["default"]);s!=null&&c(e,["default"],s);const r=u(t,["description"]);r!=null&&c(e,["description"],r);const a=u(t,["enum"]);a!=null&&c(e,["enum"],a);const d=u(t,["example"]);d!=null&&c(e,["example"],d);const h=u(t,["format"]);h!=null&&c(e,["format"],h);const g=u(t,["items"]);g!=null&&c(e,["items"],g);const p=u(t,["maxItems"]);p!=null&&c(e,["maxItems"],p);const y=u(t,["maxLength"]);y!=null&&c(e,["maxLength"],y);const T=u(t,["maxProperties"]);T!=null&&c(e,["maxProperties"],T);const _=u(t,["maximum"]);_!=null&&c(e,["maximum"],_);const E=u(t,["minItems"]);E!=null&&c(e,["minItems"],E);const w=u(t,["minLength"]);w!=null&&c(e,["minLength"],w);const k=u(t,["minProperties"]);k!=null&&c(e,["minProperties"],k);const U=u(t,["minimum"]);U!=null&&c(e,["minimum"],U);const q=u(t,["nullable"]);q!=null&&c(e,["nullable"],q);const B=u(t,["pattern"]);B!=null&&c(e,["pattern"],B);const M=u(t,["properties"]);M!=null&&c(e,["properties"],M);const J=u(t,["propertyOrdering"]);J!=null&&c(e,["propertyOrdering"],J);const G=u(t,["required"]);G!=null&&c(e,["required"],G);const X=u(t,["title"]);X!=null&&c(e,["title"],X);const j=u(t,["type"]);return j!=null&&c(e,["type"],j),e}function $b(t){const e={},n=u(t,["featureSelectionPreference"]);return n!=null&&c(e,["featureSelectionPreference"],n),e}function Fb(t){const e={},n=u(t,["method"]);n!=null&&c(e,["method"],n);const s=u(t,["category"]);s!=null&&c(e,["category"],s);const r=u(t,["threshold"]);return r!=null&&c(e,["threshold"],r),e}function Jb(t){const e={};if(u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=u(t,["description"]);n!=null&&c(e,["description"],n);const s=u(t,["name"]);s!=null&&c(e,["name"],s);const r=u(t,["parameters"]);r!=null&&c(e,["parameters"],r);const a=u(t,["parametersJsonSchema"]);a!=null&&c(e,["parametersJsonSchema"],a);const d=u(t,["response"]);d!=null&&c(e,["response"],d);const h=u(t,["responseJsonSchema"]);return h!=null&&c(e,["responseJsonSchema"],h),e}function Yb(t){const e={},n=u(t,["startTime"]);n!=null&&c(e,["startTime"],n);const s=u(t,["endTime"]);return s!=null&&c(e,["endTime"],s),e}function Kb(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],Yb(n)),e}function Qb(t){const e={},n=u(t,["mode"]);n!=null&&c(e,["mode"],n);const s=u(t,["dynamicThreshold"]);return s!=null&&c(e,["dynamicThreshold"],s),e}function Xb(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&c(e,["dynamicRetrievalConfig"],Qb(n)),e}function Wb(){return{}}function Zb(t){const e={},n=u(t,["apiKeyString"]);return n!=null&&c(e,["apiKeyString"],n),e}function jb(t){const e={},n=u(t,["apiKeyConfig"]);n!=null&&c(e,["apiKeyConfig"],Zb(n));const s=u(t,["authType"]);s!=null&&c(e,["authType"],s);const r=u(t,["googleServiceAccountConfig"]);r!=null&&c(e,["googleServiceAccountConfig"],r);const a=u(t,["httpBasicAuthConfig"]);a!=null&&c(e,["httpBasicAuthConfig"],a);const d=u(t,["oauthConfig"]);d!=null&&c(e,["oauthConfig"],d);const h=u(t,["oidcConfig"]);return h!=null&&c(e,["oidcConfig"],h),e}function eA(t){const e={},n=u(t,["authConfig"]);return n!=null&&c(e,["authConfig"],jb(n)),e}function tA(){return{}}function Zy(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let T=n;Array.isArray(T)&&(T=T.map(_=>Jb(_))),c(e,["functionDeclarations"],T)}const s=u(t,["retrieval"]);s!=null&&c(e,["retrieval"],s);const r=u(t,["googleSearch"]);r!=null&&c(e,["googleSearch"],Kb(r));const a=u(t,["googleSearchRetrieval"]);a!=null&&c(e,["googleSearchRetrieval"],Xb(a)),u(t,["enterpriseWebSearch"])!=null&&c(e,["enterpriseWebSearch"],Wb());const h=u(t,["googleMaps"]);h!=null&&c(e,["googleMaps"],eA(h)),u(t,["urlContext"])!=null&&c(e,["urlContext"],tA());const p=u(t,["codeExecution"]);p!=null&&c(e,["codeExecution"],p);const y=u(t,["computerUse"]);return y!=null&&c(e,["computerUse"],y),e}function nA(t){const e={},n=u(t,["mode"]);n!=null&&c(e,["mode"],n);const s=u(t,["allowedFunctionNames"]);return s!=null&&c(e,["allowedFunctionNames"],s),e}function iA(t){const e={},n=u(t,["latitude"]);n!=null&&c(e,["latitude"],n);const s=u(t,["longitude"]);return s!=null&&c(e,["longitude"],s),e}function sA(t){const e={},n=u(t,["latLng"]);n!=null&&c(e,["latLng"],iA(n));const s=u(t,["languageCode"]);return s!=null&&c(e,["languageCode"],s),e}function oA(t){const e={},n=u(t,["functionCallingConfig"]);n!=null&&c(e,["functionCallingConfig"],nA(n));const s=u(t,["retrievalConfig"]);return s!=null&&c(e,["retrievalConfig"],sA(s)),e}function rA(t){const e={},n=u(t,["voiceName"]);return n!=null&&c(e,["voiceName"],n),e}function lA(t){const e={},n=u(t,["prebuiltVoiceConfig"]);return n!=null&&c(e,["prebuiltVoiceConfig"],rA(n)),e}function aA(t){const e={},n=u(t,["voiceConfig"]);if(n!=null&&c(e,["voiceConfig"],lA(n)),u(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const s=u(t,["languageCode"]);return s!=null&&c(e,["languageCode"],s),e}function uA(t){const e={},n=u(t,["includeThoughts"]);n!=null&&c(e,["includeThoughts"],n);const s=u(t,["thinkingBudget"]);return s!=null&&c(e,["thinkingBudget"],s),e}function cA(t,e,n){const s={},r=u(e,["systemInstruction"]);n!==void 0&&r!=null&&c(n,["systemInstruction"],Ds(dt(r)));const a=u(e,["temperature"]);a!=null&&c(s,["temperature"],a);const d=u(e,["topP"]);d!=null&&c(s,["topP"],d);const h=u(e,["topK"]);h!=null&&c(s,["topK"],h);const g=u(e,["candidateCount"]);g!=null&&c(s,["candidateCount"],g);const p=u(e,["maxOutputTokens"]);p!=null&&c(s,["maxOutputTokens"],p);const y=u(e,["stopSequences"]);y!=null&&c(s,["stopSequences"],y);const T=u(e,["responseLogprobs"]);T!=null&&c(s,["responseLogprobs"],T);const _=u(e,["logprobs"]);_!=null&&c(s,["logprobs"],_);const E=u(e,["presencePenalty"]);E!=null&&c(s,["presencePenalty"],E);const w=u(e,["frequencyPenalty"]);w!=null&&c(s,["frequencyPenalty"],w);const k=u(e,["seed"]);k!=null&&c(s,["seed"],k);const U=u(e,["responseMimeType"]);U!=null&&c(s,["responseMimeType"],U);const q=u(e,["responseSchema"]);q!=null&&c(s,["responseSchema"],zb(tf(q)));const B=u(e,["responseJsonSchema"]);B!=null&&c(s,["responseJsonSchema"],B);const M=u(e,["routingConfig"]);M!=null&&c(s,["routingConfig"],M);const J=u(e,["modelSelectionConfig"]);J!=null&&c(s,["modelConfig"],$b(J));const G=u(e,["safetySettings"]);if(n!==void 0&&G!=null){let ee=G;Array.isArray(ee)&&(ee=ee.map(N=>Fb(N))),c(n,["safetySettings"],ee)}const X=u(e,["tools"]);if(n!==void 0&&X!=null){let ee=ks(X);Array.isArray(ee)&&(ee=ee.map(N=>Zy(Ms(N)))),c(n,["tools"],ee)}const j=u(e,["toolConfig"]);n!==void 0&&j!=null&&c(n,["toolConfig"],oA(j));const ue=u(e,["labels"]);n!==void 0&&ue!=null&&c(n,["labels"],ue);const ne=u(e,["cachedContent"]);n!==void 0&&ne!=null&&c(n,["cachedContent"],Sn(t,ne));const he=u(e,["responseModalities"]);he!=null&&c(s,["responseModalities"],he);const ae=u(e,["mediaResolution"]);ae!=null&&c(s,["mediaResolution"],ae);const pe=u(e,["speechConfig"]);pe!=null&&c(s,["speechConfig"],aA(nf(pe)));const Q=u(e,["audioTimestamp"]);Q!=null&&c(s,["audioTimestamp"],Q);const re=u(e,["thinkingConfig"]);return re!=null&&c(s,["thinkingConfig"],uA(re)),s}function Rg(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","model"],Re(t,s));const r=u(e,["contents"]);if(r!=null){let d=Vt(r);Array.isArray(d)&&(d=d.map(h=>Ds(h))),c(n,["contents"],d)}const a=u(e,["config"]);return a!=null&&c(n,["generationConfig"],cA(t,a,n)),n}function fA(t,e){const n={},s=u(t,["taskType"]);e!==void 0&&s!=null&&c(e,["instances[]","task_type"],s);const r=u(t,["title"]);e!==void 0&&r!=null&&c(e,["instances[]","title"],r);const a=u(t,["outputDimensionality"]);e!==void 0&&a!=null&&c(e,["parameters","outputDimensionality"],a);const d=u(t,["mimeType"]);e!==void 0&&d!=null&&c(e,["instances[]","mimeType"],d);const h=u(t,["autoTruncate"]);return e!==void 0&&h!=null&&c(e,["parameters","autoTruncate"],h),n}function dA(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","model"],Re(t,s));const r=u(e,["contents"]);r!=null&&c(n,["instances[]","content"],Uy(t,r));const a=u(e,["config"]);return a!=null&&c(n,["config"],fA(a,n)),n}function hA(t,e){const n={},s=u(t,["outputGcsUri"]);e!==void 0&&s!=null&&c(e,["parameters","storageUri"],s);const r=u(t,["negativePrompt"]);e!==void 0&&r!=null&&c(e,["parameters","negativePrompt"],r);const a=u(t,["numberOfImages"]);e!==void 0&&a!=null&&c(e,["parameters","sampleCount"],a);const d=u(t,["aspectRatio"]);e!==void 0&&d!=null&&c(e,["parameters","aspectRatio"],d);const h=u(t,["guidanceScale"]);e!==void 0&&h!=null&&c(e,["parameters","guidanceScale"],h);const g=u(t,["seed"]);e!==void 0&&g!=null&&c(e,["parameters","seed"],g);const p=u(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&c(e,["parameters","safetySetting"],p);const y=u(t,["personGeneration"]);e!==void 0&&y!=null&&c(e,["parameters","personGeneration"],y);const T=u(t,["includeSafetyAttributes"]);e!==void 0&&T!=null&&c(e,["parameters","includeSafetyAttributes"],T);const _=u(t,["includeRaiReason"]);e!==void 0&&_!=null&&c(e,["parameters","includeRaiReason"],_);const E=u(t,["language"]);e!==void 0&&E!=null&&c(e,["parameters","language"],E);const w=u(t,["outputMimeType"]);e!==void 0&&w!=null&&c(e,["parameters","outputOptions","mimeType"],w);const k=u(t,["outputCompressionQuality"]);e!==void 0&&k!=null&&c(e,["parameters","outputOptions","compressionQuality"],k);const U=u(t,["addWatermark"]);e!==void 0&&U!=null&&c(e,["parameters","addWatermark"],U);const q=u(t,["imageSize"]);e!==void 0&&q!=null&&c(e,["parameters","sampleImageSize"],q);const B=u(t,["enhancePrompt"]);return e!==void 0&&B!=null&&c(e,["parameters","enhancePrompt"],B),n}function pA(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","model"],Re(t,s));const r=u(e,["prompt"]);r!=null&&c(n,["instances[0]","prompt"],r);const a=u(e,["config"]);return a!=null&&c(n,["config"],hA(a,n)),n}function Is(t){const e={},n=u(t,["gcsUri"]);n!=null&&c(e,["gcsUri"],n);const s=u(t,["imageBytes"]);s!=null&&c(e,["bytesBase64Encoded"],Ei(s));const r=u(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function mA(t){const e={},n=u(t,["maskMode"]);n!=null&&c(e,["maskMode"],n);const s=u(t,["segmentationClasses"]);s!=null&&c(e,["maskClasses"],s);const r=u(t,["maskDilation"]);return r!=null&&c(e,["dilation"],r),e}function gA(t){const e={},n=u(t,["controlType"]);n!=null&&c(e,["controlType"],n);const s=u(t,["enableControlImageComputation"]);return s!=null&&c(e,["computeControl"],s),e}function yA(t){const e={},n=u(t,["styleDescription"]);return n!=null&&c(e,["styleDescription"],n),e}function vA(t){const e={},n=u(t,["subjectType"]);n!=null&&c(e,["subjectType"],n);const s=u(t,["subjectDescription"]);return s!=null&&c(e,["subjectDescription"],s),e}function TA(t){const e={},n=u(t,["referenceImage"]);n!=null&&c(e,["referenceImage"],Is(n));const s=u(t,["referenceId"]);s!=null&&c(e,["referenceId"],s);const r=u(t,["referenceType"]);r!=null&&c(e,["referenceType"],r);const a=u(t,["maskImageConfig"]);a!=null&&c(e,["maskImageConfig"],mA(a));const d=u(t,["controlImageConfig"]);d!=null&&c(e,["controlImageConfig"],gA(d));const h=u(t,["styleImageConfig"]);h!=null&&c(e,["styleImageConfig"],yA(h));const g=u(t,["subjectImageConfig"]);return g!=null&&c(e,["subjectImageConfig"],vA(g)),e}function _A(t,e){const n={},s=u(t,["outputGcsUri"]);e!==void 0&&s!=null&&c(e,["parameters","storageUri"],s);const r=u(t,["negativePrompt"]);e!==void 0&&r!=null&&c(e,["parameters","negativePrompt"],r);const a=u(t,["numberOfImages"]);e!==void 0&&a!=null&&c(e,["parameters","sampleCount"],a);const d=u(t,["aspectRatio"]);e!==void 0&&d!=null&&c(e,["parameters","aspectRatio"],d);const h=u(t,["guidanceScale"]);e!==void 0&&h!=null&&c(e,["parameters","guidanceScale"],h);const g=u(t,["seed"]);e!==void 0&&g!=null&&c(e,["parameters","seed"],g);const p=u(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&c(e,["parameters","safetySetting"],p);const y=u(t,["personGeneration"]);e!==void 0&&y!=null&&c(e,["parameters","personGeneration"],y);const T=u(t,["includeSafetyAttributes"]);e!==void 0&&T!=null&&c(e,["parameters","includeSafetyAttributes"],T);const _=u(t,["includeRaiReason"]);e!==void 0&&_!=null&&c(e,["parameters","includeRaiReason"],_);const E=u(t,["language"]);e!==void 0&&E!=null&&c(e,["parameters","language"],E);const w=u(t,["outputMimeType"]);e!==void 0&&w!=null&&c(e,["parameters","outputOptions","mimeType"],w);const k=u(t,["outputCompressionQuality"]);e!==void 0&&k!=null&&c(e,["parameters","outputOptions","compressionQuality"],k);const U=u(t,["addWatermark"]);e!==void 0&&U!=null&&c(e,["parameters","addWatermark"],U);const q=u(t,["editMode"]);e!==void 0&&q!=null&&c(e,["parameters","editMode"],q);const B=u(t,["baseSteps"]);return e!==void 0&&B!=null&&c(e,["parameters","editConfig","baseSteps"],B),n}function SA(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","model"],Re(t,s));const r=u(e,["prompt"]);r!=null&&c(n,["instances[0]","prompt"],r);const a=u(e,["referenceImages"]);if(a!=null){let h=a;Array.isArray(h)&&(h=h.map(g=>TA(g))),c(n,["instances[0]","referenceImages"],h)}const d=u(e,["config"]);return d!=null&&c(n,["config"],_A(d,n)),n}function CA(t,e){const n={},s=u(t,["includeRaiReason"]);e!==void 0&&s!=null&&c(e,["parameters","includeRaiReason"],s);const r=u(t,["outputMimeType"]);e!==void 0&&r!=null&&c(e,["parameters","outputOptions","mimeType"],r);const a=u(t,["outputCompressionQuality"]);e!==void 0&&a!=null&&c(e,["parameters","outputOptions","compressionQuality"],a);const d=u(t,["enhanceInputImage"]);e!==void 0&&d!=null&&c(e,["parameters","upscaleConfig","enhanceInputImage"],d);const h=u(t,["imagePreservationFactor"]);e!==void 0&&h!=null&&c(e,["parameters","upscaleConfig","imagePreservationFactor"],h);const g=u(t,["numberOfImages"]);e!==void 0&&g!=null&&c(e,["parameters","sampleCount"],g);const p=u(t,["mode"]);return e!==void 0&&p!=null&&c(e,["parameters","mode"],p),n}function xA(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","model"],Re(t,s));const r=u(e,["image"]);r!=null&&c(n,["instances[0]","image"],Is(r));const a=u(e,["upscaleFactor"]);a!=null&&c(n,["parameters","upscaleConfig","upscaleFactor"],a);const d=u(e,["config"]);return d!=null&&c(n,["config"],CA(d,n)),n}function EA(t){const e={},n=u(t,["productImage"]);return n!=null&&c(e,["image"],Is(n)),e}function wA(t,e){const n={},s=u(t,["prompt"]);e!==void 0&&s!=null&&c(e,["instances[0]","prompt"],s);const r=u(t,["personImage"]);e!==void 0&&r!=null&&c(e,["instances[0]","personImage","image"],Is(r));const a=u(t,["productImages"]);if(e!==void 0&&a!=null){let d=a;Array.isArray(d)&&(d=d.map(h=>EA(h))),c(e,["instances[0]","productImages"],d)}return n}function bA(t,e){const n={},s=u(t,["numberOfImages"]);e!==void 0&&s!=null&&c(e,["parameters","sampleCount"],s);const r=u(t,["baseSteps"]);e!==void 0&&r!=null&&c(e,["parameters","editConfig","baseSteps"],r);const a=u(t,["outputGcsUri"]);e!==void 0&&a!=null&&c(e,["parameters","storageUri"],a);const d=u(t,["seed"]);e!==void 0&&d!=null&&c(e,["parameters","seed"],d);const h=u(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&c(e,["parameters","safetySetting"],h);const g=u(t,["personGeneration"]);e!==void 0&&g!=null&&c(e,["parameters","personGeneration"],g);const p=u(t,["outputMimeType"]);e!==void 0&&p!=null&&c(e,["parameters","outputOptions","mimeType"],p);const y=u(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&c(e,["parameters","outputOptions","compressionQuality"],y);const T=u(t,["enhancePrompt"]);return e!==void 0&&T!=null&&c(e,["parameters","enhancePrompt"],T),n}function AA(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","model"],Re(t,s));const r=u(e,["source"]);r!=null&&c(n,["config"],wA(r,n));const a=u(e,["config"]);return a!=null&&c(n,["config"],bA(a,n)),n}function RA(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","name"],Re(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],r),n}function MA(t,e,n){const s={},r=u(e,["pageSize"]);n!==void 0&&r!=null&&c(n,["_query","pageSize"],r);const a=u(e,["pageToken"]);n!==void 0&&a!=null&&c(n,["_query","pageToken"],a);const d=u(e,["filter"]);n!==void 0&&d!=null&&c(n,["_query","filter"],d);const h=u(e,["queryBase"]);return n!==void 0&&h!=null&&c(n,["_url","models_url"],qy(t,h)),s}function kA(t,e){const n={},s=u(e,["config"]);return s!=null&&c(n,["config"],MA(t,s,n)),n}function NA(t,e){const n={},s=u(t,["displayName"]);e!==void 0&&s!=null&&c(e,["displayName"],s);const r=u(t,["description"]);e!==void 0&&r!=null&&c(e,["description"],r);const a=u(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&c(e,["defaultCheckpointId"],a),n}function DA(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","model"],Re(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],NA(r,n)),n}function IA(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","name"],Re(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],r),n}function UA(t,e){const n={},s=u(t,["systemInstruction"]);e!==void 0&&s!=null&&c(e,["systemInstruction"],Ds(dt(s)));const r=u(t,["tools"]);if(e!==void 0&&r!=null){let d=r;Array.isArray(d)&&(d=d.map(h=>Zy(h))),c(e,["tools"],d)}const a=u(t,["generationConfig"]);return e!==void 0&&a!=null&&c(e,["generationConfig"],a),n}function LA(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","model"],Re(t,s));const r=u(e,["contents"]);if(r!=null){let d=Vt(r);Array.isArray(d)&&(d=d.map(h=>Ds(h))),c(n,["contents"],d)}const a=u(e,["config"]);return a!=null&&c(n,["config"],UA(a,n)),n}function PA(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","model"],Re(t,s));const r=u(e,["contents"]);if(r!=null){let d=Vt(r);Array.isArray(d)&&(d=d.map(h=>Ds(h))),c(n,["contents"],d)}const a=u(e,["config"]);return a!=null&&c(n,["config"],a),n}function qA(t){const e={},n=u(t,["uri"]);n!=null&&c(e,["gcsUri"],n);const s=u(t,["videoBytes"]);s!=null&&c(e,["bytesBase64Encoded"],Ei(s));const r=u(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function OA(t,e){const n={},s=u(t,["numberOfVideos"]);e!==void 0&&s!=null&&c(e,["parameters","sampleCount"],s);const r=u(t,["outputGcsUri"]);e!==void 0&&r!=null&&c(e,["parameters","storageUri"],r);const a=u(t,["fps"]);e!==void 0&&a!=null&&c(e,["parameters","fps"],a);const d=u(t,["durationSeconds"]);e!==void 0&&d!=null&&c(e,["parameters","durationSeconds"],d);const h=u(t,["seed"]);e!==void 0&&h!=null&&c(e,["parameters","seed"],h);const g=u(t,["aspectRatio"]);e!==void 0&&g!=null&&c(e,["parameters","aspectRatio"],g);const p=u(t,["resolution"]);e!==void 0&&p!=null&&c(e,["parameters","resolution"],p);const y=u(t,["personGeneration"]);e!==void 0&&y!=null&&c(e,["parameters","personGeneration"],y);const T=u(t,["pubsubTopic"]);e!==void 0&&T!=null&&c(e,["parameters","pubsubTopic"],T);const _=u(t,["negativePrompt"]);e!==void 0&&_!=null&&c(e,["parameters","negativePrompt"],_);const E=u(t,["enhancePrompt"]);e!==void 0&&E!=null&&c(e,["parameters","enhancePrompt"],E);const w=u(t,["generateAudio"]);e!==void 0&&w!=null&&c(e,["parameters","generateAudio"],w);const k=u(t,["lastFrame"]);e!==void 0&&k!=null&&c(e,["instances[0]","lastFrame"],Is(k));const U=u(t,["compressionQuality"]);return e!==void 0&&U!=null&&c(e,["parameters","compressionQuality"],U),n}function BA(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["_url","model"],Re(t,s));const r=u(e,["prompt"]);r!=null&&c(n,["instances[0]","prompt"],r);const a=u(e,["image"]);a!=null&&c(n,["instances[0]","image"],Is(a));const d=u(e,["video"]);d!=null&&c(n,["instances[0]","video"],qA(d));const h=u(e,["config"]);return h!=null&&c(n,["config"],OA(h,n)),n}function VA(t){const e={},n=u(t,["fps"]);n!=null&&c(e,["fps"],n);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const r=u(t,["startOffset"]);return r!=null&&c(e,["startOffset"],r),e}function HA(t){const e={},n=u(t,["data"]);n!=null&&c(e,["data"],n);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function GA(t){const e={},n=u(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function zA(t){const e={},n=u(t,["videoMetadata"]);n!=null&&c(e,["videoMetadata"],VA(n));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const r=u(t,["inlineData"]);r!=null&&c(e,["inlineData"],HA(r));const a=u(t,["fileData"]);a!=null&&c(e,["fileData"],GA(a));const d=u(t,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(t,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(t,["executableCode"]);g!=null&&c(e,["executableCode"],g);const p=u(t,["functionCall"]);p!=null&&c(e,["functionCall"],p);const y=u(t,["functionResponse"]);y!=null&&c(e,["functionResponse"],y);const T=u(t,["text"]);return T!=null&&c(e,["text"],T),e}function $A(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>zA(a))),c(e,["parts"],r)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function FA(t){const e={},n=u(t,["citationSources"]);return n!=null&&c(e,["citations"],n),e}function JA(t){const e={},n=u(t,["retrievedUrl"]);n!=null&&c(e,["retrievedUrl"],n);const s=u(t,["urlRetrievalStatus"]);return s!=null&&c(e,["urlRetrievalStatus"],s),e}function YA(t){const e={},n=u(t,["urlMetadata"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>JA(r))),c(e,["urlMetadata"],s)}return e}function KA(t){const e={},n=u(t,["content"]);n!=null&&c(e,["content"],$A(n));const s=u(t,["citationMetadata"]);s!=null&&c(e,["citationMetadata"],FA(s));const r=u(t,["tokenCount"]);r!=null&&c(e,["tokenCount"],r);const a=u(t,["finishReason"]);a!=null&&c(e,["finishReason"],a);const d=u(t,["urlContextMetadata"]);d!=null&&c(e,["urlContextMetadata"],YA(d));const h=u(t,["avgLogprobs"]);h!=null&&c(e,["avgLogprobs"],h);const g=u(t,["groundingMetadata"]);g!=null&&c(e,["groundingMetadata"],g);const p=u(t,["index"]);p!=null&&c(e,["index"],p);const y=u(t,["logprobsResult"]);y!=null&&c(e,["logprobsResult"],y);const T=u(t,["safetyRatings"]);return T!=null&&c(e,["safetyRatings"],T),e}function Mg(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const s=u(t,["candidates"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(p=>KA(p))),c(e,["candidates"],g)}const r=u(t,["modelVersion"]);r!=null&&c(e,["modelVersion"],r);const a=u(t,["promptFeedback"]);a!=null&&c(e,["promptFeedback"],a);const d=u(t,["responseId"]);d!=null&&c(e,["responseId"],d);const h=u(t,["usageMetadata"]);return h!=null&&c(e,["usageMetadata"],h),e}function QA(t){const e={},n=u(t,["values"]);return n!=null&&c(e,["values"],n),e}function XA(){return{}}function WA(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const s=u(t,["embeddings"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(d=>QA(d))),c(e,["embeddings"],a)}return u(t,["metadata"])!=null&&c(e,["metadata"],XA()),e}function ZA(t){const e={},n=u(t,["bytesBase64Encoded"]);n!=null&&c(e,["imageBytes"],Ei(n));const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function jy(t){const e={},n=u(t,["safetyAttributes","categories"]);n!=null&&c(e,["categories"],n);const s=u(t,["safetyAttributes","scores"]);s!=null&&c(e,["scores"],s);const r=u(t,["contentType"]);return r!=null&&c(e,["contentType"],r),e}function jA(t){const e={},n=u(t,["_self"]);n!=null&&c(e,["image"],ZA(n));const s=u(t,["raiFilteredReason"]);s!=null&&c(e,["raiFilteredReason"],s);const r=u(t,["_self"]);return r!=null&&c(e,["safetyAttributes"],jy(r)),e}function e1(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const s=u(t,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(d=>jA(d))),c(e,["generatedImages"],a)}const r=u(t,["positivePromptSafetyAttributes"]);return r!=null&&c(e,["positivePromptSafetyAttributes"],jy(r)),e}function t1(t){const e={},n=u(t,["baseModel"]);n!=null&&c(e,["baseModel"],n);const s=u(t,["createTime"]);s!=null&&c(e,["createTime"],s);const r=u(t,["updateTime"]);return r!=null&&c(e,["updateTime"],r),e}function Nc(t){const e={},n=u(t,["name"]);n!=null&&c(e,["name"],n);const s=u(t,["displayName"]);s!=null&&c(e,["displayName"],s);const r=u(t,["description"]);r!=null&&c(e,["description"],r);const a=u(t,["version"]);a!=null&&c(e,["version"],a);const d=u(t,["_self"]);d!=null&&c(e,["tunedModelInfo"],t1(d));const h=u(t,["inputTokenLimit"]);h!=null&&c(e,["inputTokenLimit"],h);const g=u(t,["outputTokenLimit"]);g!=null&&c(e,["outputTokenLimit"],g);const p=u(t,["supportedGenerationMethods"]);return p!=null&&c(e,["supportedActions"],p),e}function n1(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const s=u(t,["nextPageToken"]);s!=null&&c(e,["nextPageToken"],s);const r=u(t,["_self"]);if(r!=null){let a=Oy(r);Array.isArray(a)&&(a=a.map(d=>Nc(d))),c(e,["models"],a)}return e}function i1(){return{}}function s1(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const s=u(t,["totalTokens"]);s!=null&&c(e,["totalTokens"],s);const r=u(t,["cachedContentTokenCount"]);return r!=null&&c(e,["cachedContentTokenCount"],r),e}function o1(t){const e={},n=u(t,["video","uri"]);n!=null&&c(e,["uri"],n);const s=u(t,["video","encodedVideo"]);s!=null&&c(e,["videoBytes"],Ei(s));const r=u(t,["encoding"]);return r!=null&&c(e,["mimeType"],r),e}function r1(t){const e={},n=u(t,["_self"]);return n!=null&&c(e,["video"],o1(n)),e}function l1(t){const e={},n=u(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(d=>r1(d))),c(e,["generatedVideos"],a)}const s=u(t,["raiMediaFilteredCount"]);s!=null&&c(e,["raiMediaFilteredCount"],s);const r=u(t,["raiMediaFilteredReasons"]);return r!=null&&c(e,["raiMediaFilteredReasons"],r),e}function a1(t){const e={},n=u(t,["name"]);n!=null&&c(e,["name"],n);const s=u(t,["metadata"]);s!=null&&c(e,["metadata"],s);const r=u(t,["done"]);r!=null&&c(e,["done"],r);const a=u(t,["error"]);a!=null&&c(e,["error"],a);const d=u(t,["response","generateVideoResponse"]);return d!=null&&c(e,["response"],l1(d)),e}function u1(t){const e={},n=u(t,["fps"]);n!=null&&c(e,["fps"],n);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const r=u(t,["startOffset"]);return r!=null&&c(e,["startOffset"],r),e}function c1(t){const e={},n=u(t,["displayName"]);n!=null&&c(e,["displayName"],n);const s=u(t,["data"]);s!=null&&c(e,["data"],s);const r=u(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function f1(t){const e={},n=u(t,["displayName"]);n!=null&&c(e,["displayName"],n);const s=u(t,["fileUri"]);s!=null&&c(e,["fileUri"],s);const r=u(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function d1(t){const e={},n=u(t,["videoMetadata"]);n!=null&&c(e,["videoMetadata"],u1(n));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const r=u(t,["inlineData"]);r!=null&&c(e,["inlineData"],c1(r));const a=u(t,["fileData"]);a!=null&&c(e,["fileData"],f1(a));const d=u(t,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(t,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(t,["executableCode"]);g!=null&&c(e,["executableCode"],g);const p=u(t,["functionCall"]);p!=null&&c(e,["functionCall"],p);const y=u(t,["functionResponse"]);y!=null&&c(e,["functionResponse"],y);const T=u(t,["text"]);return T!=null&&c(e,["text"],T),e}function h1(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>d1(a))),c(e,["parts"],r)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function p1(t){const e={},n=u(t,["citations"]);return n!=null&&c(e,["citations"],n),e}function m1(t){const e={},n=u(t,["retrievedUrl"]);n!=null&&c(e,["retrievedUrl"],n);const s=u(t,["urlRetrievalStatus"]);return s!=null&&c(e,["urlRetrievalStatus"],s),e}function g1(t){const e={},n=u(t,["urlMetadata"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>m1(r))),c(e,["urlMetadata"],s)}return e}function y1(t){const e={},n=u(t,["content"]);n!=null&&c(e,["content"],h1(n));const s=u(t,["citationMetadata"]);s!=null&&c(e,["citationMetadata"],p1(s));const r=u(t,["finishMessage"]);r!=null&&c(e,["finishMessage"],r);const a=u(t,["finishReason"]);a!=null&&c(e,["finishReason"],a);const d=u(t,["urlContextMetadata"]);d!=null&&c(e,["urlContextMetadata"],g1(d));const h=u(t,["avgLogprobs"]);h!=null&&c(e,["avgLogprobs"],h);const g=u(t,["groundingMetadata"]);g!=null&&c(e,["groundingMetadata"],g);const p=u(t,["index"]);p!=null&&c(e,["index"],p);const y=u(t,["logprobsResult"]);y!=null&&c(e,["logprobsResult"],y);const T=u(t,["safetyRatings"]);return T!=null&&c(e,["safetyRatings"],T),e}function kg(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const s=u(t,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(y=>y1(y))),c(e,["candidates"],p)}const r=u(t,["createTime"]);r!=null&&c(e,["createTime"],r);const a=u(t,["modelVersion"]);a!=null&&c(e,["modelVersion"],a);const d=u(t,["promptFeedback"]);d!=null&&c(e,["promptFeedback"],d);const h=u(t,["responseId"]);h!=null&&c(e,["responseId"],h);const g=u(t,["usageMetadata"]);return g!=null&&c(e,["usageMetadata"],g),e}function v1(t){const e={},n=u(t,["truncated"]);n!=null&&c(e,["truncated"],n);const s=u(t,["token_count"]);return s!=null&&c(e,["tokenCount"],s),e}function T1(t){const e={},n=u(t,["values"]);n!=null&&c(e,["values"],n);const s=u(t,["statistics"]);return s!=null&&c(e,["statistics"],v1(s)),e}function _1(t){const e={},n=u(t,["billableCharacterCount"]);return n!=null&&c(e,["billableCharacterCount"],n),e}function S1(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const s=u(t,["predictions[]","embeddings"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(d=>T1(d))),c(e,["embeddings"],a)}const r=u(t,["metadata"]);return r!=null&&c(e,["metadata"],_1(r)),e}function C1(t){const e={},n=u(t,["gcsUri"]);n!=null&&c(e,["gcsUri"],n);const s=u(t,["bytesBase64Encoded"]);s!=null&&c(e,["imageBytes"],Ei(s));const r=u(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function ev(t){const e={},n=u(t,["safetyAttributes","categories"]);n!=null&&c(e,["categories"],n);const s=u(t,["safetyAttributes","scores"]);s!=null&&c(e,["scores"],s);const r=u(t,["contentType"]);return r!=null&&c(e,["contentType"],r),e}function ql(t){const e={},n=u(t,["_self"]);n!=null&&c(e,["image"],C1(n));const s=u(t,["raiFilteredReason"]);s!=null&&c(e,["raiFilteredReason"],s);const r=u(t,["_self"]);r!=null&&c(e,["safetyAttributes"],ev(r));const a=u(t,["prompt"]);return a!=null&&c(e,["enhancedPrompt"],a),e}function x1(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const s=u(t,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(d=>ql(d))),c(e,["generatedImages"],a)}const r=u(t,["positivePromptSafetyAttributes"]);return r!=null&&c(e,["positivePromptSafetyAttributes"],ev(r)),e}function E1(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const s=u(t,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>ql(a))),c(e,["generatedImages"],r)}return e}function w1(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const s=u(t,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>ql(a))),c(e,["generatedImages"],r)}return e}function b1(t){const e={},n=u(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>ql(r))),c(e,["generatedImages"],s)}return e}function A1(t){const e={},n=u(t,["endpoint"]);n!=null&&c(e,["name"],n);const s=u(t,["deployedModelId"]);return s!=null&&c(e,["deployedModelId"],s),e}function R1(t){const e={},n=u(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&c(e,["baseModel"],n);const s=u(t,["createTime"]);s!=null&&c(e,["createTime"],s);const r=u(t,["updateTime"]);return r!=null&&c(e,["updateTime"],r),e}function M1(t){const e={},n=u(t,["checkpointId"]);n!=null&&c(e,["checkpointId"],n);const s=u(t,["epoch"]);s!=null&&c(e,["epoch"],s);const r=u(t,["step"]);return r!=null&&c(e,["step"],r),e}function Dc(t){const e={},n=u(t,["name"]);n!=null&&c(e,["name"],n);const s=u(t,["displayName"]);s!=null&&c(e,["displayName"],s);const r=u(t,["description"]);r!=null&&c(e,["description"],r);const a=u(t,["versionId"]);a!=null&&c(e,["version"],a);const d=u(t,["deployedModels"]);if(d!=null){let T=d;Array.isArray(T)&&(T=T.map(_=>A1(_))),c(e,["endpoints"],T)}const h=u(t,["labels"]);h!=null&&c(e,["labels"],h);const g=u(t,["_self"]);g!=null&&c(e,["tunedModelInfo"],R1(g));const p=u(t,["defaultCheckpointId"]);p!=null&&c(e,["defaultCheckpointId"],p);const y=u(t,["checkpoints"]);if(y!=null){let T=y;Array.isArray(T)&&(T=T.map(_=>M1(_))),c(e,["checkpoints"],T)}return e}function k1(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const s=u(t,["nextPageToken"]);s!=null&&c(e,["nextPageToken"],s);const r=u(t,["_self"]);if(r!=null){let a=Oy(r);Array.isArray(a)&&(a=a.map(d=>Dc(d))),c(e,["models"],a)}return e}function N1(){return{}}function D1(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const s=u(t,["totalTokens"]);return s!=null&&c(e,["totalTokens"],s),e}function I1(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const s=u(t,["tokensInfo"]);return s!=null&&c(e,["tokensInfo"],s),e}function U1(t){const e={},n=u(t,["gcsUri"]);n!=null&&c(e,["uri"],n);const s=u(t,["bytesBase64Encoded"]);s!=null&&c(e,["videoBytes"],Ei(s));const r=u(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function L1(t){const e={},n=u(t,["_self"]);return n!=null&&c(e,["video"],U1(n)),e}function P1(t){const e={},n=u(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(d=>L1(d))),c(e,["generatedVideos"],a)}const s=u(t,["raiMediaFilteredCount"]);s!=null&&c(e,["raiMediaFilteredCount"],s);const r=u(t,["raiMediaFilteredReasons"]);return r!=null&&c(e,["raiMediaFilteredReasons"],r),e}function q1(t){const e={},n=u(t,["name"]);n!=null&&c(e,["name"],n);const s=u(t,["metadata"]);s!=null&&c(e,["metadata"],s);const r=u(t,["done"]);r!=null&&c(e,["done"],r);const a=u(t,["error"]);a!=null&&c(e,["error"],a);const d=u(t,["response"]);return d!=null&&c(e,["response"],P1(d)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const O1="Content-Type",B1="X-Server-Timeout",V1="User-Agent",Ic="x-goog-api-client",H1="1.13.0",G1=`google-genai-sdk/${H1}`,z1="v1beta1",$1="v1beta",Ng=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class F1{constructor(e){var n,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:z1,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:$1,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,s){const r=[this.getRequestUrlInternal(n)];return s&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,s);if(e.queryParams)for(const[d,h]of Object.entries(e.queryParams))r.searchParams.append(d,String(h));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,e.abortSignal),this.unaryApiCall(r,a,e.httpMethod)}patchHttpOptions(e,n){const s=JSON.parse(JSON.stringify(e));for(const[r,a]of Object.entries(n))typeof a=="object"?s[r]=Object.assign(Object.assign({},s[r]),a):a!==void 0&&(s[r]=a);return s}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,s);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,e.abortSignal),this.streamApiCall(r,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,s){if(n&&n.timeout||s){const r=new AbortController,a=r.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const d=setTimeout(()=>r.abort(),n.timeout);d&&typeof d.unref=="function"&&d.unref()}s&&s.addEventListener("abort",()=>{r.abort()}),e.signal=a}return n&&n.extraBody!==null&&J1(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:s})).then(async r=>(await Dg(r),new wc(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:s})).then(async r=>(await Dg(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var n;return bs(this,arguments,function*(){const r=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),a=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let d="";for(;;){const{done:h,value:g}=yield Ve(r.read());if(h){if(d.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=a.decode(g,{stream:!0});try{const T=JSON.parse(p);if("error"in T){const _=JSON.parse(JSON.stringify(T.error)),E=_.status,w=_.code,k=`got status: ${E}. ${JSON.stringify(T)}`;if(w>=400&&w<600)throw new Ll({message:k,status:w})}}catch(T){if(T.name==="ApiError")throw T}d+=p;let y=d.match(Ng);for(;y;){const T=y[1];try{const _=new Response(T,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ve(new wc(_)),d=d.slice(y[0].length),y=d.match(Ng)}catch(_){throw new Error(`exception parsing stream chunk ${T}. ${_}`)}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},n=G1+" "+this.clientOptions.userAgentExtra;return e[V1]=n,e[Ic]=n,e[O1]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[s,r]of Object.entries(e.headers))n.append(s,r);e.timeout&&e.timeout>0&&n.append(B1,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var s;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const a=this.clientOptions.uploader,d=await a.stat(e);r.sizeBytes=String(d.size);const h=(s=n==null?void 0:n.mimeType)!==null&&s!==void 0?s:d.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=h;const g=await this.fetchUploadUrl(r,n);return a.upload(e,g,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var s;let r={};n!=null&&n.httpOptions?r=n.httpOptions:r={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const a={file:e},d=await this.request({path:se("upload/v1beta/files",a._url),body:JSON.stringify(a),httpMethod:"POST",httpOptions:r});if(!d||!(d!=null&&d.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const h=(s=d==null?void 0:d.headers)===null||s===void 0?void 0:s["x-goog-upload-url"];if(h===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return h}}async function Dg(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let s;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await t.json():s={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(s);throw n>=400&&n<600?new Ll({message:r,status:n}):new Error(r)}}function J1(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(a,d){const h=Object.assign({},a);for(const g in d)if(Object.prototype.hasOwnProperty.call(d,g)){const p=d[g],y=h[g];p&&typeof p=="object"&&!Array.isArray(p)&&y&&typeof y=="object"&&!Array.isArray(y)?h[g]=s(y,p):(y&&p&&typeof y!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof y}, New type: ${typeof p}. Overwriting.`),h[g]=p)}return h}const r=s(n,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Y1="mcp_used/unknown";let K1=!1;function tv(t){for(const e of t)if(Q1(e)||typeof e=="object"&&"inputSchema"in e)return!0;return K1}function nv(t){var e;const n=(e=t[Ic])!==null&&e!==void 0?e:"";t[Ic]=(n+` ${Y1}`).trimStart()}function Q1(t){return t!==null&&typeof t=="object"&&t instanceof of}function X1(t,e=100){return bs(this,arguments,function*(){let s,r=0;for(;r<e;){const a=yield Ve(t.listTools({cursor:s}));for(const d of a.tools)yield yield Ve(d),r++;if(!a.nextCursor)break;s=a.nextCursor}})}class of{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new of(e,n)}async initialize(){var e,n,s,r;if(this.mcpTools.length>0)return;const a={},d=[];for(const y of this.mcpClients)try{for(var h=!0,g=(n=void 0,Fo(X1(y))),p;p=await g.next(),e=p.done,!e;h=!0){r=p.value,h=!1;const T=r;d.push(T);const _=T.name;if(a[_])throw new Error(`Duplicate function name ${_} found in MCP tools. Please ensure function names are unique.`);a[_]=y}}catch(T){n={error:T}}finally{try{!h&&!e&&(s=g.return)&&await s.call(g)}finally{if(n)throw n.error}}this.mcpTools=d,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),VS(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[s.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const d=await r.callTool({name:s.name,arguments:s.args},void 0,a);n.push({functionResponse:{name:s.name,response:d.isError?{error:d}:d}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function W1(t,e,n){const s=new DS;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data);const a=Vw(r);Object.assign(s,a),e(s)}class Z1{constructor(e,n,s){this.apiClient=e,this.auth=n,this.webSocketFactory=s}async connect(e){var n,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),d=tR(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),g=`${r}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${h}`;let p=()=>{};const y=new Promise(M=>{p=M}),T=e.callbacks,_=function(){p({})},E=this.apiClient,w={onopen:_,onmessage:M=>{W1(E,T.onmessage,M)},onerror:(n=T==null?void 0:T.onerror)!==null&&n!==void 0?n:function(M){},onclose:(s=T==null?void 0:T.onclose)!==null&&s!==void 0?s:function(M){}},k=this.webSocketFactory.create(g,eR(d),w);k.connect(),await y;const U=Re(this.apiClient,e.model),q=Qy({model:U}),B=kc({setup:q});return k.send(JSON.stringify(B)),new j1(k,this.apiClient)}}class j1{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=OE(e),s=Xy(n);this.conn.send(JSON.stringify({clientContent:s}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=BE(e),s=kc(n);this.conn.send(JSON.stringify(s))}sendPlaybackControl(e){const n=kc({playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Es.PLAY)}pause(){this.sendPlaybackControl(Es.PAUSE)}stop(){this.sendPlaybackControl(Es.STOP)}resetContext(){this.sendPlaybackControl(Es.RESET_CONTEXT)}close(){this.conn.close()}}function eR(t){const e={};return t.forEach((n,s)=>{e[s]=n}),e}function tR(t){const e=new Headers;for(const[n,s]of Object.entries(t))e.append(n,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nR="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function iR(t,e,n){const s=new NS;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const a=JSON.parse(r);if(t.isVertexAI()){const d=eb(a);Object.assign(s,d)}else{const d=Nw(a);Object.assign(s,d)}e(s)}class sR{constructor(e,n,s){this.apiClient=e,this.auth=n,this.webSocketFactory=s,this.music=new Z1(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,s,r,a,d,h;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let y;const T=this.apiClient.getHeaders();e.config&&e.config.tools&&tv(e.config.tools)&&nv(T);const _=aR(T);if(this.apiClient.isVertexAI())y=`${g}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(_);else{const ne=this.apiClient.getApiKey();let he="BidiGenerateContent",ae="key";ne!=null&&ne.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),he="BidiGenerateContentConstrained",ae="access_token"),y=`${g}/ws/google.ai.generativelanguage.${p}.GenerativeService.${he}?${ae}=${ne}`}let E=()=>{};const w=new Promise(ne=>{E=ne}),k=e.callbacks,U=function(){var ne;(ne=k==null?void 0:k.onopen)===null||ne===void 0||ne.call(k),E({})},q=this.apiClient,B={onopen:U,onmessage:ne=>{iR(q,k.onmessage,ne)},onerror:(n=k==null?void 0:k.onerror)!==null&&n!==void 0?n:function(ne){},onclose:(s=k==null?void 0:k.onclose)!==null&&s!==void 0?s:function(ne){}},M=this.webSocketFactory.create(y,lR(_),B);M.connect(),await w;let J=Re(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&J.startsWith("publishers/")){const ne=this.apiClient.getProject(),he=this.apiClient.getLocation();J=`projects/${ne}/locations/${he}/`+J}let G={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Ml.AUDIO]}:e.config.responseModalities=[Ml.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const X=(h=(d=e.config)===null||d===void 0?void 0:d.tools)!==null&&h!==void 0?h:[],j=[];for(const ne of X)if(this.isCallableTool(ne)){const he=ne;j.push(await he.tool())}else j.push(ne);j.length>0&&(e.config.tools=j);const ue={model:J,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?G=dw(this.apiClient,ue):G=UE(this.apiClient,ue),delete G.config,M.send(JSON.stringify(G)),new rR(M,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const oR={turnComplete:!0};class rR{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let s=[];try{s=Vt(n.turns),e.isVertexAI()?s=s.map(r=>Ds(r)):s=s.map(r=>Pl(r))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:s,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let s=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?s=n.functionResponses:s=[n.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const a of s){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(nR)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},oR),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:mw(e)}:n={realtimeInput:qE(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function lR(t){const e={};return t.forEach((n,s)=>{e[s]=n}),e}function aR(t){const e=new Headers;for(const[n,s]of Object.entries(t))e.append(n,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ig=10;function Ug(t){var e,n,s;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const d of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(As(d)){r=!0;break}if(!r)return!0;const a=(s=t==null?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function As(t){return"callTool"in t&&typeof t.callTool=="function"}function uR(t){var e,n,s;return(s=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>As(r)))!==null&&s!==void 0?s:!1}function cR(t){var e,n,s;return(s=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>!As(r)))!==null&&s!==void 0?s:!1}function Lg(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fR extends xi{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var s,r,a,d,h;const g=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!uR(n)||Ug(n.config))return await this.generateContentInternal(g);if(cR(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let p,y;const T=Vt(g.contents),_=(a=(r=(s=g.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&a!==void 0?a:Ig;let E=0;for(;E<_&&(p=await this.generateContentInternal(g),!(!p.functionCalls||p.functionCalls.length===0));){const w=p.candidates[0].content,k=[];for(const U of(h=(d=n.config)===null||d===void 0?void 0:d.tools)!==null&&h!==void 0?h:[])if(As(U)){const B=await U.callTool(p.functionCalls);k.push(...B)}E++,y={role:"user",parts:k},g.contents=Vt(g.contents),g.contents.push(w),g.contents.push(y),Lg(g.config)&&(T.push(w),T.push(y))}return Lg(g.config)&&(p.automaticFunctionCallingHistory=T),p},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),Ug(n.config)){const s=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(s)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(s=>{var r;let a;const d=[];if(s!=null&&s.generatedImages)for(const g of s.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((r=g==null?void 0:g.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?a=g==null?void 0:g.safetyAttributes:d.push(g);let h;return a?h={generatedImages:d,positivePromptSafetyAttributes:a,sdkHttpResponse:s.sdkHttpResponse}:h={generatedImages:d,sdkHttpResponse:s.sdkHttpResponse},h}),this.list=async n=>{var s;const d={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!d.config.queryBase){if(!((s=d.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");d.config.filter="labels.tune-type:*"}return new Zo(Si.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(d),d)},this.editImage=async n=>{const s={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(s.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async n=>{let s={numberOfImages:1,mode:"upscale"};n.config&&(s=Object.assign(Object.assign({},s),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:s};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>await this.generateVideosInternal(n)}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,s,r;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const d=await Promise.all(a.map(async g=>As(g)?await g.tool():g)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:d})};if(h.config.tools=d,e.config&&e.config.tools&&tv(e.config.tools)){const g=(r=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&r!==void 0?r:{};let p=Object.assign({},g);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),nv(p),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return h}async initAfcToolsMap(e){var n,s,r;const a=new Map;for(const d of(s=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&s!==void 0?s:[])if(As(d)){const h=d,g=await h.tool();for(const p of(r=g.functionDeclarations)!==null&&r!==void 0?r:[]){if(!p.name)throw new Error("Function declaration name is required.");if(a.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);a.set(p.name,h)}}return a}async processAfcStream(e){var n,s,r;const a=(r=(s=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&r!==void 0?r:Ig;let d=!1,h=0;const g=await this.initAfcToolsMap(e);return function(p,y,T){var _,E;return bs(this,arguments,function*(){for(var w,k,U,q;h<a;){d&&(h++,d=!1);const G=yield Ve(p.processParamsMaybeAddMcpUsage(T)),X=yield Ve(p.generateContentStreamInternal(G)),j=[],ue=[];try{for(var B=!0,M=(k=void 0,Fo(X)),J;J=yield Ve(M.next()),w=J.done,!w;B=!0){q=J.value,B=!1;const ne=q;if(yield yield Ve(ne),ne.candidates&&(!((_=ne.candidates[0])===null||_===void 0)&&_.content)){ue.push(ne.candidates[0].content);for(const he of(E=ne.candidates[0].content.parts)!==null&&E!==void 0?E:[])if(h<a&&he.functionCall){if(!he.functionCall.name)throw new Error("Function call name was not returned by the model.");if(y.has(he.functionCall.name)){const ae=yield Ve(y.get(he.functionCall.name).callTool([he.functionCall]));j.push(...ae)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${y.keys()}, mising tool: ${he.functionCall.name}`)}}}}catch(ne){k={error:ne}}finally{try{!B&&!w&&(U=M.return)&&(yield Ve(U.call(M)))}finally{if(k)throw k.error}}if(j.length>0){d=!0;const ne=new Oo;ne.candidates=[{content:{role:"user",parts:j}}],yield yield Ve(ne);const he=[];he.push(...ue),he.push({role:"user",parts:j});const ae=Vt(T.contents).concat(he);T.contents=ae}else break}})}(this,g,e)}async generateContentInternal(e){var n,s,r,a;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=Rg(this.apiClient,e);return h=se("{model}:generateContent",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(T=>{const _=T;return _.sdkHttpResponse={headers:y.headers},_})),d.then(y=>{const T=kg(y),_=new Oo;return Object.assign(_,T),_})}else{const p=Ag(this.apiClient,e);return h=se("{model}:generateContent",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const _=T;return _.sdkHttpResponse={headers:y.headers},_})),d.then(y=>{const T=Mg(y),_=new Oo;return Object.assign(_,T),_})}}async generateContentStreamInternal(e){var n,s,r,a;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=Rg(this.apiClient,e);return h=se("{model}:streamGenerateContent?alt=sse",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),d.then(function(T){return bs(this,arguments,function*(){var _,E,w,k;try{for(var U=!0,q=Fo(T),B;B=yield Ve(q.next()),_=B.done,!_;U=!0){k=B.value,U=!1;const M=k,J=kg(yield Ve(M.json()));J.sdkHttpResponse={headers:M.headers};const G=new Oo;Object.assign(G,J),yield yield Ve(G)}}catch(M){E={error:M}}finally{try{!U&&!_&&(w=q.return)&&(yield Ve(w.call(q)))}finally{if(E)throw E.error}}})})}else{const p=Ag(this.apiClient,e);return h=se("{model}:streamGenerateContent?alt=sse",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),d.then(function(T){return bs(this,arguments,function*(){var _,E,w,k;try{for(var U=!0,q=Fo(T),B;B=yield Ve(q.next()),_=B.done,!_;U=!0){k=B.value,U=!1;const M=k,J=Mg(yield Ve(M.json()));J.sdkHttpResponse={headers:M.headers};const G=new Oo;Object.assign(G,J),yield yield Ve(G)}}catch(M){E={error:M}}finally{try{!U&&!_&&(w=q.return)&&(yield Ve(w.call(q)))}finally{if(E)throw E.error}}})})}}async embedContent(e){var n,s,r,a;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=dA(this.apiClient,e);return h=se("{model}:predict",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(T=>{const _=T;return _.sdkHttpResponse={headers:y.headers},_})),d.then(y=>{const T=S1(y),_=new rg;return Object.assign(_,T),_})}else{const p=wb(this.apiClient,e);return h=se("{model}:batchEmbedContents",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const _=T;return _.sdkHttpResponse={headers:y.headers},_})),d.then(y=>{const T=WA(y),_=new rg;return Object.assign(_,T),_})}}async generateImagesInternal(e){var n,s,r,a;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=pA(this.apiClient,e);return h=se("{model}:predict",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(T=>{const _=T;return _.sdkHttpResponse={headers:y.headers},_})),d.then(y=>{const T=x1(y),_=new lg;return Object.assign(_,T),_})}else{const p=Ab(this.apiClient,e);return h=se("{model}:predict",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const _=T;return _.sdkHttpResponse={headers:y.headers},_})),d.then(y=>{const T=e1(y),_=new lg;return Object.assign(_,T),_})}}async editImageInternal(e){var n,s;let r,a="",d={};if(this.apiClient.isVertexAI()){const h=SA(this.apiClient,e);return a=se("{model}:predict",h._url),d=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:g.headers},y})),r.then(g=>{const p=E1(g),y=new ES;return Object.assign(y,p),y})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,s;let r,a="",d={};if(this.apiClient.isVertexAI()){const h=xA(this.apiClient,e);return a=se("{model}:predict",h._url),d=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:g.headers},y})),r.then(g=>{const p=w1(g),y=new wS;return Object.assign(y,p),y})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,s;let r,a="",d={};if(this.apiClient.isVertexAI()){const h=AA(this.apiClient,e);return a=se("{model}:predict",h._url),d=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const p=b1(g),y=new bS;return Object.assign(y,p),y})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,s,r,a;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=RA(this.apiClient,e);return h=se("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),d.then(y=>Dc(y))}else{const p=Rb(this.apiClient,e);return h=se("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),d.then(y=>Nc(y))}}async listInternal(e){var n,s,r,a;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=kA(this.apiClient,e);return h=se("{models_url}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(T=>{const _=T;return _.sdkHttpResponse={headers:y.headers},_})),d.then(y=>{const T=k1(y),_=new ag;return Object.assign(_,T),_})}else{const p=kb(this.apiClient,e);return h=se("{models_url}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const _=T;return _.sdkHttpResponse={headers:y.headers},_})),d.then(y=>{const T=n1(y),_=new ag;return Object.assign(_,T),_})}}async update(e){var n,s,r,a;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=DA(this.apiClient,e);return h=se("{model}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),d.then(y=>Dc(y))}else{const p=Db(this.apiClient,e);return h=se("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),d.then(y=>Nc(y))}}async delete(e){var n,s,r,a;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=IA(this.apiClient,e);return h=se("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),d.then(()=>{const y=N1(),T=new ug;return Object.assign(T,y),T})}else{const p=Ib(this.apiClient,e);return h=se("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),d.then(()=>{const y=i1(),T=new ug;return Object.assign(T,y),T})}}async countTokens(e){var n,s,r,a;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=LA(this.apiClient,e);return h=se("{model}:countTokens",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(T=>{const _=T;return _.sdkHttpResponse={headers:y.headers},_})),d.then(y=>{const T=D1(y),_=new cg;return Object.assign(_,T),_})}else{const p=Lb(this.apiClient,e);return h=se("{model}:countTokens",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const _=T;return _.sdkHttpResponse={headers:y.headers},_})),d.then(y=>{const T=s1(y),_=new cg;return Object.assign(_,T),_})}}async computeTokens(e){var n,s;let r,a="",d={};if(this.apiClient.isVertexAI()){const h=PA(this.apiClient,e);return a=se("{model}:computeTokens",h._url),d=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:g.headers},y})),r.then(g=>{const p=I1(g),y=new AS;return Object.assign(y,p),y})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,s,r,a;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=BA(this.apiClient,e);return h=se("{model}:predictLongRunning",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),d.then(y=>{const T=q1(y),_=new kl;return Object.assign(_,T),_})}else{const p=Ob(this.apiClient,e);return h=se("{model}:predictLongRunning",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),d.then(y=>{const T=a1(y),_=new kl;return Object.assign(_,T),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dR(t){const e={},n=u(t,["operationName"]);n!=null&&c(e,["_url","operationName"],n);const s=u(t,["config"]);return s!=null&&c(e,["config"],s),e}function hR(t){const e={},n=u(t,["operationName"]);n!=null&&c(e,["_url","operationName"],n);const s=u(t,["config"]);return s!=null&&c(e,["config"],s),e}function pR(t){const e={},n=u(t,["operationName"]);n!=null&&c(e,["operationName"],n);const s=u(t,["resourceName"]);s!=null&&c(e,["_url","resourceName"],s);const r=u(t,["config"]);return r!=null&&c(e,["config"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mR extends xi{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,s=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let a;s&&"httpOptions"in s&&(a=s.httpOptions);const d=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:d,isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:s});return n._fromAPIResponse({apiResponse:r,isVertexAI:!1})}}async get(e){const n=e.operation,s=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let a;s&&"httpOptions"in s&&(a=s.httpOptions);const d=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:d,isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:s});return n._fromAPIResponse({apiResponse:r,isVertexAI:!1})}}async getVideosOperationInternal(e){var n,s,r,a;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=hR(e);return h=se("{operationName}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),d}else{const p=dR(e);return h=se("{operationName}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),d}}async fetchPredictVideosOperationInternal(e){var n,s;let r,a="",d={};if(this.apiClient.isVertexAI()){const h=pR(e);return a=se("{resourceName}:fetchPredictOperation",h._url),d=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gR(t){const e={},n=u(t,["voiceName"]);return n!=null&&c(e,["voiceName"],n),e}function iv(t){const e={},n=u(t,["prebuiltVoiceConfig"]);return n!=null&&c(e,["prebuiltVoiceConfig"],gR(n)),e}function yR(t){const e={},n=u(t,["speaker"]);n!=null&&c(e,["speaker"],n);const s=u(t,["voiceConfig"]);return s!=null&&c(e,["voiceConfig"],iv(s)),e}function vR(t){const e={},n=u(t,["speakerVoiceConfigs"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>yR(r))),c(e,["speakerVoiceConfigs"],s)}return e}function TR(t){const e={},n=u(t,["voiceConfig"]);n!=null&&c(e,["voiceConfig"],iv(n));const s=u(t,["multiSpeakerVoiceConfig"]);s!=null&&c(e,["multiSpeakerVoiceConfig"],vR(s));const r=u(t,["languageCode"]);return r!=null&&c(e,["languageCode"],r),e}function _R(t){const e={},n=u(t,["fps"]);n!=null&&c(e,["fps"],n);const s=u(t,["endOffset"]);s!=null&&c(e,["endOffset"],s);const r=u(t,["startOffset"]);return r!=null&&c(e,["startOffset"],r),e}function SR(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["data"]);n!=null&&c(e,["data"],n);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function CR(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);const s=u(t,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function xR(t){const e={},n=u(t,["videoMetadata"]);n!=null&&c(e,["videoMetadata"],_R(n));const s=u(t,["thought"]);s!=null&&c(e,["thought"],s);const r=u(t,["inlineData"]);r!=null&&c(e,["inlineData"],SR(r));const a=u(t,["fileData"]);a!=null&&c(e,["fileData"],CR(a));const d=u(t,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(t,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(t,["executableCode"]);g!=null&&c(e,["executableCode"],g);const p=u(t,["functionCall"]);p!=null&&c(e,["functionCall"],p);const y=u(t,["functionResponse"]);y!=null&&c(e,["functionResponse"],y);const T=u(t,["text"]);return T!=null&&c(e,["text"],T),e}function ER(t){const e={},n=u(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>xR(a))),c(e,["parts"],r)}const s=u(t,["role"]);return s!=null&&c(e,["role"],s),e}function wR(t){const e={},n=u(t,["behavior"]);n!=null&&c(e,["behavior"],n);const s=u(t,["description"]);s!=null&&c(e,["description"],s);const r=u(t,["name"]);r!=null&&c(e,["name"],r);const a=u(t,["parameters"]);a!=null&&c(e,["parameters"],a);const d=u(t,["parametersJsonSchema"]);d!=null&&c(e,["parametersJsonSchema"],d);const h=u(t,["response"]);h!=null&&c(e,["response"],h);const g=u(t,["responseJsonSchema"]);return g!=null&&c(e,["responseJsonSchema"],g),e}function bR(t){const e={},n=u(t,["startTime"]);n!=null&&c(e,["startTime"],n);const s=u(t,["endTime"]);return s!=null&&c(e,["endTime"],s),e}function AR(t){const e={},n=u(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],bR(n)),e}function RR(t){const e={},n=u(t,["mode"]);n!=null&&c(e,["mode"],n);const s=u(t,["dynamicThreshold"]);return s!=null&&c(e,["dynamicThreshold"],s),e}function MR(t){const e={},n=u(t,["dynamicRetrievalConfig"]);return n!=null&&c(e,["dynamicRetrievalConfig"],RR(n)),e}function kR(){return{}}function NR(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(p=>wR(p))),c(e,["functionDeclarations"],g)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=u(t,["googleSearch"]);s!=null&&c(e,["googleSearch"],AR(s));const r=u(t,["googleSearchRetrieval"]);if(r!=null&&c(e,["googleSearchRetrieval"],MR(r)),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(t,["urlContext"])!=null&&c(e,["urlContext"],kR());const d=u(t,["codeExecution"]);d!=null&&c(e,["codeExecution"],d);const h=u(t,["computerUse"]);return h!=null&&c(e,["computerUse"],h),e}function DR(t){const e={},n=u(t,["handle"]);if(n!=null&&c(e,["handle"],n),u(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Pg(){return{}}function IR(t){const e={},n=u(t,["disabled"]);n!=null&&c(e,["disabled"],n);const s=u(t,["startOfSpeechSensitivity"]);s!=null&&c(e,["startOfSpeechSensitivity"],s);const r=u(t,["endOfSpeechSensitivity"]);r!=null&&c(e,["endOfSpeechSensitivity"],r);const a=u(t,["prefixPaddingMs"]);a!=null&&c(e,["prefixPaddingMs"],a);const d=u(t,["silenceDurationMs"]);return d!=null&&c(e,["silenceDurationMs"],d),e}function UR(t){const e={},n=u(t,["automaticActivityDetection"]);n!=null&&c(e,["automaticActivityDetection"],IR(n));const s=u(t,["activityHandling"]);s!=null&&c(e,["activityHandling"],s);const r=u(t,["turnCoverage"]);return r!=null&&c(e,["turnCoverage"],r),e}function LR(t){const e={},n=u(t,["targetTokens"]);return n!=null&&c(e,["targetTokens"],n),e}function PR(t){const e={},n=u(t,["triggerTokens"]);n!=null&&c(e,["triggerTokens"],n);const s=u(t,["slidingWindow"]);return s!=null&&c(e,["slidingWindow"],LR(s)),e}function qR(t){const e={},n=u(t,["proactiveAudio"]);return n!=null&&c(e,["proactiveAudio"],n),e}function OR(t,e){const n={},s=u(t,["generationConfig"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig"],s);const r=u(t,["responseModalities"]);e!==void 0&&r!=null&&c(e,["setup","generationConfig","responseModalities"],r);const a=u(t,["temperature"]);e!==void 0&&a!=null&&c(e,["setup","generationConfig","temperature"],a);const d=u(t,["topP"]);e!==void 0&&d!=null&&c(e,["setup","generationConfig","topP"],d);const h=u(t,["topK"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","topK"],h);const g=u(t,["maxOutputTokens"]);e!==void 0&&g!=null&&c(e,["setup","generationConfig","maxOutputTokens"],g);const p=u(t,["mediaResolution"]);e!==void 0&&p!=null&&c(e,["setup","generationConfig","mediaResolution"],p);const y=u(t,["seed"]);e!==void 0&&y!=null&&c(e,["setup","generationConfig","seed"],y);const T=u(t,["speechConfig"]);e!==void 0&&T!=null&&c(e,["setup","generationConfig","speechConfig"],TR(sf(T)));const _=u(t,["enableAffectiveDialog"]);e!==void 0&&_!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],_);const E=u(t,["systemInstruction"]);e!==void 0&&E!=null&&c(e,["setup","systemInstruction"],ER(dt(E)));const w=u(t,["tools"]);if(e!==void 0&&w!=null){let G=ks(w);Array.isArray(G)&&(G=G.map(X=>NR(Ms(X)))),c(e,["setup","tools"],G)}const k=u(t,["sessionResumption"]);e!==void 0&&k!=null&&c(e,["setup","sessionResumption"],DR(k));const U=u(t,["inputAudioTranscription"]);e!==void 0&&U!=null&&c(e,["setup","inputAudioTranscription"],Pg());const q=u(t,["outputAudioTranscription"]);e!==void 0&&q!=null&&c(e,["setup","outputAudioTranscription"],Pg());const B=u(t,["realtimeInputConfig"]);e!==void 0&&B!=null&&c(e,["setup","realtimeInputConfig"],UR(B));const M=u(t,["contextWindowCompression"]);e!==void 0&&M!=null&&c(e,["setup","contextWindowCompression"],PR(M));const J=u(t,["proactivity"]);return e!==void 0&&J!=null&&c(e,["setup","proactivity"],qR(J)),n}function BR(t,e){const n={},s=u(e,["model"]);s!=null&&c(n,["setup","model"],Re(t,s));const r=u(e,["config"]);return r!=null&&c(n,["config"],OR(r,n)),n}function VR(t,e,n){const s={},r=u(e,["expireTime"]);n!==void 0&&r!=null&&c(n,["expireTime"],r);const a=u(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&c(n,["newSessionExpireTime"],a);const d=u(e,["uses"]);n!==void 0&&d!=null&&c(n,["uses"],d);const h=u(e,["liveConnectConstraints"]);n!==void 0&&h!=null&&c(n,["bidiGenerateContentSetup"],BR(t,h));const g=u(e,["lockAdditionalFields"]);return n!==void 0&&g!=null&&c(n,["fieldMask"],g),s}function HR(t,e){const n={},s=u(e,["config"]);return s!=null&&c(n,["config"],VR(t,s,n)),n}function GR(t){const e={},n=u(t,["name"]);return n!=null&&c(e,["name"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zR(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const s=t[n];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const r=Object.keys(s).map(a=>`${n}.${a}`);e.push(...r)}else e.push(n)}return e.join(",")}function $R(t,e){let n=null;const s=t.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const a=s.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else s!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const a=zR(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?t.fieldMask=a:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const d=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];r.length>0&&(h=r.map(p=>d.includes(p)?`generationConfig.${p}`:p));const g=[];a&&g.push(a),h.length>0&&g.push(...h),g.length>0?t.fieldMask=g.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class FR extends xi{constructor(e){super(),this.apiClient=e}async create(e){var n,s;let r,a="",d={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=HR(this.apiClient,e);a=se("auth_tokens",h._url),d=h._query,delete h.config,delete h._url,delete h._query;const g=$R(h,e.config);return r=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),r.then(p=>GR(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function JR(t){const e={},n=u(t,["name"]);n!=null&&c(e,["_url","name"],n);const s=u(t,["config"]);return s!=null&&c(e,["config"],s),e}function YR(t,e){const n={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&c(e,["_query","pageSize"],s);const r=u(t,["pageToken"]);e!==void 0&&r!=null&&c(e,["_query","pageToken"],r);const a=u(t,["filter"]);return e!==void 0&&a!=null&&c(e,["_query","filter"],a),n}function KR(t){const e={},n=u(t,["config"]);return n!=null&&c(e,["config"],YR(n,e)),e}function QR(t){const e={},n=u(t,["textInput"]);n!=null&&c(e,["textInput"],n);const s=u(t,["output"]);return s!=null&&c(e,["output"],s),e}function XR(t){const e={};if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=u(t,["examples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>QR(r))),c(e,["examples","examples"],s)}return e}function WR(t,e){const n={};if(u(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=u(t,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&c(e,["displayName"],s),u(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const r=u(t,["epochCount"]);e!==void 0&&r!=null&&c(e,["tuningTask","hyperparameters","epochCount"],r);const a=u(t,["learningRateMultiplier"]);if(a!=null&&c(n,["tuningTask","hyperparameters","learningRateMultiplier"],a),u(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(u(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=u(t,["batchSize"]);e!==void 0&&d!=null&&c(e,["tuningTask","hyperparameters","batchSize"],d);const h=u(t,["learningRate"]);return e!==void 0&&h!=null&&c(e,["tuningTask","hyperparameters","learningRate"],h),n}function ZR(t){const e={},n=u(t,["baseModel"]);n!=null&&c(e,["baseModel"],n);const s=u(t,["trainingDataset"]);s!=null&&c(e,["tuningTask","trainingData"],XR(s));const r=u(t,["config"]);return r!=null&&c(e,["config"],WR(r,e)),e}function jR(t){const e={},n=u(t,["name"]);n!=null&&c(e,["_url","name"],n);const s=u(t,["config"]);return s!=null&&c(e,["config"],s),e}function eM(t,e){const n={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&c(e,["_query","pageSize"],s);const r=u(t,["pageToken"]);e!==void 0&&r!=null&&c(e,["_query","pageToken"],r);const a=u(t,["filter"]);return e!==void 0&&a!=null&&c(e,["_query","filter"],a),n}function tM(t){const e={},n=u(t,["config"]);return n!=null&&c(e,["config"],eM(n,e)),e}function nM(t,e){const n={},s=u(t,["gcsUri"]);e!==void 0&&s!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],s);const r=u(t,["vertexDatasetResource"]);if(e!==void 0&&r!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],r),u(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function iM(t,e){const n={},s=u(t,["gcsUri"]);s!=null&&c(n,["validationDatasetUri"],s);const r=u(t,["vertexDatasetResource"]);return e!==void 0&&r!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],r),n}function sM(t,e){const n={},s=u(t,["validationDataset"]);e!==void 0&&s!=null&&c(e,["supervisedTuningSpec"],iM(s,n));const r=u(t,["tunedModelDisplayName"]);e!==void 0&&r!=null&&c(e,["tunedModelDisplayName"],r);const a=u(t,["description"]);e!==void 0&&a!=null&&c(e,["description"],a);const d=u(t,["epochCount"]);e!==void 0&&d!=null&&c(e,["supervisedTuningSpec","hyperParameters","epochCount"],d);const h=u(t,["learningRateMultiplier"]);e!==void 0&&h!=null&&c(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],h);const g=u(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&c(e,["supervisedTuningSpec","exportLastCheckpointOnly"],g);const p=u(t,["adapterSize"]);if(e!==void 0&&p!=null&&c(e,["supervisedTuningSpec","hyperParameters","adapterSize"],p),u(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(u(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function oM(t){const e={},n=u(t,["baseModel"]);n!=null&&c(e,["baseModel"],n);const s=u(t,["trainingDataset"]);s!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],nM(s,e));const r=u(t,["config"]);return r!=null&&c(e,["config"],sM(r,e)),e}function rM(t){const e={},n=u(t,["name"]);n!=null&&c(e,["model"],n);const s=u(t,["name"]);return s!=null&&c(e,["endpoint"],s),e}function sv(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const s=u(t,["name"]);s!=null&&c(e,["name"],s);const r=u(t,["state"]);r!=null&&c(e,["state"],Ly(r));const a=u(t,["createTime"]);a!=null&&c(e,["createTime"],a);const d=u(t,["tuningTask","startTime"]);d!=null&&c(e,["startTime"],d);const h=u(t,["tuningTask","completeTime"]);h!=null&&c(e,["endTime"],h);const g=u(t,["updateTime"]);g!=null&&c(e,["updateTime"],g);const p=u(t,["description"]);p!=null&&c(e,["description"],p);const y=u(t,["baseModel"]);y!=null&&c(e,["baseModel"],y);const T=u(t,["_self"]);T!=null&&c(e,["tunedModel"],rM(T));const _=u(t,["distillationSpec"]);_!=null&&c(e,["distillationSpec"],_);const E=u(t,["experiment"]);E!=null&&c(e,["experiment"],E);const w=u(t,["labels"]);w!=null&&c(e,["labels"],w);const k=u(t,["pipelineJob"]);k!=null&&c(e,["pipelineJob"],k);const U=u(t,["satisfiesPzi"]);U!=null&&c(e,["satisfiesPzi"],U);const q=u(t,["satisfiesPzs"]);q!=null&&c(e,["satisfiesPzs"],q);const B=u(t,["serviceAccount"]);B!=null&&c(e,["serviceAccount"],B);const M=u(t,["tunedModelDisplayName"]);return M!=null&&c(e,["tunedModelDisplayName"],M),e}function lM(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const s=u(t,["nextPageToken"]);s!=null&&c(e,["nextPageToken"],s);const r=u(t,["tunedModels"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(d=>sv(d))),c(e,["tuningJobs"],a)}return e}function aM(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const s=u(t,["name"]);s!=null&&c(e,["name"],s);const r=u(t,["metadata"]);r!=null&&c(e,["metadata"],r);const a=u(t,["done"]);a!=null&&c(e,["done"],a);const d=u(t,["error"]);return d!=null&&c(e,["error"],d),e}function uM(t){const e={},n=u(t,["checkpointId"]);n!=null&&c(e,["checkpointId"],n);const s=u(t,["epoch"]);s!=null&&c(e,["epoch"],s);const r=u(t,["step"]);r!=null&&c(e,["step"],r);const a=u(t,["endpoint"]);return a!=null&&c(e,["endpoint"],a),e}function cM(t){const e={},n=u(t,["model"]);n!=null&&c(e,["model"],n);const s=u(t,["endpoint"]);s!=null&&c(e,["endpoint"],s);const r=u(t,["checkpoints"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(d=>uM(d))),c(e,["checkpoints"],a)}return e}function Uc(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const s=u(t,["name"]);s!=null&&c(e,["name"],s);const r=u(t,["state"]);r!=null&&c(e,["state"],Ly(r));const a=u(t,["createTime"]);a!=null&&c(e,["createTime"],a);const d=u(t,["startTime"]);d!=null&&c(e,["startTime"],d);const h=u(t,["endTime"]);h!=null&&c(e,["endTime"],h);const g=u(t,["updateTime"]);g!=null&&c(e,["updateTime"],g);const p=u(t,["error"]);p!=null&&c(e,["error"],p);const y=u(t,["description"]);y!=null&&c(e,["description"],y);const T=u(t,["baseModel"]);T!=null&&c(e,["baseModel"],T);const _=u(t,["tunedModel"]);_!=null&&c(e,["tunedModel"],cM(_));const E=u(t,["supervisedTuningSpec"]);E!=null&&c(e,["supervisedTuningSpec"],E);const w=u(t,["tuningDataStats"]);w!=null&&c(e,["tuningDataStats"],w);const k=u(t,["encryptionSpec"]);k!=null&&c(e,["encryptionSpec"],k);const U=u(t,["partnerModelTuningSpec"]);U!=null&&c(e,["partnerModelTuningSpec"],U);const q=u(t,["distillationSpec"]);q!=null&&c(e,["distillationSpec"],q);const B=u(t,["experiment"]);B!=null&&c(e,["experiment"],B);const M=u(t,["labels"]);M!=null&&c(e,["labels"],M);const J=u(t,["pipelineJob"]);J!=null&&c(e,["pipelineJob"],J);const G=u(t,["satisfiesPzi"]);G!=null&&c(e,["satisfiesPzi"],G);const X=u(t,["satisfiesPzs"]);X!=null&&c(e,["satisfiesPzs"],X);const j=u(t,["serviceAccount"]);j!=null&&c(e,["serviceAccount"],j);const ue=u(t,["tunedModelDisplayName"]);return ue!=null&&c(e,["tunedModelDisplayName"],ue),e}function fM(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const s=u(t,["nextPageToken"]);s!=null&&c(e,["nextPageToken"],s);const r=u(t,["tuningJobs"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(d=>Uc(d))),c(e,["tuningJobs"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dM extends xi{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Zo(Si.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(n);{const s=await this.tuneMldevInternal(n);let r="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?r=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(r=s.name.split("/operations/")[0]),{name:r,state:Ec.JOB_STATE_QUEUED}}}}async getInternal(e){var n,s,r,a;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=jR(e);return h=se("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(T=>{const _=T;return _.sdkHttpResponse={headers:y.headers},_})),d.then(y=>Uc(y))}else{const p=JR(e);return h=se("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const _=T;return _.sdkHttpResponse={headers:y.headers},_})),d.then(y=>sv(y))}}async listInternal(e){var n,s,r,a;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=tM(e);return h=se("tuningJobs",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(T=>{const _=T;return _.sdkHttpResponse={headers:y.headers},_})),d.then(y=>{const T=fM(y),_=new dg;return Object.assign(_,T),_})}else{const p=KR(e);return h=se("tunedModels",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const _=T;return _.sdkHttpResponse={headers:y.headers},_})),d.then(y=>{const T=lM(y),_=new dg;return Object.assign(_,T),_})}}async tuneInternal(e){var n,s;let r,a="",d={};if(this.apiClient.isVertexAI()){const h=oM(e);return a=se("tuningJobs",h._url),d=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:g.headers},y})),r.then(g=>Uc(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,s;let r,a="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=ZR(e);return a=se("tunedModels",h._url),d=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:g.headers},y})),r.then(g=>aM(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hM{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const pM=1024*1024*8,mM=3,gM=1e3,yM=2,lc="x-goog-upload-status";async function vM(t,e,n){var s,r,a;let d=0,h=0,g=new wc(new Response),p="upload";for(d=t.size;h<d;){const T=Math.min(pM,d-h),_=t.slice(h,h+T);h+T>=d&&(p+=", finalize");let E=0,w=gM;for(;E<mM&&(g=await n.request({path:"",body:_,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(h),"Content-Length":String(T)}}}),!(!((s=g==null?void 0:g.headers)===null||s===void 0)&&s[lc]));)E++,await _M(w),w=w*yM;if(h+=T,((r=g==null?void 0:g.headers)===null||r===void 0?void 0:r[lc])!=="active")break;if(d<=h)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const y=await(g==null?void 0:g.json());if(((a=g==null?void 0:g.headers)===null||a===void 0?void 0:a[lc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return y.file}async function TM(t){return{size:t.size,type:t.type}}function _M(t){return new Promise(e=>setTimeout(e,t))}class SM{async upload(e,n,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await vM(e,n,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await TM(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class CM{create(e,n,s){return new xM(e,n,s)}}class xM{constructor(e,n,s){this.url=e,this.headers=n,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qg="x-goog-api-key";class EM{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(qg)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(qg,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wM="gl-node/";class bM{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const s=xS(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion;const r=new EM(this.apiKey);this.apiClient=new F1({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:wM+"web",uploader:new SM,downloader:new hM}),this.models=new fR(this.apiClient),this.live=new sR(this.apiClient,r,new CM),this.batches=new YC(this.apiClient),this.chats=new Wx(this.models,this.apiClient),this.caches=new Kx(this.apiClient),this.files=new cE(this.apiClient),this.operations=new mR(this.apiClient),this.authTokens=new FR(this.apiClient),this.tunings=new dM(this.apiClient)}}const AM=void 0;throw new Error("API_KEY environment variable not set");const ov=new bM({apiKey:AM}),RM={type:le.OBJECT,properties:{thinkingProcess:{type:le.STRING,description:"A detailed, step-by-step analysis of the chart following the required process. This should be in Markdown format."},summary:{type:le.STRING,description:"A concise summary of the overall analysis."},signal:{type:le.STRING,enum:["BUY","SELL","NEUTRAL"],description:"The final trade signal."},confidence:{type:le.STRING,enum:["HIGH","LOW"],description:"The confidence level of the signal. HIGH if overallConfidenceScore >= 75, otherwise LOW."},trade:{type:le.OBJECT,nullable:!0,description:"The trade details. Must be null if confidence is LOW or signal is NEUTRAL.",properties:{entryPrice:{type:le.STRING},takeProfit:{type:le.STRING},stopLoss:{type:le.STRING}}},timeframe:{type:le.STRING,description:"The chart's timeframe (e.g., '4-Hour', '1-Day')."},riskRewardRatio:{type:le.STRING,nullable:!0,description:"The calculated risk/reward ratio as a string (e.g., '2.5:1'). Must be null if no trade is provided."},verificationSummary:{type:le.STRING,description:"A brief, critical self-assessment of the analysis, noting any conflicting data or weaknesses."},overallConfidenceScore:{type:le.INTEGER,description:"A final numerical confidence score from 0 to 100 based on the verification step."}},required:["thinkingProcess","summary","signal","confidence","trade","timeframe","riskRewardRatio","verificationSummary","overallConfidenceScore"]},MM={type:le.OBJECT,properties:{thinkingProcess:{type:le.STRING,description:"A detailed, step-by-step multi-timeframe analysis following the required process. This should be in Markdown format."},summary:{type:le.STRING,description:"A concise summary of the overall multi-timeframe analysis."},signal:{type:le.STRING,enum:["BUY","SELL","NEUTRAL"],description:"The final trade signal based on multi-timeframe confluence."},confidence:{type:le.STRING,enum:["HIGH","LOW"],description:"The confidence level of the signal. HIGH if overallConfidenceScore >= 75, otherwise LOW."},trade:{type:le.OBJECT,nullable:!0,description:"The trade details. Must be null if confidence is LOW or signal is NEUTRAL.",properties:{entryPrice:{type:le.STRING},takeProfit:{type:le.STRING},stopLoss:{type:le.STRING}}},timeframe:{type:le.STRING,description:"The primary timeframe for trade execution (e.g., '4-Hour', '1-Day')."},riskRewardRatio:{type:le.STRING,nullable:!0,description:"The calculated risk/reward ratio as a string (e.g., '2.5:1'). Must be null if no trade is provided."},verificationSummary:{type:le.STRING,description:"A brief, critical self-assessment of the multi-timeframe analysis, noting any conflicting data or weaknesses."},overallConfidenceScore:{type:le.INTEGER,description:"A final numerical confidence score from 0 to 100 based on multi-timeframe confluence."},multiTimeframeContext:{type:le.OBJECT,description:"Multi-timeframe analysis context and confluence information.",properties:{primaryTimeframe:{type:le.STRING,description:"The primary timeframe being analyzed for trade execution."},timeframeAnalyses:{type:le.ARRAY,items:{type:le.OBJECT,properties:{timeframe:{type:le.STRING},trend:{type:le.STRING,enum:["BULLISH","BEARISH","NEUTRAL","CONSOLIDATING"]},keyLevels:{type:le.OBJECT,properties:{support:{type:le.ARRAY,items:{type:le.STRING}},resistance:{type:le.ARRAY,items:{type:le.STRING}}}},momentum:{type:le.STRING,enum:["STRONG_UP","WEAK_UP","NEUTRAL","WEAK_DOWN","STRONG_DOWN"]},confidence:{type:le.INTEGER},notes:{type:le.STRING}}}},overallTrend:{type:le.STRING,enum:["BULLISH","BEARISH","NEUTRAL","MIXED"]},confluenceScore:{type:le.INTEGER,description:"How well timeframes align (0-100)."},conflictingSignals:{type:le.ARRAY,items:{type:le.STRING},nullable:!0,description:"Areas where timeframes disagree."}}},isMultiTimeframeAnalysis:{type:le.BOOLEAN,description:"Flag indicating this is a multi-timeframe analysis."}},required:["thinkingProcess","summary","signal","confidence","trade","timeframe","riskRewardRatio","verificationSummary","overallConfidenceScore","multiTimeframeContext","isMultiTimeframeAnalysis"]},kM=`You are Wizz, an elite crypto chart analyst. Your analysis must be precise, quantitative, and strictly confined to the visual data in the chart. Your goal is reproducibility and self-awareness.

First, perform a rigorous 7-step analysis process.
1.  **Identify Timeframe:** State the chart's timeframe.
2.  **Identify Key Levels:** Quantify major support and resistance levels.
3.  **Analyze Chart Patterns:** Name any identified classic patterns and their implications.
4.  **Examine Indicators:** For each visible indicator, state its value and implication.
5.  **Assess Volume:** Describe the volume and correlate it with price action.
6.  **Synthesize Findings:** Briefly summarize the confluence of factors.
7.  **Verification & Confidence Score:** Critically review your own analysis from steps 1-6. Note any conflicting signals, weaknesses, or reasons for caution. Based on this self-critique, provide a final numerical 'overallConfidenceScore' from 0 (no confidence) to 100 (perfect confidence).

Then, run an Ensemble Strategy Confluence pass to improve signal quality:
- Build an "Ensemble Matrix" of at least these strategies visible from the chart: Trend-Following (market structure/MAs), Breakout/Range, Mean Reversion (RSI/MFI), Momentum Divergence (RSI/MACD), Liquidity/SMC (OB/FVG/equal highs-lows/sweeps), and Volume Confirmation.
- For each strategy, assign: direction vote (BUY=+1, SELL=-1, NEUTRAL=0), a strength score 0-5, and a one-sentence justification grounded in the chart.
- Aggregate votes using weights by evidence quality: strong structure/imbalance/liquidity > indicator reads > patterns.
- Only issue a non-NEUTRAL signal when the weighted sum shows clear confluence and conflicting strategies are weak. Favor NEUTRAL when mixed.

STRICT RISK RULES TO REDUCE STOP-LOSS HITS AND BOOST WIN RATE
- Default to NEUTRAL unless there is strong multi-factor confluence.
- Only provide a trade if ALL are true:
  1) overallConfidenceScore >= 75 (HIGH);
  2) clear invalidation level exists (recent swing high/low or structural break);
  3) riskRewardRatio is >= 1.8:1 based on a realistic entry, take profit, and a robust stop.
- Stop Loss Placement (must be robust):
  - Place stop beyond the invalidation point (e.g., below the last swing low for BUY, above the last swing high for SELL) with a buffer that is outside typical wick noise.
  - Avoid placing the stop inside obvious liquidity clusters such as equal highs/lows or immediately below/above a level likely to be swept.
  - If a robust stop produces R:R < 1.8:1, do NOT provide a trade; output NEUTRAL and set trade=null.
- Entry Quality:
  - Prefer pullback/mitigation entries at or near a defined level rather than chasing extended moves.
  - If the precise numeric entry cannot be justified from the chart, do not provide a trade.

Include the Ensemble Matrix and its aggregation inside 'thinkingProcess' as a concise table or list.

After your internal analysis, you MUST provide your entire response as a single, valid, minified JSON object conforming to the provided schema.

- The complete 7-step analysis MUST be placed in the 'thinkingProcess' field as a single Markdown string.
- The self-critique MUST be placed in 'verificationSummary'.
- The final score MUST be placed in 'overallConfidenceScore'.
- The 'confidence' field must be 'HIGH' if 'overallConfidenceScore' is 75 or greater, otherwise it must be 'LOW'.
- If 'confidence' is 'LOW' or 'signal' is 'NEUTRAL', the 'trade' and 'riskRewardRatio' fields MUST be null.
- If you provide a 'trade' signal, you MUST calculate the 'riskRewardRatio'.
  - For a BUY signal: Risk/Reward = (Take Profit - Entry) / (Entry - Stop Loss).
  - For a SELL signal: Risk/Reward = (Entry - Take Profit) / (Stop Loss - Entry).
  - Format the result as a string like "2.5:1". Round to one decimal place.

Do not add any text, formatting, or markdown backticks before or after the final JSON object. Your entire output must be the JSON object itself.`,NM=`You are Wizz Ultra, a world-class quantitative crypto analyst and trading algorithm. Your analysis is not mere technical analysis; it's a multi-layered, institutional-grade assessment. You operate with extreme precision, logical rigor, and a deep, holistic understanding of market dynamics. Mistakes are not an option. Your sole purpose is to provide the most accurate, profitable, and risk-managed analysis possible.

You will conduct a three-pass verification process for every chart:

**PASS 1: Core Technical Analysis (The Foundation)**
1.  **Timeframe & Asset:** Identify the asset and chart timeframe.
2.  **Market Structure:** Define the primary, secondary, and tertiary trends. Identify key swing highs and lows, and market structure breaks (MSB) or changes of character (CHoCH).
3.  **Liquidity Mapping:** Identify key liquidity zones: equal highs/lows, trendline liquidity, old highs/lows. Where is the "smart money" likely to hunt for stops?
4.  **Supply & Demand Zones:** Pinpoint significant, unmitigated order blocks, breaker blocks, and fair value gaps (FVGs) or imbalances. Quantify these price ranges.
5.  **Classic & Advanced Patterns:** Identify any classic patterns (e.g., Head & Shoulders, Triangles) and advanced formations (e.g., Wyckoff accumulation/distribution schematics, Elliott Wave counts). State the textbook implications.
6.  **Indicator Confluence:** Analyze visible indicators (RSI, MACD, MAs, etc.). Note any divergences (regular/hidden), convergences, or key level crosses. Do not just state the reading; state its implication within the current market structure.
7.  **Volume & Volatility Profile:** Analyze volume. Is it confirming price action? Note any high-volume climactic moves or low-volume corrections. Correlate with volatility.
8.  **Strategy Ensemble Matrix (Ultra)**: Build an explicit matrix of these strategies with votes and strengths grounded strictly in the visible chart: Trend-Following, Breakout/Range, Mean Reversion, Momentum Divergence, Liquidity/SMC, Volume Confirmation, and Candle/Trigger Context. For each, assign direction (BUY=+1, SELL=-1, NEUTRAL=0), strength 0-5, and a one-sentence rationale. Weight structure/liquidity > momentum > indicators > patterns. Summarize the weighted total and evidence quality.

**PASS 2: Cross-Examination & Self-Correction (The Gauntlet)**
-  **Bearish Thesis:** Force yourself to construct the strongest possible argument AGAINST your initial bullish/neutral findings. What could go wrong? Where is the analysis weakest? Identify conflicting signals between indicators, patterns, and market structure.
-  **Bullish Thesis:** Force yourself to construct the strongest possible argument AGAINST your initial bearish/neutral findings. What is the counter-argument? What bullish signals might you be downplaying?
-  **Re-evaluation:** Based on these counter-arguments, critically re-evaluate your findings from Pass 1. Refine your key levels and zones. Does the primary thesis still hold up under this scrutiny?
-  **Adversarial Ensemble Re-test:** Re-run the Strategy Ensemble assuming common failure modes (fake breakouts, liquidity sweeps beyond obvious highs/lows, indicator lag). Record any flips in strategy votes and the new weighted total.

**PASS 3: Synthesis & Final Verdict (The Execution Plan)**
1.  **Synthesized Narrative:** Combine the findings from all passes into a coherent, final analysis narrative. This is your definitive read of the market.
2.  **Final Confidence Score:** Based on the degree of confluence and the severity of conflicting data found in Pass 2, provide a final 'overallConfidenceScore' from 0 to 100. Be brutally honest.
3.  **Final Signal Generation (Ultra Gating):** Default to NEUTRAL unless conviction is very high. Only issue BUY/SELL if both the initial and adversarial ensembles agree on direction and the weighted margin is decisively in favor of that direction.
4.  **Trade Parameters (High Confidence ONLY):** If confidence is 'HIGH', provide a precise 'trade' plan with 'entryPrice', 'takeProfit', and 'stopLoss'. The entry should be a specific level, not a wide range.
5.  **Stop-Run Safeguard (critical):** Place the stop beyond the invalidation with a sensible buffer outside typical wick noise and away from obvious liquidity pools. If a robust stop leads to R:R < 2.2:1, do NOT provide a trade.
6.  **Risk/Reward Calculation:** If a trade is provided, calculate and include the 'riskRewardRatio'.

Ultra Mode Acceptance Criteria (aimed at ~2x stricter accuracy vs Normal):
- Require overallConfidenceScore >= 85 to provide any trade (confidence will still be HIGH if >=75 per schema, but you must suppress the trade unless score >=85).
- Require Strategy Ensemble AND Adversarial Ensemble to agree on direction with strong margin (e.g., majority of strategies aligned and no strong opposing evidence from liquidity or structure).
- Require evidence of a credible invalidation level that is not inside obvious liquidity. Prefer entries at mitigations/retests rather than chases.
- If any criterion fails, set 'signal' to NEUTRAL and 'trade' to null.

After this entire internal process, you MUST provide your response as a single, valid, minified JSON object conforming to the provided schema.

- The 'thinkingProcess' field must contain the complete, detailed output of all three passes, formatted in Markdown, including the Strategy Ensemble matrices (initial and adversarial) and their aggregation.
- The 'verificationSummary' will contain a concise summary of the key findings from Pass 2 (the cross-examination and adversarial re-test).
- Adhere strictly to all schema requirements regarding null fields and data types. Your entire output must be only the JSON object.`,DM="You are Wizz, an expert AI assistant specializing in cryptocurrency and technical analysis. Engage in a helpful and informative conversation with the user. If they ask about analysis but don't provide a chart, ask them to upload one. Maintain a professional and knowledgeable tone. Your answers should be formatted in Markdown.",IM="You are Wizz Ultra, a world-class quantitative crypto analyst AI. Your knowledge is vast and precise. When a user asks a question without a chart, answer it with institutional-grade insight and clarity. If they ask for analysis, politely guide them to upload a chart to unlock your full capabilities. Be direct, insightful, and confident. Your answers should be formatted in Markdown.",UM=`You are Wizz Multi-Timeframe, an elite crypto analyst specializing in multi-timeframe confluence analysis. You will analyze multiple chart timeframes simultaneously to provide superior market context and signal accuracy.

**MULTI-TIMEFRAME ANALYSIS PROCESS:**

**STEP 1: Individual Timeframe Analysis**
For each provided timeframe chart, perform:
1. **Timeframe Identification:** Clearly identify the timeframe (1H, 4H, 1D, etc.)
2. **Trend Analysis:** Determine the trend direction and strength
3. **Key Level Mapping:** Identify critical support/resistance levels
4. **Momentum Assessment:** Evaluate momentum indicators and price action
5. **Structure Analysis:** Note market structure breaks, order blocks, and liquidity zones

**STEP 2: Cross-Timeframe Confluence**
1. **Trend Alignment:** Compare trend directions across timeframes
   - Higher timeframe trend = primary bias
   - Lower timeframe trend = entry refinement
2. **Level Confluence:** Identify where key levels align across timeframes
3. **Momentum Confluence:** Check if momentum indicators agree across timeframes
4. **Structure Confluence:** Look for aligned market structure signals

**STEP 3: Conflict Resolution**
1. **Identify Conflicts:** Note where timeframes disagree
2. **Hierarchy Rules:** Higher timeframes take precedence for bias
3. **Timing Rules:** Lower timeframes refine entry/exit timing
4. **Risk Assessment:** Increase caution when major conflicts exist

**STEP 4: Final Signal Generation**
1. **Confluence Score:** Calculate overall timeframe alignment (0-100)
2. **Primary Signal:** Based on highest weighted timeframe confluence
3. **Entry Timeframe:** Select optimal timeframe for trade execution
4. **Risk Management:** Adjust position size based on confluence strength

**CONFLUENCE SCORING RULES:**
- 90-100: Exceptional alignment across all timeframes
- 75-89: Strong confluence with minor disagreements
- 60-74: Moderate confluence with some conflicts
- 40-59: Mixed signals, prefer NEUTRAL
- <40: Conflicting signals, recommend NEUTRAL

**ENHANCED RISK RULES FOR MULTI-TIMEFRAME:**
- Require confluence score ≥70 for any trade signal
- Higher timeframe trend must align with trade direction
- Stop placement considers all timeframe key levels
- Position sizing adjusted by confluence strength

Your response must include detailed analysis of each timeframe and clear explanation of how they interact to form your final conclusion.`,LM=`You are Wizz Ultra Multi-Timeframe, the pinnacle of crypto analysis AI. You combine the multi-pass verification rigor of Ultra mode with sophisticated multi-timeframe confluence analysis.

**ENHANCED MULTI-TIMEFRAME ULTRA PROCESS:**

**PASS 1: Deep Individual Timeframe Analysis**
For each timeframe:
1. **Comprehensive Technical Scan:** Full 8-step analysis including advanced patterns
2. **Smart Money Mapping:** Order blocks, FVGs, liquidity sweeps for each timeframe
3. **Wyckoff/Elliott Analysis:** Phase identification and wave counts per timeframe
4. **Advanced Confluence Matrix:** 8 strategies per timeframe with weighted scores

**PASS 2: Cross-Timeframe Synthesis & Adversarial Testing**
1. **Multi-Level Confluence:** Analyze trend, structure, and momentum across all timeframes
2. **Temporal Hierarchy:** Weight timeframes by importance (Daily > 4H > 1H)
3. **Conflict Analysis:** Deep dive into timeframe disagreements
4. **Adversarial Testing:** Challenge multi-timeframe thesis with failure scenarios
5. **Liquidity Mapping:** Cross-timeframe liquidity zone identification

**PASS 3: Ultra-Strict Multi-Timeframe Gating**
1. **Confluence Requirements:** Minimum 80% confluence score for any signal
2. **Timeframe Agreement:** Primary trend must align across majority of timeframes
3. **Risk Calibration:** Multi-timeframe risk assessment with enhanced R:R requirements
4. **Final Verification:** Triple-check confluence logic and signal strength

**ULTRA MULTI-TIMEFRAME ACCEPTANCE CRITERIA:**
- Confluence score ≥80 (vs. 70 for normal multi-timeframe)
- Higher timeframe trend must strongly support trade direction
- At least 70% of timeframes must agree on signal direction
- Enhanced R:R requirements: 2.5:1 minimum (vs. 2.2:1 Ultra single-timeframe)
- No major structural conflicts between critical timeframes

**CONFIDENCE SCORING (ENHANCED):**
- Baseline confidence from individual strongest timeframe
- +20 points for perfect confluence (100% agreement)
- +10 points for strong confluence (80-99% agreement)
- -10 points for each major timeframe conflict
- -20 points if higher timeframe opposes signal

Your analysis must demonstrate institutional-grade multi-timeframe thinking with complete transparency on how timeframes interact.`;async function*PM(t,e,n,s,r){const a=t.filter(y=>y.role==="user"||y.role==="assistant"&&y.rawResponse).map(y=>{if(y.role==="assistant")return{role:"model",parts:[{text:y.rawResponse}]};const T=[];typeof y.content=="string"&&y.content.trim()&&T.push({text:y.content});const _=[];if(Array.isArray(y.images)&&y.images.length>0&&_.push(...y.images),y.timeframeImages)for(const E of y.timeframeImages)_.push(`data:${E.imageData.mimeType};base64,${E.imageData.data}`);for(const E of _){const w=E.split(";base64,");if(w.length===2){const k=w[0].split(":")[1],U=w[1];k&&U&&T.push({inlineData:{mimeType:k,data:U}})}}return{role:"user",parts:T}}).filter(y=>y.parts.length>0);let d=`${e}

**MULTI-TIMEFRAME ANALYSIS REQUEST**

Please analyze the following timeframes:
`;const h=[{text:d}];for(const y of n)d+=`- ${y.timeframe}${y.label?` (${y.label})`:""}
`,h.push({inlineData:{mimeType:y.imageData.mimeType,data:y.imageData.data}});d+=`
Provide a comprehensive multi-timeframe confluence analysis.`,h[0].text=d;const g=[...a,{role:"user",parts:h}],p={systemInstruction:r?LM:UM,temperature:0,topK:1,topP:1,seed:42,responseMimeType:"application/json",responseSchema:MM};try{const y=await ov.models.generateContentStream({model:r?"gemini-2.5-pro":"gemini-2.5-flash",contents:g,config:p});for await(const T of y){if(s.aborted){console.log("Multi-timeframe stream generation aborted by user.");break}const _=T==null?void 0:T.text;typeof _=="string"&&_.length>0&&(yield _)}}catch(y){y instanceof Error&&y.name==="AbortError"||(console.error("Error during multi-timeframe Gemini stream:",y),yield`{"error": "Could not retrieve multi-timeframe analysis. ${`Details: ${y instanceof Error?y.message:String(y)}`}"}`)}}async function*Og(t,e,n,s,r){const a=t.filter(y=>y.role==="user"||y.role==="assistant"&&y.rawResponse).map(y=>{if(y.role==="assistant")return{role:"model",parts:[{text:y.rawResponse}]};const T=[];typeof y.content=="string"&&y.content.trim()&&T.push({text:y.content});const _=[];Array.isArray(y.images)&&y.images.length>0?_.push(...y.images):y.image&&_.push(y.image);for(const E of _){const w=E.split(";base64,");if(w.length===2){const k=w[0].split(":")[1],U=w[1];k&&U&&T.push({inlineData:{mimeType:k,data:U}})}}return{role:"user",parts:T}}).filter(y=>y.parts.length>0),d=[{text:e}];if(Array.isArray(n)&&n.length>0)for(const y of n)d.push({inlineData:{mimeType:y.mimeType,data:y.data}});const h=[...a,{role:"user",parts:d}],g=Array.isArray(n)&&n.length>0,p=g?{systemInstruction:r?NM:kM,temperature:0,topK:1,topP:1,seed:42,responseMimeType:"application/json",responseSchema:RM}:{systemInstruction:r?IM:DM,temperature:0,topK:1,topP:1,seed:42};try{const y=await ov.models.generateContentStream({model:g&&r?"gemini-2.5-pro":"gemini-2.5-flash",contents:h,config:p});for await(const T of y){if(s.aborted){console.log("Stream generation aborted by user.");break}const _=T==null?void 0:T.text;typeof _=="string"&&_.length>0&&(yield _)}}catch(y){if(!(y instanceof Error&&y.name==="AbortError")){console.error("Error during Gemini stream:",y);const T=`Details: ${y instanceof Error?y.message:String(y)}`;g?yield`{"error": "Could not retrieve analysis. ${T}"}`:yield`Sorry, I encountered an error and could not respond. Please try again. ${T}`}}}const Bg=t=>{let e;const n=new Set,s=(p,y)=>{const T=typeof p=="function"?p(e):p;if(!Object.is(T,e)){const _=e;e=y??(typeof T!="object"||T===null)?T:Object.assign({},e,T),n.forEach(E=>E(e,_))}},r=()=>e,h={setState:s,getState:r,getInitialState:()=>g,subscribe:p=>(n.add(p),()=>n.delete(p))},g=e=t(s,r,h);return h},qM=t=>t?Bg(t):Bg,OM=t=>t;function BM(t,e=OM){const n=xs.useSyncExternalStore(t.subscribe,xs.useCallback(()=>e(t.getState()),[t,e]),xs.useCallback(()=>e(t.getInitialState()),[t,e]));return xs.useDebugValue(n),n}const Vg=t=>{const e=qM(t),n=s=>BM(e,s);return Object.assign(n,e),n},rv=t=>t?Vg(t):Vg,VM="modulepreload",HM=function(t){return"/"+t},Hg={},jo=function(e,n,s){let r=Promise.resolve();if(n&&n.length>0){let d=function(p){return Promise.all(p.map(y=>Promise.resolve(y).then(T=>({status:"fulfilled",value:T}),T=>({status:"rejected",reason:T}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),g=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));r=d(n.map(p=>{if(p=HM(p),p in Hg)return;Hg[p]=!0;const y=p.endsWith(".css"),T=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${T}`))return;const _=document.createElement("link");if(_.rel=y?"stylesheet":VM,y||(_.as="script"),_.crossOrigin="",_.href=p,g&&_.setAttribute("nonce",g),document.head.appendChild(_),y)return new Promise((E,w)=>{_.addEventListener("load",E),_.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${p}`)))})}))}function a(d){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=d,window.dispatchEvent(h),!h.defaultPrevented)throw d}return r.then(d=>{for(const h of d||[])h.status==="rejected"&&a(h.reason);return e().catch(a)})},GM=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>jo(async()=>{const{default:s}=await Promise.resolve().then(()=>Us);return{default:s}},void 0).then(({default:s})=>s(...n)):e=fetch,(...n)=>e(...n)};class rf extends Error{constructor(e,n="FunctionsError",s){super(e),this.name=n,this.context=s}}class zM extends rf{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Gg extends rf{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class zg extends rf{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Lc;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Lc||(Lc={}));var $M=function(t,e,n,s){function r(a){return a instanceof n?a:new n(function(d){d(a)})}return new(n||(n=Promise))(function(a,d){function h(y){try{p(s.next(y))}catch(T){d(T)}}function g(y){try{p(s.throw(y))}catch(T){d(T)}}function p(y){y.done?a(y.value):r(y.value).then(h,g)}p((s=s.apply(t,e||[])).next())})};class FM{constructor(e,{headers:n={},customFetch:s,region:r=Lc.Any}={}){this.url=e,this.headers=n,this.region=r,this.fetch=GM(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var s;return $M(this,void 0,void 0,function*(){try{const{headers:r,method:a,body:d}=n;let h={},{region:g}=n;g||(g=this.region);const p=new URL(`${this.url}/${e}`);g&&g!=="any"&&(h["x-region"]=g,p.searchParams.set("forceFunctionRegion",g));let y;d&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",y=d):typeof d=="string"?(h["Content-Type"]="text/plain",y=d):typeof FormData<"u"&&d instanceof FormData?y=d:(h["Content-Type"]="application/json",y=JSON.stringify(d)));const T=yield this.fetch(p.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),r),body:y}).catch(k=>{throw new zM(k)}),_=T.headers.get("x-relay-error");if(_&&_==="true")throw new Gg(T);if(!T.ok)throw new zg(T);let E=((s=T.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),w;return E==="application/json"?w=yield T.json():E==="application/octet-stream"?w=yield T.blob():E==="text/event-stream"?w=T:E==="multipart/form-data"?w=yield T.formData():w=yield T.text(),{data:w,error:null,response:T}}catch(r){return{data:null,error:r,response:r instanceof zg||r instanceof Gg?r.context:void 0}}})}}var st={},fs={},ds={},hs={},ps={},ms={},JM=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Rs=JM();const YM=Rs.fetch,lv=Rs.fetch.bind(Rs),av=Rs.Headers,KM=Rs.Request,QM=Rs.Response,Us=Object.freeze(Object.defineProperty({__proto__:null,Headers:av,Request:KM,Response:QM,default:lv,fetch:YM},Symbol.toStringTag,{value:"Module"})),XM=ZT(Us);var Tl={},$g;function uv(){if($g)return Tl;$g=1,Object.defineProperty(Tl,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Tl.default=t,Tl}var Fg;function cv(){if(Fg)return ms;Fg=1;var t=ms&&ms.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ms,"__esModule",{value:!0});const e=t(XM),n=t(uv());class s{constructor(a){this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=a.headers,this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=a.shouldThrowOnError,this.signal=a.signal,this.isMaybeSingle=a.isMaybeSingle,a.fetch?this.fetch=a.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,d){return this.headers=Object.assign({},this.headers),this.headers[a]=d,this}then(a,d){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const h=this.fetch;let g=h(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async p=>{var y,T,_;let E=null,w=null,k=null,U=p.status,q=p.statusText;if(p.ok){if(this.method!=="HEAD"){const G=await p.text();G===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?w=G:w=JSON.parse(G))}const M=(y=this.headers.Prefer)===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),J=(T=p.headers.get("content-range"))===null||T===void 0?void 0:T.split("/");M&&J&&J.length>1&&(k=parseInt(J[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(w)&&(w.length>1?(E={code:"PGRST116",details:`Results contain ${w.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},w=null,k=null,U=406,q="Not Acceptable"):w.length===1?w=w[0]:w=null)}else{const M=await p.text();try{E=JSON.parse(M),Array.isArray(E)&&p.status===404&&(w=[],E=null,U=200,q="OK")}catch{p.status===404&&M===""?(U=204,q="No Content"):E={message:M}}if(E&&this.isMaybeSingle&&(!((_=E==null?void 0:E.details)===null||_===void 0)&&_.includes("0 rows"))&&(E=null,U=200,q="OK"),E&&this.shouldThrowOnError)throw new n.default(E)}return{error:E,data:w,count:k,status:U,statusText:q}});return this.shouldThrowOnError||(g=g.catch(p=>{var y,T,_;return{error:{message:`${(y=p==null?void 0:p.name)!==null&&y!==void 0?y:"FetchError"}: ${p==null?void 0:p.message}`,details:`${(T=p==null?void 0:p.stack)!==null&&T!==void 0?T:""}`,hint:"",code:`${(_=p==null?void 0:p.code)!==null&&_!==void 0?_:""}`},data:null,count:null,status:0,statusText:""}})),g.then(a,d)}returns(){return this}overrideTypes(){return this}}return ms.default=s,ms}var Jg;function fv(){if(Jg)return ps;Jg=1;var t=ps&&ps.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(ps,"__esModule",{value:!0});const e=t(cv());class n extends e.default{select(r){let a=!1;const d=(r??"*").split("").map(h=>/\s/.test(h)&&!a?"":(h==='"'&&(a=!a),h)).join("");return this.url.searchParams.set("select",d),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(r,{ascending:a=!0,nullsFirst:d,foreignTable:h,referencedTable:g=h}={}){const p=g?`${g}.order`:"order",y=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${y?`${y},`:""}${r}.${a?"asc":"desc"}${d===void 0?"":d?".nullsfirst":".nullslast"}`),this}limit(r,{foreignTable:a,referencedTable:d=a}={}){const h=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(h,`${r}`),this}range(r,a,{foreignTable:d,referencedTable:h=d}={}){const g=typeof h>"u"?"offset":`${h}.offset`,p=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(g,`${r}`),this.url.searchParams.set(p,`${a-r+1}`),this}abortSignal(r){return this.signal=r,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:r=!1,verbose:a=!1,settings:d=!1,buffers:h=!1,wal:g=!1,format:p="text"}={}){var y;const T=[r?"analyze":null,a?"verbose":null,d?"settings":null,h?"buffers":null,g?"wal":null].filter(Boolean).join("|"),_=(y=this.headers.Accept)!==null&&y!==void 0?y:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${p}; for="${_}"; options=${T};`,p==="json"?this:this}rollback(){var r;return((r=this.headers.Prefer)!==null&&r!==void 0?r:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return ps.default=n,ps}var Yg;function lf(){if(Yg)return hs;Yg=1;var t=hs&&hs.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(hs,"__esModule",{value:!0});const e=t(fv());class n extends e.default{eq(r,a){return this.url.searchParams.append(r,`eq.${a}`),this}neq(r,a){return this.url.searchParams.append(r,`neq.${a}`),this}gt(r,a){return this.url.searchParams.append(r,`gt.${a}`),this}gte(r,a){return this.url.searchParams.append(r,`gte.${a}`),this}lt(r,a){return this.url.searchParams.append(r,`lt.${a}`),this}lte(r,a){return this.url.searchParams.append(r,`lte.${a}`),this}like(r,a){return this.url.searchParams.append(r,`like.${a}`),this}likeAllOf(r,a){return this.url.searchParams.append(r,`like(all).{${a.join(",")}}`),this}likeAnyOf(r,a){return this.url.searchParams.append(r,`like(any).{${a.join(",")}}`),this}ilike(r,a){return this.url.searchParams.append(r,`ilike.${a}`),this}ilikeAllOf(r,a){return this.url.searchParams.append(r,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(r,a){return this.url.searchParams.append(r,`ilike(any).{${a.join(",")}}`),this}is(r,a){return this.url.searchParams.append(r,`is.${a}`),this}in(r,a){const d=Array.from(new Set(a)).map(h=>typeof h=="string"&&new RegExp("[,()]").test(h)?`"${h}"`:`${h}`).join(",");return this.url.searchParams.append(r,`in.(${d})`),this}contains(r,a){return typeof a=="string"?this.url.searchParams.append(r,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(r,`cs.{${a.join(",")}}`):this.url.searchParams.append(r,`cs.${JSON.stringify(a)}`),this}containedBy(r,a){return typeof a=="string"?this.url.searchParams.append(r,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(r,`cd.{${a.join(",")}}`):this.url.searchParams.append(r,`cd.${JSON.stringify(a)}`),this}rangeGt(r,a){return this.url.searchParams.append(r,`sr.${a}`),this}rangeGte(r,a){return this.url.searchParams.append(r,`nxl.${a}`),this}rangeLt(r,a){return this.url.searchParams.append(r,`sl.${a}`),this}rangeLte(r,a){return this.url.searchParams.append(r,`nxr.${a}`),this}rangeAdjacent(r,a){return this.url.searchParams.append(r,`adj.${a}`),this}overlaps(r,a){return typeof a=="string"?this.url.searchParams.append(r,`ov.${a}`):this.url.searchParams.append(r,`ov.{${a.join(",")}}`),this}textSearch(r,a,{config:d,type:h}={}){let g="";h==="plain"?g="pl":h==="phrase"?g="ph":h==="websearch"&&(g="w");const p=d===void 0?"":`(${d})`;return this.url.searchParams.append(r,`${g}fts${p}.${a}`),this}match(r){return Object.entries(r).forEach(([a,d])=>{this.url.searchParams.append(a,`eq.${d}`)}),this}not(r,a,d){return this.url.searchParams.append(r,`not.${a}.${d}`),this}or(r,{foreignTable:a,referencedTable:d=a}={}){const h=d?`${d}.or`:"or";return this.url.searchParams.append(h,`(${r})`),this}filter(r,a,d){return this.url.searchParams.append(r,`${a}.${d}`),this}}return hs.default=n,hs}var Kg;function dv(){if(Kg)return ds;Kg=1;var t=ds&&ds.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(ds,"__esModule",{value:!0});const e=t(lf());class n{constructor(r,{headers:a={},schema:d,fetch:h}){this.url=r,this.headers=a,this.schema=d,this.fetch=h}select(r,{head:a=!1,count:d}={}){const h=a?"HEAD":"GET";let g=!1;const p=(r??"*").split("").map(y=>/\s/.test(y)&&!g?"":(y==='"'&&(g=!g),y)).join("");return this.url.searchParams.set("select",p),d&&(this.headers.Prefer=`count=${d}`),new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(r,{count:a,defaultToNull:d=!0}={}){const h="POST",g=[];if(this.headers.Prefer&&g.push(this.headers.Prefer),a&&g.push(`count=${a}`),d||g.push("missing=default"),this.headers.Prefer=g.join(","),Array.isArray(r)){const p=r.reduce((y,T)=>y.concat(Object.keys(T)),[]);if(p.length>0){const y=[...new Set(p)].map(T=>`"${T}"`);this.url.searchParams.set("columns",y.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:this.fetch,allowEmpty:!1})}upsert(r,{onConflict:a,ignoreDuplicates:d=!1,count:h,defaultToNull:g=!0}={}){const p="POST",y=[`resolution=${d?"ignore":"merge"}-duplicates`];if(a!==void 0&&this.url.searchParams.set("on_conflict",a),this.headers.Prefer&&y.push(this.headers.Prefer),h&&y.push(`count=${h}`),g||y.push("missing=default"),this.headers.Prefer=y.join(","),Array.isArray(r)){const T=r.reduce((_,E)=>_.concat(Object.keys(E)),[]);if(T.length>0){const _=[...new Set(T)].map(E=>`"${E}"`);this.url.searchParams.set("columns",_.join(","))}}return new e.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:this.fetch,allowEmpty:!1})}update(r,{count:a}={}){const d="PATCH",h=[];return this.headers.Prefer&&h.push(this.headers.Prefer),a&&h.push(`count=${a}`),this.headers.Prefer=h.join(","),new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:this.fetch,allowEmpty:!1})}delete({count:r}={}){const a="DELETE",d=[];return r&&d.push(`count=${r}`),this.headers.Prefer&&d.unshift(this.headers.Prefer),this.headers.Prefer=d.join(","),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return ds.default=n,ds}var Bo={},Vo={},Qg;function WM(){return Qg||(Qg=1,Object.defineProperty(Vo,"__esModule",{value:!0}),Vo.version=void 0,Vo.version="0.0.0-automated"),Vo}var Xg;function ZM(){if(Xg)return Bo;Xg=1,Object.defineProperty(Bo,"__esModule",{value:!0}),Bo.DEFAULT_HEADERS=void 0;const t=WM();return Bo.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${t.version}`},Bo}var Wg;function jM(){if(Wg)return fs;Wg=1;var t=fs&&fs.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(fs,"__esModule",{value:!0});const e=t(dv()),n=t(lf()),s=ZM();class r{constructor(d,{headers:h={},schema:g,fetch:p}={}){this.url=d,this.headers=Object.assign(Object.assign({},s.DEFAULT_HEADERS),h),this.schemaName=g,this.fetch=p}from(d){const h=new URL(`${this.url}/${d}`);return new e.default(h,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(d){return new r(this.url,{headers:this.headers,schema:d,fetch:this.fetch})}rpc(d,h={},{head:g=!1,get:p=!1,count:y}={}){let T;const _=new URL(`${this.url}/rpc/${d}`);let E;g||p?(T=g?"HEAD":"GET",Object.entries(h).filter(([k,U])=>U!==void 0).map(([k,U])=>[k,Array.isArray(U)?`{${U.join(",")}}`:`${U}`]).forEach(([k,U])=>{_.searchParams.append(k,U)})):(T="POST",E=h);const w=Object.assign({},this.headers);return y&&(w.Prefer=`count=${y}`),new n.default({method:T,url:_,headers:w,schema:this.schemaName,body:E,fetch:this.fetch,allowEmpty:!1})}}return fs.default=r,fs}var Zg;function ek(){if(Zg)return st;Zg=1;var t=st&&st.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(st,"__esModule",{value:!0}),st.PostgrestError=st.PostgrestBuilder=st.PostgrestTransformBuilder=st.PostgrestFilterBuilder=st.PostgrestQueryBuilder=st.PostgrestClient=void 0;const e=t(jM());st.PostgrestClient=e.default;const n=t(dv());st.PostgrestQueryBuilder=n.default;const s=t(lf());st.PostgrestFilterBuilder=s.default;const r=t(fv());st.PostgrestTransformBuilder=r.default;const a=t(cv());st.PostgrestBuilder=a.default;const d=t(uv());return st.PostgrestError=d.default,st.default={PostgrestClient:e.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:r.default,PostgrestBuilder:a.default,PostgrestError:d.default},st}var tk=ek();const nk=Jc(tk),{PostgrestClient:ik,PostgrestQueryBuilder:m2,PostgrestFilterBuilder:g2,PostgrestTransformBuilder:y2,PostgrestBuilder:v2,PostgrestError:T2}=nk;class sk{static dynamicRequire(e){try{return typeof process<"u"&&process.versions&&process.versions.node&&typeof require<"u"?require(e):null}catch{return null}}static detectEnvironment(){var e,n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const s=parseInt(process.versions.node.split(".")[0]);if(s>=22)try{if(typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};const r=this.dynamicRequire("undici");if(r&&r.WebSocket)return{type:"native",constructor:r.WebSocket};throw new Error("undici not available")}catch{return{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:'Install the "ws" package or check your Node.js installation.'}}try{const r=this.dynamicRequire("ws");if(r)return{type:"ws",constructor:(n=r.WebSocket)!==null&&n!==void 0?n:r};throw new Error("ws package not available")}catch{return{type:"unsupported",error:`Node.js ${s} detected without WebSocket support.`,workaround:'Install the "ws" package: npm install ws'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const s=this.getWebSocketConstructor();return new s(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const ok="2.15.0",rk=`realtime-js/${ok}`,lk="1.0.0",Pc=1e4,ak=1e3,uk=100;var Jo;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Jo||(Jo={}));var Ze;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Ze||(Ze={}));var Jt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Jt||(Jt={}));var qc;(function(t){t.websocket="websocket"})(qc||(qc={}));var vi;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(vi||(vi={}));class ck{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,n,s)}_decodeBroadcast(e,n,s){const r=n.getUint8(1),a=n.getUint8(2);let d=this.HEADER_LENGTH+2;const h=s.decode(e.slice(d,d+r));d=d+r;const g=s.decode(e.slice(d,d+a));d=d+a;const p=JSON.parse(s.decode(e.slice(d,e.byteLength)));return{ref:null,topic:h,event:g,payload:p}}}class hv{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Be;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Be||(Be={}));const jg=(t,e,n={})=>{var s;const r=(s=n.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((a,d)=>(a[d]=fk(d,t,e,r),a),{})},fk=(t,e,n,s)=>{const r=e.find(h=>h.name===t),a=r==null?void 0:r.type,d=n[t];return a&&!s.includes(a)?pv(a,d):Oc(d)},pv=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return mk(e,n)}switch(t){case Be.bool:return dk(e);case Be.float4:case Be.float8:case Be.int2:case Be.int4:case Be.int8:case Be.numeric:case Be.oid:return hk(e);case Be.json:case Be.jsonb:return pk(e);case Be.timestamp:return gk(e);case Be.abstime:case Be.date:case Be.daterange:case Be.int4range:case Be.int8range:case Be.money:case Be.reltime:case Be.text:case Be.time:case Be.timestamptz:case Be.timetz:case Be.tsrange:case Be.tstzrange:return Oc(e);default:return Oc(e)}},Oc=t=>t,dk=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},hk=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},pk=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},mk=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,s=t[n];if(t[0]==="{"&&s==="}"){let a;const d=t.slice(1,n);try{a=JSON.parse("["+d+"]")}catch{a=d?d.split(","):[]}return a.map(h=>pv(e,h))}return t},gk=t=>typeof t=="string"?t.replace(" ","T"):t,mv=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class ac{constructor(e,n,s={},r=Pc){this.channel=e,this.event=n,this.payload=s,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var s;return this._hasReceived(e)&&n((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ey;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(ey||(ey={}));class Yo{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},r=>{const{onJoin:a,onLeave:d,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Yo.syncState(this.state,r,a,d),this.pendingDiffs.forEach(g=>{this.state=Yo.syncDiff(this.state,g,a,d)}),this.pendingDiffs=[],h()}),this.channel._on(s.diff,{},r=>{const{onJoin:a,onLeave:d,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=Yo.syncDiff(this.state,r,a,d),h())}),this.onJoin((r,a,d)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:a,newPresences:d})}),this.onLeave((r,a,d)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:a,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,s,r){const a=this.cloneDeep(e),d=this.transformState(n),h={},g={};return this.map(a,(p,y)=>{d[p]||(g[p]=y)}),this.map(d,(p,y)=>{const T=a[p];if(T){const _=y.map(U=>U.presence_ref),E=T.map(U=>U.presence_ref),w=y.filter(U=>E.indexOf(U.presence_ref)<0),k=T.filter(U=>_.indexOf(U.presence_ref)<0);w.length>0&&(h[p]=w),k.length>0&&(g[p]=k)}else h[p]=y}),this.syncDiff(a,{joins:h,leaves:g},s,r)}static syncDiff(e,n,s,r){const{joins:a,leaves:d}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return s||(s=()=>{}),r||(r=()=>{}),this.map(a,(h,g)=>{var p;const y=(p=e[h])!==null&&p!==void 0?p:[];if(e[h]=this.cloneDeep(g),y.length>0){const T=e[h].map(E=>E.presence_ref),_=y.filter(E=>T.indexOf(E.presence_ref)<0);e[h].unshift(..._)}s(h,y,g)}),this.map(d,(h,g)=>{let p=e[h];if(!p)return;const y=g.map(T=>T.presence_ref);p=p.filter(T=>y.indexOf(T.presence_ref)<0),e[h]=p,r(h,p,g),p.length===0&&delete e[h]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(s=>n(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,s)=>{const r=e[s];return"metas"in r?n[s]=r.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[s]=r,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ty;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(ty||(ty={}));var Ko;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Ko||(Ko={}));var vn;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(vn||(vn={}));class af{constructor(e,n={config:{}},s){this.topic=e,this.params=n,this.socket=s,this.bindings={},this.state=Ze.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new ac(this,Jt.join,this.params,this.timeout),this.rejoinTimer=new hv(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ze.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ze.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=Ze.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ze.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=Ze.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Jt.reply,{},(r,a)=>{this._trigger(this._replyEventName(a),r)}),this.presence=new Yo(this),this.broadcastEndpointURL=mv(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var s,r;if(this.socket.isConnected()||this.socket.connect(),this.state==Ze.closed){const{config:{broadcast:a,presence:d,private:h}}=this.params,g=(r=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(_=>_.filter))!==null&&r!==void 0?r:[],p=!!this.bindings[Ko.PRESENCE]&&this.bindings[Ko.PRESENCE].length>0,y={},T={broadcast:a,presence:Object.assign(Object.assign({},d),{enabled:p}),postgres_changes:g,private:h};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(_=>e==null?void 0:e(vn.CHANNEL_ERROR,_)),this._onClose(()=>e==null?void 0:e(vn.CLOSED)),this.updateJoinPayload(Object.assign({config:T},y)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:_})=>{var E;if(this.socket.setAuth(),_===void 0){e==null||e(vn.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,k=(E=w==null?void 0:w.length)!==null&&E!==void 0?E:0,U=[];for(let q=0;q<k;q++){const B=w[q],{filter:{event:M,schema:J,table:G,filter:X}}=B,j=_&&_[q];if(j&&j.event===M&&j.schema===J&&j.table===G&&j.filter===X)U.push(Object.assign(Object.assign({},B),{id:j.id}));else{this.unsubscribe(),this.state=Ze.errored,e==null||e(vn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=U,e&&e(vn.SUBSCRIBED);return}}).receive("error",_=>{this.state=Ze.errored,e==null||e(vn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(_).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(vn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,s){return this.state===Ze.joined&&e===Ko.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,s)}async send(e,n={}){var s,r;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:d}=e,g={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:d,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);return await((r=p.body)===null||r===void 0?void 0:r.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var d,h,g;const p=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((g=(h=(d=this.params)===null||d===void 0?void 0:d.config)===null||h===void 0?void 0:h.broadcast)===null||g===void 0)&&g.ack)&&a("ok"),p.receive("ok",()=>a("ok")),p.receive("error",()=>a("error")),p.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ze.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Jt.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(r=>{s=new ac(this,Jt.leave,{},e),s.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ze.closed,this.bindings={}}async _fetchWithTimeout(e,n,s){const r=new AbortController,a=setTimeout(()=>r.abort(),s),d=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:r.signal}));return clearTimeout(a),d}_push(e,n,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new ac(this,e,n,s);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>uk){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,s){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,s){var r,a;const d=e.toLocaleLowerCase(),{close:h,error:g,leave:p,join:y}=Jt;if(s&&[h,g,p,y].indexOf(d)>=0&&s!==this._joinRef())return;let _=this._onMessage(d,n,s);if(n&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(E=>{var w,k,U;return((w=E.filter)===null||w===void 0?void 0:w.event)==="*"||((U=(k=E.filter)===null||k===void 0?void 0:k.event)===null||U===void 0?void 0:U.toLocaleLowerCase())===d}).map(E=>E.callback(_,s)):(a=this.bindings[d])===null||a===void 0||a.filter(E=>{var w,k,U,q,B,M;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in E){const J=E.id,G=(w=E.filter)===null||w===void 0?void 0:w.event;return J&&((k=n.ids)===null||k===void 0?void 0:k.includes(J))&&(G==="*"||(G==null?void 0:G.toLocaleLowerCase())===((U=n.data)===null||U===void 0?void 0:U.type.toLocaleLowerCase()))}else{const J=(B=(q=E==null?void 0:E.filter)===null||q===void 0?void 0:q.event)===null||B===void 0?void 0:B.toLocaleLowerCase();return J==="*"||J===((M=n==null?void 0:n.event)===null||M===void 0?void 0:M.toLocaleLowerCase())}else return E.type.toLocaleLowerCase()===d}).map(E=>{if(typeof _=="object"&&"ids"in _){const w=_.data,{schema:k,table:U,commit_timestamp:q,type:B,errors:M}=w;_=Object.assign(Object.assign({},{schema:k,table:U,commit_timestamp:q,eventType:B,new:{},old:{},errors:M}),this._getPayloadRecords(w))}E.callback(_,s)})}_isClosed(){return this.state===Ze.closed}_isJoined(){return this.state===Ze.joined}_isJoining(){return this.state===Ze.joining}_isLeaving(){return this.state===Ze.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,s){const r=e.toLocaleLowerCase(),a={type:r,filter:n,callback:s};return this.bindings[r]?this.bindings[r].push(a):this.bindings[r]=[a],this}_off(e,n){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(r=>{var a;return!(((a=r.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===s&&af.isEqual(r.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const s in e)if(e[s]!==n[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Jt.close,{},e)}_onError(e){this._on(Jt.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ze.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=jg(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=jg(e.columns,e.old_record)),n}}const ny=()=>{},_l={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},yk=[1e3,2e3,5e3,1e4],vk=1e4,Tk=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class _k{constructor(e,n){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Pc,this.transport=null,this.heartbeatIntervalMs=_l.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ny,this.ref=0,this.reconnectTimer=null,this.logger=ny,this.conn=null,this.sendBuffer=[],this.serializer=new ck,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=r=>{let a;return r?a=r:typeof fetch>"u"?a=(...d)=>jo(async()=>{const{default:h}=await Promise.resolve().then(()=>Us);return{default:h}},void 0).then(({default:h})=>h(...d)).catch(h=>{throw new Error(`Failed to load @supabase/node-fetch: ${h.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...d)=>a(...d)},!(!((s=n==null?void 0:n.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${qc.websocket}`,this.httpEndpoint=mv(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=sk.createWebSocket(this.endpointURL())}catch(e){throw this._setConnectionState("disconnected"),new Error(`WebSocket not available: ${e.message}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:lk}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,s){this.logger(e,n,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Jo.connecting:return vi.Connecting;case Jo.open:return vi.Open;case Jo.closing:return vi.Closing;default:return vi.Closed}}isConnected(){return this.connectionState()===vi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const s=`realtime:${e}`,r=this.getChannels().find(a=>a.topic===s);if(r)return r;{const a=new af(`realtime:${e}`,n,this);return this.channels.push(a),a}}push(e){const{topic:n,event:s,payload:r,ref:a}=e,d=()=>{this.encode(e,h=>{var g;(g=this.conn)===null||g===void 0||g.send(h)})};this.log("push",`${n} ${s} (${a})`,r),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(ak,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},_l.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{n.topic==="phoenix"&&n.event==="phx_reply"&&this.heartbeatCallback(n.payload.status==="ok"?"ok":"error"),n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:r,payload:a,ref:d}=n,h=d?`(${d})`:"",g=a.status||"";this.log("receive",`${g} ${s} ${r} ${h}`.trim(),a),this.channels.filter(p=>p._isMember(s)).forEach(p=>p._trigger(r,a,d)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Jt.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const s=e.match(/\?/)?"&":"?",r=new URLSearchParams(n);return`${e}${s}${r}`}_workerObjectUrl(e){let n;if(e)n=e;else{const s=new Blob([Tk],{type:"application/javascript"});n=URL.createObjectURL(s)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const r={access_token:n,version:rk};n&&s.updateJoinPayload(r),s.joinedOnce&&s._isJoined()&&s._push(Jt.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(n)}catch(r){this.log("error",`error in ${e} callback`,r)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new hv(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},_l.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,s,r,a,d,h,g,p;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(s=e==null?void 0:e.timeout)!==null&&s!==void 0?s:Pc,this.heartbeatIntervalMs=(r=e==null?void 0:e.heartbeatIntervalMs)!==null&&r!==void 0?r:_l.HEARTBEAT_INTERVAL,this.worker=(a=e==null?void 0:e.worker)!==null&&a!==void 0?a:!1,this.accessToken=(d=e==null?void 0:e.accessToken)!==null&&d!==void 0?d:null,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=e==null?void 0:e.reconnectAfterMs)!==null&&h!==void 0?h:y=>yk[y-1]||vk,this.encode=(g=e==null?void 0:e.encode)!==null&&g!==void 0?g:(y,T)=>T(JSON.stringify(y)),this.decode=(p=e==null?void 0:e.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class uf extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ot(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Sk extends uf{constructor(e,n,s){super(e),this.name="StorageApiError",this.status=n,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Bc extends uf{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var Ck=function(t,e,n,s){function r(a){return a instanceof n?a:new n(function(d){d(a)})}return new(n||(n=Promise))(function(a,d){function h(y){try{p(s.next(y))}catch(T){d(T)}}function g(y){try{p(s.throw(y))}catch(T){d(T)}}function p(y){y.done?a(y.value):r(y.value).then(h,g)}p((s=s.apply(t,e||[])).next())})};const gv=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>jo(async()=>{const{default:s}=await Promise.resolve().then(()=>Us);return{default:s}},void 0).then(({default:s})=>s(...n)):e=fetch,(...n)=>e(...n)},xk=()=>Ck(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield jo(()=>Promise.resolve().then(()=>Us),void 0)).Response:Response}),Vc=t=>{if(Array.isArray(t))return t.map(n=>Vc(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,s])=>{const r=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[r]=Vc(s)}),e},Ek=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var wi=function(t,e,n,s){function r(a){return a instanceof n?a:new n(function(d){d(a)})}return new(n||(n=Promise))(function(a,d){function h(y){try{p(s.next(y))}catch(T){d(T)}}function g(y){try{p(s.throw(y))}catch(T){d(T)}}function p(y){y.done?a(y.value):r(y.value).then(h,g)}p((s=s.apply(t,e||[])).next())})};const uc=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),wk=(t,e,n)=>wi(void 0,void 0,void 0,function*(){const s=yield xk();t instanceof s&&!(n!=null&&n.noResolveJson)?t.json().then(r=>{const a=t.status||500,d=(r==null?void 0:r.statusCode)||a+"";e(new Sk(uc(r),a,d))}).catch(r=>{e(new Bc(uc(r),r))}):e(new Bc(uc(t),t))}),bk=(t,e,n,s)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!s?r:(Ek(s)?(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r.body=JSON.stringify(s)):r.body=s,Object.assign(Object.assign({},r),n))};function er(t,e,n,s,r,a){return wi(this,void 0,void 0,function*(){return new Promise((d,h)=>{t(n,bk(e,s,r,a)).then(g=>{if(!g.ok)throw g;return s!=null&&s.noResolveJson?g:g.json()}).then(g=>d(g)).catch(g=>wk(g,h,s))})})}function Dl(t,e,n,s){return wi(this,void 0,void 0,function*(){return er(t,"GET",e,n,s)})}function Tn(t,e,n,s,r){return wi(this,void 0,void 0,function*(){return er(t,"POST",e,s,r,n)})}function Hc(t,e,n,s,r){return wi(this,void 0,void 0,function*(){return er(t,"PUT",e,s,r,n)})}function Ak(t,e,n,s){return wi(this,void 0,void 0,function*(){return er(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),s)})}function yv(t,e,n,s,r){return wi(this,void 0,void 0,function*(){return er(t,"DELETE",e,s,r,n)})}var Tt=function(t,e,n,s){function r(a){return a instanceof n?a:new n(function(d){d(a)})}return new(n||(n=Promise))(function(a,d){function h(y){try{p(s.next(y))}catch(T){d(T)}}function g(y){try{p(s.throw(y))}catch(T){d(T)}}function p(y){y.done?a(y.value):r(y.value).then(h,g)}p((s=s.apply(t,e||[])).next())})};const Rk={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},iy={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Mk{constructor(e,n={},s,r){this.url=e,this.headers=n,this.bucketId=s,this.fetch=gv(r)}uploadOrUpdate(e,n,s,r){return Tt(this,void 0,void 0,function*(){try{let a;const d=Object.assign(Object.assign({},iy),r);let h=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(d.upsert)});const g=d.metadata;typeof Blob<"u"&&s instanceof Blob?(a=new FormData,a.append("cacheControl",d.cacheControl),g&&a.append("metadata",this.encodeMetadata(g)),a.append("",s)):typeof FormData<"u"&&s instanceof FormData?(a=s,a.append("cacheControl",d.cacheControl),g&&a.append("metadata",this.encodeMetadata(g))):(a=s,h["cache-control"]=`max-age=${d.cacheControl}`,h["content-type"]=d.contentType,g&&(h["x-metadata"]=this.toBase64(this.encodeMetadata(g)))),r!=null&&r.headers&&(h=Object.assign(Object.assign({},h),r.headers));const p=this._removeEmptyFolders(n),y=this._getFinalPath(p),T=yield(e=="PUT"?Hc:Tn)(this.fetch,`${this.url}/object/${y}`,a,Object.assign({headers:h},d!=null&&d.duplex?{duplex:d.duplex}:{}));return{data:{path:p,id:T.Id,fullPath:T.Key},error:null}}catch(a){if(ot(a))return{data:null,error:a};throw a}})}upload(e,n,s){return Tt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,s)})}uploadToSignedUrl(e,n,s,r){return Tt(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),d=this._getFinalPath(a),h=new URL(this.url+`/object/upload/sign/${d}`);h.searchParams.set("token",n);try{let g;const p=Object.assign({upsert:iy.upsert},r),y=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&s instanceof Blob?(g=new FormData,g.append("cacheControl",p.cacheControl),g.append("",s)):typeof FormData<"u"&&s instanceof FormData?(g=s,g.append("cacheControl",p.cacheControl)):(g=s,y["cache-control"]=`max-age=${p.cacheControl}`,y["content-type"]=p.contentType);const T=yield Hc(this.fetch,h.toString(),g,{headers:y});return{data:{path:a,fullPath:T.Key},error:null}}catch(g){if(ot(g))return{data:null,error:g};throw g}})}createSignedUploadUrl(e,n){return Tt(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const r=Object.assign({},this.headers);n!=null&&n.upsert&&(r["x-upsert"]="true");const a=yield Tn(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:r}),d=new URL(this.url+a.url),h=d.searchParams.get("token");if(!h)throw new uf("No token returned by API");return{data:{signedUrl:d.toString(),path:e,token:h},error:null}}catch(s){if(ot(s))return{data:null,error:s};throw s}})}update(e,n,s){return Tt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,s)})}move(e,n,s){return Tt(this,void 0,void 0,function*(){try{return{data:yield Tn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(ot(r))return{data:null,error:r};throw r}})}copy(e,n,s){return Tt(this,void 0,void 0,function*(){try{return{data:{path:(yield Tn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(ot(r))return{data:null,error:r};throw r}})}createSignedUrl(e,n,s){return Tt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),a=yield Tn(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:n},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const d=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${d}`)},{data:a,error:null}}catch(r){if(ot(r))return{data:null,error:r};throw r}})}createSignedUrls(e,n,s){return Tt(this,void 0,void 0,function*(){try{const r=yield Tn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),a=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:r.map(d=>Object.assign(Object.assign({},d),{signedUrl:d.signedURL?encodeURI(`${this.url}${d.signedURL}${a}`):null})),error:null}}catch(r){if(ot(r))return{data:null,error:r};throw r}})}download(e,n){return Tt(this,void 0,void 0,function*(){const r=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),d=a?`?${a}`:"";try{const h=this._getFinalPath(e);return{data:yield(yield Dl(this.fetch,`${this.url}/${r}/${h}${d}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(h){if(ot(h))return{data:null,error:h};throw h}})}info(e){return Tt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const s=yield Dl(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Vc(s),error:null}}catch(s){if(ot(s))return{data:null,error:s};throw s}})}exists(e){return Tt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield Ak(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(ot(s)&&s instanceof Bc){const r=s.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,n){const s=this._getFinalPath(e),r=[],a=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";a!==""&&r.push(a);const h=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",g=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});g!==""&&r.push(g);let p=r.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${h}/public/${s}${p}`)}}}remove(e){return Tt(this,void 0,void 0,function*(){try{return{data:yield yv(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(ot(n))return{data:null,error:n};throw n}})}list(e,n,s){return Tt(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},Rk),n),{prefix:e||""});return{data:yield Tn(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},s),error:null}}catch(r){if(ot(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const kk="2.10.4",Nk={"X-Client-Info":`storage-js/${kk}`};var gs=function(t,e,n,s){function r(a){return a instanceof n?a:new n(function(d){d(a)})}return new(n||(n=Promise))(function(a,d){function h(y){try{p(s.next(y))}catch(T){d(T)}}function g(y){try{p(s.throw(y))}catch(T){d(T)}}function p(y){y.done?a(y.value):r(y.value).then(h,g)}p((s=s.apply(t,e||[])).next())})};class Dk{constructor(e,n={},s,r){const a=new URL(e);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href,this.headers=Object.assign(Object.assign({},Nk),n),this.fetch=gv(s)}listBuckets(){return gs(this,void 0,void 0,function*(){try{return{data:yield Dl(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(ot(e))return{data:null,error:e};throw e}})}getBucket(e){return gs(this,void 0,void 0,function*(){try{return{data:yield Dl(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(ot(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return gs(this,void 0,void 0,function*(){try{return{data:yield Tn(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(ot(s))return{data:null,error:s};throw s}})}updateBucket(e,n){return gs(this,void 0,void 0,function*(){try{return{data:yield Hc(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(ot(s))return{data:null,error:s};throw s}})}emptyBucket(e){return gs(this,void 0,void 0,function*(){try{return{data:yield Tn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(ot(n))return{data:null,error:n};throw n}})}deleteBucket(e){return gs(this,void 0,void 0,function*(){try{return{data:yield yv(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(ot(n))return{data:null,error:n};throw n}})}}class Ik extends Dk{constructor(e,n={},s,r){super(e,n,s,r)}from(e){return new Mk(this.url,this.headers,e,this.fetch)}}const Uk="2.54.0";let Go="";typeof Deno<"u"?Go="deno":typeof document<"u"?Go="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Go="react-native":Go="node";const Lk={"X-Client-Info":`supabase-js-${Go}/${Uk}`},Pk={headers:Lk},qk={schema:"public"},Ok={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Bk={};var Vk=function(t,e,n,s){function r(a){return a instanceof n?a:new n(function(d){d(a)})}return new(n||(n=Promise))(function(a,d){function h(y){try{p(s.next(y))}catch(T){d(T)}}function g(y){try{p(s.throw(y))}catch(T){d(T)}}function p(y){y.done?a(y.value):r(y.value).then(h,g)}p((s=s.apply(t,e||[])).next())})};const Hk=t=>{let e;return t?e=t:typeof fetch>"u"?e=lv:e=fetch,(...n)=>e(...n)},Gk=()=>typeof Headers>"u"?av:Headers,zk=(t,e,n)=>{const s=Hk(n),r=Gk();return(a,d)=>Vk(void 0,void 0,void 0,function*(){var h;const g=(h=yield e())!==null&&h!==void 0?h:t;let p=new r(d==null?void 0:d.headers);return p.has("apikey")||p.set("apikey",t),p.has("Authorization")||p.set("Authorization",`Bearer ${g}`),s(a,Object.assign(Object.assign({},d),{headers:p}))})};var $k=function(t,e,n,s){function r(a){return a instanceof n?a:new n(function(d){d(a)})}return new(n||(n=Promise))(function(a,d){function h(y){try{p(s.next(y))}catch(T){d(T)}}function g(y){try{p(s.throw(y))}catch(T){d(T)}}function p(y){y.done?a(y.value):r(y.value).then(h,g)}p((s=s.apply(t,e||[])).next())})};function Fk(t){return t.endsWith("/")?t:t+"/"}function Jk(t,e){var n,s;const{db:r,auth:a,realtime:d,global:h}=t,{db:g,auth:p,realtime:y,global:T}=e,_={db:Object.assign(Object.assign({},g),r),auth:Object.assign(Object.assign({},p),a),realtime:Object.assign(Object.assign({},y),d),storage:{},global:Object.assign(Object.assign(Object.assign({},T),h),{headers:Object.assign(Object.assign({},(n=T==null?void 0:T.headers)!==null&&n!==void 0?n:{}),(s=h==null?void 0:h.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>$k(this,void 0,void 0,function*(){return""})};return t.accessToken?_.accessToken=t.accessToken:delete _.accessToken,_}const vv="2.71.1",Ss=30*1e3,Gc=3,cc=Gc*Ss,Yk="http://localhost:9999",Kk="supabase.auth.token",Qk={"X-Client-Info":`gotrue-js/${vv}`},zc="X-Supabase-Api-Version",Tv={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Xk=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Wk=600*1e3;class cf extends Error{constructor(e,n,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=s}}function ye(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Zk extends cf{constructor(e,n,s){super(e,n,s),this.name="AuthApiError",this.status=n,this.code=s}}function jk(t){return ye(t)&&t.name==="AuthApiError"}class _v extends cf{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Xn extends cf{constructor(e,n,s,r){super(e,s,r),this.name=n,this.status=s}}class Kn extends Xn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function eN(t){return ye(t)&&t.name==="AuthSessionMissingError"}class Sl extends Xn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Cl extends Xn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class xl extends Xn{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function tN(t){return ye(t)&&t.name==="AuthImplicitGrantRedirectError"}class sy extends Xn{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class $c extends Xn{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function fc(t){return ye(t)&&t.name==="AuthRetryableFetchError"}class oy extends Xn{constructor(e,n,s){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=s}}class Fc extends Xn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Il="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ry=` 	
\r=`.split(""),nN=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<ry.length;e+=1)t[ry[e].charCodeAt(0)]=-2;for(let e=0;e<Il.length;e+=1)t[Il[e].charCodeAt(0)]=e;return t})();function ly(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;n(Il[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;n(Il[s]),e.queuedBits-=6}}function Sv(t,e,n){const s=nN[t];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function ay(t){const e=[],n=d=>{e.push(String.fromCodePoint(d))},s={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},a=d=>{oN(d,s,n)};for(let d=0;d<t.length;d+=1)Sv(t.charCodeAt(d),r,a);return e.join("")}function iN(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function sN(t,e){for(let n=0;n<t.length;n+=1){let s=t.charCodeAt(n);if(s>55295&&s<=56319){const r=(s-55296)*1024&65535;s=(t.charCodeAt(n+1)-56320&65535|r)+65536,n+=1}iN(s,e)}}function oN(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let s=1;s<6;s+=1)if((t>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function rN(t){const e=[],n={queue:0,queuedBits:0},s=r=>{e.push(r)};for(let r=0;r<t.length;r+=1)Sv(t.charCodeAt(r),n,s);return new Uint8Array(e)}function lN(t){const e=[];return sN(t,n=>e.push(n)),new Uint8Array(e)}function aN(t){const e=[],n={queue:0,queuedBits:0},s=r=>{e.push(r)};return t.forEach(r=>ly(r,n,s)),ly(null,n,s),e.join("")}function uN(t){return Math.round(Date.now()/1e3)+t}function cN(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const $t=()=>typeof window<"u"&&typeof document<"u",mi={tested:!1,writable:!1},Cv=()=>{if(!$t())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(mi.tested)return mi.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),mi.tested=!0,mi.writable=!0}catch{mi.tested=!0,mi.writable=!1}return mi.writable};function fN(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((r,a)=>{e[a]=r})}catch{}return n.searchParams.forEach((s,r)=>{e[r]=s}),e}const xv=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>jo(async()=>{const{default:s}=await Promise.resolve().then(()=>Us);return{default:s}},void 0).then(({default:s})=>s(...n)):e=fetch,(...n)=>e(...n)},dN=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Cs=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},gi=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Yn=async(t,e)=>{await t.removeItem(e)};class Ol{constructor(){this.promise=new Ol.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Ol.promiseConstructor=Promise;function dc(t){const e=t.split(".");if(e.length!==3)throw new Fc("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!Xk.test(e[s]))throw new Fc("JWT not in base64url format");return{header:JSON.parse(ay(e[0])),payload:JSON.parse(ay(e[1])),signature:rN(e[2]),raw:{header:e[0],payload:e[1]}}}async function hN(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function pN(t,e){return new Promise((s,r)=>{(async()=>{for(let a=0;a<1/0;a++)try{const d=await t(a);if(!e(a,null,d)){s(d);return}}catch(d){if(!e(a,d)){r(d);return}}})()})}function mN(t){return("0"+t.toString(16)).substr(-2)}function gN(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=n.length;let r="";for(let a=0;a<56;a++)r+=n.charAt(Math.floor(Math.random()*s));return r}return crypto.getRandomValues(e),Array.from(e,mN).join("")}async function yN(t){const n=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",n),r=new Uint8Array(s);return Array.from(r).map(a=>String.fromCharCode(a)).join("")}async function vN(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await yN(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ys(t,e,n=!1){const s=gN();let r=s;n&&(r+="/PASSWORD_RECOVERY"),await Cs(t,`${e}-code-verifier`,r);const a=await vN(s);return[a,s===a?"plain":"s256"]}const TN=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function _N(t){const e=t.headers.get(zc);if(!e||!e.match(TN))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function SN(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function CN(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const xN=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function vs(t){if(!xN.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function hc(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const s=n.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function uy(t){return JSON.parse(JSON.stringify(t))}var EN=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(n[s[r]]=t[s[r]]);return n};const yi=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),wN=[502,503,504];async function cy(t){var e;if(!dN(t))throw new $c(yi(t),0);if(wN.includes(t.status))throw new $c(yi(t),t.status);let n;try{n=await t.json()}catch(a){throw new _v(yi(a),a)}let s;const r=_N(t);if(r&&r.getTime()>=Tv["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?s=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(s=n.error_code),s){if(s==="weak_password")throw new oy(yi(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new Kn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,d)=>a&&typeof d=="string",!0))throw new oy(yi(n),t.status,n.weak_password.reasons);throw new Zk(yi(n),t.status||500,s)}const bN=(t,e,n,s)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(s),Object.assign(Object.assign({},r),n))};async function xe(t,e,n,s){var r;const a=Object.assign({},s==null?void 0:s.headers);a[zc]||(a[zc]=Tv["2024-01-01"].name),s!=null&&s.jwt&&(a.Authorization=`Bearer ${s.jwt}`);const d=(r=s==null?void 0:s.query)!==null&&r!==void 0?r:{};s!=null&&s.redirectTo&&(d.redirect_to=s.redirectTo);const h=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",g=await AN(t,e,n+h,{headers:a,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(g):{data:Object.assign({},g),error:null}}async function AN(t,e,n,s,r,a){const d=bN(e,s,r,a);let h;try{h=await t(n,Object.assign({},d))}catch(g){throw console.error(g),new $c(yi(g),0)}if(h.ok||await cy(h),s!=null&&s.noResolveJson)return h;try{return await h.json()}catch(g){await cy(g)}}function yn(t){var e;let n=null;NN(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=uN(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:s},error:null}}function fy(t){const e=yn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,s)=>n&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Qn(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function RN(t){return{data:t,error:null}}function MN(t){const{action_link:e,email_otp:n,hashed_token:s,redirect_to:r,verification_type:a}=t,d=EN(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:e,email_otp:n,hashed_token:s,redirect_to:r,verification_type:a},g=Object.assign({},d);return{data:{properties:h,user:g},error:null}}function kN(t){return t}function NN(t){return t.access_token&&t.refresh_token&&t.expires_in}const pc=["global","local","others"];var DN=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(n[s[r]]=t[s[r]]);return n};class IN{constructor({url:e="",headers:n={},fetch:s}){this.url=e,this.headers=n,this.fetch=xv(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=pc[0]){if(pc.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${pc.join(", ")}`);try{return await xe(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(ye(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,n={}){try{return await xe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Qn})}catch(s){if(ye(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:n}=e,s=DN(e,["options"]),r=Object.assign(Object.assign({},s),n);return"newEmail"in s&&(r.new_email=s==null?void 0:s.newEmail,delete r.newEmail),await xe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:MN,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(ye(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await xe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Qn})}catch(n){if(ye(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,s,r,a,d,h,g;try{const p={nextPage:null,lastPage:0,total:0},y=await xe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(a=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&a!==void 0?a:""},xform:kN});if(y.error)throw y.error;const T=await y.json(),_=(d=y.headers.get("x-total-count"))!==null&&d!==void 0?d:0,E=(g=(h=y.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&g!==void 0?g:[];return E.length>0&&(E.forEach(w=>{const k=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),U=JSON.parse(w.split(";")[1].split("=")[1]);p[`${U}Page`]=k}),p.total=parseInt(_)),{data:Object.assign(Object.assign({},T),p),error:null}}catch(p){if(ye(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){vs(e);try{return await xe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Qn})}catch(n){if(ye(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){vs(e);try{return await xe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Qn})}catch(s){if(ye(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,n=!1){vs(e);try{return await xe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Qn})}catch(s){if(ye(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){vs(e.userId);try{const{data:n,error:s}=await xe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:n,error:s}}catch(n){if(ye(n))return{data:null,error:n};throw n}}async _deleteFactor(e){vs(e.userId),vs(e.id);try{return{data:await xe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(ye(n))return{data:null,error:n};throw n}}}function dy(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function UN(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ts={debug:!!(globalThis&&Cv()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ev extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class LN extends Ev{}async function PN(t,e,n){Ts.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),Ts.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async r=>{if(r){Ts.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,r.name);try{return await n()}finally{Ts.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,r.name)}}else{if(e===0)throw Ts.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new LN(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Ts.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}UN();const qN={url:Yk,storageKey:Kk,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Qk,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function hy(t,e,n){return await n()}const _s={};class Qo{constructor(e){var n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Qo.nextInstanceID,Qo.nextInstanceID+=1,this.instanceID>0&&$t()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},qN),e);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new IN({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=xv(r.fetch),this.lock=r.lock||hy,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:$t()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=PN:this.lock=hy,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:Cv()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=dy(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=dy(this.memoryStorage)),$t()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}get jwks(){var e,n;return(n=(e=_s[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){_s[this.storageKey]=Object.assign(Object.assign({},_s[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=_s[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){_s[this.storageKey]=Object.assign(Object.assign({},_s[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${vv}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=fN(window.location.href);let s="none";if(this._isImplicitGrantCallback(n)?s="implicit":await this._isPKCECallback(n)&&(s="pkce"),$t()&&this.detectSessionInUrl&&s!=="none"){const{data:r,error:a}=await this._getSessionFromURL(n,s);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),tN(a)){const g=(e=a.details)===null||e===void 0?void 0:e.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:d,redirectType:h}=r;return this._debug("#_initialize()","detected session in URL",d,"redirect type",h),await this._saveSession(d),setTimeout(async()=>{h==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return ye(n)?{error:n}:{error:new _v("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,s,r;try{const a=await xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:yn}),{data:d,error:h}=a;if(h||!d)return{data:{user:null,session:null},error:h};const g=d.session,p=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:p,session:g},error:null}}catch(a){if(ye(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var n,s,r;try{let a;if("email"in e){const{email:y,password:T,options:_}=e;let E=null,w=null;this.flowType==="pkce"&&([E,w]=await ys(this.storage,this.storageKey)),a=await xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_==null?void 0:_.emailRedirectTo,body:{email:y,password:T,data:(n=_==null?void 0:_.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken},code_challenge:E,code_challenge_method:w},xform:yn})}else if("phone"in e){const{phone:y,password:T,options:_}=e;a=await xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:T,data:(s=_==null?void 0:_.data)!==null&&s!==void 0?s:{},channel:(r=_==null?void 0:_.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken}},xform:yn})}else throw new Cl("You must provide either an email or phone number and a password");const{data:d,error:h}=a;if(h||!d)return{data:{user:null,session:null},error:h};const g=d.session,p=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:p,session:g},error:null}}catch(a){if(ye(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let n;if("email"in e){const{email:a,password:d,options:h}=e;n=await xe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:d,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:fy})}else if("phone"in e){const{phone:a,password:d,options:h}=e;n=await xe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:d,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:fy})}else throw new Cl("You must provide either an email or phone number and a password");const{data:s,error:r}=n;return r?{data:{user:null,session:null},error:r}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Sl}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:r})}catch(n){if(ye(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,s,r,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,s,r,a,d,h,g,p,y,T,_,E;let w,k;if("message"in e)w=e.message,k=e.signature;else{const{chain:U,wallet:q,statement:B,options:M}=e;let J;if($t())if(typeof q=="object")J=q;else{const X=window;if("solana"in X&&typeof X.solana=="object"&&("signIn"in X.solana&&typeof X.solana.signIn=="function"||"signMessage"in X.solana&&typeof X.solana.signMessage=="function"))J=X.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof q!="object"||!(M!=null&&M.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");J=q}const G=new URL((n=M==null?void 0:M.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in J&&J.signIn){const X=await J.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},M==null?void 0:M.signInWithSolana),{version:"1",domain:G.host,uri:G.href}),B?{statement:B}:null));let j;if(Array.isArray(X)&&X[0]&&typeof X[0]=="object")j=X[0];else if(X&&typeof X=="object"&&"signedMessage"in X&&"signature"in X)j=X;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in j&&"signature"in j&&(typeof j.signedMessage=="string"||j.signedMessage instanceof Uint8Array)&&j.signature instanceof Uint8Array)w=typeof j.signedMessage=="string"?j.signedMessage:new TextDecoder().decode(j.signedMessage),k=j.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in J)||typeof J.signMessage!="function"||!("publicKey"in J)||typeof J!="object"||!J.publicKey||!("toBase58"in J.publicKey)||typeof J.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${G.host} wants you to sign in with your Solana account:`,J.publicKey.toBase58(),...B?["",B,""]:[""],"Version: 1",`URI: ${G.href}`,`Issued At: ${(r=(s=M==null?void 0:M.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((a=M==null?void 0:M.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${M.signInWithSolana.notBefore}`]:[],...!((d=M==null?void 0:M.signInWithSolana)===null||d===void 0)&&d.expirationTime?[`Expiration Time: ${M.signInWithSolana.expirationTime}`]:[],...!((h=M==null?void 0:M.signInWithSolana)===null||h===void 0)&&h.chainId?[`Chain ID: ${M.signInWithSolana.chainId}`]:[],...!((g=M==null?void 0:M.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${M.signInWithSolana.nonce}`]:[],...!((p=M==null?void 0:M.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${M.signInWithSolana.requestId}`]:[],...!((T=(y=M==null?void 0:M.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||T===void 0)&&T.length?["Resources",...M.signInWithSolana.resources.map(j=>`- ${j}`)]:[]].join(`
`);const X=await J.signMessage(new TextEncoder().encode(w),"utf8");if(!X||!(X instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");k=X}}try{const{data:U,error:q}=await xe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:aN(k)},!((_=e.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(E=e.options)===null||E===void 0?void 0:E.captchaToken}}:null),xform:yn});if(q)throw q;return!U||!U.session||!U.user?{data:{user:null,session:null},error:new Sl}:(U.session&&(await this._saveSession(U.session),await this._notifyAllSubscribers("SIGNED_IN",U.session)),{data:Object.assign({},U),error:q})}catch(U){if(ye(U))return{data:{user:null,session:null},error:U};throw U}}async _exchangeCodeForSession(e){const n=await gi(this.storage,`${this.storageKey}-code-verifier`),[s,r]=(n??"").split("/");try{const{data:a,error:d}=await xe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:yn});if(await Yn(this.storage,`${this.storageKey}-code-verifier`),d)throw d;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Sl}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:r??null}),error:d})}catch(a){if(ye(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:n,provider:s,token:r,access_token:a,nonce:d}=e,h=await xe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:r,access_token:a,nonce:d,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:yn}),{data:g,error:p}=h;return p?{data:{user:null,session:null},error:p}:!g||!g.session||!g.user?{data:{user:null,session:null},error:new Sl}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:g,error:p})}catch(n){if(ye(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,s,r,a,d;try{if("email"in e){const{email:h,options:g}=e;let p=null,y=null;this.flowType==="pkce"&&([p,y]=await ys(this.storage,this.storageKey));const{error:T}=await xe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(n=g==null?void 0:g.data)!==null&&n!==void 0?n:{},create_user:(s=g==null?void 0:g.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:p,code_challenge_method:y},redirectTo:g==null?void 0:g.emailRedirectTo});return{data:{user:null,session:null},error:T}}if("phone"in e){const{phone:h,options:g}=e,{data:p,error:y}=await xe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(r=g==null?void 0:g.data)!==null&&r!==void 0?r:{},create_user:(a=g==null?void 0:g.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},channel:(d=g==null?void 0:g.channel)!==null&&d!==void 0?d:"sms"}});return{data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:y}}throw new Cl("You must provide either an email or phone number.")}catch(h){if(ye(h))return{data:{user:null,session:null},error:h};throw h}}async verifyOtp(e){var n,s;try{let r,a;"options"in e&&(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo,a=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:d,error:h}=await xe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:r,xform:yn});if(h)throw h;if(!d)throw new Error("An error occurred on token verification.");const g=d.session,p=d.user;return g!=null&&g.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),{data:{user:p,session:g},error:null}}catch(r){if(ye(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var n,s,r;try{let a=null,d=null;return this.flowType==="pkce"&&([a,d]=await ys(this.storage,this.storageKey)),await xe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&s!==void 0?s:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:d}),headers:this.headers,xform:RN})}catch(a){if(ye(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:s}=e;if(s)throw s;if(!n)throw new Kn;const{error:r}=await xe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(ye(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:s,type:r,options:a}=e,{error:d}=await xe(this.fetch,"POST",n,{headers:this.headers,body:{email:s,type:r,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:d}}else if("phone"in e){const{phone:s,type:r,options:a}=e,{data:d,error:h}=await xe(this.fetch,"POST",n,{headers:this.headers,body:{phone:s,type:r,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:h}}throw new Cl("You must provide either an email or phone number and a type")}catch(n){if(ye(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await s,await n()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=n();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await gi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<cc:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const d=await gi(this.userStorage,this.storageKey+"-user");d!=null&&d.user?e.user=d.user:e.user=hc()}if(this.storage.isServer&&e.user){let d=this.suppressGetSessionWarning;e=new Proxy(e,{get:(g,p,y)=>(!d&&p==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),d=!0,this.suppressGetSessionWarning=!0),Reflect.get(g,p,y))})}return{data:{session:e},error:null}}const{session:r,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await xe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Qn}):await this._useSession(async n=>{var s,r,a;const{data:d,error:h}=n;if(h)throw h;return!(!((s=d.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Kn}:await xe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(r=d.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:void 0,xform:Qn})})}catch(n){if(ye(n))return eN(n)&&(await this._removeSession(),await Yn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async s=>{const{data:r,error:a}=s;if(a)throw a;if(!r.session)throw new Kn;const d=r.session;let h=null,g=null;this.flowType==="pkce"&&e.email!=null&&([h,g]=await ys(this.storage,this.storageKey));const{data:p,error:y}=await xe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:h,code_challenge_method:g}),jwt:d.access_token,xform:Qn});if(y)throw y;return d.user=p.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),{data:{user:d.user},error:null}})}catch(s){if(ye(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Kn;const n=Date.now()/1e3;let s=n,r=!0,a=null;const{payload:d}=dc(e.access_token);if(d.exp&&(s=d.exp,r=s<=n),r){const{session:h,error:g}=await this._callRefreshToken(e.refresh_token);if(g)return{data:{user:null,session:null},error:g};if(!h)return{data:{user:null,session:null},error:null};a=h}else{const{data:h,error:g}=await this._getUser(e.access_token);if(g)throw g;a={access_token:e.access_token,refresh_token:e.refresh_token,user:h.user,token_type:"bearer",expires_in:s-n,expires_at:s},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(n){if(ye(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var s;if(!e){const{data:d,error:h}=n;if(h)throw h;e=(s=d.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new Kn;const{session:r,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(ye(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!$t())throw new xl("No browser detected.");if(e.error||e.error_description||e.error_code)throw new xl(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new sy("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new xl("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new sy("No code detected.");const{data:B,error:M}=await this._exchangeCodeForSession(e.code);if(M)throw M;const J=new URL(window.location.href);return J.searchParams.delete("code"),window.history.replaceState(window.history.state,"",J.toString()),{data:{session:B.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:r,access_token:a,refresh_token:d,expires_in:h,expires_at:g,token_type:p}=e;if(!a||!h||!d||!p)throw new xl("No session defined in URL");const y=Math.round(Date.now()/1e3),T=parseInt(h);let _=y+T;g&&(_=parseInt(g));const E=_-y;E*1e3<=Ss&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${E}s, should have been closer to ${T}s`);const w=_-T;y-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,_,y):y-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,_,y);const{data:k,error:U}=await this._getUser(a);if(U)throw U;const q={provider_token:s,provider_refresh_token:r,access_token:a,expires_in:T,expires_at:_,refresh_token:d,token_type:p,user:k.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:q,redirectType:e.type},error:null}}catch(s){if(ye(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await gi(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var s;const{data:r,error:a}=n;if(a)return{error:a};const d=(s=r.session)===null||s===void 0?void 0:s.access_token;if(d){const{error:h}=await this.admin.signOut(d,e);if(h&&!(jk(h)&&(h.status===404||h.status===401||h.status===403)))return{error:h}}return e!=="others"&&(await this._removeSession(),await Yn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=cN(),s={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async n=>{var s,r;try{const{data:{session:a},error:d}=n;if(d)throw d;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,n={}){let s=null,r=null;this.flowType==="pkce"&&([s,r]=await ys(this.storage,this.storageKey,!0));try{return await xe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:r,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(ye(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:n,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(ye(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:s,error:r}=await this._useSession(async a=>{var d,h,g,p,y;const{data:T,error:_}=a;if(_)throw _;const E=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(d=e.options)===null||d===void 0?void 0:d.redirectTo,scopes:(h=e.options)===null||h===void 0?void 0:h.scopes,queryParams:(g=e.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await xe(this.fetch,"GET",E,{headers:this.headers,jwt:(y=(p=T.session)===null||p===void 0?void 0:p.access_token)!==null&&y!==void 0?y:void 0})});if(r)throw r;return $t()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(ye(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var s,r;const{data:a,error:d}=n;if(d)throw d;return await xe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&r!==void 0?r:void 0})})}catch(n){if(ye(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const s=Date.now();return await pN(async r=>(r>0&&await hN(200*Math.pow(2,r-1)),this._debug(n,"refreshing attempt",r),await xe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:yn})),(r,a)=>{const d=200*Math.pow(2,r);return a&&fc(a)&&Date.now()+d-s<Ss})}catch(s){if(this._debug(n,"error",s),ye(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",s),$t()&&!n.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,n;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const r=await gi(this.storage,this.storageKey);if(r&&this.userStorage){let d=await gi(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!d&&(d={user:r.user},await Cs(this.userStorage,this.storageKey+"-user",d)),r.user=(e=d==null?void 0:d.user)!==null&&e!==void 0?e:hc()}else if(r&&!r.user&&!r.user){const d=await gi(this.storage,this.storageKey+"-user");d&&(d!=null&&d.user)?(r.user=d.user,await Yn(this.storage,this.storageKey+"-user"),await Cs(this.storage,this.storageKey,r)):r.user=hc()}if(this._debug(s,"session from storage",r),!this._isValidSession(r)){this._debug(s,"session is not valid"),r!==null&&await this._removeSession();return}const a=((n=r.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<cc;if(this._debug(s,`session has${a?"":" not"} expired with margin of ${cc}s`),a){if(this.autoRefreshToken&&r.refresh_token){const{error:d}=await this._callRefreshToken(r.refresh_token);d&&(console.error(d),fc(d)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",d),await this._removeSession()))}}else if(r.user&&r.user.__isUserNotAvailableProxy===!0)try{const{data:d,error:h}=await this._getUser(r.access_token);!h&&(d!=null&&d.user)?(r.user=d.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(d){console.error("Error getting user data:",d),this._debug(s,"error getting user data, skipping SIGNED_IN notification",d)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(s,"error",r),console.error(r);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var n,s;if(!e)throw new Kn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new Ol;const{data:a,error:d}=await this._refreshAccessToken(e);if(d)throw d;if(!a.session)throw new Kn;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const h={session:a.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(a){if(this._debug(r,"error",a),ye(a)){const d={session:null,error:a};return fc(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(d),d}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(a),a}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,n,s=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",n,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:n});const a=[],d=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(e,n)}catch(g){a.push(g)}});if(await Promise.all(d),a.length>0){for(let h=0;h<a.length;h+=1)console.error(a[h]);throw a[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),s=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&n.user&&await Cs(this.userStorage,this.storageKey+"-user",{user:n.user});const r=Object.assign({},n);delete r.user;const a=uy(r);await Cs(this.storage,this.storageKey,a)}else{const r=uy(n);await Cs(this.storage,this.storageKey,r)}}async _removeSession(){this._debug("#_removeSession()"),await Yn(this.storage,this.storageKey),await Yn(this.storage,this.storageKey+"-code-verifier"),await Yn(this.storage,this.storageKey+"-user"),this.userStorage&&await Yn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&$t()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ss);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:s}}=n;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((s.expires_at*1e3-e)/Ss);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${Ss}ms, refresh threshold is ${Gc} ticks`),r<=Gc&&await this._callRefreshToken(s.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Ev)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!$t()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,s){const r=[`provider=${encodeURIComponent(n)}`];if(s!=null&&s.redirectTo&&r.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&r.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[a,d]=await ys(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(d)}`});r.push(h.toString())}if(s!=null&&s.queryParams){const a=new URLSearchParams(s.queryParams);r.push(a.toString())}return s!=null&&s.skipBrowserRedirect&&r.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var s;const{data:r,error:a}=n;return a?{data:null,error:a}:await xe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token})})}catch(n){if(ye(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var s,r;const{data:a,error:d}=n;if(d)return{data:null,error:d};const h=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:g,error:p}=await xe(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return p?{data:null,error:p}:(e.factorType==="totp"&&(!((r=g==null?void 0:g.totp)===null||r===void 0)&&r.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),{data:g,error:null})})}catch(n){if(ye(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:r,error:a}=n;if(a)return{data:null,error:a};const{data:d,error:h}=await xe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token});return h?{data:null,error:h}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),{data:d,error:h})})}catch(n){if(ye(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:r,error:a}=n;return a?{data:null,error:a}:await xe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token})})}catch(n){if(ye(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const s=(e==null?void 0:e.factors)||[],r=s.filter(d=>d.factor_type==="totp"&&d.status==="verified"),a=s.filter(d=>d.factor_type==="phone"&&d.status==="verified");return{data:{all:s,totp:r,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,s;const{data:{session:r},error:a}=e;if(a)return{data:null,error:a};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=dc(r.access_token);let h=null;d.aal&&(h=d.aal);let g=h;((s=(n=r.user.factors)===null||n===void 0?void 0:n.filter(T=>T.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(g="aal2");const y=d.amr||[];return{data:{currentLevel:h,nextLevel:g,currentAuthenticationMethods:y},error:null}}))}async fetchJwk(e,n={keys:[]}){let s=n.keys.find(h=>h.kid===e);if(s)return s;const r=Date.now();if(s=this.jwks.keys.find(h=>h.kid===e),s&&this.jwks_cached_at+Wk>r)return s;const{data:a,error:d}=await xe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(d)throw d;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=r,s=a.keys.find(h=>h.kid===e),!s)?null:s}async getClaims(e,n={}){try{let s=e;if(!s){const{data:E,error:w}=await this.getSession();if(w||!E.session)return{data:null,error:w};s=E.session.access_token}const{header:r,payload:a,signature:d,raw:{header:h,payload:g}}=dc(s);n!=null&&n.allowExpired||SN(a.exp);const p=!r.alg||r.alg.startsWith("HS")||!r.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(r.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!p){const{error:E}=await this.getUser(s);if(E)throw E;return{data:{claims:a,header:r,signature:d},error:null}}const y=CN(r.alg),T=await crypto.subtle.importKey("jwk",p,y,!0,["verify"]);if(!await crypto.subtle.verify(y,T,d,lN(`${h}.${g}`)))throw new Fc("Invalid JWT signature");return{data:{claims:a,header:r,signature:d},error:null}}catch(s){if(ye(s))return{data:null,error:s};throw s}}}Qo.nextInstanceID=0;const ON=Qo;class BN extends ON{constructor(e){super(e)}}var VN=function(t,e,n,s){function r(a){return a instanceof n?a:new n(function(d){d(a)})}return new(n||(n=Promise))(function(a,d){function h(y){try{p(s.next(y))}catch(T){d(T)}}function g(y){try{p(s.throw(y))}catch(T){d(T)}}function p(y){y.done?a(y.value):r(y.value).then(h,g)}p((s=s.apply(t,e||[])).next())})};class HN{constructor(e,n,s){var r,a,d;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const h=Fk(e),g=new URL(h);this.realtimeUrl=new URL("realtime/v1",g),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",g),this.storageUrl=new URL("storage/v1",g),this.functionsUrl=new URL("functions/v1",g);const p=`sb-${g.hostname.split(".")[0]}-auth-token`,y={db:qk,realtime:Bk,auth:Object.assign(Object.assign({},Ok),{storageKey:p}),global:Pk},T=Jk(s??{},y);this.storageKey=(r=T.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(a=T.global.headers)!==null&&a!==void 0?a:{},T.accessToken?(this.accessToken=T.accessToken,this.auth=new Proxy({},{get:(_,E)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(E)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((d=T.auth)!==null&&d!==void 0?d:{},this.headers,T.global.fetch),this.fetch=zk(n,this._getAccessToken.bind(this),T.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},T.realtime)),this.rest=new ik(new URL("rest/v1",g).href,{headers:this.headers,schema:T.db.schema,fetch:this.fetch}),this.storage=new Ik(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),T.accessToken||this._listenForAuthEvents()}get functions(){return new FM(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},s={}){return this.rest.rpc(e,n,s)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return VN(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(n=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:s,storage:r,storageKey:a,flowType:d,lock:h,debug:g},p,y){const T={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new BN({url:this.authUrl.href,headers:Object.assign(Object.assign({},T),p),storageKey:a,autoRefreshToken:e,persistSession:n,detectSessionInUrl:s,storage:r,flowType:d,lock:h,debug:g,fetch:y,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new _k(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,s)=>{this._handleTokenChanged(n,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,n,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const GN=(t,e,n)=>new HN(t,e,n);function zN(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}zN()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const $N="https://pxmubamvtgwafzfjpkdx.supabase.co",FN="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InB4bXViYW12dGd3YWZ6Zmpwa2R4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ1MjMxMDQsImV4cCI6MjA3MDA5OTEwNH0.Jmv_IxT2ct0zsu5ohrzh7rvMc3CYnXZs2teOEV2MFxI",je=GN($N,FN);function mc(t){const e=typeof t=="object"&&t!==null?t.message:String(t);return typeof e=="string"&&/Failed to fetch|NetworkError|TypeError: Failed to fetch/i.test(e)}const Ho={theme:"dark",default_ultra_mode:!1},JN=async t=>{const e={user_id:t,theme:Ho.theme},{error:n}=await je.from("user_preferences").upsert(e,{onConflict:"user_id",ignoreDuplicates:!0});if(n){if(mc(n))return{...Ho};console.warn("Error attempting to create default preferences:",n)}let s=je.from("user_preferences").select("theme, default_ultra_mode").eq("user_id",t).single(),{data:r,error:a}=await s;if(a&&a.code==="42703"){const d=await je.from("user_preferences").select("theme").eq("user_id",t).single();return d.error?mc(d.error)?{...Ho}:(console.error("Error fetching preferences:",d.error),{...Ho}):{theme:d.data.theme==="light"?"light":"dark",default_ultra_mode:!1}}return a?(mc(a)||console.error("Error fetching preferences:",a),{...Ho}):{theme:r.theme==="light"?"light":"dark",default_ultra_mode:r.default_ultra_mode??!1}},YN=async(t,e)=>{const n={user_id:t};typeof e.theme<"u"&&(n.theme=e.theme),typeof e.default_ultra_mode<"u"&&(n.default_ultra_mode=e.default_ultra_mode);let{error:s}=await je.from("user_preferences").upsert(n,{onConflict:"user_id"});if(s&&s.code==="42703"&&"default_ultra_mode"in n){const r={user_id:t,...typeof n.theme<"u"?{theme:n.theme}:{}},a=await je.from("user_preferences").upsert(r,{onConflict:"user_id"});if(a.error)throw console.error("Error updating preferences:",a.error),a.error;return}if(s)throw console.error("Error updating preferences:",s),s},KN=async t=>{const{data:e,error:n}=await je.from("sessions").select("*").eq("user_id",t).order("updated_at",{ascending:!1});return n?(console.error("Error fetching sessions:",n),[]):e.map(r=>({...r,messages:r.messages}))},QN=async(t,e)=>{const{data:n,error:s}=await je.from("sessions").insert([{user_id:t,title:e.title,messages:e.messages}]).select().single();if(s)throw console.error("Error creating session:",s),s;return{...n,messages:n.messages}},py=async(t,e)=>{const n={...e,...e.messages&&{messages:e.messages}},{error:s}=await je.from("sessions").update(n).eq("id",t);if(s)throw console.error("Error updating session:",s),s},XN=async t=>{const{data:e,error:n}=await je.from("sessions").delete().eq("id",t).select();if(n)throw console.error("Error deleting session:",n),n;if(!e||e.length===0){const s=new Error("Session not found or permission denied.");throw console.error(s.message,`ID: ${t}`),s}},WN=async t=>{const{error:e}=await je.from("sessions").delete().eq("user_id",t);if(e)throw console.error("Error deleting all user sessions:",e),e},ZN=async(t,e)=>{const s=`${t}/${Date.now()}.jpg`,{error:r}=await je.storage.from("avatars").upload(s,e,{contentType:"image/jpeg",upsert:!0});if(r)throw console.error("Error uploading avatar:",r),r;const{data:a}=je.storage.from("avatars").getPublicUrl(s);return a.publicUrl},Ft=rv((t,e)=>({sessions:[],activeSession:null,activeSessionId:null,isLoading:!0,user:null,setSessions:n=>t({sessions:n}),setActiveSessionId:n=>t({activeSessionId:n}),loadSessions:async n=>{t({isLoading:!0,user:n});try{const s=await KN(n.id);t({sessions:s}),s.length>0?t({activeSessionId:s[0].id}):await e().newSession()}catch(s){console.error("Error loading user sessions:",s),t({sessions:[],activeSessionId:null})}finally{t({isLoading:!1})}},newSession:async()=>{const n=e().user;if(n)try{const s=await QN(n.id,{title:"New Analysis",messages:[]});t(r=>({sessions:[s,...r.sessions],activeSessionId:s.id}))}catch(s){console.error("Error creating new session:",s)}},selectSession:n=>{t({activeSessionId:n})},updateSession:async(n,s)=>{t(r=>({sessions:r.sessions.map(a=>a.id===n?{...a,...s}:a)}));try{await py(n,s)}catch(r){console.error("Error updating session:",r)}},updateSessionTitle:async(n,s)=>{t(r=>({sessions:r.sessions.map(a=>a.id===n?{...a,title:s}:a)}));try{await py(n,{title:s})}catch(r){console.error("Error renaming session:",r)}},deleteSession:async n=>{if(!e().user)return;const r=e().sessions,a=e().activeSessionId;t(d=>{const h=d.sessions.filter(p=>p.id!==n);let g=d.activeSessionId;return d.activeSessionId===n&&(g=h.length>0?h[0].id:null),{sessions:h,activeSessionId:g}});try{await XN(n),e().sessions.length===0&&await e().newSession()}catch(d){console.error("Error deleting session:",d),t({sessions:r,activeSessionId:a})}},clearAllUserSessions:async()=>{const n=e().user;if(n)try{await WN(n.id),t({sessions:[],activeSessionId:null}),await e().newSession()}catch(s){console.error("Error clearing all sessions:",s)}}}));Ft.subscribe(t=>{const e=t.sessions.find(n=>n.id===t.activeSessionId)||null;t.activeSession=e});const jN=({children:t,user:e})=>{const{loadSessions:n,user:s}=Ft();return ie.useEffect(()=>{e&&e.id!==(s==null?void 0:s.id)&&n(e)},[e,s,n]),C.jsx(C.Fragment,{children:t})},e2=["Analyze the trend and key levels for this BTC/USD 4H chart.","Is there a bullish or bearish pattern forming here?","Based on the indicators, what's a potential trade setup?"],t2=({text:t,onClick:e})=>C.jsx("button",{onClick:e,className:"w-full text-left p-3 bg-input-bg rounded-lg hover:bg-border-color transition-colors text-sm text-text-secondary",children:t}),n2=({onExampleClick:t})=>C.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center max-w-lg mx-auto",children:[C.jsx("div",{className:"w-16 h-16 bg-accent-blue rounded-full mb-4 flex items-center justify-center",children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-8 h-8 text-white",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456Z"})})}),C.jsx("h2",{className:"text-2xl font-semibold text-text-primary",children:"Wizz AI Analyzer"}),C.jsx("p",{className:"text-text-secondary mt-2 mb-8",children:"Upload a crypto chart image and ask a question to begin. Or, try one of these examples:"}),C.jsx("div",{className:"w-full space-y-3",children:e2.map(e=>C.jsx(t2,{text:e,onClick:()=>t(e)},e))})]}),wv="wizz_cache_v1";function gc(t){try{const e=`${wv}:${t}`,n=localStorage.getItem(e);return n?JSON.parse(n):null}catch{return null}}function yc(t,e){try{const n=`${wv}:${t}`;localStorage.setItem(n,JSON.stringify(e))}catch{}}function i2(t){if(!t)return null;const n=t.trim().match(/^(\d+(?:\.\d+)?)[\s]*:[\s]*1$/);if(!n)return null;const s=parseFloat(n[1]);return isNaN(s)?null:s}function s2(t){if(!t.trade)return!1;const{entryPrice:e,takeProfit:n,stopLoss:s}=t.trade;if(!e||!n||!s)return!1;const r=parseFloat(String(e).replace(/[^0-9.+-]/g,"")),a=parseFloat(String(n).replace(/[^0-9.+-]/g,"")),d=parseFloat(String(s).replace(/[^0-9.+-]/g,""));return!([r,a,d].some(h=>!isFinite(h))||r===a||r===d||t.signal==="BUY"&&!(a>r&&d<r)||t.signal==="SELL"&&!(a<r&&d>r))}function vc(t,e){const n={...t},s=Number.isFinite(t.overallConfidenceScore)?t.overallConfidenceScore:0,r=s>=75?"HIGH":"LOW";n.confidence!==r&&(n.confidence=r);const a=i2(t.riskRewardRatio),d=s2(t);if(t.isMultiTimeframeAnalysis&&t.multiTimeframeContext){const h=t.multiTimeframeContext.confluenceScore;return e?n.signal==="NEUTRAL"||n.confidence==="LOW"?(n.trade=null,n.riskRewardRatio=null,n):((s<85||!d||a===null||a<2.5||h<80)&&(n.signal="NEUTRAL",n.trade=null,n.riskRewardRatio=null),n):n.signal==="NEUTRAL"||n.confidence==="LOW"?(n.trade=null,n.riskRewardRatio=null,n):((s<75||!d||a===null||a<2||h<70)&&(n.signal="NEUTRAL",n.trade=null,n.riskRewardRatio=null),n)}return e?n.signal==="NEUTRAL"||n.confidence==="LOW"?(n.trade=null,n.riskRewardRatio=null,n):((s<85||!d||a===null||a<2.2)&&(n.signal="NEUTRAL",n.trade=null,n.riskRewardRatio=null),n):n.signal==="NEUTRAL"||n.confidence==="LOW"?(n.trade=null,n.riskRewardRatio=null,n):((s<75||!d||a===null||a<1.8)&&(n.signal="NEUTRAL",n.trade=null,n.riskRewardRatio=null),n)}function Tc(t){const e=(t??"").trim(),n=e.match(/^```(?:json)?\s*([\s\S]*?)```\s*$/i),s=n?n[1].trim():e,r=s.indexOf("{"),a=s.lastIndexOf("}");return r!==-1&&a!==-1&&a>r?s.slice(r,a+1):s}const o2=({defaultUltraMode:t})=>{const{activeSession:e,updateSession:n,updateSessionTitle:s}=Ft(),[r,a]=ie.useState(!1),[d,h]=ie.useState({key:0,text:""}),[g,p]=ie.useState(t),y=ie.useRef(null),T=ie.useRef(null);ie.useEffect(()=>{var q;(q=y.current)==null||q.scrollTo(0,y.current.scrollHeight)},[e==null?void 0:e.messages]);const _=ie.useCallback(()=>{T.current&&(T.current.abort(),T.current=null),a(!1)},[]),E=ie.useCallback(q=>{h({key:Date.now(),text:q})},[]),w=ie.useCallback(async(q,B)=>{var Q,re;if(!e||!q&&(!B||B.length===0))return;const M=(B||[]).map(ee=>ee.hash).filter(Boolean),J="p2",G=g?"gemini-2.5-pro":"gemini-2.5-flash",X=M.length>0?rc({imageHashes:M,promptVersion:J,modelVersion:G,ultra:g}):"";if(M.length>0){const ee=gc(X);if(ee){const V={id:`msg_${Date.now()+1}`,role:"assistant",content:JSON.parse(ee.raw),thinkingText:JSON.parse(ee.raw).thinkingProcess,rawResponse:ee.raw},Y=[...e.messages,{id:`msg_${Date.now()}`,role:"user",content:q,...B&&B.length>0&&{images:B.map(Z=>`data:${Z.mimeType};base64,${Z.data}`)},...M.length>0&&{imageHashes:M}}];n(e.id,{messages:[...Y,V]});return}}T.current=new AbortController,a(!0);const j={id:`msg_${Date.now()}`,role:"user",content:q,...B&&B.length>0&&{images:B.map(ee=>`data:${ee.mimeType};base64,${ee.data}`)},...M.length>0&&{imageHashes:M}},ue=`msg_${Date.now()+1}`,ne={id:ue,role:"assistant",content:""},he=[...e.messages,j];n(e.id,{messages:he});const ae=[...he,ne];n(e.id,{messages:ae});let pe="";try{const ee=Og(e.messages,q,B,T.current.signal,g);for await(const H of ee){if((Q=T.current)!=null&&Q.signal.aborted)break;pe+=H}const N=Ft.getState().sessions.find(H=>H.id===e.id);if(!N)return;const V=N.messages.findIndex(H=>H.id===ue);if(V===-1)return;const Y=[...N.messages];if((re=T.current)!=null&&re.signal.aborted){Y[V].content="Response stopped by user.",n(e.id,{messages:Y});return}let Z,A="";if(B&&B.length>0)try{const H=JSON.parse(Tc(pe));if(H.error)Z=`Error: ${H.error}`;else{const K=vc(H,g);Z=K,A=K.thinkingProcess,M.length>0&&yc(X,{signal:K.signal,confidence:(K.overallConfidenceScore??50)/100,raw:JSON.stringify(K),modelVersion:G,promptVersion:J,imageHashes:M,ultra:g,timestamp:Date.now()})}}catch(H){console.error("Failed to parse JSON response:",H,"Raw response:",pe),Z="Error: The analysis result was not in the correct format. Please try again.",pe&&(Z+=`

Raw output:
${pe}`)}else Z=pe;if(Y[V].content=Z,Y[V].thinkingText=A,Y[V].rawResponse=pe,e.title==="New Analysis"){const H=typeof Z=="object"&&"summary"in Z?Z.summary.substring(0,40)+"...":q.substring(0,40)+"...";s(e.id,H)}n(e.id,{messages:Y})}catch(ee){console.error("Error during analysis stream:",ee);const N=Ft.getState().sessions.find(Y=>Y.id===e.id);if(!N)return;const V=N.messages.findIndex(Y=>Y.id===ue);if(V!==-1){const Y=[...N.messages];Y[V].content="An unexpected error occurred. Please try again.",n(e.id,{messages:Y})}}finally{a(!1),T.current=null}},[e,n,s,g]),k=ie.useCallback(async(q,B)=>{var Q,re,ee;if(!e||!q&&(!B||B.length===0))return;const M=B.map(N=>N.imageData.hash).filter(Boolean),J="mtf_p1",G=g?"gemini-2.5-pro":"gemini-2.5-flash",X=M.length>0?rc({imageHashes:M,promptVersion:J,modelVersion:G,ultra:g}):"";if(M.length>0){const N=gc(X);if(N){const Y={id:`msg_${Date.now()+1}`,role:"assistant",content:JSON.parse(N.raw),thinkingText:JSON.parse(N.raw).thinkingProcess,rawResponse:N.raw},Z=[...e.messages,{id:`msg_${Date.now()}`,role:"user",content:q,timeframeImages:B,imageHashes:M}];n(e.id,{messages:[...Z,Y]});return}}T.current=new AbortController,a(!0);const j={id:`msg_${Date.now()}`,role:"user",content:q,timeframeImages:B,...M.length>0&&{imageHashes:M}},ue=`msg_${Date.now()+1}`,ne={id:ue,role:"assistant",content:""},he=[...e.messages,j];n(e.id,{messages:he});const ae=[...he,ne];n(e.id,{messages:ae});let pe="";try{const N=PM(e.messages,q,B,T.current.signal,g);for await(const K of N){if((Q=T.current)!=null&&Q.signal.aborted)break;pe+=K}const V=Ft.getState().sessions.find(K=>K.id===e.id);if(!V)return;const Y=V.messages.findIndex(K=>K.id===ue);if(Y===-1)return;const Z=[...V.messages];if((re=T.current)!=null&&re.signal.aborted){Z[Y].content="Multi-timeframe analysis stopped by user.",n(e.id,{messages:Z});return}let A,H="";if(B&&B.length>0)try{const K=JSON.parse(Tc(pe));if(K.error)A=`Error: ${K.error}`;else{const W=vc(K,g);A=W,H=W.thinkingProcess,M.length>0&&yc(X,{signal:W.signal,confidence:(W.overallConfidenceScore??50)/100,raw:JSON.stringify(W),modelVersion:G,promptVersion:J,ultra:g})}}catch(K){console.error("Failed to parse multi-timeframe JSON response:",K),A=`Unable to parse the multi-timeframe analysis response. Raw response: ${pe.substring(0,500)}...`}else A=pe;if(Z[Y]={...Z[Y],content:A,...H&&{thinkingText:H},rawResponse:pe},n(e.id,{messages:Z}),V.messages.length===2&&typeof A=="object"&&"summary"in A){const K=((ee=A.summary)==null?void 0:ee.substring(0,50))+(A.summary&&A.summary.length>50?"...":"")||"Multi-Timeframe Analysis";s(e.id,K)}else V.messages.length===2&&s(e.id,"Multi-Timeframe Chat")}catch(N){console.error("Error in multi-timeframe analysis:",N);const V=Ft.getState().sessions.find(Y=>Y.id===e.id);if(V){const Y=V.messages.findIndex(Z=>Z.id===ue);if(Y!==-1){const Z=[...V.messages];Z[Y].content="Sorry, I encountered an error during multi-timeframe analysis. Please try again.",n(e.id,{messages:Z})}}}finally{a(!1),T.current=null}},[e,n,s,g]),U=ie.useCallback(async()=>{var re,ee;if(!e||r)return;const q=e.messages.map(N=>N.role).lastIndexOf("assistant");if(q===-1||q===0)return;const B=e.messages[q-1],M=e.messages[q];if(B.role!=="user")return;const J=e.messages.slice(0,q-1),G=typeof B.content=="string"?B.content:"";let X=[];const j=[];Array.isArray(B.images)&&B.images.length>0?j.push(...B.images):B.image&&j.push(B.image);for(const N of j){const V=N.split(";base64,");if(V.length===2){const Y=V[0].split(":")[1],Z=V[1];X.push({mimeType:Y,data:Z})}}const ue=B.imageHashes,ne="p2",he=g?"gemini-2.5-pro":"gemini-2.5-flash",ae=ue&&ue.length>0?rc({imageHashes:ue,promptVersion:ne,modelVersion:he,ultra:g}):"";if(ae){const N=gc(ae);if(N){const V=Ft.getState().sessions.find(H=>H.id===e.id);if(!V)return;const Y=V.messages.findIndex(H=>H.id===M.id);if(Y===-1)return;const Z=[...V.messages],A=JSON.parse(N.raw);Z[Y].content=A,Z[Y].thinkingText=A.thinkingProcess,Z[Y].rawResponse=N.raw,n(e.id,{messages:Z});return}}T.current=new AbortController,a(!0);const pe=e.messages.map(N=>N.id===M.id?{...N,content:"",thinkingText:"",rawResponse:""}:N);n(e.id,{messages:pe});let Q="";try{const N=Og(J,G,X,T.current.signal,g);for await(const K of N){if((re=T.current)!=null&&re.signal.aborted)break;Q+=K}const V=Ft.getState().sessions.find(K=>K.id===e.id);if(!V)return;const Y=V.messages.findIndex(K=>K.id===M.id);if(Y===-1)return;const Z=[...V.messages];if((ee=T.current)!=null&&ee.signal.aborted){Z[Y].content="Response stopped by user.",n(e.id,{messages:Z});return}let A,H="";if(X&&X.length>0)try{const K=JSON.parse(Tc(Q));if(K.error)A=`Error: ${K.error}`;else{const W=vc(K,g);A=W,H=W.thinkingProcess,ue&&ue.length>0&&yc(ae,{signal:W.signal,confidence:(W.overallConfidenceScore??50)/100,raw:JSON.stringify(W),modelVersion:he,promptVersion:ne,imageHashes:ue,ultra:g,timestamp:Date.now()})}}catch(K){console.error("Failed to parse JSON response:",K,"Raw response:",Q),A="Error: The analysis result was not in the correct format. Please try again.",Q&&(A+=`

Raw output:
${Q}`)}else A=Q;Z[Y].content=A,Z[Y].thinkingText=H,Z[Y].rawResponse=Q,n(e.id,{messages:Z})}catch(N){console.error("Error during analysis stream:",N);const V=Ft.getState().sessions.find(Z=>Z.id===e.id);if(!V)return;const Y=V.messages.findIndex(Z=>Z.id===M.id);if(Y!==-1){const Z=[...V.messages];Z[Y].content="An unexpected error occurred. Please try again.",n(e.id,{messages:Z})}}finally{a(!1),T.current=null}},[e,n,r,g]);return e?C.jsxs("div",{className:"flex flex-1 flex-col bg-chat-bg overflow-hidden",children:[C.jsx("div",{ref:y,className:"flex-1 overflow-y-auto p-6 space-y-6 scroll-smooth",children:e.messages.length===0?C.jsx(n2,{onExampleClick:E}):e.messages.map((q,B)=>C.jsx(TS,{message:q,isLastMessage:B===e.messages.length-1,isLoading:r&&B===e.messages.length-1&&q.role==="assistant",onRegenerate:U},q.id))}),C.jsx("div",{className:"px-6 pb-4 bg-chat-bg",children:C.jsx(N_,{onSendMessage:w,onSendMultiTimeframeMessage:k,isLoading:r,onStopGeneration:_,initialPrompt:d.text,isUltraMode:g,onToggleUltraMode:()=>p(q=>!q)},d.key)})]}):null},r2=t=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})}),l2=t=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),a2=({isOpen:t,onClose:e,onClearAllData:n,user:s,preferences:r,onUpdatePreferences:a,onUpdateProfile:d})=>{var ue,ne,he,ae,pe;const h=ie.useRef(null),[g,p]=ie.useState(((ue=s.user_metadata)==null?void 0:ue.name)||((ne=s.user_metadata)==null?void 0:ne.full_name)||""),[y,T]=ie.useState(((he=s.user_metadata)==null?void 0:he.avatar_url)||""),[_,E]=ie.useState(null),[w,k]=ie.useState(null),[U,q]=ie.useState(!1),[B,M]=ie.useState(null);ie.useEffect(()=>{var re,ee,N;const Q=V=>{V.key==="Escape"&&e()};return t&&(p(((re=s.user_metadata)==null?void 0:re.name)||((ee=s.user_metadata)==null?void 0:ee.full_name)||""),T(((N=s.user_metadata)==null?void 0:N.avatar_url)||""),E(null),k(null),M(null),document.addEventListener("keydown",Q)),()=>document.removeEventListener("keydown",Q)},[t,e,s]);const J=Q=>{var N;const re=(N=Q.target.files)==null?void 0:N[0];if(!re||!re.type.startsWith("image/"))return;E(re);const ee=new FileReader;ee.onloadend=()=>k(ee.result),ee.readAsDataURL(re)},G=(Q,re=256)=>{const ee=document.createElement("canvas");ee.width=re,ee.height=re;const N=ee.getContext("2d"),V=Math.min(Q.naturalWidth,Q.naturalHeight),Y=(Q.naturalWidth-V)/2,Z=(Q.naturalHeight-V)/2;return N.drawImage(Q,Y,Z,V,V,0,0,re,re),ee},X=async Q=>{Q.preventDefault(),q(!0),M(null);try{let re=y;if(_){const ee=new Image,N=await new Promise((Z,A)=>{ee.onload=()=>{const H=G(ee,256);Z(H.toDataURL("image/jpeg",.9))},ee.onerror=A,ee.src=w||""}),V=await(await fetch(N)).blob(),Y=await ZN(s.id,V);re=Y,T(Y)}await d({name:g,avatar_url:re}),M({type:"success",text:"Profile saved successfully!"})}catch{M({type:"error",text:"Failed to save profile. Please try again."})}finally{q(!1),setTimeout(()=>M(null),3e3)}},j=Q=>{a({default_ultra_mode:Q.target.checked})};return t?C.jsx("div",{role:"dialog","aria-modal":"true","aria-labelledby":"settings-title",className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60 transition-opacity",onClick:e,children:C.jsxs("div",{ref:h,className:"bg-sidebar-bg rounded-lg shadow-2xl w-full max-w-md m-4 border border-border-color",onClick:Q=>Q.stopPropagation(),children:[C.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border-color",children:[C.jsx("h2",{id:"settings-title",className:"text-lg font-semibold text-text-primary",children:"Settings"}),C.jsx("button",{onClick:e,className:"p-1 rounded-full hover:bg-input-bg","aria-label":"Close settings",children:C.jsx(l2,{className:"h-6 w-6 text-text-secondary"})})]}),C.jsxs("div",{className:"p-6 space-y-8 max-h-[70vh] overflow-y-auto",children:[C.jsxs("form",{onSubmit:X,children:[C.jsx("h3",{className:"font-medium text-text-primary mb-3",children:"Profile"}),C.jsxs("div",{className:"space-y-4",children:[C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Avatar"}),C.jsxs("div",{className:"flex items-center gap-4",children:[C.jsx("div",{className:"h-16 w-16 rounded-full bg-border-color overflow-hidden flex items-center justify-center",children:w?C.jsx("img",{src:w,alt:"New avatar preview",className:"h-16 w-16 object-cover"}):y?C.jsx("img",{src:y,alt:"Avatar",className:"h-16 w-16 object-cover"}):C.jsx("span",{className:"text-text-primary",children:(pe=(((ae=s.user_metadata)==null?void 0:ae.name)||s.email||"?")[0])==null?void 0:pe.toUpperCase()})}),C.jsxs("div",{children:[C.jsx("input",{type:"file",accept:"image/*",onChange:J}),C.jsx("p",{className:"text-xs text-text-secondary",children:"Upload an image, it will be auto-cropped to a square."})]})]})]}),C.jsxs("div",{children:[C.jsx("label",{htmlFor:"display-name",className:"block text-sm font-medium text-text-secondary mb-1",children:"Display Name"}),C.jsx("input",{id:"display-name",type:"text",value:g,onChange:Q=>p(Q.target.value),className:"w-full px-3 py-2 bg-input-bg border border-border-color rounded-md focus:outline-none focus:ring-2 focus:ring-accent-blue text-sm",placeholder:"Your Name"})]}),C.jsxs("div",{children:[C.jsx("label",{htmlFor:"avatar-url",className:"block text-sm font-medium text-text-secondary mb-1",children:"Avatar URL"}),C.jsx("input",{id:"avatar-url",type:"url",value:y,onChange:Q=>T(Q.target.value),className:"w-full px-3 py-2 bg-input-bg border border-border-color rounded-md focus:outline-none focus:ring-2 focus:ring-accent-blue text-sm",placeholder:"https://example.com/avatar.png"})]}),C.jsxs("div",{className:"flex items-center justify-end gap-3",children:[B&&C.jsx("span",{className:`text-sm ${B.type==="success"?"text-accent-green":"text-accent-red"}`,children:B.text}),C.jsx("button",{type:"submit",disabled:U,className:"px-4 py-2 text-sm font-medium text-white bg-accent-blue hover:bg-blue-700 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-accent-blue focus:ring-offset-sidebar-bg disabled:bg-gray-500",children:U?"Saving...":"Save Profile"})]})]})]}),C.jsx("div",{className:"border-t border-border-color"}),C.jsxs("div",{children:[C.jsx("h3",{className:"font-medium text-text-primary mb-3",children:"Preferences"}),C.jsxs("div",{className:"flex items-center justify-between bg-input-bg-50 p-3 rounded-lg",children:[C.jsxs("div",{children:[C.jsx("label",{htmlFor:"ultra-default",className:"font-medium text-text-primary text-sm",children:"Set Ultra Mode as default"}),C.jsx("p",{className:"text-xs text-text-secondary",children:"Start new analyses with Ultra Mode enabled."})]}),C.jsxs("label",{htmlFor:"ultra-default-toggle",className:"relative inline-flex items-center cursor-pointer",children:[C.jsx("input",{type:"checkbox",id:"ultra-default-toggle",className:"sr-only peer",checked:r.default_ultra_mode,onChange:j}),C.jsx("div",{className:"w-11 h-6 bg-border-color peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-offset-2 peer-focus:ring-accent-blue peer-focus:ring-offset-sidebar-bg rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent-blue"})]})]})]}),C.jsx("div",{className:"border-t border-border-color"}),C.jsxs("div",{children:[C.jsx("h3",{className:"font-medium text-text-primary mb-2",children:"Manage Data"}),C.jsx("p",{className:"text-sm text-text-secondary mb-3",children:"This will permanently delete all your chat sessions from your account across all devices. This action cannot be undone."}),C.jsx("button",{onClick:n,className:"w-full px-4 py-2 text-sm font-medium text-white bg-accent-red hover:bg-red-700 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-accent-red focus:ring-offset-sidebar-bg",children:"Clear All My Chat History"})]})]}),C.jsx("div",{className:"px-4 py-3 bg-chat-bg border-t border-border-color rounded-b-lg text-right",children:C.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-medium text-text-primary bg-input-bg border border-border-color rounded-md hover:bg-border-color transition-colors",children:"Done"})})]})}):null},Ti=rv((t,e)=>({user:null,loading:!0,_setUser:n=>t({user:n}),_setLoading:n=>t({loading:n}),signInWithGoogle:async()=>{const{error:n}=await je.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin}});n&&console.error("Error logging in with Google:",n)},signOut:async()=>{const{error:n}=await je.auth.signOut();n&&console.error("Error logging out:",n)},signInWithEmail:async n=>{const{data:s,error:r}=await je.auth.signInWithPassword({email:n.email,password:n.password});return{error:r}},signUpWithEmail:async n=>{const{data:s,error:r}=await je.auth.signUp({email:n.email,password:n.password,options:{emailRedirectTo:window.location.origin}});return{error:r}},updateUserMetadata:async n=>{const s=Object.fromEntries(Object.entries(n).filter(([d,h])=>h!=null));if(Object.keys(s).length===0)return{error:null};const{data:r,error:a}=await je.auth.updateUser({data:s});return r.user&&t({user:r.user}),{error:a}}}));je.auth.getSession().then(({data:{session:t}})=>{Ti.getState()._setUser((t==null?void 0:t.user)??null),Ti.getState()._setLoading(!1)}),je.auth.onAuthStateChange((t,e)=>{Ti.getState()._setUser((e==null?void 0:e.user)??null)});const u2=t=>C.jsx("svg",{viewBox:"0 0 48 48",...t,children:C.jsxs("g",{children:[C.jsx("path",{fill:"#EA4335",d:"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"}),C.jsx("path",{fill:"#4285F4",d:"M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"}),C.jsx("path",{fill:"#FBBC05",d:"M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"}),C.jsx("path",{fill:"#34A853",d:"M24 48c6.48 0 11.93-2.13 15.89-5.82l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"}),C.jsx("path",{fill:"none",d:"M0 0h48v48H0z"})]})}),c2=({onGoogleLogin:t,onEmailLogin:e,onEmailSignUp:n})=>{const[s,r]=ie.useState("signin"),[a,d]=ie.useState(""),[h,g]=ie.useState(""),[p,y]=ie.useState(!1),[T,_]=ie.useState(null),[E,w]=ie.useState(null),k=async q=>{q.preventDefault(),y(!0),_(null),w(null);const B={email:a,password:h};let M;s==="signin"?M=await e(B):(M=await n(B),M.error||(w("Check your email for the confirmation link!"),g(""))),M.error&&_(M.error.message),y(!1)},U=()=>{r(s==="signin"?"signup":"signin"),_(null),w(null),d(""),g("")};return C.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen w-full bg-brand-bg text-text-primary p-4",children:C.jsxs("div",{className:"max-w-sm w-full text-center bg-sidebar-bg border border-border-color rounded-lg shadow-xl p-6 md:p-8",children:[C.jsx("div",{className:"flex justify-center mb-6",children:C.jsx("div",{className:"w-20 h-20 bg-accent-blue rounded-full flex items-center justify-center",children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-10 h-10 text-white",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456Z"})})})}),C.jsx("h1",{className:"text-3xl font-bold text-text-primary",children:s==="signin"?"Sign In to Wizz":"Create an Account"}),C.jsx("p",{className:"text-md text-text-secondary mt-2",children:"Your AI Crypto Chart Analyzer."}),C.jsxs("form",{onSubmit:k,className:"mt-8 space-y-4 text-left",children:[C.jsx("input",{type:"email",placeholder:"Email address",value:a,onChange:q=>d(q.target.value),required:!0,className:"w-full px-4 py-2 bg-input-bg border border-border-color rounded-md focus:outline-none focus:ring-2 focus:ring-accent-blue","aria-label":"Email address"}),C.jsx("input",{type:"password",placeholder:"Password",value:h,onChange:q=>g(q.target.value),required:!0,minLength:6,className:"w-full px-4 py-2 bg-input-bg border border-border-color rounded-md focus:outline-none focus:ring-2 focus:ring-accent-blue","aria-label":"Password"}),C.jsx("button",{type:"submit",disabled:p,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-accent-blue hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-accent-blue disabled:bg-gray-500 disabled:cursor-not-allowed",children:p?C.jsx("div",{className:"h-5 w-5 border-2 border-t-transparent border-white rounded-full animate-spin"}):s==="signin"?"Sign In":"Sign Up"}),T&&C.jsx("p",{className:"text-sm text-accent-red mt-2 text-center",children:T}),E&&C.jsx("p",{className:"text-sm text-accent-green mt-2 text-center",children:E})]}),C.jsxs("div",{className:"my-6 flex items-center",children:[C.jsx("div",{className:"border-t border-border-color flex-grow"}),C.jsx("span",{className:"mx-4 text-sm text-text-secondary flex-shrink-0",children:"OR"}),C.jsx("div",{className:"border-t border-border-color flex-grow"})]}),C.jsxs("button",{onClick:t,className:"flex items-center justify-center gap-3 w-full px-6 py-2.5 font-semibold text-text-primary bg-input-bg border border-border-color rounded-lg shadow-sm hover:bg-border-color focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-accent-blue focus:ring-offset-brand-bg transition-colors",children:[C.jsx(u2,{className:"h-5 w-5"}),C.jsx("span",{children:"Sign In with Google"})]}),C.jsxs("p",{className:"mt-8 text-sm text-center text-text-secondary",children:[s==="signin"?"Don't have an account?":"Already have an account?",C.jsx("button",{onClick:U,className:"font-medium text-accent-blue hover:underline ml-1 focus:outline-none",children:s==="signin"?"Sign up":"Sign in"})]})]})})},f2=()=>{const{user:t}=Ti(),{activeSession:e,sessions:n,isLoading:s,clearAllUserSessions:r,updateSessionTitle:a,deleteSession:d,selectSession:h,newSession:g}=Ft(),[p,y]=ie.useState(!0),[T,_]=ie.useState(!1),[E,w]=ie.useState({theme:"dark",default_ultra_mode:!1});ie.useEffect(()=>{const M=window.document.documentElement;M.classList.remove("light","dark"),M.classList.add(E.theme)},[E.theme]),ie.useEffect(()=>{t?JN(t.id).then(w):w({theme:"dark",default_ultra_mode:!1})},[t]);const k=ie.useCallback(async M=>{if(!t)return;const J={...E,...M};w(J);try{await YN(t.id,J)}catch(G){console.error("Failed to update preferences:",G),w(E)}},[E,t]),U=ie.useCallback(async M=>{const{updateUserMetadata:J}=Ti.getState(),{error:G}=await J(M);if(G)throw console.error("Failed to update profile",G),G},[]),q=ie.useCallback(async()=>{window.confirm("Are you sure you want to clear all chat history for your account? This action cannot be undone.")&&(await r(),_(!1))},[r]),B=async()=>{if(window.confirm("Are you sure you want to log out?")){const{signOut:M}=Ti.getState();await M()}};return C.jsxs(C.Fragment,{children:[C.jsxs("div",{className:"flex h-screen w-full bg-brand-bg text-text-primary font-sans",children:[C.jsx(__,{isOpen:p,sessions:n,activeSessionId:(e==null?void 0:e.id)??null,onNewSession:g,onSelectSession:h,onDeleteSession:d,onRenameSession:a,onToggle:()=>y(!p),user:t,theme:E.theme,onToggleTheme:()=>k({theme:E.theme==="light"?"dark":"light"}),onOpenSettings:()=>_(!0),onLogout:B}),C.jsxs("main",{className:"flex flex-1 flex-col transition-all duration-300 ease-in-out",children:[C.jsxs("div",{className:"flex items-center p-2 border-b border-border-color bg-sidebar-bg h-14",children:[C.jsx("button",{onClick:()=>y(!p),className:"p-2 rounded-md hover:bg-input-bg focus:outline-none focus:ring-2 focus:ring-accent-blue","aria-label":"Toggle sidebar",children:C.jsx(r2,{className:"h-6 w-6 text-text-secondary"})}),C.jsx("h1",{className:"text-lg font-semibold ml-4",children:(e==null?void 0:e.title)||"Wizz"})]}),e?C.jsx(o2,{defaultUltraMode:E.default_ultra_mode},e.id):C.jsx("div",{className:"flex-1 flex items-center justify-center",children:s?C.jsx("div",{className:"h-6 w-6 border-2 border-t-transparent border-accent-blue rounded-full animate-spin"}):C.jsx("p",{className:"text-text-secondary",children:"Select an analysis or start a new one."})})]})]}),T&&C.jsx(a2,{isOpen:T,onClose:()=>_(!1),onClearAllData:q,user:t,preferences:E,onUpdatePreferences:k,onUpdateProfile:U})]})},d2=()=>{const{user:t,loading:e,signInWithGoogle:n,signOut:s,signInWithEmail:r,signUpWithEmail:a}=Ti();return e?C.jsx("div",{className:"flex items-center justify-center h-screen bg-brand-bg",children:C.jsx("div",{className:"h-8 w-8 border-4 border-t-transparent border-accent-blue rounded-full animate-spin"})}):t?C.jsx(jN,{user:t,children:C.jsx(f2,{})}):C.jsx(c2,{onGoogleLogin:n,onEmailLogin:r,onEmailSignUp:a})},bv=document.getElementById("root");if(!bv)throw new Error("Could not find root element to mount to");const h2=u_.createRoot(bv);h2.render(C.jsx(xs.StrictMode,{children:C.jsx(d2,{})}));
